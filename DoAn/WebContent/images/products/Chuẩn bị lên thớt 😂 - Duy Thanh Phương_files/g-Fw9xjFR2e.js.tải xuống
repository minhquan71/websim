if (self.CavalryLogger) { CavalryLogger.start_js(["7gtqY"]); }

__d("AdsCFExternalCreationConfirmationDialogUIDataProviderPlugin",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({showDialog:!1,isCreating:!1,hasTriedGuidedCreation:!1});b={initialState:a};e.exports=b}),null);
__d("AdsCFExternalCreationConfirmationDialogUIDataProvider",["Laminar","AdsCFExternalCreationConfirmationDialogUIDataProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsCFExternalCreationConfirmationDialogUIDataProviderPlugin"),"AdsCFExternalCreationConfirmationDialogUIDataProviderPlugin")}),null);
__d("AdsCommonTargetingTargetingChangeActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"ADS_COMMON_TARGETING.TARGETING_CHANGE"}}),null);
__d("AdsCommonTargetingTargetingClearAllDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"ADS_COMMON_TARGETING.TARGETING_CLEAR_ALL"}}),null);
__d("AdsCommonTargetingTargetingInitDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"ADS_COMMON_TARGETING.TARGETING_INIT"}}),null);
__d("AdsCommonTargetingTargetingSetFromExternalDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"ADS_COMMON_TARGETING.TARGETING_SET_FROM_EXTERNAL"}}),null);
__d("PageContentTabExternalCreateAdsFromPostsActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"PagesContentTab.CREATE_ADS_FROM_POSTS"}}),null);
__d("AdsPECreationUIProviderPlugin",["PageContentTabExternalCreateAdsFromPostsActionFlux","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={campaignStructurePlannerStarted:!1,creationStartLevel:"campaign",isCreationModeChooserShown:!1,isCreationOpen:!1,isReachFrequencyConfirmDialogOpen:!1,isOneClickDraftCreation:!1,quickCreateSource:null,quickCreateStarted:!1};var g=b("immutable").Record(a);c=function(){return g()};d={initialState:c(),legacyFluxReduce:function(a,c){switch(c.type){case b("PageContentTabExternalCreateAdsFromPostsActionFlux").actionType:return a.merge({creationStartLevel:"campaign",isCreationModeChooserShown:!1,quickCreateSource:null,quickCreateStarted:!0,isOneClickDraftCreation:!1});default:return a}}};e.exports=d}),null);
__d("AdsPECreationUIProvider",["Laminar","AdsPECreationUIProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsPECreationUIProviderPlugin"),"AdsPECreationUIProviderPlugin")}),null);
__d("AdsTargetingClearTargetingSpecStoreDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"CLEAR_TARGETING_SPEC_STORE"}}),null);
__d("AdsTargetingLoadTimeInitTargetingContainerActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"INIT_TARGETING_CONTAINER"}}),null);
__d("AdsTargetingResetMixStateComponentDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"RESET_MIX_STATE_COMPONENT"}}),null);
__d("AdsTargetingSetTargetingApiSpecDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"SET_TARGETING_API_SPEC"}}),null);
__d("AdsTargetingSetTargetingBulkApiSpecDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"SET_TARGETING_BULK_API_SPEC"}}),null);
__d("AdsTargetingUpdateTargetingSpecDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"UPDATE_TARGETING_SPEC"}}),null);
__d("PageContentTabPublishedPagePostSearchDataFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"pageID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"message",type:"String",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"pageID"}],c=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],d={kind:"LinkedField",alias:null,name:"featurable_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:c},e=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"post_content",variableName:"message"}],f={kind:"LinkedField",alias:null,name:"page_info",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end_cursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_next_page",args:null,storageKey:null}]},g={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},h=[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}],i={kind:"LinkedField",alias:null,name:"title",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:h},j={kind:"ScalarField",alias:null,name:"post_id",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"creation_time",args:null,storageKey:null},l=[{kind:"Literal",name:"first",value:1}];c={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:c};var m={kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c]},n={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},o={kind:"LinkedField",alias:null,name:"edit_history",storageKey:null,args:null,concreteType:"EditHistoryConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"EditAction",plural:!0,selections:[g,{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null}]}]};h={kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:h};var p={kind:"LinkedField",alias:null,name:"insights",storageKey:null,args:null,concreteType:"StoryInsights",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"engaged_user_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"total_reach",args:null,storageKey:null}]},q={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};c={kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[q,c,g]};return{kind:"Request",fragment:{kind:"Fragment",name:"PageContentTabPublishedPagePostSearchDataFetcherQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:b,concreteType:"Page",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"profile_photo",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[d]},{kind:"LinkedField",alias:null,name:"page_posts_search",storageKey:null,args:e,concreteType:"PagePostsSearchConnection",plural:!1,selections:[f,{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Story",plural:!0,selections:[g,i,j,k,{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"all_subattachments",storageKey:"all_subattachments(first:1)",args:l,concreteType:"SubattachmentsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[m]}]},m]},{kind:"LinkedField",alias:null,name:"underlying_admin_creator",storageKey:null,args:null,concreteType:null,plural:!1,selections:[n]},o,h,p]}]}]}]},operation:{kind:"Operation",name:"PageContentTabPublishedPagePostSearchDataFetcherQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:b,concreteType:"Page",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"profile_photo",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[d,g]},{kind:"LinkedField",alias:null,name:"page_posts_search",storageKey:null,args:e,concreteType:"PagePostsSearchConnection",plural:!1,selections:[f,{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Story",plural:!0,selections:[g,i,j,k,{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"all_subattachments",storageKey:"all_subattachments(first:1)",args:l,concreteType:"SubattachmentsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[c]}]},c]},{kind:"LinkedField",alias:null,name:"underlying_admin_creator",storageKey:null,args:null,concreteType:null,plural:!1,selections:[q,n,g]},o,h,p]}]},g]}]},params:{operationKind:"query",name:"PageContentTabPublishedPagePostSearchDataFetcherQuery",id:"2830781920269881",text:null,metadata:{}}}}();e.exports=a}),null);
__d("PageContentTabPublishedPostDataFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"pageID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"pageID"}],c={kind:"LinkedField",alias:null,name:"gk_check",storageKey:'gk_check(gk_name:"biz_cm_custom_post_insights_www")',args:[{kind:"Literal",name:"gk_name",value:"biz_cm_custom_post_insights_www"}],concreteType:"EntGKCheck",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"passes_gk",args:null,storageKey:null}]},d=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],e={kind:"LinkedField",alias:null,name:"featurable_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:d},f=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"count"}],g={kind:"LinkedField",alias:null,name:"page_info",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end_cursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_next_page",args:null,storageKey:null}]},h={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},i=[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}],j={kind:"LinkedField",alias:null,name:"title",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:i},k={kind:"ScalarField",alias:null,name:"post_id",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"creation_time",args:null,storageKey:null},m=[{kind:"Literal",name:"first",value:1}];d={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:d};var n={kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d]},o={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},p={kind:"LinkedField",alias:null,name:"edit_history",storageKey:null,args:null,concreteType:"EditHistoryConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"EditAction",plural:!0,selections:[h,{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null}]}]};i={kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:i};var q={kind:"LinkedField",alias:null,name:"insights",storageKey:null,args:null,concreteType:"StoryInsights",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"engaged_user_count",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"total_reach",args:null,storageKey:null}]},r={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};d={kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,d,h]};return{kind:"Request",fragment:{kind:"Fragment",name:"PageContentTabPublishedPostDataFetcherQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:b,concreteType:"Page",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"profile_photo",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[e]},{kind:"LinkedField",alias:null,name:"published_page_posts",storageKey:null,args:f,concreteType:"PagePublishedPostsConnection",plural:!1,selections:[g,{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Story",plural:!0,selections:[h,j,k,l,{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"all_subattachments",storageKey:"all_subattachments(first:1)",args:m,concreteType:"SubattachmentsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[n]}]},n]},{kind:"LinkedField",alias:null,name:"underlying_admin_creator",storageKey:null,args:null,concreteType:null,plural:!1,selections:[o]},p,i,q]}]}]}]},operation:{kind:"Operation",name:"PageContentTabPublishedPostDataFetcherQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:b,concreteType:"Page",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"profile_photo",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[e,h]},{kind:"LinkedField",alias:null,name:"published_page_posts",storageKey:null,args:f,concreteType:"PagePublishedPostsConnection",plural:!1,selections:[g,{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Story",plural:!0,selections:[h,j,k,l,{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"all_subattachments",storageKey:"all_subattachments(first:1)",args:m,concreteType:"SubattachmentsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[d]}]},d]},{kind:"LinkedField",alias:null,name:"underlying_admin_creator",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,o,h]},p,i,q]}]},h]}]},params:{operationKind:"query",name:"PageContentTabPublishedPostDataFetcherQuery",id:"2760859397292679",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AdsCommonTargetingProperties",[],(function(a,b,c,d,e,f){"use strict";a={ageMax:null,ageMin:null,ageMinLimit:null,alternateAutoTargetingOption:null,appInstallState:null,behaviors:null,brandSafetyContentFilterLevels:null,catalogBasedTargeting:null,cities:null,countries:null,connections:null,conjunctiveUserAdclusters:null,contextualTargetingCategories:null,customAudiences:null,prospectingAudience:null,dynamicAudienceIds:null,educationMajors:null,educationSchools:null,educationStatuses:null,ethnicAffinity:null,engagementSpecs:null,excludedBrandSafetyContentTypes:null,excludedConnections:null,excludedCustomAudiences:null,excludedDynamicAudienceIds:null,excludedEngagementSpecs:null,excludedProductAudienceSpecs:null,excludedPublisherCategories:null,excludedPublisherListIDs:null,excludedUserAdclusters:null,excludedUserDevice:null,exclusions:null,familyStatuses:null,fbDealID:null,flexibleSpec:null,friendsOfConnections:null,followProfiles:null,followProfilesNegative:null,gatekeepers:null,genders:null,generation:null,homeOwnership:null,homeType:null,homeValue:null,householdComposition:null,income:null,industries:null,interestedIn:null,interests:null,keywords:null,lifeEvents:null,locTargeting:null,locales:null,maxGradYear:null,minAndroidVersion:null,maxAndroidVersion:null,minGradYear:null,minIosVersion:null,maxIosVersion:null,minWindowsVersion:null,maxWindowsVersion:null,mobileDevices:null,mobileOperatingSystem:null,moms:null,netWorth:null,officeType:null,pageTypes:null,politics:null,productAudienceSpecs:null,radiusIfValid:null,relationshipStatuses:null,regions:null,sex:null,syndicatedCustomAudiencesLibrary:null,targetAllGraduationYears:null,targetingCountry:null,userAdclusters:null,userOs:null,wifiOnly:null,workEmployers:null,workPositions:null,zips:null,geoLocations:null,excludedGeoLocations:null,timezones:null,targetingOptimization:null,placePageSetIDs:null};e.exports=a}),null);
__d("AdsFlexibleTargetingMutationMode",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ADD_EXCLUDED_ENTRIES:null,ADD_EXCLUSION_BOX:null,ADD_INCLUDED_ENTRIES:null,DELETE_EXCLUSION_BOX:null,DELETE_EXCLUDED_ENTRIES:null,DELETE_INCLUSION_BOX:null,DELETE_INCLUDED_ENTRIES:null});e.exports=a}),null);
__d("adsTargetingIsFlexibleSpecDescriptorType",["AdsFlexibleTargetingConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("AdsFlexibleTargetingConstants").ARRAY_TYPE_ENTRIES;function a(a){return!(a in g)}e.exports=a}),null);
__d("TargetingContainerMode",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({BULK:null})}),null);
__d("TargetingConditionalReduceStore",["AdsTargetingLoadTimeInitTargetingContainerActionFlux","FluxReduceStore","abstractMethod"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b)||this;b.$TargetingConditionalReduceStore1=!1;b.$TargetingConditionalReduceStore2=c;return b}var d=c.prototype;d.__getActionTypes=function(){return[b("AdsTargetingLoadTimeInitTargetingContainerActionFlux").actionType]};d.reduce=function(a,c){var d=c.action;switch(d.type){case b("AdsTargetingLoadTimeInitTargetingContainerActionFlux").actionType:this.$TargetingConditionalReduceStore1=this.$TargetingConditionalReduceStore2===d.targetingMode;break;default:break}return this.$TargetingConditionalReduceStore1?this.reduceIfActive(a,c):a};d.isActive=function(){return this.$TargetingConditionalReduceStore1};d.reduceIfActive=function(a,c){return b("abstractMethod")("reduceIfActive","TargetingConditionalReduceStore")};d.getTargetingMode=function(){return this.$TargetingConditionalReduceStore2};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("TargetingViewConfig",["FBLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(!a.targetingSpecFields){b("FBLogger")("ads").mustfix("%s is not a valid component. Please add .targetingSpecFields as a static property on the component.",a.displayName||a.name);return[]}var c=Object.keys(a.targetingSpecFields);(a.displayName==="AdsCommonTargetingConnectionsEditor"||a.displayName==="AdsTargetingConnectionsDeprecationEditorAddNewConnectionWrapper"||a.displayName==="AdsTargetingConnectionsDeprecationEditorDeleteOldConnectionWrapper")&&(c=c.filter(function(a){return a!="customAudiences"&&a!="excludedCustomAudiences"&&a!="geoLocations"}));return c}c={getFieldsForComponent:a};e.exports=c}),null);
__d("targetingBulkSpecGetBulkApiSpecFromState",["AdsAggregateTargetingSpecsSchema","AdsBulkValueUtils","AdsCommonTargetingApiTransformer","AdsMixedValue","AdsUniformValue","mapObject","whitelistObjectKeys"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){__p&&__p();a=a.toJS();var c=Object.values(a).find(function(a){return a instanceof b("AdsMixedValue")});if(!c){var d=b("AdsCommonTargetingApiTransformer").targetingSpecToApi((g||(g=b("mapObject")))(a,function(a){return a.getValue()}));Object.entries(d).forEach(function(a){var c=a[0];a=a[1];d[c]=b("AdsUniformValue").create([a])});return d}c=c;a=b("AdsBulkValueUtils").deaggregateDeep(a,c.getValues().length);a=a.map(b("AdsCommonTargetingApiTransformer").targetingSpecToApi,b("AdsCommonTargetingApiTransformer"));c=new Set(a.reduce(function(a,b){return[].concat(Object.keys(b),a)},[]));return b("AdsBulkValueUtils").aggregateDeep(b("whitelistObjectKeys")(b("AdsAggregateTargetingSpecsSchema"),Array.from(c)),a)}e.exports=a}),null);
__d("targetingBulkSpecGetTargetingSpecFromState",["AdsUniformValue"],(function(a,b,c,d,e,f){"use strict";function a(a){var c={};a.forEach(function(a,d){a instanceof b("AdsUniformValue")&&(c[d]=a.getValue())});return c}e.exports=a}),null);
__d("targetingBulkSpecGetTargetingApiSpecFromState",["AdsCommonTargetingApiTransformer","targetingBulkSpecGetTargetingSpecFromState"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("targetingBulkSpecGetTargetingSpecFromState")(a);return b("AdsCommonTargetingApiTransformer").targetingSpecToApi(a)}e.exports=a}),null);
__d("targetingBulkSpecGetAllSelectedValuesFromBulkSpec",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();if(!a)return[];var c={};a.getValues().filter(Boolean).forEach(function(a){a.forEach(function(a){c[b(a)]=a})});var d=[];Object.keys(c).forEach(function(a){return d.push(c[a])});return d}e.exports=a}),null);
__d("targetingBulkSpecProcessSpecChangedOnTokenizedBulkValue",["AdsBulkValueUtils","AdsEmptyValue","AdsUniformValue","nullthrows","targetingBulkSpecGetAllSelectedValuesFromBulkSpec"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){return!a||a instanceof b("AdsEmptyValue")?new(b("AdsUniformValue"))(c):b("AdsBulkValueUtils").mapBulkValue(a,function(a){return a?[].concat(a,c.filter(function(b){return!a.some(function(a){return d(a)===d(b)})})):[].concat(c)})}function h(a,c,d){return!a||a instanceof b("AdsEmptyValue")?null:b("AdsBulkValueUtils").mapBulkValue(a,function(a){return!a?a:a.filter(function(a){return!c.some(function(b){return d(b)===d(a)})})})}function i(a,c,d){if(!a||a instanceof b("AdsEmptyValue"))return null;a=b("AdsBulkValueUtils").mapBulkValue(a,function(a){return!a?a:a.map(function(a){var b=c(a);b=d.get(b);return b==null?a:b})});return a}function a(a,c,d,e){__p&&__p();var f=a?b("targetingBulkSpecGetAllSelectedValuesFromBulkSpec")(a,d):[];if(e)return i(a,d,e);var j=new Set(f.map(function(a){return d(a)}));if(f.length===c.length)return a;else if(f.length<c.length){var k={};e=b("nullthrows")(c.filter(function(a){if(!j.has(d(a)))return!0;if(k[d(a)])return!0;k[d(a)]=!0;return!1}));return g(a,e,d)}e=b("nullthrows")(f.filter(function(a){return!c.some(function(b){return d(b)===d(a)})}));return h(a,e,d)}e.exports=a}),null);
__d("targetingBulkSpecProcessSpecChangedOnCustomAudienceBulkValue",["targetingBulkSpecProcessSpecChangedOnTokenizedBulkValue"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("targetingBulkSpecProcessSpecChangedOnTokenizedBulkValue")(a,c,function(a){return a.id},d)}e.exports=a}),null);
__d("targetingBulkSpecGetNewSpecOnAddingDetailedTargetingEntries",["invariant","adsTargetingIsFlexibleSpecDescriptorType"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f={};f.type=c;var g=[];a&&a[d]&&a[d].type===f.type&&(g=Object.keys(a[d]).filter(function(a){return a!=="type"}),Object.entries(a[d]).forEach(function(a){var b=a[0];a=a[1];a instanceof Array&&(f[b]=a.slice(0))}));e.forEach(function(c){if(a&&a[d]&&h(c,a[d],g))return;f[c.type]||(f[c.type]=[]);var e=b("adsTargetingIsFlexibleSpecDescriptorType")(c.type)?{id:c.id,name:c.name}:parseInt(c.id,10);f[c.type].push(e)});return f}function h(a,b,c){if(!c.includes(a.type))return!1;c=b[a.type];c&&c instanceof Array||g(0,3664);return c.map(function(a){return a.id}).includes(a.id)||c.includes(parseInt(a.id,10))}e.exports=a}),null);
__d("targetingBulkSpecSerializeFlexibleSpecEntry",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a instanceof Object?a.id:a.toString()}e.exports=a}),null);
__d("targetingBulkSpecProcessSpecChangedOnDetailedTargetingBulkValue",["invariant","AdsBulkValueUtils","AdsEmptyValue","AdsFlexibleTargetingConstants","AdsFlexibleTargetingMutationMode","AdsUniformValue","targetingBulkSpecGetNewSpecOnAddingDetailedTargetingEntries","targetingBulkSpecSerializeFlexibleSpecEntry"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsFlexibleTargetingConstants").ITEM_TYPE;function a(a,c,d,e,f){__p&&__p();if(!a||a instanceof b("AdsEmptyValue")||a instanceof b("AdsUniformValue"))return new(b("AdsUniformValue"))(c);if(!d)return a;switch(d){case b("AdsFlexibleTargetingMutationMode").DELETE_INCLUDED_ENTRIES:case b("AdsFlexibleTargetingMutationMode").DELETE_EXCLUDED_ENTRIES:e!==void 0&&e>=0||g(0,3660);return l(a,e,f,d);case b("AdsFlexibleTargetingMutationMode").DELETE_INCLUSION_BOX:case b("AdsFlexibleTargetingMutationMode").DELETE_EXCLUSION_BOX:e!==void 0&&e>0||g(0,3661);return m(a,e,d);case b("AdsFlexibleTargetingMutationMode").ADD_EXCLUSION_BOX:return n(a);case b("AdsFlexibleTargetingMutationMode").ADD_EXCLUDED_ENTRIES:return i(a,f);case b("AdsFlexibleTargetingMutationMode").ADD_INCLUDED_ENTRIES:e!==void 0&&e>=0||g(0,3662);return j(a,e,f)}return a}function i(a,c){return b("AdsBulkValueUtils").mapBulkValue(a,function(a){var d=a?a.slice(0):[];a=b("targetingBulkSpecGetNewSpecOnAddingDetailedTargetingEntries")(a,h.EXCLUDE_ANY,d.length-1,c);d.length===0||d[d.length-1].type===h.INCLUDE_ANY?d.push(a):d[d.length-1]=a;return d})}function j(a,c,d){return b("AdsBulkValueUtils").mapBulkValue(a,function(a){if(!k(a,c))return a;var e=a?a.slice(0):[];a=b("targetingBulkSpecGetNewSpecOnAddingDetailedTargetingEntries")(a,h.INCLUDE_ANY,c,d);e.length===0||e[c].type===h.EXCLUDE_ANY?(c===0||g(0,3663),e.splice(c,0,a)):e[c]=a;return e})}function k(a,b){return b===0?!0:!!a&&!!a[b]&&a[b].type===h.INCLUDE_ANY}function l(a,c,d,e){__p&&__p();e===b("AdsFlexibleTargetingMutationMode").DELETE_EXCLUDED_ENTRIES||e===b("AdsFlexibleTargetingMutationMode").DELETE_INCLUDED_ENTRIES||g(0,3665);var f=d.map(function(a){return a.type+"."+a.id}),i=e===b("AdsFlexibleTargetingMutationMode").DELETE_EXCLUDED_ENTRIES;return b("AdsBulkValueUtils").mapBulkValue(a,function(a){__p&&__p();var d=i?a.length-1:c;if(!a||i&&a[d].type!==h.EXCLUDE_ANY||!i&&(!a[d]||a[d].type===h.EXCLUDE_ANY))return a;var e={};Object.entries(a[d]).forEach(function(c){var h=c[0];c=c[1];if(c instanceof Array){c=c.filter(function(a){a=b("targetingBulkSpecSerializeFlexibleSpecEntry")(a);return!f.includes(h+"."+a)});c.length!==0&&(e[h]=c)}else h==="type"||g(0,3666),e.type=a[d][h]});var j=a.slice(0);j[d]=e;return j})}function m(a,c,d){__p&&__p();return d===b("AdsFlexibleTargetingMutationMode").DELETE_EXCLUSION_BOX?b("AdsBulkValueUtils").mapBulkValue(a,function(a){if(!a||a[a.length-1].type!==h.EXCLUDE_ANY)return a;a=a.slice(0,a.length-1);return a}):b("AdsBulkValueUtils").mapBulkValue(a,function(a){if(!a||!a[c]||a[c].type===h.EXCLUDE_ANY)return a;a=a.slice(0);a.splice(c,1);return a})}function n(a){return b("AdsBulkValueUtils").mapBulkValue(a,function(a){a=a?a.slice(0):[];a[a.length]={type:h.EXCLUDE_ANY};return a})}e.exports=a}),null);
__d("targetingBulkSpecProcessSpecChangedOnLocaleBulkValue",["targetingBulkSpecProcessSpecChangedOnTokenizedBulkValue"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("targetingBulkSpecProcessSpecChangedOnTokenizedBulkValue")(a,c,function(a){return a.toString()})}e.exports=a}),null);
__d("targetingBulkSpecSeparateBulkValueSpecToFlatAndMixed",["AdsBulkValueUtils","AdsMixedValue","AdsUniformValue"],(function(a,b,c,d,e,f){"use strict";function a(a){var c={},d={};Object.entries(a).forEach(function(a){var e=a[0];a=a[1];b("AdsBulkValueUtils").isBulkValue(a)?a instanceof b("AdsMixedValue")?d[e]=a:a instanceof b("AdsUniformValue")&&(c[e]=a.getValue()):c[e]=a});return{flatSpec:c,mixedValueSpec:d}}e.exports=a}),null);
__d("TargetingSpecStore",["invariant","AdsAPITargetFields","AdsBulkValueUtils","AdsCommonTargetingApiTransformer","AdsCommonTargetingProperties","AdsCommonTargetingTargetingChangeActionFlux","AdsCommonTargetingTargetingClearAllDataActionFlux","AdsCommonTargetingTargetingInitDataActionFlux","AdsCommonTargetingTargetingSetFromExternalDataActionFlux","AdsDataAtom","AdsEmptyValue","AdsMixedValue","AdsTargetingClearTargetingSpecStoreDataActionFlux","AdsTargetingLoadTimeInitTargetingContainerActionFlux","AdsTargetingResetMixStateComponentDataActionFlux","AdsTargetingSetTargetingApiSpecDataActionFlux","AdsTargetingSetTargetingBulkApiSpecDataActionFlux","AdsTargetingUpdateTargetingSpecDataActionFlux","AdsUniformValue","BrandsAppConfigDynamicFields","TargetingConditionalReduceStore","TargetingContainerMode","TargetingViewConfig","immutable","targetingBulkSpecGetBulkApiSpecFromState","targetingBulkSpecGetTargetingApiSpecFromState","targetingBulkSpecGetTargetingSpecFromState","targetingBulkSpecProcessSpecChangedOnCustomAudienceBulkValue","targetingBulkSpecProcessSpecChangedOnDetailedTargetingBulkValue","targetingBulkSpecProcessSpecChangedOnLocaleBulkValue","targetingBulkSpecSeparateBulkValueSpecToFlatAndMixed","trimObject","whitelistObjectKeys"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({})};d.__getActionTypes=function(){return[b("AdsTargetingLoadTimeInitTargetingContainerActionFlux").actionType,b("AdsTargetingClearTargetingSpecStoreDataActionFlux").actionType,b("AdsCommonTargetingTargetingInitDataActionFlux").actionType,b("AdsCommonTargetingTargetingClearAllDataActionFlux").actionType,b("AdsTargetingResetMixStateComponentDataActionFlux").actionType,b("AdsTargetingSetTargetingBulkApiSpecDataActionFlux").actionType,b("AdsTargetingSetTargetingApiSpecDataActionFlux").actionType,b("AdsTargetingUpdateTargetingSpecDataActionFlux").actionType,b("AdsCommonTargetingTargetingSetFromExternalDataActionFlux").actionType,b("AdsCommonTargetingTargetingChangeActionFlux").actionType]};d.getValue=function(a){a=this.getState().get(a);return a instanceof b("AdsUniformValue")?a.getValue():void 0};d.getValues=function(a){var b=this;return a.reduce(function(a,c){a[c]=b.getValue(c);return a},{})};d.getBulkApiSpec=function(){return b("targetingBulkSpecGetBulkApiSpecFromState")(this.getState())};d.getTargetingSpec=function(){return b("targetingBulkSpecGetTargetingSpecFromState")(this.getState())};d.getTargetingApiSpec=function(){return b("targetingBulkSpecGetTargetingApiSpecFromState")(this.getState())};d.getBulkSpec=function(){return this.getState().toObject()};d.reduceIfActive=function(a,c){c=c.action;switch(c.type){case b("AdsTargetingClearTargetingSpecStoreDataActionFlux").actionType:case b("AdsCommonTargetingTargetingInitDataActionFlux").actionType:case b("AdsCommonTargetingTargetingClearAllDataActionFlux").actionType:return this.getInitialState();case b("AdsTargetingResetMixStateComponentDataActionFlux").actionType:return this.$TargetingSpecStore1(a,c.component);case b("AdsTargetingSetTargetingBulkApiSpecDataActionFlux").actionType:return this.$TargetingSpecStore2(c.spec,c.behaviors);case b("AdsTargetingSetTargetingApiSpecDataActionFlux").actionType:return this.$TargetingSpecStore3(c.spec,c.behaviors);case b("AdsTargetingUpdateTargetingSpecDataActionFlux").actionType:return this.$TargetingSpecStore4(a,c.spec);case b("AdsCommonTargetingTargetingSetFromExternalDataActionFlux").actionType:case b("AdsCommonTargetingTargetingChangeActionFlux").actionType:return this.$TargetingSpecStore4(a,c);default:return a}};d.$TargetingSpecStore2=function(a,c){__p&&__p();this.$TargetingSpecStore5(a,b("AdsAPITargetFields").FLEXIBLE_SPEC,b("AdsAPITargetFields").EXCLUSIONS);if(b("BrandsAppConfigDynamicFields").businessCapabilities.can_see_claim_audience_ads_manager){var d;this.$TargetingSpecStore5(a,(d=b("AdsAPITargetFields")).CUSTOM_AUDIENCES,d.DYNAMIC_AUDIENCE_IDS);this.$TargetingSpecStore5(a,d.EXCLUDED_CUSTOM_AUDIENCES,d.EXCLUDED_DYNAMIC_AUDIENCE_IDS)}d=b("targetingBulkSpecSeparateBulkValueSpecToFlatAndMixed")(a);a=d.flatSpec;d=d.mixedValueSpec;var e=b("AdsCommonTargetingApiTransformer").fromApi(a,c);Object.entries(e).forEach(function(a){var c=a[0];a=a[1];e[c]=b("AdsUniformValue").create([a])});a=this.$TargetingSpecStore6(d,c);return!a?this.getInitialState().merge(e):this.getInitialState().merge(e).merge(a)};d.$TargetingSpecStore5=function(a,c,d){var e=a[c],f=a[d];if(e instanceof b("AdsMixedValue")&&f instanceof b("AdsUniformValue")){var g=e.getValues().length;a[d]=b("AdsMixedValue").create(Array(g).fill(f.getValue()))}else if(e instanceof b("AdsUniformValue")&&f instanceof b("AdsMixedValue")){d=f.getValues().length;a[c]=b("AdsMixedValue").create(Array(d).fill(e.getValue()))}};d.$TargetingSpecStore6=function(a,c){__p&&__p();var d={},e=Object.values(a).length;if(e===0)return null;var f=b("AdsBulkValueUtils").deaggregateDeep(a,a[Object.keys(a)[0]].getValues().length);f=f.map(function(a){return b("trimObject")(b("AdsCommonTargetingApiTransformer").fromApi(a,c,!0))});e=f.reduce(function(a,b){return[].concat(Object.keys(b),a)},[]);new Set(e).forEach(function(a){d[a]=b("AdsMixedValue").create(f.map(function(b){return b[a]}))});return d};d.$TargetingSpecStore3=function(a,c){var d=b("AdsCommonTargetingApiTransformer").fromApi(a,c);Object.entries(d).forEach(function(a){var c=a[0];a=a[1];d[c]=b("AdsUniformValue").create([a])});return this.getInitialState().merge(d)};d.$TargetingSpecStore4=function(a,c){var d=b("whitelistObjectKeys")(c,b("AdsCommonTargetingProperties"));Object.entries(d).forEach(function(e){var f=e[0];e=e[1];c.supportBulkEdit?(e instanceof Array||g(0,2578),f==="locales"?d[f]=b("targetingBulkSpecProcessSpecChangedOnLocaleBulkValue")(a.get(f),e):f==="customAudiences"||f==="excludedCustomAudiences"?d[f]=b("targetingBulkSpecProcessSpecChangedOnCustomAudienceBulkValue")(a.get(f),e,c.oldAudiencesToNewAudiencesMap):f==="flexibleSpec"?d[f]=b("targetingBulkSpecProcessSpecChangedOnDetailedTargetingBulkValue")(a.get(f),e,c.mutationType,c.boxPosition,c.changedEntries||[]):g(0,2579,f)):c[f]===null?d[f]=b("AdsEmptyValue").instance():d[f]=b("AdsUniformValue").create([e])});return a.merge(d)};d.$TargetingSpecStore1=function(a,c){c=b("TargetingViewConfig").getFieldsForComponent(c);c=c.reduce(function(a,c){a[c]=b("AdsEmptyValue").instance();return a},{});return a.merge(c)};return c}(b("TargetingConditionalReduceStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"),b("TargetingContainerMode").BULK)}),null);
__d("AdsCFExternalCreationLoadConfirmationDialogReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return babelHelpers["extends"]({},a,{showDialog:!0})}};e.exports=a}),null);
__d("SphericalMediaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setComputationTimeMs=function(a){this.$1.computation_time_ms=a;return this};c.setEndTimestampS=function(a){this.$1.end_timestamp_s=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFallbackDuration=function(a){this.$1.fallback_duration=a;return this};c.setFallbackReason=function(a){this.$1.fallback_reason=a;return this};c.setNormalizedFrameTime=function(a){this.$1.normalized_frame_time=a;return this};c.setNumSpatialAudioStutters=function(a){this.$1.num_spatial_audio_stutters=a;return this};c.setProductName=function(a){this.$1.product_name=a;return this};c.setProjection=function(a){this.$1.projection=a;return this};c.setSpatialReactionsCacheUsed=function(a){this.$1.spatial_reactions_cache_used=a;return this};c.setSpatialReactionsClustersCount=function(a){this.$1.spatial_reactions_clusters_count=a;return this};c.setSpatialReactionsCount=function(a){this.$1.spatial_reactions_count=a;return this};c.setSphericalRendererSetupDuration=function(a){this.$1.spherical_renderer_setup_duration=a;return this};c.setStartTimestampS=function(a){this.$1.start_timestamp_s=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={computation_time_ms:!0,end_timestamp_s:!0,event:!0,fallback_duration:!0,fallback_reason:!0,normalized_frame_time:!0,num_spatial_audio_stutters:!0,product_name:!0,projection:!0,spatial_reactions_cache_used:!0,spatial_reactions_clusters_count:!0,spatial_reactions_count:!0,spherical_renderer_setup_duration:!0,start_timestamp_s:!0,time:!0,video_id:!0,weight:!0};e.exports=a}),null);
__d("VideoAssetWaterfallTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:VideoAssetWaterfallLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoAssetWaterfallLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoAssetWaterfallLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAnnouncementPostID=function(a){this.$1.announcement_post_id=a;return this};c.setComposerDialogVersion=function(a){this.$1.composer_dialog_version=a;return this};c.setCrosspostingPageIds=function(a){this.$1.crossposting_page_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setError=function(a){this.$1.error=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsBulk=function(a){this.$1.is_bulk=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoAssetIDOverride=function(a){this.$1.video_asset_id_override=a;return this};c.setVideoAssetIds=function(a){this.$1.video_asset_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVideoIds=function(a){this.$1.video_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={announcement_post_id:!0,composer_dialog_version:!0,crossposting_page_ids:!0,error:!0,event:!0,is_bulk:!0,page_id:!0,source:!0,time:!0,vc:!0,video_asset_id_override:!0,video_asset_ids:!0,video_id:!0,video_ids:!0,weight:!0};e.exports=a}),null);
__d("PageContentTabPagingStore",["EventEmitter","PageContentTabConstants","PageContentTabDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PageContentTabConstants").ACTION_TYPES;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$PageContentTabPagingStore1=new Map();b("PageContentTabDispatcher").register(c.handleDispatcherPayload.bind(babelHelpers.assertThisInitialized(c)));return c}var d=c.prototype;d.getUIPaging=function(a,b,c){a=this.$PageContentTabPagingStore2(a,b,c);return this.$PageContentTabPagingStore1.get(a)||0};d.handleDispatcherPayload=function(a){a=a.action;if(a.actionType!==g.PAGING_CHANGED)return;var b=this.$PageContentTabPagingStore2(a.pageID,a.tab,a.queryKey);this.$PageContentTabPagingStore1.set(b,a.currentPage);this.emit("changed",a.pageID,a.tab,a.queryKey,a.currentPage)};d.$PageContentTabPagingStore2=function(a,b,c){c=c||"";return a+b+c};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("PageContentTabPublishedPagePostSearchDataFetcher",["PageContentTabConfig","RelayAPIConfig","RelayFBEnvironment","RelayModern","PageContentTabPublishedPagePostSearchDataFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=b("PageContentTabConfig").posts_per_page;function a(a,c,d){b("RelayAPIConfig").setActorID(a);var e=g||(g=function(){return b("PageContentTabPublishedPagePostSearchDataFetcherQuery.graphql")});a={count:i,pageID:a,after:c,message:d};return h(b("RelayFBEnvironment"),e,a)}e.exports=a}),null);
__d("PageContentTabPublishedPostDataFetcher",["PageContentTabConfig","RelayFBEnvironment","RelayModern","PageContentTabPublishedPostDataFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=b("PageContentTabConfig").posts_per_page;function a(a,c){var d=g||(g=function(){return b("PageContentTabPublishedPostDataFetcherQuery.graphql")});a={count:i,pageID:a,after:c};return h(b("RelayFBEnvironment"),d,a)}e.exports=a}),null);
__d("PageContentTabDataLoader",["PageContentTabConfig","PageContentTabConstants","PageContentTabDispatcher","PageContentTabLogger","PageContentTabPagingStore","PageContentTabPublishedPagePostSearchDataFetcher","PageContentTabPublishedPostDataFetcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PageContentTabConfig").posts_per_page,h=2;a=function(){__p&&__p();function a(){var a=this;this.$1=new Map();this.$2=new Map();this.$3=new Map();this.$4=new Map();b("PageContentTabPagingStore").addListener("changed",function(b,c,d,e){a.fetchNextPosts(c,d,b)})}var c=a.prototype;c.fetchPosts=function(a,b,c,d,e){var f=this.$5(d,b,c);this.$1.set(f,0);this.$2.set(f,a);this.$4.set(f,0);return this.$6(b,c,d,0,e)};c.fetchNextPosts=function(a,b,c){var d=this.$5(c,a,b);if(this.$3.get(d)){d=this.$1.get(d);this.$6(a,b,c,d)}};c.convertGraphQlToGraphApiObj=function(a,b){__p&&__p();var c,d;if(a==null||a.page==null)return null;d=((d=a)!=null?(d=d.page)!=null?d.published_page_posts:d:d)||((d=a)!=null?(d=d.page)!=null?d.page_posts_search:d:d);var e=((c=a)!=null?(c=c.page)!=null?(c=c.profile_photo)!=null?(c=c.featurable_image)!=null?c.uri:c:c:c:c)||"";a.page.gk_check.passes_gk;c=d!=null&&d.nodes!==null?d.nodes.map(function(a){var c,d;d=[{name:"post_impressions_unique",values:[{value:((d=a)!=null?(d=d.insights)!=null?d.total_reach:d:d)||0}]},{name:"post_engaged_users",values:[{value:((d=a)!=null?(d=d.insights)!=null?d.engaged_user_count:d:d)||0}]}];return{graphQl_story_id:(c=a)!=null?c.id:c,object_id:(c=a)!=null?c.post_id:c,id:b+"_"+(((c=a)!=null?c.post_id:c)||""),created_time:new Date((((c=a)!=null?c.creation_time:c)||0)*1e3).toISOString(),picture:((c=a)!=null?(c=c.attachments)!=null?(c=c[0])!=null?(c=c.media)!=null?(c=c.image)!=null?c.uri:c:c:c:c:c)||((c=a)!=null?(c=c.attachments)!=null?(c=c[0])!=null?(c=c.all_subattachments)!=null?(c=c.nodes)!=null?(c=c[0])!=null?(c=c.media)!=null?(c=c.image)!=null?c.uri:c:c:c:c:c:c:c:c)||e,insights:{data:d},edit_actions:{data:[{editor:{name:(c=a)!=null?(c=c.underlying_admin_creator)!=null?c.name:c:c},edit_time:new Date((((d=a)!=null?(d=d.edit_history)!=null?(d=d.nodes)!=null?(d=d[0])!=null?d.time:d:d:d:d)||0)*1e3).toISOString()}]},message:((c=a)!=null?(c=c.message)!=null?c.text:c:c)||((d=a)!=null?(d=d.title)!=null?d.text:d:d)}}):[];return c};c.$6=function(a,c,d,e,f){__p&&__p();var g=this,h=this.$5(d,a,c),i=this.$2.get(h);this.$3.set(h,!1);var j=Date.now();return i.then(function(i){__p&&__p();if(e!==g.$1.get(h))return;var k=i.data,l=i.next;if(i.page!=null&&a===b("PageContentTabConstants").TABS.PUBLISHED_POSTS){var m;k=g.convertGraphQlToGraphApiObj(i,d);m=((m=i)!=null?(m=m.page)!=null?(m=m.published_page_posts)!=null?(m=m.page_info)!=null?m.end_cursor:m:m:m:m)||((m=i)!=null?(m=m.page)!=null?(m=m.page_posts_search)!=null?(m=m.page_info)!=null?m.end_cursor:m:m:m:m);!f?l=m?b("PageContentTabPublishedPostDataFetcher")(d,m):null:l=m?b("PageContentTabPublishedPagePostSearchDataFetcher")(d,m,f):null}g.$1.set(h,e+1);m=g.$4.get(h);var n=k?k.length:0;g.$4.set(h,m+n);b("PageContentTabDispatcher").handleInitialization(a,c,{posts:k,total_count:i.summary&&i.summary.total_count,unseen_count:i.summary&&i.summary.unseen_count,finished:!l},d);g.$1.set(h,e+1);l&&(typeof l==="function"?g.$2.set(h,i.next()):g.$2.set(h,l),g.$7(d,a,c)?g.$6(a,c,d,e+1):g.$3.set(h,!0));b("PageContentTabLogger").log("data_loaded",a,{num_posts:n,elapsed_time:Date.now()-j})},function(c){b("PageContentTabDispatcher").handleError(a,c,d);b("PageContentTabLogger").log("api_error",a,{error:JSON.stringify(c)});throw c})};c.$7=function(a,c,d){var e=b("PageContentTabPagingStore").getUIPaging(a,c,d);a=this.$5(a,c,d);c=this.$4.get(a);d=(e+h)*g;return d>c};c.$5=function(a,b,c){c=c||"";return a+b+c};return a}();e.exports=new a()}),null);
__d("PageContentTabURIQueryData",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c,d,e){this.section=a,this.filtering=b&&b.length?b:null,this.sort=c&&c.length?c:null,this.currentPage=d>0?d:null,this.sourceID=e}a.fromURI=function(a){a=a.getQueryData();return new this(a.section,a.filtering,a.sort,a.current_page,a.sourceID)};var b=a.prototype;b.getQueryData=function(){var a={};this.section&&(a.section=this.section);this.filtering&&(a.filtering=this.filtering);this.sort&&(a.sort=this.sort);this.currentPage&&this.currentPage>0&&(a.current_page=this.currentPage);this.sourceID&&(a.sourceID=this.sourceID);return a};b.equalTo=function(a){return a.toString()==this.toString()};b.toString=function(){var a=this.filtering?this.filtering.map(function(a){return[a.field,a.operator,a.value.toString()].join(",")}).join("-"):"";return[this.section,a,(this.sort||[]).toString(),(this.currentPage||0).toString(),this.sourceID].join("|")};return a}();e.exports=a}),null);
__d("PageContentTabQueryStore",["EventEmitter","PageContentTabConstants","PageContentTabDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PageContentTabConstants").ACTION_TYPES;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$PageContentTabQueryStore1=new Map();b("PageContentTabDispatcher").register(c.handleDispatcherPayload.bind(babelHelpers.assertThisInitialized(c)));return c}var d=c.prototype;d.$PageContentTabQueryStore2=function(a,b){a=this.$PageContentTabQueryStore3(a,b);return this.$PageContentTabQueryStore1.get(a)||{queryKey:null,query:null,filter:null,sort:null}};d.getQueryKey=function(a,b){a=this.$PageContentTabQueryStore2(a,b);return a.queryKey};d.getQuery=function(a,b){a=this.$PageContentTabQueryStore2(a,b);return a.query};d.getFilter=function(a,b){a=this.$PageContentTabQueryStore2(a,b);return a.filter};d.getSort=function(a,b){a=this.$PageContentTabQueryStore2(a,b);return a.sort};d.handleDispatcherPayload=function(a){__p&&__p();a=a.action;var b=this.$PageContentTabQueryStore2(a.pageID,a.tab),c=!1;switch(a.actionType){case g.QUERY_KEY_CHANGED:b.queryKey=a.queryKey;c=!0;break;case g.QUERY_CHANGED:b.query=a.query;c=!0;break;case g.FILTER_CHANGED:b.filter=a.filter;c=!0;break;case g.SORT_CHANGED:b.sort=a.sort;c=!0;break}if(!c)return;c=this.$PageContentTabQueryStore3(a.pageID,a.tab);this.$PageContentTabQueryStore1.set(c,b);this.emit("change")};d.$PageContentTabQueryStore3=function(a,b){return a+b};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("PageContentTabPostsStore",["EventEmitter","PageContentTabConstants","PageContentTabDispatcher","PageContentTabQueryStore"],(function(a,b,c,d,e,f){__p&&__p();var g=b("PageContentTabConstants").ACTION_TYPES;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.$PageContentTabPostsStore1=c;e.$PageContentTabPostsStore2=d;e.clear();b("PageContentTabDispatcher").register(e.$PageContentTabPostsStore3.bind(babelHelpers.assertThisInitialized(e)));return e}var d=c.prototype;d.clear=function(){this.$PageContentTabPostsStore4=!1,this.$PageContentTabPostsStore5=!1,this.$PageContentTabPostsStore6=void 0,this.$PageContentTabPostsStore7=[],this.$PageContentTabPostsStore8=void 0,this.$PageContentTabPostsStore9=void 0,this.$PageContentTabPostsStore10=!1,this.$PageContentTabPostsStore11=!1,this.$PageContentTabPostsStore12=new Map(),this.$PageContentTabPostsStore13=new Map(),this.$PageContentTabPostsStore14={},this.$PageContentTabPostsStore15={},this.$PageContentTabPostsStore16={},this.$PageContentTabPostsStore17=void 0};d.initPosts=function(a){if(a.key){var b=this.$PageContentTabPostsStore12.has(a.key)?this.$PageContentTabPostsStore12.get(a.key):[];this.$PageContentTabPostsStore12.set(a.key,b.concat(a.data.posts));this.$PageContentTabPostsStore13.set(a.key,a.data.total_count);this.$PageContentTabPostsStore14[a.key]=!0;this.$PageContentTabPostsStore15[a.key]=a.data.finished}else this.$PageContentTabPostsStore7=this.$PageContentTabPostsStore7.concat(a.data.posts),this.$PageContentTabPostsStore8=a.data.total_count,this.$PageContentTabPostsStore9=a.data.unseen_count,this.$PageContentTabPostsStore10=!0,this.$PageContentTabPostsStore11=a.data.finished;this.$PageContentTabPostsStore18()};d.getPosts=function(a,b,c,d){__p&&__p();var e=d?this.$PageContentTabPostsStore12.get(d):this.$PageContentTabPostsStore7;e=e||[];if(e.length===0){c([]);return}if(e[a]&&e[b-1]){c(e.slice(a,b));return}d=d?this.$PageContentTabPostsStore15[d]:this.$PageContentTabPostsStore11;d&&(b=Math.min(e.length,b),c(e.slice(a,b)))};d.getAllPosts=function(a){a=a?this.$PageContentTabPostsStore12.get(a):this.$PageContentTabPostsStore7;return a.slice(0)};d.getError=function(){return this.$PageContentTabPostsStore6};d.clearError=function(){this.$PageContentTabPostsStore6=void 0};d.shouldShowStaleContentNotice=function(){return this.$PageContentTabPostsStore4};d.setShowStaleContentNotice=function(a){this.$PageContentTabPostsStore4=a};d.setIsFilterApplied=function(a){this.$PageContentTabPostsStore5=a};d.isFilterApplied=function(){return this.$PageContentTabPostsStore5};d.hasNextPage=function(a,b){var c=b?this.$PageContentTabPostsStore12.get(b):this.$PageContentTabPostsStore7;c=c||[];b=b?this.$PageContentTabPostsStore15[b]:this.$PageContentTabPostsStore11;return c.length>a||!b};d.getPost=function(a){var b=this.$PageContentTabPostsStore7.filter(function(b){return b.id===a});return b.length?b[0]:null};d.$PageContentTabPostsStore19=function(){var a=b("PageContentTabQueryStore").getQueryKey(this.$PageContentTabPostsStore2,this.$PageContentTabPostsStore1);if(!a)return;var c=b("PageContentTabQueryStore").getFilter(this.$PageContentTabPostsStore2,this.$PageContentTabPostsStore1),d=b("PageContentTabQueryStore").getSort(this.$PageContentTabPostsStore2,this.$PageContentTabPostsStore1),e=b("PageContentTabQueryStore").getQuery(this.$PageContentTabPostsStore2,this.$PageContentTabPostsStore1);!c&&!d&&!e&&this.$PageContentTabPostsStore12.set(a,this.$PageContentTabPostsStore7)};d.addNewPost=function(a){this.$PageContentTabPostsStore8++,this.$PageContentTabPostsStore7.unshift(a),this.$PageContentTabPostsStore19(),this.$PageContentTabPostsStore18()};d.addNewPosts=function(a){this.$PageContentTabPostsStore8+=a.length,this.$PageContentTabPostsStore7=a.concat(this.$PageContentTabPostsStore7),this.$PageContentTabPostsStore19(),this.$PageContentTabPostsStore18()};d.bringNewPostToTop=function(a){a.id&&this.removePost(a.id),this.addNewPost(a)};d.removePost=function(a){var b=this,c=this.getPost(a)!==null;this.$PageContentTabPostsStore8=c?this.$PageContentTabPostsStore8-1:this.$PageContentTabPostsStore8;this.$PageContentTabPostsStore7=this.$PageContentTabPostsStore7.filter(function(b){return b.id!==a});this.$PageContentTabPostsStore12.forEach(function(c,d,e){var f=c.filter(function(b){return b.id!==a});f.length<c.length&&(e.set(d,f),b.$PageContentTabPostsStore13.set(d,b.$PageContentTabPostsStore13.get(d)-1))});this.$PageContentTabPostsStore18()};d.removePosts=function(a){var b=this;this.$PageContentTabPostsStore7=this.$PageContentTabPostsStore7.filter(function(b){return a.indexOf(b.id)===-1});this.$PageContentTabPostsStore8=this.$PageContentTabPostsStore7.length;this.$PageContentTabPostsStore12.forEach(function(c,d,e){var f=c.filter(function(b){return a.indexOf(b.id)===-1});f.length<c.length&&(e.set(d,f),b.$PageContentTabPostsStore13.set(d,b.$PageContentTabPostsStore13.get(d)-1))});this.$PageContentTabPostsStore18()};d.setCustomTabState=function(a){Object.assign(this.$PageContentTabPostsStore16,a)};d.setOnPostChangeCustomTabStateGetter=function(a){this.$PageContentTabPostsStore17=a};d.getCustomTabState=function(){return babelHelpers["extends"]({},this.$PageContentTabPostsStore16)};d.getUnseenCount=function(){return this.$PageContentTabPostsStore9};d.getTotalCount=function(a){return this.$PageContentTabPostsStore20(a)||0};d.getTotalCountWithoutFilter=function(){return this.$PageContentTabPostsStore7.length};d.isInitialLoadComplete=function(a){return a?!!this.$PageContentTabPostsStore14[a]:this.$PageContentTabPostsStore10};d.$PageContentTabPostsStore18=function(){this.$PageContentTabPostsStore17&&this.setCustomTabState(this.$PageContentTabPostsStore17(this.$PageContentTabPostsStore7))};d.$PageContentTabPostsStore20=function(a){return a?this.$PageContentTabPostsStore13.get(a):this.$PageContentTabPostsStore8};d.$PageContentTabPostsStore21=function(a,b,c,d){var e=this;a.forEach(function(a){var f=b.indexOf(a.id);if(f!==-1){f=c[f];d&&e.$PageContentTabPostsStore9!==void 0&&(e.$PageContentTabPostsStore9+=f.is_viewed?-1:1);Object.assign(a,f)}})};d.changePosts=function(a,b){var c=this,d=a.map(function(a){return a.id});this.$PageContentTabPostsStore12.forEach(function(e){c.$PageContentTabPostsStore21(e,d,a,b)},this);this.$PageContentTabPostsStore21(this.$PageContentTabPostsStore7,d,a,b);this.$PageContentTabPostsStore18();this.emit("postsChanged")};d.forceEmitPostsChangedEvent=function(){this.emit("postsChanged")};d.$PageContentTabPostsStore22=function(a){return a.embeddable!==void 0||a.feed_type!==void 0||a.social_actions!==void 0||a.secret!==void 0||a.no_story!==void 0};d.$PageContentTabPostsStore3=function(a){__p&&__p();var b=this;if(a.action.actionType===g.EDIT_POSTS){if(a.action.tab&&a.action.tab!==this.$PageContentTabPostsStore1||a.action.pageID&&a.action.pageID!==this.$PageContentTabPostsStore2)return;a.action.posts.forEach(function(a){b.$PageContentTabPostsStore22(a)&&b.setShowStaleContentNotice(!0)});this.changePosts(a.action.posts,a.action.isViewedUpdated);return}if(a.action.tab!==this.$PageContentTabPostsStore1||a.action.pageID!==this.$PageContentTabPostsStore2)return;switch(a.action.actionType){case g.ADD_POSTS:this.initPosts(a.action.posts);break;case g.CREATE_POST:this.addNewPost(a.action.post);break;case g.CREATE_POSTS:this.addNewPosts(a.action.posts);break;case g.REMOVE_POST:this.removePost(a.action.postID);break;case g.REMOVE_POSTS:this.removePosts(a.action.postIDs);break;case g.UPDATE_STALE_CONTENT_NOTICE:this.setShowStaleContentNotice(a.action.status);break;case g.UPDATE_FILTER_STATUS:this.setIsFilterApplied(a.action.status);break;case g.ERROR:this.$PageContentTabPostsStore6=a.action.error;break;case g.SET_CUSTOM_TAB_STATE:this.setCustomTabState(a.action.customTabState);break;case g.BRING_POST_TO_TOP:this.bringNewPostToTop(a.action.post);break;default:return}this.emit("postsChanged")};return c}(b("EventEmitter"));e.exports=a}),null);
__d("PageContentTabSortUtils",["invariant","PageContentTabConstants","flipObject"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PageContentTabConstants").COLUMNS;a={columnsToFields:function(){__p&&__p();var a={};a[h.POST]="message";a[h.DATE_CREATED]="creation_time";a[h.DATE_LAST_MODIFIED]="edited_by";a[h.SCHEDULED_PUBLISH_TIME]="scheduled_publish_time";a[h.NAME]="name";a[h.LOCATION]="location";a[h.POSITION]="position";a[h.RECEIVED]="received";a[h.VIDEO_DATE_CREATED]="created_time";a[h.FORM_DATE_CREATED]="created_time";a[h.PUBLISHED_DATE]="published_time";a[h.VIDEO_VIEWS]="view_count";a[h.OVERLAP]="total_match_duration";a[h.EXPIRES_DAYS]="expiration_days";a[h.DISPUTE_EXPIRES_DAYS]="dispute_expiration_days";a[h.STATUS]="expiration_days";a[h.REFERENCE_VIDEO]="reference_asset";a[h.MATCHES]="displayed_matches_count";a[h.DATE_FOUND]="added_to_dashboard_time";a[h.REFERENCE_MATCH_STATE]="match_state";a[h.REFERENCE_CONFLICTS]="total_match_duration";a[h.REFERENCE_CONFLICTS_DEADLINE]="expiration_time";a[h.MESSAGE_SENT_DATE]="message_sent_date";a[h.MESSAGE_SENDS]="message_sends";return a},getFieldFromColumn:function(a){var b=this.columnsToFields();b[a]||g(0,4522);return b[a]},getColumnFromField:function(a){var b=this.fieldsToColumns();b[a]||g(0,4523);return b[a]},fieldsToColumns:function(){return b("flipObject")(this.columnsToFields())},toAPI:function(a,c){if(!a)return[];c=c===b("PageContentTabConstants").SORT_ORDER_ASC?"_ascending":"_descending";a=this.getFieldFromColumn(a);return[a+c]},fromAPI:function(a){a&&a[0]||g(0,4524);var c,d;a[0].indexOf("_ascending")!==-1?(d=b("PageContentTabConstants").SORT_ORDER_ASC,c=a[0].replace("_ascending","")):(d=b("PageContentTabConstants").SORT_ORDER_DESC,c=a[0].replace("_descending",""));a=this.getColumnFromField(c);return{key:a,order:d}}};e.exports=a}),null);
__d("PageContentTabURIUtils",["AdsGenericFilter","AdsGenericFilterSet","PageContentTabSortUtils","PageContentTabURIQueryData","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a={updateURIWithQueryData:function(a,c,d,e,f){d=new(b("PageContentTabURIQueryData"))(d,a,c,e,f);a=(g||(g=b("URI"))).getRequestURI(!1);c=b("PageContentTabURIQueryData").fromURI(a);if(!d.equalTo(c)){e=a.setQueryData(d.getQueryData());window.history.pushState(d.getQueryData(),null,e)}},convertSortingQueryData:function(a){return a&&a.length?b("PageContentTabSortUtils").fromAPI(a):null},convertFilteringQueryData:function(a,c){__p&&__p();var d=this;if(c&&c.length){c=c.map(function(c){var e=d.getFilterFieldFromAPI(a,c.field);if(e&&e.field){var f=c.value;e.fromApiValueConverter&&(f=e.fromApiValueConverter(f));return new(b("AdsGenericFilter"))(e.field,c.operator,f)}return null}).filter(function(a){return!!a});return new(b("AdsGenericFilterSet"))(c)}return null},getSortingFromURI:function(a,c){var d=(g||(g=b("URI"))).getRequestURI(!1);d=d.getQueryData();if(d.section===a)if(c)return this.convertSortingQueryData(d.sort);else return d.sort;return null},getFilteringFromURI:function(a,c,d){var e=(g||(g=b("URI"))).getRequestURI(!1);e=e.getQueryData();if(e.section===a)if(c)return this.convertFilteringQueryData(d,e.filtering);else return e.filtering;return null},getSourceIDFromURI:function(a){var c=(g||(g=b("URI"))).getRequestURI(!1);c=c.getQueryData();return c.section===a?c.sourceID:null},getFilterFieldFromAPI:function(a,b){for(var c in a){var d=a[c].field;if(d.name===b)return a[c]}return{}}};e.exports=a}),null);
__d("PageContentTabStoresConfig",["PageContentTabAccessToken","PageContentTabConstants","PageContentTabDataLoader","PageContentTabPostsStore","PageContentTabSortUtils","PageContentTabURIUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PageContentTabConstants").TABS;a={_stores:new Map(),hasStore:function(a,b){a=a.page_id+b.id;return this._stores.get(a)!=null},hasStoreFromID:function(a,b){a=a+b;return!!this._stores.get(a)},getStoreIfAvailable:function(a,b){a=a+b;return this._stores.get(a)},getStore:function(a,c){var d=a.page_id+c.id;if(!this.hasStore(a,c)){var e=c.id===g.PUBLISHED_POSTS&&a.use_employee_override?b("PageContentTabAccessToken").getUserAccessToken():b("PageContentTabAccessToken").getAccessToken(),f=b("PageContentTabSortUtils").toAPI(c.initialSortColumn,c.initialSortOrder),h=[];a.update_url_query_data&&(f=b("PageContentTabURIUtils").getSortingFromURI(c.id)||f,h=b("PageContentTabURIUtils").getFilteringFromURI(c.id)||h);c.getDataLoadPromise&&b("PageContentTabDataLoader").fetchPosts(c.getDataLoadPromise(e,a,h,f),c.id,null,a.page_id);this._stores.set(d,new(b("PageContentTabPostsStore"))(c.id,a.page_id))}return this._stores.get(d)},setStoreFromTestDO_NOT_USE:function(a,b,c){a=a+b;this._stores.set(a,c)}};e.exports=a}),null);
__d("SphericalVideoComponentDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a({strict:!0})}),null);
__d("SphericalVideoComponentActions",["SphericalVideoComponentDispatcher"],(function(a,b,c,d,e,f){__p&&__p();a={registerVideoPlayerController:function(a){a={type:"SphericalVideoComponent/registerVideoPlayerController",controller:a,id:a.getVideoPlayerID()};b("SphericalVideoComponentDispatcher").dispatch(a)},updateVideoPlayerState:function(a,c){a={type:"SphericalVideoComponent/updateVideoPlayerState",id:a,state:c};b("SphericalVideoComponentDispatcher").dispatch(a)},togglePlay:function(a,c){a={type:"SphericalVideoComponent/togglePlay",id:a,nextIsPlaying:c};b("SphericalVideoComponentDispatcher").dispatch(a)},toggleChannelView:function(a,c){a={type:"SphericalVideoComponent/toggleChannelView",id:a,isInChannelView:c};b("SphericalVideoComponentDispatcher").dispatch(a)},toggleTahoe:function(a,c){a={type:"SphericalVideoComponent/toggleTahoe",id:a,isInTahoe:c};b("SphericalVideoComponentDispatcher").dispatch(a)},setCurrentVideoTime:function(a,c){a={type:"SphericalVideoComponent/setCurrentPlaytime",id:a,time:c};b("SphericalVideoComponentDispatcher").dispatch(a)},setVideoDuration:function(a,c){a={type:"SphericalVideoComponent/setVideoDuration",id:a,durationSeconds:c};b("SphericalVideoComponentDispatcher").dispatch(a)},seekStart:function(a){a={type:"SphericalVideoComponent/seekStart",id:a};b("SphericalVideoComponentDispatcher").dispatch(a)},registerSphericalViewportControl:function(a,c,d){a={type:"SphericalVideoComponent/registerSphericalViewportControl",id:a,sphericalViewportControl:c,viewport:d};b("SphericalVideoComponentDispatcher").dispatch(a)},changeViewport:function(a,c,d,e){a={type:"SphericalVideoComponent/changeViewport",id:a,yaw:c,pitch:d,fieldOfView:e};b("SphericalVideoComponentDispatcher").dispatch(a)},toggleViewportGrabbed:function(a){a={type:"SphericalVideoComponent/toggleViewportGrabbed",id:a};b("SphericalVideoComponentDispatcher").dispatch(a)},updateViewportDimensions:function(a,c,d){a={type:"SphericalVideoComponent/updateViewportDimensions",id:a,width:c,height:d};b("SphericalVideoComponentDispatcher").dispatch(a)},setUserIsInactive:function(a){a={type:"SphericalVideoComponent/setUserIsInactive",id:a};b("SphericalVideoComponentDispatcher").dispatch(a)},setInitialViewport:function(a,c,d){a={type:"SphericalVideoComponent/setInitialViewport",id:a,yaw:c,pitch:d};b("SphericalVideoComponentDispatcher").dispatch(a)}};e.exports=a}),null);
__d("SphericalVideoComponentConstants",[],(function(a,b,c,d,e,f){a={ACTIONS:{REGISTER_VIDEO_PLAYER_CONTROLLER:"SphericalVideoComponent/registerVideoPlayerController",UPDATE_VIDEO_PLAYER_STATE:"SphericalVideoComponent/updateVideoPlayerState",TOGGLE_PLAY:"SphericalVideoComponent/togglePlay",SET_CURRENT_PLAY_TIME:"SphericalVideoComponent/setCurrentPlaytime",SET_VIDEO_DURATION:"SphericalVideoComponent/setVideoDuration",TOGGLE_CHANNEL_VIEW:"SphericalVideoComponent/toggleChannelView",TOGGLE_TAHOE:"SphericalVideoComponent/toggleTahoe",SEEK_START:"SphericalVideoComponent/seekStart",REGISTER_SPHERICAL_VIEWPORT_CONTROL:"SphericalVideoComponent/registerSphericalViewportControl",CHANGE_VIEWPORT:"SphericalVideoComponent/changeViewport",TOGGLE_VIEWPORT_GRABBED:"SphericalVideoComponent/toggleViewportGrabbed",UPDATE_VIEWPORT_DIMENSIONS:"SphericalVideoComponent/updateViewportDimensions",SET_USER_IS_INACTIVE:"SphericalVideoComponent/setUserIsInactive",SET_INITIAL_VIEWPORT:"SphericalVideoComponent/setInitialViewport"}};e.exports=a}),null);
__d("SphericalViewportControlStore",["invariant","FluxMapStore","Rect","SphericalVideoComponentActions","SphericalVideoComponentConstants","SphericalVideoComponentDispatcher","SphericalViewportControl","Vector","clearTimeout","curry","immutable","setTimeout","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={fieldOfView:-1,initialPitch:-1,initialYaw:-1,isInChannelView:!1,isInTahoe:!1,pitch:-1,viewport:null,viewportGrabbed:!1,viewportHeight:0,viewportInactivityTimeout:0,viewportPanStart:!1,viewportWidth:0,yaw:-1};var h=5e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record(a));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({sphericalViewportControls:b("immutable").Map({}),sphericalViewportControlStates:b("immutable").Map({})})};d.reduce=function(a,c){__p&&__p();var d=c.id;switch(c.type){case b("SphericalVideoComponentConstants").ACTIONS.REGISTER_SPHERICAL_VIEWPORT_CONTROL:var e=c.sphericalViewportControl,f=c.viewport;e instanceof b("SphericalViewportControl")||g(0,4470);e={"new":!1,control:e};a=this.$SphericalViewportStore1(a,d,e,f);break;case b("SphericalVideoComponentConstants").ACTIONS.CHANGE_VIEWPORT:e=c.yaw;f=c.pitch;var h=c.fieldOfView;a=this.$SphericalViewportStore2(a,d,e,f,h);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_VIEWPORT_GRABBED:a=this.$SphericalViewportStore3(a,d);break;case b("SphericalVideoComponentConstants").ACTIONS.UPDATE_VIEWPORT_DIMENSIONS:e=c.width;f=c.height;a=this.$SphericalViewportStore4(a,d,e,f);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_CHANNEL_VIEW:h=c.isInChannelView;a=this.$SphericalViewportStore5(a,d,h);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_TAHOE:e=c.isInTahoe;a=this.$SphericalViewportStore6(a,d,e);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_USER_IS_INACTIVE:a=this.$SphericalViewportStore7(a,d);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_INITIAL_VIEWPORT:a=this.$SphericalViewportStore8(a,d,c.yaw,c.pitch);break;default:break}return a};d.getViewportControlWrapper=function(a){var b=this.get("sphericalViewportControls");if(b&&b.has(a))return b.get(a);else throw new Error("Video player controller with id "+a+" is not registered")};d.getOrientation=function(a){a=this.$SphericalViewportStore9(this.getState(),a);var b=a.yaw;a=a.pitch;return{yaw:b,pitch:a}};d.getUserIsActive=function(a){a=this.$SphericalViewportStore9(this.getState(),a);return a.viewportInactivityTimeout!==0};d.getFieldOfView=function(a){return this.$SphericalViewportStore9(this.getState(),a).fieldOfView};d.getViewportGrabbed=function(a){return this.$SphericalViewportStore9(this.getState(),a).viewportGrabbed};d.getInitialYaw=function(a){return this.$SphericalViewportStore9(this.getState(),a).initialYaw};d.getInitialPitch=function(a){return this.$SphericalViewportStore9(this.getState(),a).initialPitch};d.getIsInChannelView=function(a){return this.$SphericalViewportStore9(this.getState(),a).isInChannelView};d.getIsInTahoe=function(a){return this.$SphericalViewportStore9(this.getState(),a).isInTahoe};d.getViewportDimensions=function(a){return{width:this.$SphericalViewportStore9(this.getState(),a).viewportWidth,height:this.$SphericalViewportStore9(this.getState(),a).viewportHeight}};d.getViewportPositionVector=function(a){a=this.$SphericalViewportStore9(this.getState(),a);return new(b("Rect"))(a.viewport).getPositionVector()};d.getViewportCenterVector=function(a){var c=this.getViewportPositionVector(a);a=this.getViewportDimensions(a);var d=a.width;a=a.height;d=new(b("Vector"))(d/2,a/2);return c.add(d)};d.onViewportGrabbed=function(a){b("SphericalVideoComponentActions").toggleViewportGrabbed(a)};d.onViewportPanStart=function(a,b){return};d.onViewportPanEnd=function(a){b("SphericalVideoComponentActions").toggleViewportGrabbed(a)};d.onViewportChange=function(a,c,d,e){b("SphericalVideoComponentActions").changeViewport(a,c,d,e)};d.$SphericalViewportStore1=function(a,c,d,e){__p&&__p();var f=a.get("sphericalViewportControls");if(f.has(c))return a;f=f.set(c,d);a=a.set("sphericalViewportControls",f);f=a.get("sphericalViewportControlStates");var g=d.control;d=new i({yaw:g.getOrientation().x,pitch:g.getOrientation().y,fieldOfView:d["new"]?d.control.getOrientation().vFOV:d.control.getVerticalFieldOfView(),viewport:e});f=f.set(c,d);a=a.set("sphericalViewportControlStates",f);g.addListener("viewportChange",b("throttle")(b("curry")(this.onViewportChange,c),16));g.addListener("updateViewportBegin",b("curry")(this.onViewportGrabbed,c));g.addListener("updateViewportEnd",b("curry")(this.onViewportPanEnd,c));return a};d.$SphericalViewportStore2=function(a,c,d,e,f){__p&&__p();var g=[["yaw",d],["pitch",e],["fieldOfView",f]];for(var h=0;h<g.length;h++){var i=g[h],j=i[0];i=i[1];a=this.$SphericalViewportStore10(a,c,j,i)}j=this.getViewportControlWrapper(c);j["new"]?j.control.setOrientation({x:d,y:e,vFOV:f}):(j.control.setSphericalOrientation(d,e),j.control.setFieldOfView(f));i=this.$SphericalViewportStore9(a,c).get("viewportInactivityTimeout");b("clearTimeout")(i);a=this.$SphericalViewportStore10(a,c,"viewportInactivityTimeout",this.$SphericalViewportStore11(c));return a};d.$SphericalViewportStore11=function(a){return b("setTimeout")(function(){return b("SphericalVideoComponentActions").setUserIsInactive(a)},h)};d.$SphericalViewportStore7=function(a,b){a=this.$SphericalViewportStore10(a,b,"viewportInactivityTimeout",0);return a};d.$SphericalViewportStore8=function(a,b,c,d){a=this.$SphericalViewportStore10(a,b,"initialYaw",c);a=this.$SphericalViewportStore10(a,b,"initialPitch",d);return a};d.$SphericalViewportStore4=function(a,b,c,d){a=this.$SphericalViewportStore10(a,b,"viewportWidth",c);a=this.$SphericalViewportStore10(a,b,"viewportHeight",d);return a};d.$SphericalViewportStore3=function(a,b){var c=this.$SphericalViewportStore9(a,b).viewportGrabbed;return this.$SphericalViewportStore10(a,b,"viewportGrabbed",!c)};d.$SphericalViewportStore5=function(a,b,c){return this.$SphericalViewportStore10(a,b,"isInChannelView",c)};d.$SphericalViewportStore6=function(a,b,c){return this.$SphericalViewportStore10(a,b,"isInTahoe",c)};d.$SphericalViewportStore10=function(a,b,c,d){var e=this.$SphericalViewportStore9(a,b),f=a.get("sphericalViewportControlStates");e=e.set(c,d);f=f.set(b,e);return a.set("sphericalViewportControlStates",f)};d.$SphericalViewportStore9=function(a,b){a=a.get("sphericalViewportControlStates").get(b);a||this.$SphericalViewportStore12(b);return a};d.$SphericalViewportStore12=function(a){throw new Error("Viewport control with id "+a+" does not exist")};return c}(b("FluxMapStore"));c.__moduleID=e.id;e.exports=new c(b("SphericalVideoComponentDispatcher"))}),null);
__d("VideoPlayerControllerStore",["FluxMapStore","SphericalVideoComponentActions","SphericalVideoComponentConstants","SphericalVideoComponentDispatcher","VideoPlayerReasonTransitionHelper","curry","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({currentTime:-1,currentVideoPlayerState:"unknown",durationSeconds:-1,videoId:""}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onVideoPlayerControllerStateChange=function(a){var c=a.getVideoPlayerID(),e=d.$VideoPlayerControllerStore6(d.getState(),c);e=e.videoPlayerState;a=a.getState();e!==a&&b("SphericalVideoComponentActions").updateVideoPlayerState(c,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({videoPlayerControllers:b("immutable").Map({}),videoPlayerControllerStates:b("immutable").Map({})})};d.reduce=function(a,c){__p&&__p();var d=c.id;switch(c.type){case b("SphericalVideoComponentConstants").ACTIONS.REGISTER_VIDEO_PLAYER_CONTROLLER:var e=c.controller;a=this.$VideoPlayerControllerStore1(a,e,d);break;case b("SphericalVideoComponentConstants").ACTIONS.UPDATE_VIDEO_PLAYER_STATE:a=this.$VideoPlayerControllerStore2(a,d,c.state);break;case b("SphericalVideoComponentConstants").ACTIONS.TOGGLE_PLAY:a=this.$VideoPlayerControllerStore3(a,d,c.nextIsPlaying);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_CURRENT_PLAY_TIME:a=this.$VideoPlayerControllerStore4(a,d,c.time);break;case b("SphericalVideoComponentConstants").ACTIONS.SET_VIDEO_DURATION:a=this.$VideoPlayerControllerStore5(a,d,c.durationSeconds);break;default:break}return a};d.getVideoPlayerController=function(a){var b=this.get("videoPlayerControllers");if(b&&b.has(a))return b.get(a);else throw new Error("Video player controller with id "+a+" is not registered")};d.getIsVideoPlayable=function(a){a=this.$VideoPlayerControllerStore6(this.getState(),a).currentVideoPlayerState;return a!=="fallback"&&a!=="destroyed"&&a!=="unknown"};d.getIsPlaying=function(a){var b=this.getVideoPlayerController(a).isBuffering();a=this.$VideoPlayerControllerStore6(this.getState(),a).currentVideoPlayerState;return a==="playing"&&!b};d.getCurrentTime=function(a){return this.$VideoPlayerControllerStore6(this.getState(),a).currentTime};d.getVideoID=function(a){return this.$VideoPlayerControllerStore6(this.getState(),a).videoId};d.$VideoPlayerControllerStore1=function(a,c,d){__p&&__p();var e=a.get("videoPlayerControllers");if(e.has(d))return a;e=e.set(d,c);a=a.set("videoPlayerControllers",e);e=a.get("videoPlayerControllerStates");var f=new g({isPlaying:c.isState("playing"),currentTime:c.getCurrentTimePosition(),videoId:c.getVideoID()});e=e.set(d,f);a=a.set("videoPlayerControllerStates",e);c.addListener("stateChange",b("curry")(this.onVideoPlayerControllerStateChange,c));c.addListener("updateStatus",b("curry")(this.onTimeUpdate,c));c.addListener("updateMetadata",b("curry")(this.onUpdateMetaData,c));c.addListener("VideoChannelController/pendingElementsShown",b("curry")(this.onToggleChannelView,c,!0));c.addListener("VideoChannelController/exitChannel",b("curry")(this.onToggleChannelView,c,!1));c.addListener("seekRequested",b("curry")(this.onSeekStart,c));c.addListener("TahoeController/enterTahoe",b("curry")(this.onToggleTahoe,c,!0));c.addListener("TahoeController/exitTahoe",b("curry")(this.onToggleTahoe,c,!1));return a};d.onTimeUpdate=function(a,c){b("SphericalVideoComponentActions").setCurrentVideoTime(a.getVideoPlayerID(),c.position)};d.onSeekStart=function(a){b("SphericalVideoComponentActions").seekStart(a.getVideoPlayerID())};d.onUpdateMetaData=function(a){b("SphericalVideoComponentActions").setVideoDuration(a.getVideoPlayerID(),a.getPlaybackDuration())};d.onToggleChannelView=function(a,c){b("SphericalVideoComponentActions").toggleChannelView(a.getVideoPlayerID(),c)};d.onToggleTahoe=function(a,c){b("SphericalVideoComponentActions").toggleTahoe(a.getVideoPlayerID(),c)};d.$VideoPlayerControllerStore3=function(a,c,d){var e=this.getVideoPlayerController(c);c=this.$VideoPlayerControllerStore6(this.getState(),c);c=c.currentVideoPlayerState;(c==="playing"&&!d||c==="paused"&&d)&&(d?e.play(new(b("VideoPlayerReasonTransitionHelper"))("user_initiated")):e.pause());return a};d.$VideoPlayerControllerStore4=function(a,b,c){return this.$VideoPlayerControllerStore7(a,b,"currentTime",c)};d.$VideoPlayerControllerStore2=function(a,b,c){return this.$VideoPlayerControllerStore7(a,b,"currentVideoPlayerState",c)};d.$VideoPlayerControllerStore5=function(a,b,c){return this.$VideoPlayerControllerStore7(a,b,"durationSeconds",c)};d.$VideoPlayerControllerStore6=function(a,b){a=a.get("videoPlayerControllerStates").get(b);a||this.$VideoPlayerControllerStore8(b);return a};d.$VideoPlayerControllerStore7=function(a,b,c,d){var e=a.get("videoPlayerControllerStates"),f=this.$VideoPlayerControllerStore6(a,b);f=f.set(c,d);e=e.set(b,f);return a.set("videoPlayerControllerStates",e)};d.$VideoPlayerControllerStore8=function(a){throw new Error("Video player controller with id "+a+" does not exist")};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("SphericalVideoComponentDispatcher"))}),null);
__d("SphericalVideoHalfEquirectConfig",["SphericalMediaConstants"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("SphericalMediaConstants")).HALF_EQUIRECT_PARTIAL_LIMIT,h=a.RB_FRICTION,i=a.RB_MAX_SPRING_DEGREE,j=a.RB_MAX_STRETCH_X_DEGREE,k=a.RB_MAX_STRETCH_Y_DEGREE,l=a.RB_SPRING_FACTOR;c={getHalfEquirectangularPartialLimits:function(){return{partialLeftDegrees:g,partialRightDegrees:g,partialTopDegrees:g,partialBottomDegrees:g}},getHalfEquirectangularControllerConfig:function(){return{enableRubberBanding:!0,springFactor:l,maxSpringDegrees:i,maxStretchXDegrees:j,maxStretchYDegrees:k,rubberBandConstant:h}}};e.exports=c}),null);
__d("SphericalMediaUtils",[],(function(a,b,c,d,e,f){"use strict";a={getDPR:function(){return Math.max(window.devicePixelRatio||1,1)}};e.exports=a}),null);
__d("SphericalMediaHeadingIndicator.react",["cx","EventListener","React","SphericalMediaConstants","SphericalMediaUtils","SphericalPhotoProjectionUtils","SubscriptionsHandler","calculateHFOVFromVFOV","degToRad","easeInOutInterpolate","requestAnimationFrame","uniqueID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a=b("SphericalMediaConstants")).HI_SIZE_NORMAL,i=a.HI_SIZE_FULL,j=a.HI_ALPHA_BG,k=a.HI_ALPHA_ELEMENT,l=a.HI_ALPHA_DURATION,m=a.HI_FADE_OUT_DELAY,n=a.HI_BLINK_ARC_RAD,o=a.HI_BLINK_DURATION,p=b("SphericalMediaUtils").getDPR,q=function(a){return a!==void 0&&a!==null},r=function(a,b,c,d){a.beginPath(),a.arc(b.x,b.y,c*p(),0,2*Math.PI,!1),a.fillStyle=d,a.lineWidth=0,a.fill()},s=function(a,b,c,d,e,f,g){var h=p();a.beginPath();a.arc(b.x,b.y,c*h,d,e,!1);a.lineWidth=f*h;a.strokeStyle=g;a.stroke()};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$13=function(){var a=d.__getDrawData();if(!q(a.poiYaw)){d.$11=!1;d.draw(a);return}var c=(Date.now()-d.__blinkStartTime)%o<o/2;d.$11!==c&&(d.$11=c,d.draw(a));b("requestAnimationFrame")(d.$13)};d.$15=function(){if(d.$6===j.end)return;d.$25(j.start,j.end,k.start,k.end)};d.$16=function(){if(d.$6===j.start)return;d.$25(j.end,j.start,k.end,k.start)};d.$2=b("uniqueID")();d.$5=0;d.$6=j.start;d.$7=k.start;d.$8=null;d.$9=!1;d.$10=!1;d.$11=!1;if(!d.constructor.__subClassMethods)throw new Error('Must implement "static __subClassMethods"');for(var e in d.constructor.__subClassMethods)if(typeof babelHelpers.assertThisInitialized(d)[e]!=="function")throw new Error('Must implement "'+e+'"');b("requestAnimationFrame")(d.$13);return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){var b=a.isActive&&a.isPanning!==this.props.isPanning;b&&this.$14(a.isPanning)};d.shouldComponentUpdate=function(a){a=a.aspectRatio!==this.props.aspectRatio||a.isActive!==this.props.isActive||a.isGuideAuto!==this.props.isGuideAuto||a.useLargeHeadingIndicator!==this.props.useLargeHeadingIndicator;return a};d.$14=function(a,b){var c=this;b===void 0&&(b=!0);this.$5+=a?1:-1;a?(this.$8!==null&&clearTimeout(this.$8),this.$15()):this.$5===0&&(this.$8=setTimeout(function(){c.$8=null,c.$16()},b?m:0))};d.$17=function(){var a=this.$18(),b=p();return{width:a.width*b,height:a.height*b}};d.$18=function(){return this.props.useLargeHeadingIndicator?i:h};d.$19=function(){var a=this.$17();return{x:a.width/2,y:a.height/2}};d.draw=function(a){__p&&__p();if(!this.$1)return;var b=this.$1,c=this.$17();(b.width!==c.width||b.height!==c.height)&&(b.width=c.width,b.height=c.height);b=b.getContext("2d");if(!b)return;b.save();b.clearRect(0,0,c.width,c.height);this.$20(b,a);this.$21(b,a);this.$22(b,a);b.restore()};d.$20=function(a,c){__p&&__p();var d=this.$18(),e=this.$19(),f=c.fov*this.props.aspectRatio;f=b("degToRad")(f)/2;r(a,e,d.background_radius,this.$23());if(this.props.isGuideAuto){var g=d.inner_radius+d.inner_stroke/2-d.center_radius;s(a,e,d.center_radius+g/2,0,2*Math.PI,g,this.$24())}else{r(a,e,d.center_radius,this.$24());g=this.props.partialLimits;if(g&&g.partialLeftDegrees&&g.partialRightDegrees){var h=g.partialLeftDegrees;g=g.partialRightDegrees;s(a,e,d.inner_radius,0,2*Math.PI,d.inner_stroke,this.getPartialPanoElementColor());c=270-c.initialYaw;h=b("degToRad")(h*-1+c+f);g=b("degToRad")(g+c-f);s(a,e,d.inner_radius,h||0,g||0,d.inner_stroke,this.$24())}else s(a,e,d.inner_radius,0,2*Math.PI,d.inner_stroke,this.$24())}};d.$22=function(a,c){__p&&__p();var d=this.$18(),e=this.$19();if(this.props.isGuideAuto&&this.$11){var f=b("degToRad")((c.poiYaw||0)-c.initialYaw)-Math.PI/2;s(a,e,d.rim_radius,f-n/2,f+n/2,d.rim_stroke,this.$24())}f=p();var g=d.triangle[0]*f,h=d.triangle[1]*f;d=d.triangle[2]*f;a.translate(e.x,e.y);if(c.pointerYaw){f=c.pointerYaw-c.initialYaw;a.rotate(b("degToRad")(f||0))}a.beginPath();a.moveTo(0,g-e.y);a.lineTo(-h,d-e.y);a.lineTo(h,d-e.y);a.fillStyle=this.$24();a.fill()};d.$21=function(a,c){__p&&__p();var d=this.$18(),e=this.$19(),f=this.props,g=f.partialLimits,h=f.aspectRatio;f=f.showNewPhotoRenderer;var i=c.yaw-c.initialYaw,j=b("calculateHFOVFromVFOV")(c.fov,this.props.aspectRatio);j=b("degToRad")(j)/2;if(f&&g){f=b("SphericalPhotoProjectionUtils").getRelativeHfov(c.fov,h,g);j=f/2}c=b("degToRad")(i)-Math.PI/2;h=this.props.isGuideAuto;if(h){g=p();a.save();a.beginPath();a.lineWidth=d.arc_stroke*g;a.arc(e.x,e.y,(d.arc_radius+d.arc_stroke/2)*g,c-j,c+j,!1);a.arc(e.x,e.y,(d.arc_radius-d.arc_stroke/2)*g,c+j,c-j,!0);a.clip();f=this.$17();a.clearRect(0,0,f.width,f.height);a.restore()}s(a,e,d.arc_radius,c-j,c+j,d.arc_stroke,h?this.$23():this.$24())};d.getPartialPanoElementColor=function(){return"rgba(255, 255, 255, "+this.$7*.4+")"};d.$24=function(){return"rgba(255, 255, 255, "+this.$7+")"};d.$23=function(){return"rgba(0, 0, 0, "+this.$6+")"};d.$25=function(a,c,d,e){__p&&__p();var f=this;this.$10=this.$9;this.$9=!0;var g=Date.now(),h=function a(d){__p&&__p();var h=Date.now();if(f.$10){f.$10=!1;return}if(h-g>l){f.$9=!1;f.$6=c;f.$7=e;return}b("requestAnimationFrame")(function(){a(d)});h=b("easeInOutInterpolate")((h-g)/l);var i=d.deltaAlphaBG*h+d.startAlphaBG;h=d.deltaAlphaElement*h+d.startAlphaElement;f.$6=i;f.$7=h;f.draw(f.__getDrawData())},i=c-a,j=e-d;b("requestAnimationFrame")(function(){h({startAlphaBG:a,deltaAlphaBG:i,startAlphaElement:d,deltaAlphaElement:j})})};d.componentDidMount=function(){var a=this;this.props.isActive&&this.draw(this.__getDrawData());this.props.useNativeListeners&&(this.$12=new(b("SubscriptionsHandler"))(),this.$12.addSubscriptions(b("EventListener").listen(this.$4,"click",function(b){return a.__onClick(b)}),b("EventListener").listen(this.$4,"mouseover",function(){return a.$14(!0)}),b("EventListener").listen(this.$4,"mouseout",function(){return a.$14(!1,!1)})))};d.componentDidUpdate=function(){this.props.isActive&&this.draw(this.__getDrawData()),b("requestAnimationFrame")(this.$13)};d.componentWillUnmount=function(){this.$1=null,this.props.useNativeListeners&&this.$12.release()};d.render=function(){var a=this,c=this.$18(),d=this.props.isActive,e={};this.props.useNativeListeners||(e.onClick=function(b){return a.__onClick(b)},e.onMouseOver=function(){return a.$14(!0)},e.onMouseOut=function(){return a.$14(!1,!1)});return b("React").jsx("button",babelHelpers["extends"]({},e,{ref:function(b){return a.$4=b},className:"_17az sphericalHeadingIndicator"+(d?"":" hidden_elem"),style:{width:c.width,height:c.height},children:b("React").jsx("div",{className:"_17a-",ref:function(b){return a.$3=b},children:b("React").jsx("canvas",{className:"_5nxw _17ay",ref:function(b){return a.$1=b}})})}))};return c}(b("React").Component);e.exports=c}),null);
__d("SphericalVideoHeadingIndicator.react",["cx","fbt","BasicFBNux","React","SphericalMediaHeadingIndicator.react","SphericalPhotoPartialLimits","SphericalVideoExperiments","SphericalVideoHalfEquirectConfig","SphericalViewportControlStore","SubscriptionsHandler","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("SphericalPhotoPartialLimits").makePartialLimits,j=4320,k=h._("B\u1ea1n ch\u1ec9 \u0111ang xem nh\u1eefng c\u1ea3nh c\u00f3 s\u1ed1 l\u01b0\u1ee3t xem nhi\u1ec1u nh\u1ea5t cho video 360 n\u00e0y. B\u1ea1n c\u00f3 th\u1ec3 vu\u1ed1t ho\u1eb7c k\u00e9o video \u0111\u1ec3 xem th\u1ee7 c\u00f4ng."),l=function(a){return a!==void 0&&a!==null},m=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a){a=b.call(this,a)||this;l(a.__getDrawData().poiYaw)&&(a.__blinkStartTime=Date.now());return a}var c=a.prototype;c.__onClick=function(a){this.props.onClick(a)};c.__getDrawData=function(){return{fov:this.props.fov,initialYaw:this.props.initialYaw,pointerYaw:this.props.pointerYaw,poiYaw:this.props.poiYaw,yaw:this.props.yaw}};c.$SphericalHeadingIndicatorImpl1=function(a){return{fov:a.fov,initialYaw:a.initialYaw,pointerYaw:a.pointerYaw,poiYaw:a.poiYaw,yaw:a.yaw}};c.UNSAFE_componentWillReceiveProps=function(a){b.prototype.UNSAFE_componentWillReceiveProps.call(this,a);!l(this.props.poiYaw)&&l(a.poiYaw)&&(this.__blinkStartTime=Date.now());var c=a.isActive===this.props.isActive&&(a.initialYaw!==this.props.initialYaw||a.aspectRatio!==this.props.aspectRatio||a.fov!==this.props.fov||a.yaw!==this.props.yaw||a.pointerYaw!==this.props.pointerYaw||a.poiYaw!==this.props.poiYaw);c&&this.draw(this.$SphericalHeadingIndicatorImpl1(a))};c.shouldComponentUpdate=function(a){a=b.prototype.shouldComponentUpdate.call(this,a)||a.poiYaw!==this.props.poiYaw;return a};return a}(b("SphericalMediaHeadingIndicator.react"));m.__subClassMethods={__onClick:!0,__getDrawData:!0};a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$6=!1;d.$1=c.controller;d.$5=c.isComposer;d.$5||(d.$3=j,d.$4=k);d.$2=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1.getOption("SphericalVideoPlayer","isReady")?this.$7():this.$2.addSubscriptions(this.$1.once("SphericalVideoPlayer/ready",function(){return a.$7()}))};d.componentWillUnmount=function(){this.$2.release()};d.$7=function(){__p&&__p();var a=this,c,d=this.$1.getVideoPlayerID();this.$2.addSubscriptions(this.$1.addListener("PhotoSnowlift/enterSnowlift",function(){return a.$8(!0)}),this.$1.addListener("PhotoSnowlift/exitSnowlift",function(){return a.$8(!1)}),this.$1.addListener("toggleFullscreen",function(){return a.$9()}),this.$1.addListener("beginPlayback",function(){return a.$10(!0)}),this.$1.addListener("finishPlayback",function(){return a.$10(!1)}),this.$1.addListener("VideoChannelController/enterChannel",function(){return a.$11(!0)}),this.$1.addListener("VideoChannelController/exitChannel",function(){return a.$11(!1)}),this.$1.addListener("TahoeController/enterTahoe",function(){return a.$12(!0)}),this.$1.addListener("TahoeController/exitTahoe",function(){return a.$12(!1)}),(c=b("SphericalViewportControlStore")).addListener(function(){var c=b("SphericalViewportControlStore"),e=c.getOrientation(d),f=e.pitch;e=e.yaw;a.setState({isActive:c.getViewportGrabbed(d),pitch:f,yaw:e,fov:c.getFieldOfView(d)})}),this.$1.addListener("SphericalVideoRecenterControl/animationStart",function(){return a.$13(!0)}),this.$1.addListener("SphericalVideoRecenterControl/animationEnd",function(){return a.$13(!1)}),this.$1.addListener("VideoControls/visibilityUpdate",function(b){b=b.areControlsVisible;return a.$13(b)}),this.$1.addListener("viewportChange",function(b,c){return a.forceUpdate()}),this.$1.addListener("VideoWithSphericalGuide/viewportChange",function(b){return a.setState({pointerYaw:b})}),this.$1.addListener("VideoWithSphericalGuide/intervalUpdate",function(b){return a.$14(b)}),this.$1.addListener("VideoWithSphericalGuide/toggle",function(b){return a.setState({isGuideAuto:b})}),this.$1.addListener("VideoWithSphericalGuide/stateToggle",function(b){b||a.setState({isGuideAuto:!1,poiYaw:void 0,pointerYaw:0})}));this.setState({isVisible:this.$1.isState("playing"),isActive:!1,inChannel:this.$1.getIsInChannel(),inSnowlift:this.$1.getOption("PhotoSnowlift","isInSnowlift"),inTahoe:this.$1.getSource()==="tahoe",inFullscreen:this.$1.isFullscreen(),isGuideAuto:this.$1.getOption("VideoWithSphericalGuide","auto"),showGuideNux:b("SphericalVideoExperiments").showGuideNux,pitch:c.getOrientation(d).pitch,yaw:c.getOrientation(d).yaw,fov:c.getFieldOfView(d)});this.$6=!0};d.$10=function(a){this.setState({isVisible:a})};d.$9=function(){this.setState({inFullscreen:this.$1.isFullscreen()})};d.$11=function(a){this.setState({inChannel:a})};d.$8=function(a){this.setState({inSnowlift:a})};d.$12=function(a){this.setState({inTahoe:a})};d.$13=function(a){this.setState({isActive:a})};d.$15=function(){this.setState({showGuideNux:!1}),b("BasicFBNux").onDismiss(j)};d.$14=function(a){var b=a.deltaPitch===0&&a.deltaYaw===0;a=b?void 0:a.baseYaw+a.deltaYaw;this.setState({poiYaw:a,isActive:!b})};d.render=function(){__p&&__p();var a=this;if(!this.$6)return null;var c=this.$1.getOption("SphericalVideoPlayer","getDimensions"),d=c.width;c=c.height;var e=!this.state.inChannel&&!this.state.inSnowlift&&!this.state.inFullscreen&&!this.state.inTahoe,f=this.$1.getOption("VideoWithSphericalGuide","enabled"),g;this.$5||(g=this.state.showGuideNux&&f);f={};var h=this.$1.getOption("SphericalVideoPlayer","getIsSingleFisheye");if(h){h=this.$1.getOption("SphericalVideoPlayer","getOriginalFOV");h!==null&&h!==0&&(f.partialLimits=i({partialLeftDegrees:h/2,partialRightDegrees:h/2,partialTopDegrees:0,partialBottomDegrees:0}))}h=this.$1.getOption("SphericalVideoPlayer","getIsHalfEquirectangular");h&&(f.partialLimits=i(b("SphericalVideoHalfEquirectConfig").getHalfEquirectangularPartialLimits()));return b("React").jsxs("div",{className:"_3ldo"+(e?" _42a0":"")+(this.state.inTahoe?" _4l1h":"")+(this.state.inFullscreen?" _70uh":""),children:[b("React").jsx(m,babelHelpers["extends"]({ref:"compass",aspectRatio:d/c,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,useLargeHeadingIndicator:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw},f)),b("React").jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.compass},shown:g,position:"left",onCloseButtonClick:function(){return a.$15()},children:this.$4})]})};return c}(b("React").Component);e.exports=a}),null);
__d("SphericalVideoPerformanceTracker",["MovingAverage","SphericalMediaPerformanceTypedLogger","Visibility","performance"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("MovingAverage").MovingAverage;a=60;c=1e3;var i=10*c,j=15,k=c/a;d=function(){"use strict";__p&&__p();function a(){__p&&__p();var c=this;a.$1=!1;this.$10=new h(500,k);this.$11=new(b("SphericalMediaPerformanceTypedLogger"))();this.$12=!1;this.$7=-1;this.$8=-1;this.$5=!1;this.$6=!1;var d=function(){c.$4=!1,c.$16()},e=function(){c.$4=!0};b("Visibility").isHidden()?d():e();b("Visibility").addListener(b("Visibility").HIDDEN,d);b("Visibility").addListener(b("Visibility").VISIBLE,e)}a.get=function(){a.$2||(a.$2=new a());return a.$2};var c=a.prototype;c.addFrameAtTime=function(b){__p&&__p();if(!this.$4)return;if(b!==this.$9){a.$1=!0;this.$9=b;if(!this.$3)this.$3=b;else{var c=b-this.$3;this.$3=b;this.$10.add(c);this.$12||(this.$17(),this.$12=!0)}}};c.setProjection=function(a){this.$15=a;return this};c.trackSpatialAudioMetrics=function(){this.$5=!0,this.$14=0};c.isTrackingSpatialAudioMetrics=function(){return this.$5};c.addAudioStutter=function(){this.isTrackingSpatialAudioMetrics()||this.trackSpatialAudioMetrics(),this.$14++};c.enterSpatialAudioFallback=function(){this.isTrackingSpatialAudioMetrics()||this.trackSpatialAudioMetrics(),this.$7=(g||(g=b("performance"))).now()};c.exitSpatialAudioFallback=function(){this.isTrackingSpatialAudioMetrics()||this.trackSpatialAudioMetrics();if(this.$7>0){var a=Math.trunc((g||(g=b("performance"))).now()-this.$7);this.$7=-1;this.$11.setProductName("spatial_audio").setEvent("audio_fallback").setFallbackDuration(a).setFallbackReason("channel").log();this.$11.clear()}};c.trackSphericalRendererMetrics=function(){this.$6=!0};c.isTrackingSphericalRendererMetrics=function(){return this.$6};c.isOne360VideoActive=function(){return a.$1};c.enterSphericalRendererSetup=function(){this.isTrackingSphericalRendererMetrics()||this.trackSphericalRendererMetrics(),this.$8=(g||(g=b("performance"))).now()};c.exitSphericalRendererSetup=function(){this.isTrackingSphericalRendererMetrics()||this.trackSphericalRendererMetrics();if(this.$8>0){var a=Math.trunc((g||(g=b("performance"))).now()-this.$8);this.$8=-1;this.$11.setProductName("spherical_video").setEvent("spherical_renderer_setup").setProjection(this.$15).setSphericalRendererSetupDuration(a).log();this.$11.clear()}};c.log=function(){__p&&__p();if(!this.isOne360VideoActive())return;else{var a=Math.trunc(this.$18()*Math.pow(10,j));this.$11.setProductName("spherical_video").setEvent("snapshot").setNormalizedFrameTime(a);this.$15&&this.$11.setProjection(this.$15);this.$5&&(this.$11.setProductName("spatial_audio").setNumSpatialAudioStutters(this.$14),this.$14=0);this.$11.log();this.$11.clear()}this.$16()};c.destroy=function(){clearInterval(this.$13),a.$2=null};c.$18=function(){return this.$10.getAvg()/k};c.$16=function(){this.$3=null,a.$1=!1};c.$17=function(){this.$13=setInterval(this.log.bind(this),i)};return a}();e.exports=d}),null);
__d("CDSFallback.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n\n  uniform highp vec2 uOffset;\n  uniform sampler2D uSampler;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  void main()\n  {\n    if (vRecompute > 0.0) {\n      highp vec3 v = normalize( vPos );\n      highp float d = length( v.xz );\n      highp vec2 t = normalize(v.xz / d + uOffset) * d;\n      v = vec3(t.x, v.y, t.y);\n      highp vec2 o;\n      if ( abs(v.y) < 0.707106781 ) {\n        o = EquirectPart( v );\n      } else {\n        o = FacePart( v );\n      }\n      gl_FragColor = texture2D( uSampler, o );\n    } else {\n      gl_FragColor = texture2D( uSampler, vTextureCoord );\n    }\n  }\n"}),null);
__d("CDSFallback.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n\n  // It's actually inverse MV matrix\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform highp vec2 uOffset;\n\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  const float eps = 0.03;\n\n  void main(void) {\n    gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n    vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n    highp vec3 v = normalize( vPos );\n    highp float d = length( v.xz );\n    highp vec2 t = normalize(v.xz / d + uOffset) * d;\n    v = vec3(t.x, v.y, t.y);\n    vRecompute = 0.0;\n    if ( abs(v.y) < 0.707106781 ) {\n      vTextureCoord = EquirectPart( v );\n      vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n          vTextureCoord.x > 0.8 - eps * 0.5 );\n    } else {\n      vTextureCoord = FacePart( v );\n      vRecompute += float( abs(v.y) > 1.0 - eps );\n    }\n    vRecompute += float( abs(v.y) < 0.707106781 + eps &&\n        abs(v.y) > 0.707106781 - eps );\n  }\n"}),null);
__d("CDSRenderer.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n  varying highp vec2 vOffset;\n\n  uniform sampler2D uSampler;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  void main()\n  {\n    if (vRecompute > 0.0) {\n      highp vec3 v = normalize( vPos );\n      highp float d = length( v.xz );\n      highp vec2 t = normalize(v.xz / d + vOffset) * d;\n      v = vec3(t.x, v.y, t.y);\n      highp vec2 o;\n      if ( abs(v.y) < 0.707106781 ) {\n        o = EquirectPart( v );\n      } else {\n        o = FacePart( v );\n      }\n      gl_FragColor = texture2D( uSampler, o );\n    } else {\n      gl_FragColor = texture2D( uSampler, vTextureCoord );\n    }\n  }\n"}),null);
__d("CDSRenderer.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n\n  uniform sampler2D uSampler;\n  // It's actually inverse MV matrix\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n\n  varying highp vec2 vTextureCoord;\n  varying highp vec3 vPos;\n  varying lowp float vRecompute;\n  varying highp vec2 vOffset;\n\n  highp vec2 EquirectPart( highp vec3 p )\n  {\n    highp float xz = sqrt( p.x * p.x + p.z * p.z );\n    highp float lat = -atan( p.y, xz );\n    highp float t = lat / 1.57079633 / 1.01 + 0.5;\n    highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n    highp vec2 st = vec2(s, t);\n    return st;\n  }\n\n  highp vec2 FacePart( highp vec3 p )\n  {\n      highp vec2 t = p.xz / p.y;\n      highp float s = sign(p.y);\n      return vec2(0.9 + t.x * s * 0.099009901,\n          0.5 - s * 0.25 - t.y * 0.247524752);\n  }\n\n  highp vec4 extractFromSample(highp vec4 c)\n  {\n    highp float minC = min(0.5, min(c.r, min(c.g, c.b)));\n    highp float diffC = max(0.5, max(c.r, max(c.g, c.b))) - minC + 0.001;\n    return step(0.5, (c - minC) / diffC);\n  }\n\n  highp vec2 parseOffset()\n  {\n    highp float calculated_offsetX, calculated_offsetZ;\n    highp float offset_v, offset_e, offset_sig; // temp variables\n    highp vec4 texCoordsX[7], texCoordsZ[7]; // constants\n\n    texCoordsX[0] = extractFromSample(texture2D(uSampler, vec2(0.396, 1.0)));\n    texCoordsX[1] = extractFromSample(texture2D(uSampler, vec2(0.404, 1.0)));\n    texCoordsX[2] = extractFromSample(texture2D(uSampler, vec2(0.412, 1.0)));\n    texCoordsX[3] = extractFromSample(texture2D(uSampler, vec2(0.420, 1.0)));\n    texCoordsX[4] = extractFromSample(texture2D(uSampler, vec2(0.428, 1.0)));\n    texCoordsX[5] = extractFromSample(texture2D(uSampler, vec2(0.436, 1.0)));\n    texCoordsX[6] = extractFromSample(texture2D(uSampler, vec2(0.444, 1.0)));\n\n    offset_v = texCoordsX[0].r * 0.0009765625\n      + dot(texCoordsX[1].bgr, vec3(0.001953125, 0.00390625, 0.0078125))\n      + dot(texCoordsX[2].bgr, vec3(0.015625, 0.03125, 0.0625))\n      + dot(texCoordsX[3].bgr, vec3(0.125, 0.25, 0.5))\n      + 1.0;\n\n    offset_e = dot(texCoordsX[4].bgr, vec3(1.0, 2.0, 4.0))\n      + dot(texCoordsX[5].bgr, vec3(8.0, 16.0, 32.0))\n      + dot(texCoordsX[6].bg, vec2(64.0, 128.0))\n      - 127.0;\n\n    offset_sig = -2.0 * texCoordsX[6].r + 1.0;\n    calculated_offsetX = offset_sig * offset_v * pow(2.0, offset_e);\n\n\n    texCoordsZ[0] = extractFromSample(texture2D(uSampler, vec2(0.572, 1.0)));\n    texCoordsZ[1] = extractFromSample(texture2D(uSampler, vec2(0.580, 1.0)));\n    texCoordsZ[2] = extractFromSample(texture2D(uSampler, vec2(0.588, 1.0)));\n    texCoordsZ[3] = extractFromSample(texture2D(uSampler, vec2(0.596, 1.0)));\n    texCoordsZ[4] = extractFromSample(texture2D(uSampler, vec2(0.604, 1.0)));\n    texCoordsZ[5] = extractFromSample(texture2D(uSampler, vec2(0.612, 1.0)));\n    texCoordsZ[6] = extractFromSample(texture2D(uSampler, vec2(0.620, 1.0)));\n\n    offset_v = dot(texCoordsZ[0].bgr, vec3(0.0009765625, 0.001953125, 0.00390625))\n      + dot(texCoordsZ[1].bgr, vec3(0.0078125, 0.015625, 0.03125))\n      + dot(texCoordsZ[2].bgr, vec3(0.0625, 0.125, 0.25))\n      + texCoordsZ[3].b * 0.5\n      + 1.0;\n\n    offset_e = dot(texCoordsZ[3].gr, vec2(1.0, 2.0))\n      + dot(texCoordsZ[4].bgr, vec3(4.0, 8.0, 16.0))\n      + dot(texCoordsZ[5].bgr, vec3(32.0, 64.0, 128.0))\n      - 127.0;\n\n    offset_sig = 2.0 * texCoordsZ[6].b - 1.0;\n    calculated_offsetZ = offset_sig * offset_v * pow(2.0, offset_e);\n\n    return vec2(calculated_offsetX, calculated_offsetZ);\n  }\n\n  const float eps = 0.03;\n\n  void main(void) {\n    gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n    vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n    highp vec3 v = normalize( vPos );\n    vOffset = parseOffset();\n    highp float d = length( v.xz );\n    highp vec2 t = normalize(v.xz / d + vOffset) * d;\n    v.xz = t.xy;\n    vRecompute = 0.0;\n    highp float abs_vy = abs(v.y);\n    if ( abs_vy < 0.707106781 ) {\n      vTextureCoord = EquirectPart( v );\n      vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n          vTextureCoord.x > 0.8 - eps * 0.5 );\n    } else {\n      vTextureCoord = FacePart( v );\n      vRecompute += float( abs_vy > 1.0 - eps );\n    }\n    vRecompute += float( abs_vy < 0.707106781 + eps &&\n        abs_vy > 0.707106781 - eps );\n  }\n"}),null);
__d("DefaultRenderer.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec2 vTextureCoord;\n\n  uniform sampler2D uSampler;\n\n  void main(void) {\n    gl_FragColor = texture2D(\n      uSampler,\n      vec2(vTextureCoord.s, vTextureCoord.t)\n    );\n  }\n"}),null);
__d("DefaultRenderer.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n\n  varying highp vec2 vTextureCoord;\n\n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n  }\n"}),null);
__d("HalfEquirect.fs",[],(function(a,b,c,d,e,f){e.exports="\n  // If changed, copy this constant to the vertex shader\n  #define FEATHER_RATIO 0.0278  // 10 / 360 degrees\n\n  uniform highp mat4 uSTMatrix;\n  uniform mediump vec2 uBoundaries;\n  uniform sampler2D uSampler;\n\n  varying highp vec2 vTextureCoord;\n  varying mediump vec4 vLeftBoundaryColor;\n  varying mediump vec4 vRightBoundaryColor;\n\n  mediump float leftBoundary;\n  mediump float rightBoundary;\n  mediump float processedX;\n\n  mediump vec4 getTextureColor() {\n    return texture2D(uSampler, (uSTMatrix * vec4(vTextureCoord, 0, 1)).xy);\n  }\n\n  mediump float getWrappedValue(mediump float value) {\n    return value + (value < leftBoundary ? 1.0 : 0.0);\n  }\n\n  mediump vec4 interpolate() {\n    mediump float interp = (processedX - rightBoundary) / (1.0 + leftBoundary - rightBoundary);\n    return mix(vRightBoundaryColor, vLeftBoundaryColor, interp);\n  }\n\n  mediump vec4 getFeatheredPixel() {\n    bool useLeftBoundary = processedX <= leftBoundary + FEATHER_RATIO;\n    mediump vec4 currColor = getTextureColor();\n    mediump vec4 boundaryColor = useLeftBoundary ? vLeftBoundaryColor : vRightBoundaryColor;\n    mediump float interp =\n      (useLeftBoundary ? (processedX - leftBoundary) : (rightBoundary - processedX))\n      / FEATHER_RATIO;\n    return mix(boundaryColor, currColor, interp);\n  }\n\n  void main(void) {\n    leftBoundary = uBoundaries.x;\n    rightBoundary = getWrappedValue(uBoundaries.y);\n\n    processedX = getWrappedValue(vTextureCoord.x);\n    bool mainImageBetweenFeatheredBounds =\n      (processedX > leftBoundary + FEATHER_RATIO)\n      && (processedX < rightBoundary - FEATHER_RATIO);\n\n    if (mainImageBetweenFeatheredBounds) {\n      gl_FragColor = getTextureColor();\n    } else if (processedX < leftBoundary || processedX > rightBoundary) {\n      gl_FragColor = interpolate();\n    } else {\n      gl_FragColor = getFeatheredPixel();\n    }\n  }\n"}),null);
__d("HalfEquirect.vs",[],(function(a,b,c,d,e,f){e.exports="\n  #define HALF_WINDOW_SIZE 20\n  #define WINDOW_SIZE 2*HALF_WINDOW_SIZE\n  #define TRIANGLE_WIDTH 0.04  // 1 / 30 triangles\n  #define INV_HEIGHT 0.005\n  #define BLUR_LENGTH float(HALF_WINDOW_SIZE)*INV_HEIGHT\n\n  // If changed, copy this definition to the fragment shader\n  #define FEATHER_RATIO 0.0278  // 10 / 360 degrees\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform mat4 uSTMatrix;\n  uniform mediump vec2 uBoundaries;\n  uniform sampler2D uSampler;\n\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n\n  varying highp vec2 vTextureCoord;\n  varying mediump vec4 vLeftBoundaryColor;\n  varying mediump vec4 vRightBoundaryColor;\n\n  mediump float leftBoundary;\n  mediump float rightBoundary;\n\n  mediump float getUnWrappedValue(mediump float value) {\n    return value - (value > 1.0 ? 1.0 : 0.0);\n  }\n\n  mediump vec4 getVerticalBlurredBoundaryPixel(mediump float y, bool isLeft) {\n    mediump vec4 result = vec4(0.0);\n    mediump float boundaryFactor = FEATHER_RATIO * 0.5;\n    mediump float coordJEnd = clamp(y + BLUR_LENGTH, 0.0, 1.0);\n    mediump float coordJ = clamp(y - BLUR_LENGTH, 0.0, 1.0);\n    int numSamples = 0;\n\n    for (int j = 0; j <= WINDOW_SIZE; j++) {\n      if (coordJ > coordJEnd) {\n        break;\n      }\n      mediump float coordI = isLeft ? leftBoundary : rightBoundary;\n\n      // get boundary pixel color\n      result += texture2D(uSampler, (uSTMatrix * vec4(getUnWrappedValue(coordI), coordJ, 0, 1)).xy);\n\n      // get one more horizontal sample to average out any noise\n      coordI += boundaryFactor * (isLeft ? 1.0 : -1.0);\n      result += texture2D(uSampler, (uSTMatrix * vec4(getUnWrappedValue(coordI), coordJ, 0, 1)).xy);\n\n      numSamples += 2;\n      coordJ += INV_HEIGHT;\n    }\n\n    result.rgb /= float(numSamples);\n    result.a = 1.0;\n    return result;\n  }\n\n  mediump float getWrappedValue(mediump float value) {\n    return value + (value < leftBoundary ? 1.0 : 0.0);\n  }\n\n  void maybeSetBoundaryColors() {\n    mediump float processedX = getWrappedValue(vTextureCoord.x);\n    bool mainImageBetweenFeatheredBounds =\n      processedX > (leftBoundary + FEATHER_RATIO + TRIANGLE_WIDTH)\n      && processedX < (rightBoundary - FEATHER_RATIO - TRIANGLE_WIDTH);\n    if (mainImageBetweenFeatheredBounds) {\n      return;\n    }\n    vLeftBoundaryColor = getVerticalBlurredBoundaryPixel(vTextureCoord.y, true);\n    vRightBoundaryColor = getVerticalBlurredBoundaryPixel(vTextureCoord.y, false);\n  }\n\n  void main(void) {\n    leftBoundary = uBoundaries.x;\n    rightBoundary = getWrappedValue(uBoundaries.y);\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    maybeSetBoundaryColors();\n  }\n"}),null);
__d("TextureCubeMap.fs",[],(function(a,b,c,d,e,f){e.exports="\n  varying highp vec3 vVertexDirectionVector;\n  uniform samplerCube uSampler;\n\n  void main(void) {\n    gl_FragColor = textureCube(uSampler, vVertexDirectionVector);\n  }\n"}),null);
__d("TextureCubeMap.vs",[],(function(a,b,c,d,e,f){e.exports="\n  attribute vec3 aVertexPosition;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n\n  varying highp vec3 vVertexDirectionVector;\n\n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vVertexDirectionVector = aVertexPosition;\n  }\n"}),null);
__d("SphericalShaderUtils",["CDSFallback.fs","CDSFallback.vs","CDSRenderer.fs","CDSRenderer.vs","DefaultRenderer.fs","DefaultRenderer.vs","HalfEquirect.fs","HalfEquirect.vs","TextureCubeMap.fs","TextureCubeMap.vs"],(function(a,b,c,d,e,f){__p&&__p();a={getVertexShader:function(a){switch(a){case"cube_map":return b("TextureCubeMap.vs");case"cds":return b("CDSRenderer.vs");case"cds_fallback":return b("CDSFallback.vs");case"half_equirectangular":return b("HalfEquirect.vs");default:return b("DefaultRenderer.vs")}},getFragmentShader:function(a){switch(a){case"cube_map":return b("TextureCubeMap.fs");case"cds":return b("CDSRenderer.fs");case"cds_fallback":return b("CDSFallback.fs");case"half_equirectangular":return b("HalfEquirect.fs");default:return b("DefaultRenderer.fs")}}};e.exports=a}),null);
__d("SphericalRenderer",["DOM","EventEmitter","EventListener","SphericalShaderUtils","gl-matrix"],(function(a,b,c,d,e,f){__p&&__p();var g=b("gl-matrix").glMatrix,h=b("gl-matrix").mat4,i=Math.max(window.devicePixelRatio||1,1),j=.25,k=.75,l=function(){"use strict"};c=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(d,c);function d(a,b,d){__p&&__p();var e;e=c.call(this)||this;e.$SphericalRenderer2=d;e.$SphericalRenderer23=d.fieldOfView;e.$SphericalRenderer18=!0;e.$SphericalRenderer17=a;e.$SphericalRenderer1=b;e.$SphericalRenderer11=h.create();e.$SphericalRenderer12=h.create();e.$SphericalRenderer13=h.create();e.$SphericalRenderer14=h.create();e.$SphericalRenderer3=!1;e.$SphericalRenderer20=[];e.$SphericalRenderer22=null;e.$SphericalRenderer21=null;e.$SphericalRenderer19=d.projectionType==="unpadded_cubestrip";e.$SphericalRenderer9=d.projectionType==="rotated_cubemap";e.$SphericalRenderer7=d.projectionType==="cds_barrel";e.$SphericalRenderer8=!1;e.$SphericalRenderer10=d.projectionType==="half_equirectangular";e.$SphericalRenderer25=new l();e.$SphericalRenderer25.ready=!1;e.$SphericalRenderer26=!1;e.$SphericalRenderer4=e.$SphericalRenderer27.bind(babelHelpers.assertThisInitialized(e));e.$SphericalRenderer5=e.$SphericalRenderer28.bind(babelHelpers.assertThisInitialized(e));e.$SphericalRenderer1.addEventListener("webglcontextlost",e.$SphericalRenderer4);e.$SphericalRenderer1.addEventListener("webglcontextrestored",e.$SphericalRenderer5);e.$SphericalRenderer29();return e}var e=d.prototype;e.destroy=function(){this.removeAllListeners(),this.$SphericalRenderer1.removeEventListener("webglcontextlost",this.$SphericalRenderer4),this.$SphericalRenderer1.removeEventListener("webglcontextrestored",this.$SphericalRenderer5)};e.reconfigure=function(a,b,c){c===void 0&&(c=!1),c&&(this.$SphericalRenderer20=[],this.$SphericalRenderer22=null,this.$SphericalRenderer21=null),this.$SphericalRenderer23=b.fieldOfView,this.$SphericalRenderer17=a,this.$SphericalRenderer2=b,this.$SphericalRenderer19=b.projectionType==="unpadded_cubestrip",this.$SphericalRenderer9=b.projectionType==="rotated_cubemap",this.$SphericalRenderer7=b.projectionType==="cds_barrel",this.$SphericalRenderer10=b.projectionType==="half_equirectangular",this.$SphericalRenderer25.framebuffer=null,this.$SphericalRenderer26=!1,this.$SphericalRenderer29()};e.hasRenderingContext=function(){return!this.$SphericalRenderer3};e.$SphericalRenderer27=function(a){a.preventDefault(),this.emit("renderingContextLost"),this.$SphericalRenderer3=!0};e.$SphericalRenderer28=function(a){this.$SphericalRenderer3=!1,this.$SphericalRenderer29(),this.emit("renderingContextRestore")};e.setAutoUpdateTexture=function(a){this.$SphericalRenderer18=a};e.updateFieldOfView=function(a){this.$SphericalRenderer23!==a&&(this.$SphericalRenderer23=a,this.$SphericalRenderer30())};e.updateViewportDimensions=function(a,b){this.$SphericalRenderer1.width=a*i,this.$SphericalRenderer1.height=b*i,this.$SphericalRenderer30()};e.$SphericalRenderer30=function(){h.perspective(this.$SphericalRenderer11,g.toRadian(this.$SphericalRenderer23),this.$SphericalRenderer1.width/this.$SphericalRenderer1.height,.1,100),this.$SphericalRenderer6.viewport(0,0,this.$SphericalRenderer6.drawingBufferWidth,this.$SphericalRenderer6.drawingBufferHeight)};e.$SphericalRenderer31=function(){this.$SphericalRenderer14=h.create(),this.$SphericalRenderer10&&(this.$SphericalRenderer14[0]=1/this.$SphericalRenderer24.x/(k-j),this.$SphericalRenderer14[5]=1/this.$SphericalRenderer24.y,this.$SphericalRenderer14[12]=-(this.$SphericalRenderer14[0]*j),this.$SphericalRenderer24={x:1,y:1})};e.$SphericalRenderer29=function(){__p&&__p();this.$SphericalRenderer32();if(this.$SphericalRenderer7){var a=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.$SphericalRenderer8=a==0}this.updateViewportDimensions(this.$SphericalRenderer1.clientWidth,this.$SphericalRenderer1.clientHeight);this.$SphericalRenderer24={x:this.$SphericalRenderer2.stereoFormat==="left-right"?2:1,y:this.$SphericalRenderer2.stereoFormat==="top-bottom"?2:1};this.$SphericalRenderer31();this.$SphericalRenderer33();this.$SphericalRenderer34();this.$SphericalRenderer6.clearColor(0,0,0,1);this.$SphericalRenderer17.setAttribute("crossorigin","anonymous")};e.getScreenshotDataURL=function(a,b,c,d){if(!this.$SphericalRenderer6||this.$SphericalRenderer3)return"";this.render(a,b);return this.$SphericalRenderer1.toDataURL(c,d)};e.$SphericalRenderer32=function(){__p&&__p();if(this.$SphericalRenderer6&&!this.$SphericalRenderer3)return;if(!(a.WebGLRenderingContext||a.WebGL2RenderingContext))throw new Error("WebGLRenderingContext not available.");var c=["webgl2","webgl","experimental-webgl"],d=null,e=null,f=b("EventListener").listen(this.$SphericalRenderer1,"webglcontextcreationerror",function(a){return e=a.statusMessage});for(var g=0;g<c.length;g++){try{d=this.$SphericalRenderer1.getContext(c[g])}catch(a){}if(d)break}f.remove();if(!d){e||(e="Unknown error.");throw new Error("Failed to acquire 3D rendering context: "+e)}this.$SphericalRenderer6=d;this.$SphericalRenderer3=!1};e.$SphericalRenderer33=function(){var a=this.$SphericalRenderer7?this.$SphericalRenderer8?"cds_fallback":"cds":this.$SphericalRenderer19?"cube_map":this.$SphericalRenderer10?"half_equirectangular":"default",b=this.$SphericalRenderer35(a);a=this.$SphericalRenderer36(a);this.$SphericalRenderer16=this.$SphericalRenderer6.createProgram();this.$SphericalRenderer6.attachShader(this.$SphericalRenderer16,b);this.$SphericalRenderer6.attachShader(this.$SphericalRenderer16,a);this.$SphericalRenderer6.linkProgram(this.$SphericalRenderer16)};e.$SphericalRenderer37=function(){__p&&__p();if(!this.$SphericalRenderer6.getProgramParameter(this.$SphericalRenderer16,this.$SphericalRenderer6.LINK_STATUS)){var a="",b=this.$SphericalRenderer6.getAttachedShaders(this.$SphericalRenderer16);for(var c=0;c<b.length;c++)if(!this.$SphericalRenderer6.getShaderParameter(b[c],this.$SphericalRenderer6.COMPILE_STATUS)){a="Shader error: "+this.$SphericalRenderer6.getShaderInfoLog(b[c]);break}a===""&&(a="Program link error: "+this.$SphericalRenderer6.getProgramInfoLog(this.$SphericalRenderer16));throw new Error(a)}this.$SphericalRenderer6.useProgram(this.$SphericalRenderer16);this.$SphericalRenderer16.vertexPositionAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer16,"aVertexPosition");this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer16.vertexPositionAttribute);this.$SphericalRenderer16.pMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uPMatrix");this.$SphericalRenderer16.mvMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uMVMatrix");this.$SphericalRenderer16.stMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uSTMatrix");this.$SphericalRenderer16.samplerUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uSampler");!this.$SphericalRenderer19&&!this.$SphericalRenderer7&&(this.$SphericalRenderer16.textureCoordAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer16,"aTextureCoord"),this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer16.textureCoordAttribute));this.$SphericalRenderer8&&(this.$SphericalRenderer16.offsetUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uOffset"));this.$SphericalRenderer10&&(this.$SphericalRenderer16.boundariesUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer16,"uBoundaries"));this.$SphericalRenderer26=!0};e.$SphericalRenderer34=function(){this.$SphericalRenderer15=this.$SphericalRenderer6.createTexture();this.$SphericalRenderer15.image=this.$SphericalRenderer17;var a=this.$SphericalRenderer19?this.$SphericalRenderer6.TEXTURE_CUBE_MAP:this.$SphericalRenderer6.TEXTURE_2D;this.$SphericalRenderer6.bindTexture(a,this.$SphericalRenderer15);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_MAG_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_MIN_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_WRAP_S,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.texParameteri(a,this.$SphericalRenderer6.TEXTURE_WRAP_T,this.$SphericalRenderer6.CLAMP_TO_EDGE)};e.$SphericalRenderer38=function(a,b,c,d,e,f){__p&&__p();b===void 0&&(b=30);c===void 0&&(c=30);d===void 0&&(d=Math.PI);e===void 0&&(e=Math.PI*2);f===void 0&&(f=0);var g=2,h=[],i=[],j,k;for(j=0;j<=b;j++){var l=(j/b-.5)*d,m=Math.sin(l);l=Math.cos(l);for(k=0;k<=c;k++){var n=(k/c-.5)*e+f,o=Math.sin(n);n=Math.cos(n);n=n*l;var p=m;o=o*l;var q=k/c/this.$SphericalRenderer24.x,r=j/b/this.$SphericalRenderer24.y;i.push(q);i.push(r);h.push(g*n);h.push(g*p);h.push(g*o)}}q=[];for(j=0;j<b;j++)for(k=0;k<c;k++){r=j*(c+1)+k;n=r+c+1;q.push(r);q.push(n);q.push(r+1);q.push(n);q.push(n+1);q.push(r+1)}this.$SphericalRenderer20[a]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[a]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(i),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer20[a].itemSize=2;this.$SphericalRenderer20[a].numItems=i.length/2;this.$SphericalRenderer22=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(h),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer22&&(this.$SphericalRenderer22.itemSize=3,this.$SphericalRenderer22.numItems=h.length/3);this.$SphericalRenderer21=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(q),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer21&&(this.$SphericalRenderer21.itemSize=1,this.$SphericalRenderer21.numItems=q.length)};e.$SphericalRenderer39=function(a,b){__p&&__p();var c=40,d=60,e=2,f=[],g=[],h=[],i=[],j,k;for(j=0;j<=c;j++){var l=j/c-.5,m=l*.5*Math.PI,n=Math.sin(m);m=Math.cos(m);var o=(l/a+.5)/this.$SphericalRenderer24.y;for(k=0;k<=d;k++){var p=k/d-.5,q=p*2*Math.PI,r=Math.sin(q);q=Math.cos(q);var s=q*m*e,t=n*e,u=r*m*e;p=(p/a*.8+.4)/this.$SphericalRenderer24.x;g.push(p);g.push(o);f.push(s);f.push(t);f.push(u);if(j==0||j==c){p=Math.sign(1-j);r=(r*.1/a+.9)/this.$SphericalRenderer24.x;q=(q*.25*p/a+.5+l*.5)/this.$SphericalRenderer24.y;i.push(r);i.push(q);h.push(s);h.push(t);h.push(u)}}}p=f.length/3;g.push.apply(g,i);f.push.apply(f,h);r=f.length/3;q=Math.sin(Math.PI*.25)*e;g.push(.9/this.$SphericalRenderer24.x);g.push(.25/this.$SphericalRenderer24.y);f.push(0);f.push(-q);f.push(0);g.push(.9/this.$SphericalRenderer24.x);g.push(.75/this.$SphericalRenderer24.y);f.push(0);f.push(q);f.push(0);s=[];for(j=0;j<c;j++)for(k=0;k<d;k++){t=j*(d+1)+k;u=t+d+1;s.push(t);s.push(u);s.push(t+1);s.push(u);s.push(u+1);s.push(t+1)}for(var m=0;m<2;m++)for(k=0;k<d;k++)s.push(k+p+m*(d+1)),s.push(k+p+m*(d+1)+1),s.push(r+m);this.$SphericalRenderer20[b]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[b]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(g),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer20[b].itemSize=2;this.$SphericalRenderer20[b].numItems=g.length/2;this.$SphericalRenderer22=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(f),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer22&&(this.$SphericalRenderer22.itemSize=3,this.$SphericalRenderer22.numItems=f.length/3);this.$SphericalRenderer21=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer21&&(this.$SphericalRenderer21.itemSize=1,this.$SphericalRenderer21.numItems=s.length)};e.$SphericalRenderer40=function(a,b,c){__p&&__p();this.$SphericalRenderer9?a=[1,3,7,5,6,7,3,2,0,2,3,1,4,5,7,6,4,6,2,0,0,1,5,4]:a=[5,1,3,7,0,4,6,2,6,7,3,2,0,1,5,4,4,5,7,6,1,0,2,3];var d=[];for(var e=0;e<a.length;e++){var f=a[e]>>2&1,g=a[e]>>1&1,h=a[e]>>0&1;d.push(f*2-1);d.push(g*2-1);d.push(h*2-1)}this.$SphericalRenderer22=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(d),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer22&&(this.$SphericalRenderer22.itemSize=3,this.$SphericalRenderer22.numItems=d.length/3);if(!this.$SphericalRenderer19){var i;f=[];if(this.$SphericalRenderer9){g=this.$SphericalRenderer15.image.videoWidth/2;b=g/(Math.floor(g/32)*32);h=(1-1/b)/2;e=3;d=2;g=1/d;i=1/e}else h=(1-1/b)/2,e=2,d=3,g=1/d,i=1/e;for(var b=0;b<e;++b)for(var j=0;j<d;++j){var k=e-1-b,l=j;f.push((l+h)*g);f.push((k+h)*i);f.push((l+1-h)*g);f.push((k+h)*i);f.push((l+1-h)*g);f.push((k+1-h)*i);f.push((l+h)*g);f.push((k+1-h)*i)}this.$SphericalRenderer20[c]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[c]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(f),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer20[c].itemSize=2;this.$SphericalRenderer20[c].numItems=f.length/2}l=[];for(var k=0;k<a.length;k+=4)l.push(k),l.push(k+2),l.push(k+1),l.push(k),l.push(k+3),l.push(k+2);this.$SphericalRenderer21=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(l),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer21&&(this.$SphericalRenderer21.itemSize=1,this.$SphericalRenderer21.numItems=l.length)};e.$SphericalRenderer35=function(a){var c=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.VERTEX_SHADER);a=b("SphericalShaderUtils").getVertexShader(a);this.$SphericalRenderer6.shaderSource(c,a);this.$SphericalRenderer6.compileShader(c);return c};e.$SphericalRenderer36=function(a){var c=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.FRAGMENT_SHADER);a=b("SphericalShaderUtils").getFragmentShader(a);this.$SphericalRenderer6.shaderSource(c,a);this.$SphericalRenderer6.compileShader(c);return c};e.$SphericalRenderer41=function(){this.$SphericalRenderer25.framebuffer=this.$SphericalRenderer6.createFramebuffer(),this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer25.framebuffer),this.$SphericalRenderer6.framebufferTexture2D(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer6.COLOR_ATTACHMENT0,this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer15,0),this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,null)};e.$SphericalRenderer42=function(){this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer25.framebuffer),this.$SphericalRenderer6.readPixels(0,this.$SphericalRenderer15.image.videoHeight-1,this.$SphericalRenderer15.image.videoWidth,1,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer25.pixels),this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,null)};e.$SphericalRenderer43=function(){__p&&__p();this.$SphericalRenderer25.bitmask.fill(0);var a=[0,0,0],b=this.$SphericalRenderer15.image.videoWidth/125,c=Math.round(b),d;for(d=0;d<33;++d){var e=Math.floor((45+d)*b)*4,f=128,g=127;for(var h=0;h<3;++h){a[h]=0;for(var i=0;i<c;++i)a[h]+=this.$SphericalRenderer25.pixels[e+i*4+(2-h)];a[h]/=c;f=Math.max(f,a[h]);g=Math.min(g,a[h])}for(h=0;h<3;++h){i=(a[h]-g)/(f-g);this.$SphericalRenderer25.bitmask[d*3+h]=i>.5?1:0}}for(d=0;d<12;++d){e=0;for(var i=0;i<8;++i)e+=this.$SphericalRenderer25.bitmask[1+d*8+i]*Math.pow(2,i);this.$SphericalRenderer25.dataView.setUint8(d,e)}this.$SphericalRenderer25.offsetX=this.$SphericalRenderer25.dataView.getFloat32(0,!0);this.$SphericalRenderer25.offsetZ=-this.$SphericalRenderer25.dataView.getFloat32(8,!0)};e.$SphericalRenderer44=function(){try{this.$SphericalRenderer25.ready||(this.$SphericalRenderer25.pixels=new Uint8Array(3840*4),this.$SphericalRenderer25.bitmask=new Uint8Array(33*3),this.$SphericalRenderer25.dataView=new DataView(new ArrayBuffer(12)),this.$SphericalRenderer25.ready=!0),this.$SphericalRenderer25.framebuffer||this.$SphericalRenderer41(),this.$SphericalRenderer42(),this.$SphericalRenderer43()}catch(a){this.emit("renderingError",a)}};e.$SphericalRenderer45=function(){if(this.$SphericalRenderer19)this.$SphericalRenderer46();else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer15);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,!this.$SphericalRenderer7);try{this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_2D,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer15.image)}catch(a){this.emit("renderingError",a)}this.$SphericalRenderer8&&this.$SphericalRenderer44()}};e.renderWithRotationMatrix=function(a){if(this.$SphericalRenderer3)return;this.$SphericalRenderer18&&this.$SphericalRenderer45();this.$SphericalRenderer12=a;this.$SphericalRenderer7&&h.rotateY(this.$SphericalRenderer12,this.$SphericalRenderer12,g.toRadian(-90));this.$SphericalRenderer47()};e.render=function(a,b){if(this.$SphericalRenderer3)return;this.$SphericalRenderer18&&this.$SphericalRenderer45();this.$SphericalRenderer9?(h.identity(this.$SphericalRenderer12),h.rotateX(this.$SphericalRenderer12,this.$SphericalRenderer12,g.toRadian(-b)),h.rotateY(this.$SphericalRenderer12,this.$SphericalRenderer12,g.toRadian(a-135)),h.rotateZ(this.$SphericalRenderer12,this.$SphericalRenderer12,g.toRadian(45))):(this.$SphericalRenderer7&&(a-=90),h.identity(this.$SphericalRenderer12),h.rotateX(this.$SphericalRenderer12,this.$SphericalRenderer12,-g.toRadian(b)),h.rotateY(this.$SphericalRenderer12,this.$SphericalRenderer12,g.toRadian(a)));this.$SphericalRenderer47()};e.$SphericalRenderer47=function(){__p&&__p();if(this.$SphericalRenderer19)this.$SphericalRenderer22===null&&this.$SphericalRenderer40(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,0);else{this.$SphericalRenderer26||(this.$SphericalRenderer37(),this.$SphericalRenderer6.activeTexture(this.$SphericalRenderer6.TEXTURE0));var a=this.$SphericalRenderer15.image.videoWidth;this.$SphericalRenderer2.projectionType==="cubemap"||this.$SphericalRenderer2.projectionType==="rotated_cubemap"?a in this.$SphericalRenderer20||this.$SphericalRenderer40(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,a):this.$SphericalRenderer2.projectionType==="barrel"?a in this.$SphericalRenderer20||this.$SphericalRenderer39(this.$SphericalRenderer2.expansionCoef||1.01,a):this.$SphericalRenderer7?a in this.$SphericalRenderer20||this.$SphericalRenderer38(a,40,40,Math.PI/180*111,Math.PI/180*142,-Math.PI/2):a in this.$SphericalRenderer20||this.$SphericalRenderer38(a);this.$SphericalRenderer7||(this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20[a]),this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer16.textureCoordAttribute,this.$SphericalRenderer20[a].itemSize,this.$SphericalRenderer6.FLOAT,!1,0,0))}this.$SphericalRenderer6.uniform1i(this.$SphericalRenderer16.samplerUniform,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer22);this.$SphericalRenderer22&&this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer16.vertexPositionAttribute,this.$SphericalRenderer22.itemSize,this.$SphericalRenderer6.FLOAT,!1,0,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer21);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.pMatrixUniform,!1,this.$SphericalRenderer11);this.$SphericalRenderer10&&this.$SphericalRenderer6.uniform2f(this.$SphericalRenderer16.boundariesUniform,j,k);this.$SphericalRenderer7?(h.invert(this.$SphericalRenderer13,this.$SphericalRenderer12),this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.mvMatrixUniform,!1,this.$SphericalRenderer13),this.$SphericalRenderer8&&this.$SphericalRenderer6.uniform2f(this.$SphericalRenderer16.offsetUniform,this.$SphericalRenderer25.offsetX,this.$SphericalRenderer25.offsetZ)):this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.mvMatrixUniform,!1,this.$SphericalRenderer12);this.$SphericalRenderer10&&this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer16.stMatrixUniform,!1,this.$SphericalRenderer14);this.$SphericalRenderer21&&this.$SphericalRenderer6.drawElements(this.$SphericalRenderer6.TRIANGLES,this.$SphericalRenderer21.numItems,this.$SphericalRenderer6.UNSIGNED_SHORT,0)};e.$SphericalRenderer48=function(){var a=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_CUBE_MAP_TEXTURE_SIZE),b=this.$SphericalRenderer15.image.width;return Math.min(a,b)};e.$SphericalRenderer46=function(){var a=this.$SphericalRenderer48(),c=this.$SphericalRenderer15.image.width,d=b("DOM").create("canvas",{width:a,height:a});d=d.getContext("2d");this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer15);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,!1);for(var e=0;e<6;e++){d.drawImage(this.$SphericalRenderer15.image,0,e*c,c,c,0,0,a,a);var f=new Uint8Array(d.getImageData(0,0,a,a).data);this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,this.$SphericalRenderer6.RGBA,a,a,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,f)}};return d}(b("EventEmitter"));e.exports=c}),null);
__d("SphericalVideoPlayer",["cx","invariant","Arbiter","Banzai","CSS","DOM","DOMDimensions","Event","FullScreen","SphericalMediaCanvasPool","SphericalParallaxUtils","SphericalRenderer","SphericalVideoComponentActions","SphericalVideoComponentDispatcher","SphericalVideoHalfEquirectConfig","SphericalVideoPerformanceTracker","SphericalVideoPlayerEvents","SphericalViewportControl","SubscriptionsHandler","VideoPlayerReasonTransitionHelper","forwardEvent","getElementRect","getFullScreenElement","getViewportDimensions","gkx","onViewportChanged","requestAnimationFrame","uniqueID","SphericalViewportControlStore","VideoPlayerControllerStore"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("SphericalParallaxUtils").calculateYawOffset,j="SphericalVideoPlayer";c=2;var k=1e3;d=.8;f=16;g=15;var l=d/f/g,m=50,n=.1;b("SphericalMediaCanvasPool").setLimit(c,j);d=function(){__p&&__p();function c(a,c){__p&&__p();var d=this;this.$48=function(){var a=!!d.$1.getOption("VideoWithSphericalGuide","auto");if(d.$1.getSource()!=="inline"||a)return;a=d.$55();if(a===null)return;typeof a==="number"||h(0,1207);d.$26=a;d.$29&&(d.$24=d.$12.getOrientation().x-d.$26,d.$25=d.$26,d.$29=!1)};this.$50=function(){d.$1.isState("paused")||d.$1.pause("spherical_switch_canvas"),d.$57(),d.$46()};this.$54=function(a){__p&&__p();if(!d.$14)return;var c=d.$14,e=d.$30?a-d.$30:0;e=d.$56(e);e&&d.$36(d.$24+d.$25,null);if(d.$2.readyState>=d.$2.HAVE_CURRENT_DATA&&(d.$44()||d.$7||e)){b("SphericalVideoPerformanceTracker").get().setProjection(d.$10.projectionType).addFrameAtTime(a);d.$7=!1;e=d.$12.getOrientation();c.render(e.x+90,e.y);d.$16&&(d.$16.remove(),d.$16=null)}d.$30=a;b("requestAnimationFrame")(d.$54)};this.$33=function(a,b){d.$12.setRelativeSphericalOrientation(a,b)};this.$36=function(a,b){d.$12.setSphericalOrientation(a,b)};this.$37=function(a){d.$14&&(d.$14.updateFieldOfView(a),d.$12.setFieldOfView(a),d.$20=a,d.$32())};this.$38=function(a){d.$14&&(d.$10.projectionType=a,d.$14.reconfigure(d.$2,d.$10,!0),d.$32())};this.$39=function(a){d.$14&&(d.$10.stereoFormat=a,d.$14.reconfigure(d.$2,d.$10,!0),d.$32())};this.$40=function(a){d.$12&&(d.$10.partialLimits=a,d.$12.reconfigure(d.$10),d.$32())};this.$41=function(a){a===void 0&&(a={}),d.$12&&(d.$12.reconfigureControlConfig(a),d.$32())};this.$34=function(a,c){if(b("FullScreen").isFullScreen()&&(a<d.$5.width||c<d.$5.height))return;d.$14?(d.$5.width=a,d.$5.height=c,d.$53(d.$14,a,c),d.$11.useViewportDimension&&(d.$6=b("DOMDimensions").getElementDimensions(d.$4)),d.$32()):d.$5={width:a,height:c}};this.$52=function(a,b,c){__p&&__p();if(!d.$14)return;a=a>=0?(a+180)%360-180:(a-180)%360+180;d.$59(a,b);d.$19.yaw=a;d.$19.pitch=b;d.$20=c;d.$14&&d.$14.updateFieldOfView(c);d.$58(a);d.$32()};this.$10=a;this.$11=Object.assign({viewportClassName:"_2a6s",canvasClassName:"_38vt",placeholderImgClassName:"_44h9",videoID:"",playerID:void 0,eagerPreload:void 0,preventScrollDefaultAction:void 0,useViewportDimension:void 0,useContainerDimensions:void 0},c);this.$22=0;this.$28=!0;this.$29=!1}var d=c.prototype;d.enable=function(c){__p&&__p();var d=this;if(this.$1)return;this.$1=c;if(typeof a.WebGLRenderingContext!=="function"&&typeof a.WebGL2RenderingContext!=="function"){this.$31({error:"SPHERICAL_SETUP_FAILED",message:"WebGLRenderingContext not available."});return}if(!b("gkx")("678912")){this.$31({error:"SPHERICAL_RENDER_ERROR",message:"Unsupported browser version"});return}var e=c.getVideoNode();e instanceof HTMLVideoElement||h(0,1208);this.$2=e;this.$7=!1;this.$18=!0;this.$8=new(b("SubscriptionsHandler"))();this.$8.addSubscriptions(b("Event").listen(this.$2,"loadeddata",function(){return d.$32()}),b("Event").listen(this.$2,"seeked",function(){return d.$32()}),b("Event").listen(this.$2,"ended",function(){return d.$33(0,0)}),b("Event").listen(window,"resize",function(){b("FullScreen").isFullScreen()&&d.$1.getContainerNode()===b("getFullScreenElement")()&&d.$34(window.innerWidth,window.innerHeight)}),c.addListener("stateChange",function(){(c.isState("destroyed")||c.isState("fallback")&&(c.isLiveVideo()||!c.isFallbackRecoverable()))&&d.$35()}),c.addListener("VideoPlayerFallbackEvents/recover",function(){d.$35(),b("CSS").removeClass(d.$2,"_3axk"),d.$1.play(new(b("VideoPlayerReasonTransitionHelper"))("spherical_fallback"))}),c.addListener(b("SphericalVideoPlayerEvents").SET_ABSOLUTE_SPHERICAL_ORIENTATION,this.$36),c.addListener(b("SphericalVideoPlayerEvents").SET_RELATIVE_SPHERICAL_ORIENTATION,this.$33),c.addListener(b("SphericalVideoPlayerEvents").SET_FIELD_OF_VIEW,this.$37),c.addListener(b("SphericalVideoPlayerEvents").SET_VIDEO_PROJECTION,this.$38),c.addListener(b("SphericalVideoPlayerEvents").SET_STEREO_MODE,this.$39),c.addListener(b("SphericalVideoPlayerEvents").SET_PARTIAL_LIMITS,this.$40),c.addListener(b("SphericalVideoPlayerEvents").SET_VIEWPORT_CONTROL_CONFIG,this.$41),c.addListener("dimensionsChange",this.$34),c.once("changeVolume",function(){return d.$18=!1}),c.once("muteVideo",function(){return d.$18=!1}),c.once("unmuteVideo",function(){return d.$18=!1}),c.addListener("toggleFullscreen",function(){return d.$4.focus()}),c.addListener("TahoeController/enterTahoe",function(){d.$4.focus(),d.$12.setEnableZoom(!0),d.$23=!0,d.$1.emit("SphericalVideoPlayer/zoomEnabled")}),c.addListener("TahoeController/exitTahoe",function(){d.$4.focus(),d.$12.setEnableZoom(!1),d.$23=!1,d.$1.emit("SphericalVideoPlayer/zoomDisabled")}));if(this.$11.useContainerDimensions){var f=c.getContainerNode();this.$5=b("DOMDimensions").getElementDimensions(f)}else this.$5=b("DOMDimensions").getElementDimensions(e),(this.$5.width===0||this.$5.height===0)&&(this.$5={width:e.width,height:e.height});this.$15=this.$1.getVideoPlayerID()||b("uniqueID")();this.$19={yaw:this.$10.initialHeading,pitch:this.$10.initialPitch};this.$20=this.$10.fieldOfView;this.$23=!1;f=c.getVideoProjection();f&&(this.$10.projectionType=f);b("CSS").addClass(e,"_3axk");this.$42();c.registerOption("SphericalVideoPlayer","getDimensions",function(){return d.$11.useViewportDimension?d.$6:d.$5});c.registerOption("SphericalVideoPlayer","isReady",function(){return!!d.$14});c.registerOption("SphericalVideoPlayer","getScreenshotDataURL",function(){return d.$43()});c.registerOption("SphericalVideoPlayer","getIsSingleFisheye",function(){return d.$10.isSingleFisheye&&d.$10.originalFOV!==null});c.registerOption("SphericalVideoPlayer","getOriginalFOV",function(){return d.$10.originalFOV});c.registerOption("SphericalVideoPlayer","getEnableZoom",function(){return d.$23});c.registerOption("SphericalVideoPlayer","getIsHalfEquirectangular",function(){return d.$10.projectionType==="half_equirectangular"});this.$44()||this.$11.eagerPreload?this.$45():this.$46()};d.disable=function(){this.$35()};d.$45=function(){__p&&__p();if(this.$1.getOption("SphericalVideoPlayer","isUnavailable"))return;this.$17&&(this.$17.remove(),this.$17=null);try{b("SphericalVideoPerformanceTracker").get().setProjection(this.$10.projectionType).enterSphericalRendererSetup(),this.$47(),b("SphericalVideoPerformanceTracker").get().exitSphericalRendererSetup()}catch(a){this.$31({error:"SPHERICAL_SETUP_FAILED",message:a.message});return}this.$1.setStillFrameEnabled(!1);this.$32();this.$1.emit("SphericalVideoPlayer/ready");var a=this.$12.getOrientation().x;this.$28?this.$24=a:this.$29=!0;this.$27=b("onViewportChanged")(this.$48);this.$28=!1};d.$46=function(){var a=this;this.$17=this.$1.addListener("stateChange",function(){a.$44()&&a.$45()})};d.$49=function(){if(!this.$14)return;var a=this.$43();a=b("DOM").create("img",{width:this.$5.width,height:this.$5.height,src:a,className:this.$11.placeholderImgClassName});b("DOM").insertAfter(this.$2,a);this.$16&&this.$16.remove();this.$16=a;this.$50()};d.$43=function(a,b){if(!this.$14)return"";var c=this.$14,d=this.$12.getOrientation(),e=d.x;d=d.y;return c.getScreenshotDataURL(e+90,d,a,b)};d.$42=function(){__p&&__p();var a=this,c=b("DOM").create("div",{className:this.$11.viewportClassName,tabIndex:0}),d={};if(this.$10.isSingleFisheye&&this.$10.originalFOV){var e=this.$10.originalFOV/2;this.$10.partialLimits={partialLeftDegrees:e,partialRightDegrees:e,partialTopDegrees:e,partialBottomDegrees:e};d=this.$51()}this.$10.projectionType==="half_equirectangular"&&(this.$10.partialLimits=b("SphericalVideoHalfEquirectConfig").getHalfEquirectangularPartialLimits(),d=b("SphericalVideoHalfEquirectConfig").getHalfEquirectangularControllerConfig());b("SphericalVideoComponentDispatcher").explicitlyRegisterStores([b("SphericalViewportControlStore"),b("VideoPlayerControllerStore")]);var f=new(b("SphericalViewportControl"))(c,this.$10,d);this.$8.addSubscriptions(f.addListener("DOM/click",function(b){if(b.button!==0)return;a.$1.clickVideo();b.preventDefault()}),f.addListener("mouseMove",function(b){a.$1.mouseMove(b),b.preventDefault()}),f.addListener("mouseUp",function(b){a.$1.mouseUp(b),b.preventDefault()}),f.addListener("mouseLeave",function(b){a.$1.mouseLeave(b),b.preventDefault()}),f.addListener("updateViewportBegin",function(){a.$1.isMuted()&&a.$18&&(a.$18=!1,a.$1.unmute()),a.$1.logEvent("viewport_rotated")}));this.$8.addSubscriptions(f.addListener("viewportChange",this.$52));e=["DOM/click","updateViewportBegin","updateViewportMove","updateViewportEnd","wheelScroll","viewportChange"];this.$8.addSubscriptions.apply(this.$8,e.map(function(c){return b("forwardEvent")(f,a.$1,c)}));this.$12=f;b("Arbiter").subscribe("VideoChannelView/opened",function(){a.$21=!0,a.$12.disableKeyboard()});b("Arbiter").subscribe("VideoChannelView/closed",function(){a.$21=!1,a.$12.enableKeyboard()});b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?a.$12.enableKeyboard():a.$21&&a.$12.disableKeyboard()});this.$11.preventScrollDefaultAction&&this.$12.setPreventScrollDefaultAction(!0);b("SphericalVideoComponentActions").registerSphericalViewportControl(this.$1.getVideoPlayerID(),this.$12,this.$4);this.$1.registerOption("SphericalVideoPlayer","getCurrentViewport",function(){return a.$19});this.$1.registerOption("SphericalVideoPlayer","getFieldOfView",function(){return a.$20});this.$4=c;b("DOM").insertAfter(this.$2,c);this.$11.useViewportDimension&&(this.$6=b("DOMDimensions").getElementDimensions(c))};d.$47=function(){__p&&__p();var a=this,c={canvasAttrs:{width:this.$5.width,height:this.$5.height,className:this.$11.canvasClassName,tabIndex:0},beforeCanvasLost:function(){return a.$49()}};c=b("SphericalMediaCanvasPool").get(this.$15,c,j);var d=new(b("SphericalRenderer"))(this.$2,c,this.$10);this.$9=new(b("SubscriptionsHandler"))();this.$9.addSubscriptions(d.addListener("renderingError",function(b){return a.$31({error:"SPHERICAL_RENDER_ERROR",message:b.message})}),d.addListener("renderingContextLost",this.$50));this.$3=c;this.$14=d;b("DOM").insertAfter(this.$2,c);this.$53(d,this.$5.width,this.$5.height);b("requestAnimationFrame")(this.$54);b("CSS").show(c)};d.$55=function(){__p&&__p();var a=this.$1.getRootNode();if(!a)return null;a=b("getElementRect")(a);a=a.top+a.bottom/2;var c=b("getViewportDimensions").withoutScrollbars().height;a=a/c*100;c=this.$12.getHorizontalFieldOfView();a=i(a,null,null,c);c=a.yaw;a=a.success;return a?c:null};d.$56=function(a){__p&&__p();if(typeof this.$26!=="number")return!1;typeof this.$25!=="number"&&(this.$25=0);var b=Math.abs(this.$25-this.$26);if(b<n)return!1;b=b*l;a=Math.max(a,m);this.$25<this.$26?this.$25+=Math.min(this.$26-this.$25,b*a):this.$25-=Math.min(this.$25-this.$26,b*a);return!0};d.$31=function(a){this.$1.logError(a),this.$1.emit("error",a),this.$35()};d.$44=function(){return this.$1.isState("playing")};d.$58=function(a){if(!this.$25)return;this.$24=a-this.$25};d.$53=function(a,c,d){a.updateViewportDimensions(c,d),b("SphericalVideoComponentActions").updateViewportDimensions(this.$1.getVideoPlayerID(),c,d)};d.$32=function(){this.$7=!0};d.$59=function(a,c){var d=Date.now();if(d-this.$22>=k){this.$22=d;var e=!!this.$1.getOption("VideoWithSphericalGuide","auto");b("Banzai").post("spherical_video_viewport",{video_fbid:this.$1.getVideoID(),yaw_degrees:a,pitch_degrees:c,roll_degrees:0,field_of_view_y:this.$10.fieldOfView,aspect_ratio:this.$5.height/this.$5.width,video_player_position:this.$2.currentTime,video_player_position_ms:this.$2.currentTime*1e3,guide_enabled:e,timestamp:d})}};d.$57=function(){this.$14&&(this.$14.destroy(),this.$14=null,this.$27&&this.$27.remove(),this.$27=null,this.$9.release(),this.$3.remove())};d.$35=function(){this.$1.hasOption("SphericalVideoPlayer","isUnavailable")||this.$1.registerOption("SphericalVideoPlayer","isUnavailable",function(){return!0}),this.$8&&this.$8.release(),this.$57(),this.$12&&this.$12.destroy(),this.$13&&this.$13.destroy(),this.$4&&this.$4.remove(),b("SphericalVideoPerformanceTracker").get().destroy()};d.$51=function(){return{disableAutoClientSizeUpdate:!1,enableGyro:!1,enableRubberBanding:!1,maxSpringDegrees:0,maxStretchXDegrees:0,maxStretchYDegrees:0,minVFOV:3,rubberBandConstant:0,slipFactor:0,springFactor:0,enableZoomWithShiftKey:!1,enablePanningWithRightMouse:!1}};return c}();e.exports=d}),null);
__d("SphericalVideoRecenterControl",["SubscriptionsHandler","easeInOutInterpolate","requestAnimationFrame"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;a=function(){"use strict";__p&&__p();function a(a,b,c){var d=this;this.$2=a;this.$1=!1;this.$6=this.$9.bind(this);this.$5={yaw:b,pitch:c};this.$4={yaw:b,pitch:c};a.getOption("SphericalVideoPlayer","isReady")?this.$10():a.once("SphericalVideoPlayer/ready",function(){return d.$10()})}var c=a.prototype;c.$10=function(){var a=this;this.$8=new(b("SubscriptionsHandler"))();this.$8.addSubscriptions(this.$2.addListener("updateViewportBegin",function(){return a.$11()}),this.$2.addListener("SphericalHeadingIndicator/click",function(){return a.$12()}),this.$2.addListener("VideoWithSphericalGuide/intervalUpdate",function(b){return a.updateTargetViewport(b.baseYaw+b.deltaYaw,b.basePitch+b.deltaPitch)}),this.$2.addListener("VideoWithSphericalGuide/stateToggle",function(b){b||(a.$5.yaw=a.$4.yaw,a.$5.pitch=a.$4.pitch)}),this.$2.addListener("SphericalVideoViewportTagComment/click",function(b){return a.$12(b)}))};c.updateTargetViewport=function(a,b){this.$5.yaw=a,this.$5.pitch=b};c.$12=function(a){__p&&__p();if(this.$1||this.$2.getOption("VideoWithSphericalGuide","enabled")&&this.$2.isState("playing"))return;this.$1=!0;this.$3=Date.now();var c=this.$2.getOption("SphericalVideoPlayer","getCurrentViewport");a=a||this.$5;var d=a.yaw-c.yaw;Math.abs(d)>180&&(d=d>0?d-360:d+360);this.$7={basePitch:c.pitch,deltaPitch:a.pitch-c.pitch,baseYaw:c.yaw,deltaYaw:d};this.$2.emit("SphericalVideoRecenterControl/animationStart");b("requestAnimationFrame")(this.$6)};c.$11=function(){this.$1=!1};c.$9=function(){__p&&__p();if(!this.$1){this.$2.emit("SphericalVideoRecenterControl/animationEnd");return}var a=Date.now();if(a-this.$3>g){this.$13(this.$7,1);this.$1=!1;this.$2.emit("SphericalVideoRecenterControl/animationEnd");return}b("requestAnimationFrame")(this.$6);this.$13(this.$7,b("easeInOutInterpolate")((a-this.$3)/g))};c.$13=function(a,b){var c=a.deltaPitch*b+a.basePitch;b=a.deltaYaw*b+a.baseYaw;this.$2.setSphericalOrientation(b,c)};c.destroy=function(){this.$8.release()};return a}();e.exports=a}),null);
__d("VideoSphericalHeadingIndicator",["cx","CSS","React","ReactDOM","SphericalVideoHeadingIndicator.react","destroyOnUnload"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d,e,f,g){__p&&__p();var h=this;g===void 0&&(g=!1);this.$7=function(a){a.preventDefault(),h.$1.emit("SphericalHeadingIndicator/click"),h.$1.logEvent("heading_reset")};this.$1=a;this.$2=c;this.$3=d;this.$4=g;var i=a.addListener("VideoPlayerFallbackEvents/enter",function(){i.remove(),b("ReactDOM").unmountComponentAtNode(c)});if(a.isState("ready")||a.isState("playing"))this.$5();else var j=a.addListener("stateChange",function(){(h.$1.isState("ready")||h.$1.isState("playing"))&&(j.remove(),h.$5())});b("destroyOnUnload")(function(){b("ReactDOM").unmountComponentAtNode(c)})}var c=a.prototype;c.$5=function(){this.$1.addListener("toggleFullscreen",this.$6.bind(this)),b("ReactDOM").render(b("React").jsx(b("SphericalVideoHeadingIndicator.react"),{initialYaw:this.$3,onClick:this.$7,controller:this.$1,isComposer:this.$4}),this.$2)};c.$6=function(){this.$1.isFullscreen()?b("CSS").addClass(this.$2,"_4ubd"):b("CSS").removeClass(this.$2,"_4ubd")};return a}();e.exports=a}),null);
__d("ProgressiveDatepickerMixin",["DateConsts","React"],(function(a,b,c,d,e,f){__p&&__p();var g=b("React").PropTypes;a={propTypes:{descendingYears:g.bool,initialDay:function(a,c,d){var e=a.initialYear,f=a.initialMonth,h=a.initialDay;if(!h)return;var i=f&&e&&h<=b("DateConsts").getDaysInMonth(e,f);return!i?new Error("A valid initialYear and initialMonth must be provided if initialDay is set."):g.number.apply(this,arguments)},initialMonth:function(a,b,c){return a.initialMonth&&!a.initialYear?new Error("A valid initialYear must be provided if initialMonth is set."):g.number.apply(this,arguments)},initialYear:g.number,inputPrefix:g.string,maxTime:g.number.isRequired,minTime:g.number.isRequired,minTimeUnit:g.oneOf(["day","month","year"]),onDateChange:g.func,setDateTo:g.object,inputDayName:g.string,inputMonthName:g.string,inputYearName:g.string,supressDaySelector:g.bool,forceYearSelection:g.bool,className:g.string,wrapperClassName:g.string,reverseOrder:g.bool},getDefaultProps:function(){return{descendingYears:!1,initialYear:0,initialMonth:0,initialDay:0,inputPrefix:"",minTimeUnit:"year",supressDaySelector:!1,forceYearSelection:!1,reverseOrder:!1}},getInitialState:function(){if(this.props.setDateTo!=null)return this.props.setDateTo;else{var a=this._getValidDate({year:this.props.initialYear,day:this.props.initialDay,month:this.props.initialMonth});return a}},clearDate:function(){this.setState(this.getInitialState())},_getDayName:function(){return this.props.inputDayName!=null?this.props.inputDayName:this.props.inputPrefix===""?"day":this.props.inputPrefix+"_day"},_getMonthName:function(){return this.props.inputMonthName!=null?this.props.inputMonthName:this.props.inputPrefix===""?"month":this.props.inputPrefix+"_month"},_getYearName:function(){return this.props.inputYearName!=null?this.props.inputYearName:this.props.inputPrefix===""?"year":this.props.inputPrefix+"_year"},_getMinDate:function(){return new Date(this.props.minTime*b("DateConsts").MS_PER_SEC)},_getMinYear:function(){return this._getMinDate().getFullYear()},_getMinMonth:function(){return this._getMinDate().getMonth()+1},_getMinDay:function(){return this._getMinDate().getDate()},_isMinYear:function(){return this.state.year===this._getMinYear()},_isMinYearAndMonth:function(){return this._isMinYear()&&this.state.month===this._getMinMonth()},_getMaxDate:function(){return new Date(this.props.maxTime*b("DateConsts").MS_PER_SEC)},_getMaxYear:function(){return this._getMaxDate().getFullYear()},_getMaxMonth:function(){return this._getMaxDate().getMonth()+1},_getMaxDay:function(){return this._getMaxDate().getDate()},_isMaxYear:function(){return this.state.year===this._getMaxYear()},_isMaxYearAndMonth:function(){return this._isMaxYear()&&this.state.month===this._getMaxMonth()},_getCurrentDate:function(){return new Date(this.state.year,this.state.month?this.state.month-1:0,this.state.year&&!this.state.day?1:this.state.day).getTime()},getCurrentDateInSeconds:function(){return this._getCurrentDate()/b("DateConsts").MS_PER_SEC},getCurrentDateWithoutAutoCorrection:function(){return this.state.year===0||this.state.month===0||this.state.day===0?new Date(0,0,0).getTime():this.getCurrentDateInSeconds()},getMaxPossibleDateInSeconds:function(){var a={year:this.state.year,month:this.state.month,day:this.state.day};a.day||(a.month?a.month+=1:a.year&&(a.year+=1,a.day=1));a=new Date(a.year,a.month?a.month-1:0,a.day);return a.getTime()/b("DateConsts").MS_PER_SEC},_onYearChange:function(a){a=a.target?a.target.value:a.value;this._onDateChange({year:parseInt(a,10),month:this.state.month,day:this.state.day})},_onMonthChange:function(a){a=a.target?a.target.value:a.value;this._onDateChange({year:this.state.year,month:parseInt(a,10),day:this.state.day})},_onDayChange:function(a){a=a.target?a.target.value:a.value;this._onDateChange({year:this.state.year,month:this.state.month,day:parseInt(a,10)})},_onDateChange:function(a){var b=this,c=this._getValidDate(a);this.setState(c,function(){b.props.onDateChange&&b.props.onDateChange(c)})},_getValidDate:function(a,c,d){typeof c==="undefined"&&(c=new Date(this.props.minTime*b("DateConsts").MS_PER_SEC));typeof d==="undefined"&&(d=new Date(this.props.maxTime*b("DateConsts").MS_PER_SEC));var e=a.year,f=a.month;a=a.day;e?(e<=c.getFullYear()?(e=c.getFullYear(),f&&f<=c.getMonth()+1&&(f=c.getMonth()+1,a&&a<c.getDate()&&(a=c.getDate()))):e>=d.getFullYear()&&(e=d.getFullYear(),f&&f>=d.getMonth()+1&&(f=d.getMonth()+1,a&&a>d.getDate()&&(a=d.getDate()))),f?a&&a>b("DateConsts").getDaysInMonth(e,f)&&(a=b("DateConsts").getDaysInMonth(e,f)):a=0):f=a=0;return{year:e,month:f,day:a}},UNSAFE_componentWillReceiveProps:function(a){var c=new Date(a.minTime*b("DateConsts").MS_PER_SEC),d=new Date(a.maxTime*b("DateConsts").MS_PER_SEC);a.setDateTo!=null?this.setState(a.setDateTo):this.setState(this._getValidDate(this.state,c,d))}};e.exports=a}),null);