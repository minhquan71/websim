if (self.CavalryLogger) { CavalryLogger.start_js(["+uy70"]); }

__d("VideoComposerPublishDrawerContainer.react",["FluxContainer","React","VideoComposerPublishDrawer.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getPublishingStore(a.videoComposerID),b("VideoComposerStores").getUIStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getPublishingStore(c.videoComposerID).getState();var d=a.isPosting,e=a.isPostPending;a=a.isDraft;var f=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();f=f.publishDrawerShown;d=(d||e)&&!a;e=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=e.composerEntryPointRef;c=e.dialogMode;var g=e.useRevampedUI;e=e.isEditModeUpgrade;return{composerEntryPointRef:a,dialogMode:c,isPublishing:d,publishDrawerShown:f,useRevampedUI:g,isEditModeUpgrade:e}};var d=c.prototype;d.render=function(){var a=this.state.dialogMode==="video_upload",c=this.state.dialogMode==="video_edit";a=this.state.useRevampedUI&&a||this.state.isEditModeUpgrade&&c;return this.state.publishDrawerShown&&!a?b("React").jsx(b("VideoComposerPublishDrawer.react"),{videoComposerID:this.props.videoComposerID,composerEntryPointRef:this.state.composerEntryPointRef,dialogMode:this.state.dialogMode,isPublishing:this.state.isPublishing}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPublishDrawerFooterContainer.react",["FluxContainer","React","VideoComposerPublishDrawerFooter.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getPublishingStore(a.videoComposerID),c.getUIStore(a.videoComposerID),c.getPremiereStore(a.videoComposerID),c.getMetadataStore(a.videoComposerID),c.getDistributionStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();var d=(a=b("VideoComposerStores")).getMetadataStore(c.videoComposerID).getState(),e=d.composerEntryPointRef,f=d.dialogMode,g=d.showRightsConfirmationDialog;d=d.useRevampedUI;var h=a.getDistributionStore(c.videoComposerID).getState(),i=h.isShowDraft;h=h.isSeasonDraft;var j=a.getUIStore(c.videoComposerID).getState();j=j.rightsConfirmDialogShown;a=a.getPublishingStore(c.videoComposerID).getState();var k=a.canDraft,l=a.canPublish,m=a.cannotPublishReason,n=a.isComposerPostScheduleRedesign,o=a.isPosting,p=a.isPostPending,q=a.publishingType,r=a.scheduleType;a=a.isDraft;o=o||p;p=b("VideoComposerStores").getPremiereStore(c.videoComposerID).getState();c=p.shouldPremiere;return{canDraft:k,canPublish:l,cannotPublishReason:m,composerEntryPointRef:e,dialogMode:f,isComposerPostScheduleRedesign:n,isDraft:a,isPublishing:o,isShowDraft:i,isSeasonDraft:h,publishingType:q,scheduleType:r,rightsConfirmDialogShown:j,shouldPremiere:c,shouldShowRightsConfirmDialogBeforePublish:g,useRevampedUI:d}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerPublishDrawerFooter.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerShowTrailerFooterContainer.react",["FluxContainer","React","VideoComposerDialogConstants","VideoComposerDialogUtils","VideoComposerShowTrailerFooter.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getDistributionStore(a.videoComposerID),b("VideoComposerStores").getPublishingStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getDistributionStore(c.videoComposerID).getState();a=a.showInNewsFeed;var d=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();d=d.title;c=b("VideoComposerStores").getPublishingStore(c.videoComposerID).getState();var e=c.disablePublish,f=c.isPosting;c=c.isPostPending;f=f||c;return{disablePublish:e,isMissingTitle:d.trim()==="",isPublishing:f,isTitleTooLong:b("VideoComposerDialogUtils").byteLength(d.trim())>b("VideoComposerDialogConstants").MAX_TITLE_LENGTH,showInNewsFeed:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerShowTrailerFooter.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerGameshowLightweightCloseEditorConfirmationDialogContainer.react",["fbt","FluxContainer","React","VideoComposerGameshowLightweightActions","VideoComposerGenericConfirmationDialog.react","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("VideoComposerGameshowLightweightActions").confirmCloseEditor(d.props.videoComposerID)},d.$2=function(){b("VideoComposerGameshowLightweightActions").cancelCloseEditor(d.props.videoComposerID)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getGameshowLightweightStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getGameshowLightweightStore(c.videoComposerID).getState();c=a.showCloseEditorConfirmationDialog;return{isShown:c}};var d=c.prototype;d.render=function(){var a=g._("Tho\u00e1t m\u00e0 kh\u00f4ng l\u01b0u?"),c=g._("N\u1ebfu b\u1ea1n tho\u00e1t, m\u1ecdi thay \u0111\u1ed5i trong tr\u00f2 ch\u01a1i s\u1ebd kh\u00f4ng \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i.");return b("React").jsx(b("VideoComposerGenericConfirmationDialog.react"),{isShown:this.state.isShown,title:a,message:c,confirmOnClick:this.$1,cancelOnClick:this.$2})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerGameshowLightweightContainer.react",["cx","FluxContainer","React","VideoComposerGameshowLightweightEditorContainer.react","VideoComposerGameshowLightweightSection.react","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getGameshowLightweightStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getGameshowLightweightStore(c.videoComposerID).getState();c=a.savedSelectedGameData;a=a.editingSavedGame;return{editingSavedGame:a,savedSelectedGameData:c}};var d=c.prototype;d.render=function(){return b("React").jsxs("div",{className:"_7-m3",children:[b("React").jsx(b("VideoComposerGameshowLightweightSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state)),b("React").jsx(b("VideoComposerGameshowLightweightEditorContainer.react"),{videoComposerID:this.props.videoComposerID})]})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerGameshowLightweightEditorContainer.react",["FluxContainer","React","VideoComposerGameshowLightweightEditor.react","VideoComposerSlidingDrawer.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getGameshowLightweightStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=a.actorID;c=b("VideoComposerStores").getGameshowLightweightStore(c.videoComposerID).getState();var d=c.showEditor,e=c.availableGames,f=c.draftSelectedGameID,g=c.draftSelectedGameData,h=c.enteredTimestampStringsMap;c=c.timestampErrorsMap;return{showEditor:d,availableGames:e,draftSelectedGameID:f,draftSelectedGameData:g,enteredTimestampStringsMap:h,timestampErrorsMap:c,pageID:a}};var d=c.prototype;d.render=function(){return!this.state.showEditor?null:b("React").jsx(b("VideoComposerSlidingDrawer.react"),{children:b("React").jsx(b("VideoComposerGameshowLightweightEditor.react"),{videoComposerID:this.props.videoComposerID,availableGames:this.state.availableGames,draftSelectedGameID:this.state.draftSelectedGameID,draftSelectedGameData:this.state.draftSelectedGameData,enteredTimestampStringsMap:this.state.enteredTimestampStringsMap,pageID:this.state.pageID,timestampErrorsMap:this.state.timestampErrorsMap})})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerGameshowLightweightRemoveGameConfirmationDialogContainer.react",["fbt","FluxContainer","React","VideoComposerGameshowLightweightActions","VideoComposerGenericConfirmationDialog.react","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("VideoComposerGameshowLightweightActions").confirmRemoveGame(d.props.videoComposerID)},d.$2=function(){b("VideoComposerGameshowLightweightActions").cancelRemoveGame(d.props.videoComposerID)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getGameshowLightweightStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getGameshowLightweightStore(c.videoComposerID).getState();c=a.showRemoveGameConfirmationDialog;return{isShown:c}};var d=c.prototype;d.render=function(){var a=g._("G\u1ee1 tr\u00f2 ch\u01a1i \u0111\u00ednh k\u00e8m?"),c=g._("B\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 h\u1ee7y sau khi thao t\u00e1c.");return b("React").jsx(b("VideoComposerGenericConfirmationDialog.react"),{isShown:this.state.isShown,title:a,message:c,confirmOnClick:this.$1,cancelOnClick:this.$2})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerGameshowLightweightTabContainer.react",["FluxContainer","React","VideoComposerGameshowLightweightTabConfig","VideoComposerStores","VideoComposerTabItemContainer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getUIStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();c=a.selectedTab;return{isSelected:c==="gameshow_lightweight"}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTabItemContainer.react"),{videoComposerID:this.props.videoComposerID,disabled:!1,isSelected:this.state.isSelected,tabConfig:b("VideoComposerGameshowLightweightTabConfig")})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerInteractivityDeletePollAttemptDialogContainer.react",["fbt","FluxContainer","React","VideoComposerGenericConfirmationDialog.react","VideoComposerPollsActions","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();var d=a.deleteAttemptPollID;a=a.persistedPolls;var e=d!==null;a=a.findIndex(function(a){return a.id===d})!==-1;var f=g._("X\u00f3a cu\u1ed9c th\u0103m d\u00f2 \u00fd ki\u1ebfn n\u00e0y?");a=a?g._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a cu\u1ed9c th\u0103m d\u00f2 \u00fd ki\u1ebfn n\u00e0y kh\u00f4ng? Cu\u1ed9c th\u0103m d\u00f2 s\u1ebd kh\u00f4ng xu\u1ea5t hi\u1ec7n tr\u00ean video c\u1ee7a b\u1ea1n n\u1eefa v\u00e0 b\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 nh\u00ecn th\u1ea5y k\u1ebft qu\u1ea3 th\u0103m d\u00f2 n\u1eefa."):g._("B\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 ho\u00e0n t\u00e1c h\u00e0nh \u0111\u1ed9ng n\u00e0y.");return{isShown:e,title:f,message:a,confirmButtonLabel:g._("X\u00f3a"),confirmOnClick:function(){return b("VideoComposerPollsActions").deletePollConfirm(c.videoComposerID)},cancelOnClick:function(){return b("VideoComposerPollsActions").deleteInteractionCancel(c.videoComposerID)}}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerGenericConfirmationDialog.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerInteractivityDeleteSliderAttemptDialogContainer.react",["fbt","FluxContainer","React","VideoComposerGenericConfirmationDialog.react","VideoComposerPollsActions","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();a=a.deleteAttemptSliderID;var d=g._("X\u00f3a thanh tr\u01b0\u1ee3t n\u00e0y?"),e=g._("B\u1ea1n s\u1ebd kh\u00f4ng th\u1ec3 kh\u00f4i ph\u1ee5c thanh tr\u01b0\u1ee3t sau khi x\u00f3a.");return{isShown:a!==null,title:d,message:e,confirmButtonLabel:g._("X\u00f3a"),confirmOnClick:function(){return b("VideoComposerPollsActions").deleteSliderConfirm(c.videoComposerID)},cancelOnClick:function(){return b("VideoComposerPollsActions").deleteInteractionCancel(c.videoComposerID)}}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerGenericConfirmationDialog.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerInteractivityOpenFormSectionConfirmationDialogContainer.react",["fbt","FluxContainer","React","VideoComposerGenericConfirmationDialog.react","VideoComposerPollsActions","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("M\u1ecdi thay \u0111\u1ed5i trong cu\u1ed9c th\u0103m d\u00f2 \u00fd ki\u1ebfn c\u1ee7a b\u1ea1n s\u1ebd kh\u00f4ng \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i."),i=g._("M\u1ecdi thay \u0111\u1ed5i tr\u00ean thanh tr\u01b0\u1ee3t s\u1ebd kh\u00f4ng \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i.");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();var d=a.showOpenPollsFormSectionConfirmationDialog;a=a.showOpenSlidersFormSectionConfirmationDialog;a=d||a;var e=g._("B\u1ecf thay \u0111\u1ed5i ch\u01b0a l\u01b0u?"),f=d?i:h,j=d?function(){return b("VideoComposerPollsActions").openPollsFormSectionConfirm(c.videoComposerID)}:function(){return b("VideoComposerPollsActions").openSlidersFormSectionConfirm(c.videoComposerID)};d=d?function(){return b("VideoComposerPollsActions").openPollsFormSectionCancel(c.videoComposerID)}:function(){return b("VideoComposerPollsActions").openSlidersFormSectionCancel(c.videoComposerID)};return{isShown:a,title:e,message:f,confirmOnClick:j,cancelOnClick:d}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerGenericConfirmationDialog.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsCancelConfirmDialogContainer.react",["fbt","FluxContainer","React","VideoComposerGenericConfirmationDialog.react","VideoComposerPollsActions","VideoComposerPollsTypes","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VideoComposerPollsTypes").EditorState;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();var d=a.showCancelConfirmDialog,e=a.showCloseEditorConfirmDialog;a=a.editorState;a=a===h.ADDING_NEW_SLIDER||a===h.EDITING_SLIDER;var f=a?"Slider":"Poll",i=g._({"Poll":"Tho\u00e1t kh\u1ecfi cu\u1ed9c th\u0103m d\u00f2 \u00fd ki\u1ebfn m\u00e0 kh\u00f4ng l\u01b0u?","Slider":"Tho\u00e1t kh\u1ecfi thanh tr\u01b0\u1ee3t m\u00e0 kh\u00f4ng l\u01b0u?"},[g._enum(f,{Poll:"Poll",Slider:"Slider"})]);f=a?"slider":"poll";a=g._({"poll":"N\u1ebfu b\u1ea1n tho\u00e1t th\u00ec s\u1ebd kh\u00f4ng l\u01b0u \u0111\u01b0\u1ee3c m\u1ecdi thay \u0111\u1ed5i v\u1ec1 cu\u1ed9c th\u0103m d\u00f2 \u00fd ki\u1ebfn.","slider":"N\u1ebfu b\u1ea1n tho\u00e1t th\u00ec s\u1ebd kh\u00f4ng l\u01b0u \u0111\u01b0\u1ee3c m\u1ecdi thay \u0111\u1ed5i tr\u00ean thanh tr\u01b0\u1ee3t."},[g._enum(f,{poll:"poll",slider:"slider"})]);f=d?function(){return b("VideoComposerPollsActions").cancelChangesAbandon(c.videoComposerID)}:function(){return b("VideoComposerPollsActions").closeEditorAbandon(c.videoComposerID)};var j=d?function(){return b("VideoComposerPollsActions").cancelChangesConfirm(c.videoComposerID)}:function(){return b("VideoComposerPollsActions").closeEditorConfirm(c.videoComposerID)};return{isShown:d||e,title:i,message:a,cancelOnClick:f,confirmOnClick:j}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerGenericConfirmationDialog.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsContainer.react",["cx","FluxContainer","React","VideoComposerPollsEditorContainer.react","VideoComposerPollsSection.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();var d=a.polls,e=a.sliders,f=a.isLiveVideo,g=a.enableWasLiveVoting;a=a.showWasLiveVotingToggle;var h=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState(),i=h.videoDuration,j=h.videoID;h=h.actorID;c=!b("VideoComposerStores").getPollsStore(c.videoComposerID).isSufficientTimeSpanForPoll(b("VideoComposerStores").getPollsStore(c.videoComposerID).getNonAdBreakPolls(d),i)||f;return{polls:d,sliders:e,shouldHideAddPollButton:c,videoID:j,actorID:h,isLiveVideo:f,enableWasLiveVoting:g,showWasLiveVotingToggle:a}};var d=c.prototype;d.render=function(){return b("React").jsxs("div",{className:"_4r6q",children:[b("React").jsx(b("VideoComposerPollsSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state)),b("React").jsx(b("VideoComposerPollsEditorContainer.react"),{videoComposerID:this.props.videoComposerID})]})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsEditAttemptDialogContainer.react",["FluxContainer","React","VideoComposerPollsEditAttemptDialog.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();var d=a.showEditAttemptDialog;a=a.polls;a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getNonAdBreakPolls(a);return{showEditAttemptDialog:d,showSaveButton:!b("VideoComposerStores").getPollsStore(c.videoComposerID).hasValidationErrors(a)}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerPollsEditAttemptDialog.react"),{videoComposerID:this.props.videoComposerID,isShown:this.state.showEditAttemptDialog,showSaveButton:this.state.showSaveButton})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsEditorContainer.react",["FluxContainer","React","VideoComposerPollsEditor.react","VideoComposerSlidingDrawer.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();c=a.showEditor;return{showEditor:c}};var d=c.prototype;d.render=function(){return this.state.showEditor?b("React").jsx(b("VideoComposerSlidingDrawer.react"),{children:b("React").jsx(b("VideoComposerPollsEditor.react"),{videoComposerID:this.props.videoComposerID})}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsLeftSectionContainer.react",["FluxContainer","React","VideoComposerPollsLeftSection.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();c=a.draftPoll;a=a.polls;return{draftPoll:c,polls:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerPollsLeftSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsPlacementVisualizerContainer.react",["FluxContainer","React","VideoComposerPollsVisualizer.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getMetadataStore(a.videoComposerID),c.getPollsStore(a.videoComposerID),c.getThumbnailsStore(a.videoComposerID),c.getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();var d=(a=b("VideoComposerStores")).getMetadataStore(c.videoComposerID).getState();d=d.videoDuration;var e=a.getThumbnailsStore(c.videoComposerID).getState();e=e.originalOrderThumbnails;var f=a.getPollsStore(c.videoComposerID).getState(),g=f.draftPoll,h=f.editorState;f=f.polls;a=a.getTrimmingEditorStore(c.videoComposerID).getState();var i=a.endTime;a=a.startTime;i=i||d||0;a=a||0;return{draftPoll:g,endTime:i,editorState:h,polls:b("VideoComposerStores").getPollsStore(c.videoComposerID).getNonAdBreakPolls(f),startTime:a,thumbnailURLs:e.map(function(a){return a.getURL()}),videoDuration:d||0}};var d=c.prototype;d.render=function(){return this.state.draftPoll.isAdBreakPoll?null:b("React").jsx(b("VideoComposerPollsVisualizer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsRightSectionContainer.react",["FluxContainer","React","VideoComposerDialogAdBreaksTabUtils","VideoComposerPollsRightSection.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getPollsStore(a.videoComposerID),c.getMetadataStore(a.videoComposerID),c.getAdBreakStore(a.videoComposerID),c.getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();var d=(a=b("VideoComposerStores")).getPollsStore(c.videoComposerID).getState(),e=d.draftPoll,f=d.editorState,g=d.polls,h=d.isAdBreaksPollCreationEnabled,i=d.isImageAttachmentEnabled,j=d.isLiveVideo,k=d.canSeeSlidersSection,l=d.sliders;d=d.draftSlider;var m=a.getMetadataStore(c.videoComposerID).getState(),n=m.videoID;m=m.actorID;var o=a.getMetadataStore(c.videoComposerID).getVideoPreviewTimeData();o=o.videoDuration;var p=a.getAdBreakStore(c.videoComposerID).getState(),q=p.hasGapRule,r=p.insertedAdBreaks,s=p.isAdBreakComposerOnboardingEligible,t=p.adBreaksOnboardingSurface,u=p.isBrandedContentVideo,v=p.isPageOnboardingVisible,w=p.serverSideDisabledReasons,x=p.isAdBreakAutoInsertionEnabled,y=p.adBreaksDisabled,z=p.isShorterContentMonetizationEligible;p=p.shouldUseImageAds;a=a.getTrimmingEditorStore(c.videoComposerID).isVideoTrimmed();v=b("VideoComposerDialogAdBreaksTabUtils").getTabState(v,w.toArray(),r.toArray(),o,u,q,x,y,s,t,a,z,p);w=v.disabled===!0;r=h&&!w;u=!b("VideoComposerStores").getPollsStore(c.videoComposerID).isSufficientTimeSpanForPoll(b("VideoComposerStores").getPollsStore(c.videoComposerID).getNonAdBreakPolls(g),o)||j;return{draftPoll:e,editorState:f,polls:g,videoDuration:o,shouldHideAddPollButton:u,actorID:m,videoID:n,isAdBreaksPollCreationEnabled:r,isImageAttachmentEnabled:i,isLiveVideo:j,canSeeSlidersSection:k,sliders:l,draftSlider:d}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerPollsRightSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerPollsTabContainer.react",["fbt","FluxContainer","React","VideoComposerPollsConstants","VideoComposerPollsTabConfig","VideoComposerStores","VideoComposerTabItemContainer.react","VideoPollsTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){new(b("VideoPollsTypedLogger"))().setEvent("vod_composer_polls_tab_clicked").setOwnerID(d.state.actorID).setVideoID(d.state.videoID).log()},d.$2=function(a){a==="polls"&&new(b("VideoPollsTypedLogger"))().setEvent("vod_composer_polls_tab_item_rendered").setOwnerID(d.state.actorID).setVideoID(d.state.videoID).log()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getUIStore(a.videoComposerID),c.getMetadataStore(a.videoComposerID),c.getTrimmingEditorStore(a.videoComposerID),c.getSphericalDirectorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();a=a.selectedTab;var d=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState(),e=d.actorID;d=d.videoID;var f=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getTrimmedVideoDuration(),h=!1,i=null;f<b("VideoComposerPollsConstants").MIN_POLL_DURATION?(h=!0,i=g._("Video ph\u1ea3i d\u00e0i t\u1ed1i thi\u1ec3u {number of seconds}. Kh\u00f4ng th\u1ec3 \u0111\u01b0a cu\u1ed9c th\u0103m d\u00f2 \u00fd ki\u1ebfn v\u00e0o v\u00ec video c\u1ee7a b\u1ea1n qu\u00e1 ng\u1eafn.",[g._param("number of seconds",b("VideoComposerPollsConstants").MIN_POLL_DURATION)])):b("VideoComposerStores").getSphericalDirectorStore(c.videoComposerID).getState().spherical&&(h=!0,i=g._("Kh\u00f4ng th\u1ec3 th\u0103m d\u00f2 \u00fd ki\u1ebfn trong video 360 n\u1eefa."));return{isDisabled:h,isSelected:a==="polls",disabledReason:i,actorID:e,videoID:d}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTabItemContainer.react"),{videoComposerID:this.props.videoComposerID,disabled:this.state.isDisabled,isSelected:this.state.isSelected,tabConfig:b("VideoComposerPollsTabConfig"),tooltip:this.state.disabledReason,onTabClick:this.$1,onTabRender:this.$2})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsCancelConfirmDialogContainer.react",["FluxContainer","React","VideoComposerQuestionsActions","VideoComposerQuestionsCancelConfirmDialog.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getQuestionsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getQuestionsStore(c.videoComposerID).getState();c=a.showCancelConfirmDialog;a=a.showCloseEditorConfirmDialog;var d=c?b("VideoComposerQuestionsActions").cancelChangesAbandon:b("VideoComposerQuestionsActions").closeEditorAbandon,e=c?b("VideoComposerQuestionsActions").cancelChangesConfirm:b("VideoComposerQuestionsActions").closeEditorConfirm;return{shown:c||a,onCancel:d,onConfirm:e}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerQuestionsCancelConfirmDialog.react"),{videoComposerID:this.props.videoComposerID,shown:this.state.shown,onCancel:this.state.onCancel,onConfirm:this.state.onConfirm})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsContainer.react",["cx","fbt","FDSButton.react","FluxContainer","React","VideoComposerQuestionsActions","VideoComposerQuestionsEditorContainer.react","VideoComposerQuestionsListView.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getQuestionsStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=a.dialogMode;c=b("VideoComposerStores").getQuestionsStore(c.videoComposerID).getState();c=c.questions;return{questions:c,shouldShowQuestions:a==="video_upload"}};var d=c.prototype;d.$1=function(){b("VideoComposerQuestionsActions").addNew(this.props.videoComposerID)};d.render=function(){var a=this;return!this.state.shouldShowQuestions?null:b("React").jsxs("div",{className:"_4r6q",children:[this.state.questions.size===0?b("React").jsx(b("FDSButton.react"),{label:h._("Create Question"),onClick:function(){return a.$1()},size:"large",use:"primary"}):b("React").jsx("div",{className:"_1yck",children:b("React").jsx(b("VideoComposerQuestionsListView.react"),{videoComposerID:this.props.videoComposerID,questions:this.state.questions,showFooter:!1})}),b("React").jsx(b("VideoComposerQuestionsEditorContainer.react"),{videoComposerID:this.props.videoComposerID})]})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsEditorContainer.react",["FluxContainer","React","VideoComposerQuestionsEditor.react","VideoComposerSlidingDrawer.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getQuestionsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getQuestionsStore(c.videoComposerID).getState();c=a.showEditor;return{showEditor:c}};var d=c.prototype;d.render=function(){return this.state.showEditor?b("React").jsx(b("VideoComposerSlidingDrawer.react"),{children:b("React").jsx(b("VideoComposerQuestionsEditor.react"),{videoComposerID:this.props.videoComposerID})}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsLeftSectionContainer.react",["FluxContainer","React","VideoComposerQuestionsLeftSection.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getQuestionsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getQuestionsStore(c.videoComposerID).getState();c=a.isAddingNewQuestion;return{isAddingNewQuestion:c}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerQuestionsLeftSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsPlacementVisualizerContainer.react",["FluxContainer","React","VideoComposerQuestionsVisualizer.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getMetadataStore(a.videoComposerID),c.getQuestionsStore(a.videoComposerID),c.getThumbnailsStore(a.videoComposerID),c.getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();var d=(a=b("VideoComposerStores")).getMetadataStore(c.videoComposerID).getState();d=d.videoDuration;var e=a.getThumbnailsStore(c.videoComposerID).getState();e=e.originalOrderThumbnails;var f=a.getQuestionsStore(c.videoComposerID).getState(),g=f.draftQuestion,h=f.isAddingNewQuestion,i=f.isEditingQuestion;f=f.questions;a=a.getTrimmingEditorStore(c.videoComposerID).getState();c=a.endTime;a=a.startTime;c=c||d||0;a=a||0;return{draftQuestion:g,endTime:c,isAddingNewQuestion:h,isEditingQuestion:i,questions:f,startTime:a,thumbnailURLs:e.map(function(a){return a.getURL()}),videoDuration:d||0}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerQuestionsVisualizer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsRightSectionContainer.react",["FluxContainer","React","VideoComposerQuestionsRightSection.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getQuestionsStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getQuestionsStore(c.videoComposerID).getState();var d=a.draftQuestion,e=a.isAddingNewQuestion,f=a.isEditingQuestion;a=a.questions;c=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();c=c.videoDuration;return{questions:a,draftQuestion:d,videoDuration:c,isAddingNewQuestion:e,isEditingQuestion:f}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerQuestionsRightSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerQuestionsTabContainer.react",["fbt","FluxContainer","React","VideoComposerQuestionsConstants","VideoComposerQuestionsTabConfig","VideoComposerStores","VideoComposerTabItemContainer.react","VideoTextQuestionTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){new(b("VideoTextQuestionTypedLogger"))().setEvent("vod_composer_questions_tab_clicked").setVideoID(d.state.videoID).log()},d.$2=function(a){a==="questions"&&new(b("VideoTextQuestionTypedLogger"))().setEvent("vod_composer_questions_tab_item_rendered").setVideoID(d.state.videoID).log()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getUIStore(a.videoComposerID),b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();a=a.selectedTab;var d=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();d=d.videoID;c=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getTrimmedVideoDuration();var e=!1,f=null;c<b("VideoComposerQuestionsConstants").MIN_QUESTION_DURATION&&(e=!0,f=g._("Video ph\u1ea3i d\u00e0i t\u1ed1i thi\u1ec3u {number of seconds}. Kh\u00f4ng th\u1ec3 \u0111\u01b0a c\u00e2u h\u1ecfi v\u00e0o v\u00ec video c\u1ee7a b\u1ea1n qu\u00e1 ng\u1eafn.",[g._param("number of seconds",b("VideoComposerQuestionsConstants").MIN_QUESTION_DURATION)]));return{isDisabled:e,isSelected:a==="questions",disabledReason:f,videoID:d}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTabItemContainer.react"),{videoComposerID:this.props.videoComposerID,disabled:this.state.isDisabled,isSelected:this.state.isSelected,tabConfig:b("VideoComposerQuestionsTabConfig"),tooltip:this.state.disabledReason,onTabClick:this.$1,onTabRender:this.$2})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerRightsContainer.react",["FluxContainer","React","VideoComposerRightsSection.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getRightsStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getRightsStore(c.videoComposerID).getState();var d=a.attributionID,e=a.category,f=a.fbWhitelistedUsers,g=a.igWhitelistedUsers,h=a.isIgRightsManagementEnabled,i=a.matchRuleID,j=a.monitoringType,k=a.ownershipCountries,l=a.areCountriesIncluded,m=a.shouldDetectMatches,n=a.showAttributionSelector,o=a.showCategoryRequiredError;a=a.rmVersion;c=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();var p=c.accessToken;c=c.targetID;return{accessToken:p,areCountriesIncluded:l,attributionID:d,category:e,fbWhitelistedUsers:f,igWhitelistedUsers:g,isIgRightsManagementEnabled:h,matchRuleID:i,monitoringType:j,ownershipCountries:k,shouldDetectMatches:m,showAttributionSelector:n,showCategoryRequiredError:o,targetID:c?c:"",rmVersion:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerRightsSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerRightsTabContainer.react",["FluxContainer","React","VideoComposerRightsTabConfig","VideoComposerStores","VideoComposerTabItemContainer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getUIStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();c=a.selectedTab;return{isSelected:c==="rights"}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTabItemContainer.react"),{videoComposerID:this.props.videoComposerID,isSelected:this.state.isSelected,tabConfig:b("VideoComposerRightsTabConfig")})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorAudioPlayerContainer.react",["FluxContainer","React","VideoComposerSoundEditorAudioPlayer.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorSoundCollectionStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorSoundCollectionStore(c.videoComposerID).getState();c=a.isPlaying;a=a.playTrack;return{isPlaying:c,playTrack:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSoundEditorAudioPlayer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorCancelChangeConfirmDialogContainer.react",["FluxContainer","React","VideoComposerSoundEditorActions","VideoComposerSoundEditorCancelChangeConfirmDialog.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("VideoComposerSoundEditorActions").cancelCloseSoundEditor(d.props.videoComposerID)},d.$2=function(){b("VideoComposerSoundEditorActions").confirmCloseSoundEditor(d.props.videoComposerID)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorStore(c.videoComposerID).getState();c=a.showCancelConfirmDialog;return{shown:c}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSoundEditorCancelChangeConfirmDialog.react"),{shown:this.state.shown,onCancel:this.$1,onConfirm:this.$2})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorContainer.react",["FluxContainer","React","VideoComposerSlidingDrawer.react","VideoComposerSoundEditor.react","VideoComposerSoundEditorCancelChangeConfirmDialogContainer.react","VideoComposerSoundEditorTrackSelector.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorStore(c.videoComposerID).getState();c=a.showEditor;a=a.showTrackSelector;return{showEditor:c,showTrackSelector:a}};var d=c.prototype;d.render=function(){var a=this.state.showTrackSelector?b("React").jsx(b("VideoComposerSoundEditorTrackSelector.react"),{videoComposerID:this.props.videoComposerID}):b("React").jsx(b("VideoComposerSoundEditor.react"),{videoComposerID:this.props.videoComposerID});return this.state.showEditor?b("React").jsxs(b("VideoComposerSlidingDrawer.react"),{children:[a,b("React").jsx(b("VideoComposerSoundEditorCancelChangeConfirmDialogContainer.react"),{videoComposerID:this.props.videoComposerID})]}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorScrubberContainer.react",["cx","DateConsts","FluxContainer","React","VideoComposerDragAndDropScrubber.react","VideoComposerDragAndDropScrubberTypes","VideoComposerSoundEditorActions","VideoComposerSoundEditorConstants","VideoComposerSoundEditorUtils","VideoComposerStores","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VideoComposerDragAndDropScrubberTypes").VideoComposerDragAndDropScrubberActionTypes;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){b("VideoComposerSoundEditorActions").registerScrubber(d.props.videoComposerID,a)},d.$3=function(a,c,e){b("VideoComposerSoundEditorActions").addTrackToScrubber(d.props.videoComposerID,a,c,Math.min(c+e,d.state.durationInMs||0));c=b("VideoComposerStores").getSoundEditorStore(d.props.videoComposerID).getEditingTrackData();c&&b("VideoComposerSoundEditorActions").addNestingTrackItemToSelectedList(d.props.videoComposerID,a,c)},d.$4=function(a){var c=d.state.addedTracks.get(a);b("VideoComposerSoundEditorActions").deleteAddedTrack(d.props.videoComposerID,a,c.sourceId,c.id)},d.$5=function(a,c,e,f){var g=d.state.addedTracks.get(c);b("VideoComposerSoundEditorActions").updateAddedTrack(d.props.videoComposerID,a,c,e,f);if(a===h.MOVE){c=g.sourceId;b("VideoComposerSoundEditorActions").updateSelectedTrackNestingItemOrder(d.props.videoComposerID,c)}},d.$6=function(a){b("VideoComposerSoundEditorActions").editAddedTrack(d.props.videoComposerID,d.state.addedTracks.get(a))},d.$1=function(a,c){a=d.state.selectedTracks.get(a);var e=a.nestingItems.valueSeq().findIndex(function(a){return a.id===c});return b("VideoComposerSoundEditorUtils").getTrackOrderLabel(a.orderNumber,e+1)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getMetadataStore(a.videoComposerID),c.getSoundEditorStore(a.videoComposerID),c.getSoundEditorSoundCollectionStore(a.videoComposerID),c.getThumbnailsStore(a.videoComposerID)]};c.calculateState=function(a,c){var d=(a=b("VideoComposerStores")).getMetadataStore(c.videoComposerID).getVideoPreviewTimeData(),e=d.videoDuration,f=d.videoEndTime;d=d.videoStartTime;var g=a.getSoundEditorStore(c.videoComposerID).getState(),h=g.draftAddedTracks;g=g.videoPlayerController;var i=a.getSoundEditorSoundCollectionStore(c.videoComposerID).getState();i=i.selectedTracks;a=a.getThumbnailsStore(c.videoComposerID).getState();c=a.videoPlayer;return{addedTracks:h,durationInMs:e?e*b("DateConsts").MS_PER_SEC:null,endTimeInMs:f?f*b("DateConsts").MS_PER_SEC:0,startTimeInMs:d*b("DateConsts").MS_PER_SEC,selectedTracks:i,videoPlayer:c,videoPlayerController:g}};var d=c.prototype;d.render=function(){return this.state.durationInMs!=null||this.state.durationInMs===0?b("React").jsx("div",{className:"_6f_s",style:{width:b("VideoComposerSoundEditorConstants").PLAYER_WIDTH+"px"},children:b("React").jsx(b("VideoComposerDragAndDropScrubber.react"),{durationInMs:this.state.durationInMs,endTimeInMs:this.state.endTimeInMs,items:this.state.addedTracks,startTimeInMs:this.state.startTimeInMs,videoPlayer:this.state.videoPlayer,vpc:this.state.videoPlayerController,getItemOrderLabel:this.$1,onRegisterScrubber:this.$2,onAddItem:this.$3,onDeleteItem:this.$4,onUpdateItem:this.$5,onSelectItem:this.$6})}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorSelectedTrackListContainer.react",["FluxContainer","React","VideoComposerSoundEditorTrackList.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorSoundCollectionStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorSoundCollectionStore(c.videoComposerID).getState();c=a.playTrack;a=a.selectedTracks;return{playTrack:c,selectedTracks:a.toArray()}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSoundEditorTrackList.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID,isDraggable:!0,isPlaying:!1},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorSoundCollectionContainer.react",["FluxContainer","React","VideoComposerSoundEditorSoundCollection.react","VideoComposerStores","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorSoundCollectionStore(a.videoComposerID)]};c.calculateState=function(a,c){return b("VideoComposerStores").getSoundEditorSoundCollectionStore(c.videoComposerID).getState().toJS()};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSoundEditorSoundCollection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorTrackListItemEditorContainer.react",["DateConsts","FluxContainer","React","VideoComposerSoundEditorActions","VideoComposerSoundEditorTrackListItemEditor.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c,e){var f=d.state,g=f.trackData;f=f.trackIndex;if(!g||!f&&f!==0)return;b("VideoComposerSoundEditorActions").updateAddedTrack(d.props.videoComposerID,a,f,c,e)},d.$2=function(a,c){var e=d.state,f=e.trackData;e=e.trackIndex;if(!f||!e&&e!==0)return;b("VideoComposerSoundEditorActions").updateAddedTrackVolume(d.props.videoComposerID,a,e,c)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getSoundEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorStore(c.videoComposerID).getState();a=a.editingTrackData;var d=a?b("VideoComposerStores").getSoundEditorStore(c.videoComposerID).getAddedTrackIndexById(a.id):null;c=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getVideoPreviewTimeData();c=c.videoDuration;return{videoDurationInMs:c?c*b("DateConsts").MS_PER_SEC:0,trackData:a,trackDataLastModifiedTimestamp:a?a.lastModifiedTimestamp:null,trackIndex:d}};var d=c.prototype;d.render=function(){var a=this.state,c=a.trackData;a=a.videoDurationInMs;var d=this.props,e=d.trackDataId;d=d.trackResultId;return!c||c.sourceId!==d||e!=c.id?null:b("React").jsx("div",{children:b("React").jsx(b("VideoComposerSoundEditorTrackListItemEditor.react"),{lastModifiedTimestamp:this.state.trackDataLastModifiedTimestamp,trackData:c,videoDurationInMs:a,onUpdateItemTime:this.$1,onUpdateItemVolume:this.$2})})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorTrackSelectorAudioPlayerContainer.react",["FluxContainer","React","VideoComposerSoundEditorAudioPlayer.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorSoundCollectionStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorSoundCollectionStore(c.videoComposerID).getState();c=a.isPlaying;a=a.playTrack;return{isPlaying:c,playTrack:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSoundEditorAudioPlayer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorTrackSelectorTrackListContainer.react",["FluxContainer","React","VideoComposerSoundEditorTrackList.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorSoundCollectionStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorSoundCollectionStore(c.videoComposerID).getState();c=a.isPlaying;var d=a.playTrack;a=a.selectedTracks;return{isPlaying:c,playTrack:d,selectedTracks:a.toArray()}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSoundEditorTrackList.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorVideoPlayerContainer.react",["FluxContainer","React","VideoComposerSoundEditorConstants","VideoComposerSoundEditorVideoPlayer.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getUploadStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getVideoPreviewTimeData();var d=a.videoDuration,e=a.videoEndTime;a=a.videoStartTime;c=b("VideoComposerStores").getUploadStore(c.videoComposerID).getState();c=c.videoData;return{videoData:c,videoDuration:d,videoEndTime:e,videoStartTime:a}};var d=c.prototype;d.render=function(){var a=this.state.videoData;return a?b("React").jsx(b("VideoComposerSoundEditorVideoPlayer.react"),{videoComposerID:this.props.videoComposerID,height:b("VideoComposerSoundEditorConstants").PLAYER_HEIGHT,width:b("VideoComposerSoundEditorConstants").PLAYER_WIDTH,videoData:a,videoDuration:this.state.videoDuration,videoEndTime:this.state.videoEndTime,videoStartTime:this.state.videoStartTime}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSoundEditorVideoVolumeEditorContainer.react",["FluxContainer","React","VideoComposerSoundEditorVideoVolumeEditor.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getSoundEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getSoundEditorStore(c.videoComposerID).getState();c=a.showVideoVolumeEditor;a=a.videoVolume;return{showVideoVolumeEditor:c,videoVolume:a}};var d=c.prototype;d.render=function(){return this.state.videoVolume==null||this.state.videoVolume===0?null:b("React").jsx(b("VideoComposerSoundEditorVideoVolumeEditor.react"),{videoComposerID:this.props.videoComposerID,showEditor:this.state.showVideoVolumeEditor,videoVolume:Number(this.state.videoVolume)})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSphericalDirectorContainer.react",["FluxContainer","FunnelLogger","React","SphericalDirectorFunnelConstants","VideoComposerSphericalDirectorActions","VideoComposerSphericalDirectorSection.react","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("VideoComposerSphericalDirectorActions").toggleSpherical(d.props.videoComposerID,a),b("FunnelLogger").appendActionWithTag(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.TOGGLE_360_MODE_COMPOSER,a?"true":"false")},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getSphericalDirectorStore(a.videoComposerID),c.getUploadStore(a.videoComposerID),c.getMetadataStore(a.videoComposerID),c.getPremiereStore(a.videoComposerID)]};c.calculateState=function(a,c){var d=(a=b("VideoComposerStores")).getSphericalDirectorStore(c.videoComposerID).getState(),e=d.contextConfig,f=d.showOmnistabSection;d=d.spherical;var g=a.getUploadStore(c.videoComposerID).getState();g=g.videoFile;var h=a.getMetadataStore(c.videoComposerID).getState(),i=h.dialogMode,j=h.videoAssetID;h=h.videoID;return{contextConfig:e,dialogMode:i,spherical:d,shouldPremiere:a.getPremiereStore(c.videoComposerID).getState().shouldPremiere,showOmnistabSection:f,videoAssetID:j,videoFile:g,videoID:h}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerSphericalDirectorSection.react"),{videoComposerID:this.props.videoComposerID,contextConfig:this.state.contextConfig,dialogMode:this.state.dialogMode,ontoggleSpherical:this.$1,shouldPremiere:this.state.shouldPremiere,showOmnistabSection:this.state.showOmnistabSection,spherical:this.state.spherical,videoAssetID:this.state.videoAssetID,videoFile:this.state.videoFile,videoID:this.state.videoID})};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerSphericalDirectorTabContainer.react",["fbt","FluxContainer","React","VideoComposerSphericalDirectorTabConfig","VideoComposerStores","VideoComposerTabItemContainer.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getUIStore(a.videoComposerID),c.getPremiereStore(a.videoComposerID),c.getTrimmingEditorStore(a.videoComposerID),c.getPollsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();a=a.selectedTab;var d=!1,e=null;b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).isVideoTrimmed()?(d=!0,e=g._("Kh\u00f4ng th\u1ec3 d\u00f9ng C\u00f4ng c\u1ee5 tr\u00ecnh \u0111i\u1ec1u khi\u1ec3n 360 trong video \u0111\u00e3 c\u1eaft.")):b("VideoComposerStores").getPremiereStore(c.videoComposerID).getState().shouldPremiere?(d=!0,e=g._("\u0110\u00e3 t\u1eaft c\u00f4ng c\u1ee5 Tr\u00ecnh \u0111i\u1ec1u khi\u1ec3n 360 cho c\u00e1c t\u00f9y ch\u1ecdn \u0111\u0103ng video hi\u1ec7n t\u1ea1i")):b("VideoComposerStores").getPollsStore(c.videoComposerID).getState().polls.size!==0&&(d=!0,e=g._("Kh\u00f4ng th\u1ec3 th\u0103m d\u00f2 \u00fd ki\u1ebfn trong video 360 n\u1eefa."));return{disabledReason:e,isDisabled:d,isSelected:a==="spherical_director"}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTabItemContainer.react"),{videoComposerID:this.props.videoComposerID,disabled:this.state.isDisabled,isSelected:this.state.isSelected,tabConfig:b("VideoComposerSphericalDirectorTabConfig"),tooltip:this.state.disabledReason})};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerThumbnailEditorContainer.react",["cx","FDSCloseButton.react","FluxContainer","React","VideoComposerSlidingDrawer.react","VideoComposerStores","VideoComposerThumbnailActions","VideoComposerThumbnailEditor.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("VideoComposerThumbnailActions").cancelThumbnailEditor(d.props.videoComposerID)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getThumbnailsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getThumbnailsStore(c.videoComposerID).getState();c=a.showEditor;return{showEditor:c}};var d=c.prototype;d.render=function(){return this.state.showEditor?b("React").jsxs(b("VideoComposerSlidingDrawer.react"),{children:[b("React").jsx("div",{className:"_6ek5",children:b("React").jsx(b("FDSCloseButton.react"),{onClick:this.$1,size:"large"})}),b("React").jsx(b("VideoComposerThumbnailEditor.react"),{videoComposerID:this.props.videoComposerID})]}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerThumbnailEditorLeftSectionContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerDialogThumbnailUtils","VideoComposerThumbnailEditorLeftSection.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getThumbnailsStore(a.videoComposerID),c.getMetadataStore(a.videoComposerID),c.getUploadStore(a.videoComposerID),c.getBasicStore(a.videoComposerID)]};c.calculateState=function(a,c){var d=(a=b("VideoComposerStores")).getThumbnailsStore(c.videoComposerID).getState(),e=d.backgroundSize,f=d.customThumbnail,g=d.generatedThumbnails,h=d.scrubbedThumbnail,i=d.selectedGeneratedIndex,j=d.selectedSection;d=d.videoMetadataUnavailable;var k=a.getUploadStore(c.videoComposerID).getState();k=k.videoData;var l=a.getMetadataStore(c.videoComposerID).getState(),m=l.actorID;l=l.dialogMode;a=a.getBasicStore(c.videoComposerID).getState();c=a.videoPreviewController;return{actorID:m?m:"",backgroundSize:e,customThumbnail:f,generatedThumbnails:g,scrubbedThumbnail:h,selectedGeneratedIndex:i,selectedSection:j,showScrubberSection:b("VideoComposerDialogThumbnailUtils").showScrubberSection(l),showGeneratedSection:b("VideoComposerDialogThumbnailUtils").showGeneratedSection(l),videoPreviewController:c,videoMetadataUnavailable:d,videoData:k}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerThumbnailEditorLeftSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerThumbnailEditorRightSectionContainer.react",["FluxContainer","React","VideoComposerDialogThumbnailUtils","VideoComposerStores","VideoComposerThumbnailEditorRightSection.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getThumbnailsStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=a.dialogMode;c=b("VideoComposerStores").getThumbnailsStore(c.videoComposerID).getState();c=c.videoMetadataUnavailable;return{showScrubberSection:b("VideoComposerDialogThumbnailUtils").showScrubberSection(a),videoMetadataUnavailable:c}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerThumbnailEditorRightSection.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerThumbnailsContainer.react",["FluxContainer","React","VideoComposerDialogThumbnailUtils","VideoComposerStores","VideoComposerThumbnailsSection.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getThumbnailsStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getUploadStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getThumbnailsStore(c.videoComposerID).getState();var d=a.backgroundSize,e=a.customThumbnail,f=a.generatedThumbnails,g=a.scrubbedThumbnail,h=a.selectedGeneratedIndex,i=a.selectedSection;a=a.videoMetadataUnavailable;var j=b("VideoComposerStores").getUploadStore(c.videoComposerID).getState();j=j.videoData;c=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();var k=c.actorID,l=c.dialogMode;c=c.videoDataForID;c=l==="video_upload"?j:c;l==="video_edit"&&j!=null&&(c=j);return{actorID:k?k:"",backgroundSize:d,customThumbnail:e,generatedThumbnails:f,scrubbedThumbnail:g,selectedGeneratedIndex:h,selectedSection:i,showScrubberSection:b("VideoComposerDialogThumbnailUtils").showScrubberSection(l),showGeneratedSection:b("VideoComposerDialogThumbnailUtils").showGeneratedSection(l),videoData:c,videoMetadataUnavailable:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerThumbnailsSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerThumbnailsTabContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTabItemContainer.react","VideoComposerThumbnailImage.react","VideoComposerThumbnailsTabConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=128,h=72;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getUIStore(a.videoComposerID),b("VideoComposerStores").getThumbnailsStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();a=a.selectedTab;c=b("VideoComposerStores").getThumbnailsStore(c.videoComposerID).getState();var d=c.backgroundSize,e=c.improvedThumbnailSelection;c=c.selectedThumbnail;return{backgroundSize:d,improvedThumbnailSelection:e,isSelected:a==="thumbnails",selectedThumbnail:c}};var d=c.prototype;d.render=function(){var a=this.state.selectedThumbnail;return this.state.improvedThumbnailSelection?null:b("React").jsx(b("VideoComposerTabItemContainer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID,customDescription:a?b("React").jsx(b("VideoComposerThumbnailImage.react"),{backgroundSize:this.state.backgroundSize,imageURL:a.getURL(),isSelected:!1,width:g,height:h}):null,tabConfig:b("VideoComposerThumbnailsTabConfig")},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrackingContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTrackingSection.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getTrackingStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getTrackingStore(c.videoComposerID).getState();var d=a.customLabels;a=a.universalID;c=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();c=c.targetID;return{customLabels:d,targetID:c?c:"",universalID:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTrackingSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrackingTabContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTabItemContainer.react","VideoComposerTrackingTabConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getUIStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();c=a.selectedTab;return{isSelected:c==="tracking"}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTabItemContainer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID,tabConfig:b("VideoComposerTrackingTabConfig")},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingButtonContainer.react",["FluxContainer","React","VideoComposerPublishingTypes","VideoComposerStores","VideoComposerTrimmingButton.react","VideoComposerTrimmingTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoComposerPublishingTypes").PublishingType,h=b("VideoComposerTrimmingTypes").TrimmingDisableReasons;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getAdBreakStore(a.videoComposerID),c.getCaptionsStore(a.videoComposerID),c.getPollsStore(a.videoComposerID),c.getSoundEditorStore(a.videoComposerID),c.getSphericalDirectorStore(a.videoComposerID),c.getPublishingStore(a.videoComposerID),c.getPremiereStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=[];var d=b("VideoComposerStores").getCaptionsStore(c.videoComposerID).getState();(!d.drafts.isEmpty()||d.isAutoGenerating)&&a.push(h.CAPTION);d=b("VideoComposerStores").getPollsStore(c.videoComposerID).getState();d.polls.isEmpty()||a.push(h.POLLS);d=b("VideoComposerStores").getAdBreakStore(c.videoComposerID).getState();d.insertedAdBreaks.isEmpty()||a.push(h.ADBREAKS);d=b("VideoComposerStores").getSoundEditorStore(c.videoComposerID).getState();d.addedTracks.isEmpty()||a.push(h.SOUND_OVERLAY);d=b("VideoComposerStores").getSphericalDirectorStore(c.videoComposerID).getState();d=d.spherical;d&&a.push(h.SPHERICAL_DIRECTOR);d=b("VideoComposerStores").getPublishingStore(c.videoComposerID).getState();d=d.publishingType;c=b("VideoComposerStores").getPremiereStore(c.videoComposerID).getState();c=c.shouldPremiere;(d===g.PREMIERE||c)&&a.push(h.PREMIERE);return{disableReasons:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTrimmingButton.react"),{videoComposerID:this.props.videoComposerID,disableReasons:this.state.disableReasons,isMenuItem:this.props.isMenuItem})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingCancelConfirmDialogContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTrimmingActions","VideoComposerTrimmingCancelConfirmDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getState();a=a.showCancelConfirmDialog;var d=function(){b("VideoComposerTrimmingActions").cancelCloseTrimmingEditor(c.videoComposerID)},e=function(){b("VideoComposerTrimmingActions").confirmCloseTrimmingEditor(c.videoComposerID)};return{shown:a,onCancel:d,onConfirm:e}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTrimmingCancelConfirmDialog.react"),{shown:this.state.shown,onCancel:this.state.onCancel,onConfirm:this.state.onConfirm})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTrimmingSection.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();var d=a.videoID,e=a.videoDataForID;a=a.videoDuration;c=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getState();var f=c.draftEndTime,g=c.draftStartTime;c=c.isWasLiveTrimmed;return{videoID:d,draftStartTime:g||0,draftEndTime:f===null?a:f,videoData:e,videoDuration:a,isWasLiveTrimmed:(d=c)!=null?d:!1}};var d=c.prototype;d.render=function(){var a=this.state.videoID;return a!=null?b("React").jsx(b("VideoComposerTrimmingSection.react"),{videoComposerID:this.props.videoComposerID,videoID:a,draftStartTime:this.state.draftStartTime,draftEndTime:this.state.draftEndTime,isWasLiveTrimmed:this.state.isWasLiveTrimmed,videoData:this.state.videoData,videoDuration:this.state.videoDuration}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingEditorContainer.react",["FluxContainer","React","VideoComposerSlidingDrawer.react","VideoComposerStores","VideoComposerTrimmingEditor.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getState();c=a.showEditor;return{showEditor:c}};var d=c.prototype;d.render=function(){return this.state.showEditor?b("React").jsx(b("VideoComposerSlidingDrawer.react"),{children:b("React").jsx(b("VideoComposerTrimmingEditor.react"),{videoComposerID:this.props.videoComposerID})}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingEditorFooterSectionContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTrimmingEditorFooterSection.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getState();c=a.draftEndTime;var d=a.draftStartTime,e=a.endTime;a=a.startTime;return{disableTrimmingButton:c===e&&d===a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTrimmingEditorFooterSection.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingSection.react",["cx","fbt","AsyncRequest","FDSGuidanceCard.react","FDSGuidanceCardContent.react","FDSGuidanceCardContentButton.react","FDSGuidanceCardContentText.react","FDSGuidanceCardHeader.react","React","VideoComposerTrimmingActions","VideoComposerTrimmingConstants","VideoComposerTrimmingManualInputSection.react","VideoComposerTrimmingVideoPlayer.react","VideoComposerTrimmingVisualizerContainer.react","XLiveVideoTrimWasLiveController","cxMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={untrimState:"none"},d.$1=function(a){b("VideoComposerTrimmingActions").setVPC(d.props.videoComposerID,a)},d.$5=function(){d.setState({untrimState:"in_progress"}),new(b("AsyncRequest"))(b("XLiveVideoTrimWasLiveController").getURIBuilder().setInt("video_id",d.props.videoID).setBool("reset_trimming",!0).getURI()).setHandler(function(){d.setState({untrimState:"untrimmed_this_session"})}).setErrorHandler(function(){d.setState({untrimState:"failed"})}).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){};d.$3=function(a){};d.render=function(){var a=this.props,c=a.videoData;a=a.videoDuration;return!c?b("React").jsx("div",{}):b("React").jsxs("div",{children:[b("React").jsxs("div",{className:this.props.isWasLiveTrimmed?"_7xkx":"",children:[b("React").jsx("div",{className:"_3-96",children:b("React").jsx(b("VideoComposerTrimmingVideoPlayer.react"),{height:b("VideoComposerTrimmingConstants").PLAYER_HEIGHT,width:b("VideoComposerTrimmingConstants").PLAYER_WIDTH,videoData:c,videoDuration:a,onEnableVPC:this.$1,onUpdatePlayerState:this.$3,onUpdateCurrentPlayPosition:this.$2})}),b("React").jsx(b("VideoComposerTrimmingVisualizerContainer.react"),{videoComposerID:this.props.videoComposerID}),b("React").jsx(b("VideoComposerTrimmingManualInputSection.react"),{videoComposerID:this.props.videoComposerID})]}),this.$4()]})};d.$4=function(){if(!this.props.isWasLiveTrimmed)return null;if(this.state.untrimState==="untrimmed_this_session"){var a;return(a=b("React")).jsxs(b("FDSGuidanceCard.react"),{category:"success",children:[a.jsx(b("FDSGuidanceCardHeader.react"),{children:"Your video trimming was successfully removed."}),a.jsx(b("FDSGuidanceCardContent.react"),{children:a.jsx(b("FDSGuidanceCardContentText.react"),{children:"Please refresh the page to trim your video."})})]})}a=this.state.untrimState==="in_progress";return b("React").jsxs(b("FDSGuidanceCard.react"),{category:"active-feedback",children:[b("React").jsx(b("FDSGuidanceCardHeader.react"),{children:"Your video was successfully trimmed"}),b("React").jsxs(b("FDSGuidanceCardContent.react"),{children:[b("React").jsx(b("FDSGuidanceCardContentText.react"),{children:"Remove your video trimming if you want to make changes"}),b("React").jsx(b("FDSGuidanceCardContentButton.react"),{onPress:this.$5,isDisabled:a,isLoading:a,label:a?h._("\u0110ang g\u1ee1..."):h._("X\u00f3a, g\u1ee1 b\u1ecf")})]})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("VideoComposerTrimmingTabConfig",["ix","fbt","Promise","VideoComposerStores","VideoComposerTrimmingContainer.react","VideoComposerTrimmingTabContainer.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";a={key:"trimming",glyphSelected:g("532318"),glyphUnselected:g("532319"),title:h._("C\u1eaft video"),defaultDescription:h._("C\u1eaft video tr\u1ef1c ti\u1ebfp c\u1ee7a b\u1ea1n."),tabContainer:b("VideoComposerTrimmingTabContainer.react"),bodyContainer:b("VideoComposerTrimmingContainer.react"),getCrosspostRequestDataToSend:function(a){return b("Promise").resolve()},getEditRequestDataToSend:function(a){return b("VideoComposerStores").getTrimmingEditorStore(a).getPostDataForEdit()},getPostRequestDataToSend:function(a){return b("Promise").resolve()},fetchCrosspostData:function(a,c){return b("Promise").resolve()},fetchEditPostData:function(a,c){return b("VideoComposerStores").getTrimmingEditorStore(a).fetchEditPostDataForWasLiveTrimming(c.videoID,c.common.actorID)}};e.exports=a}),null);
__d("VideoComposerTrimmingTabContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTabItemContainer.react","VideoComposerTrimmingTabConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getUIStore(a.videoComposerID),b("VideoComposerStores").getMetadataStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getUIStore(c.videoComposerID).getState();a=a.selectedTab;c=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();c=c.dialogMode;return{dialogMode:c,isSelected:a==="trimming"}};var d=c.prototype;d.render=function(){return this.state.dialogMode==="video_edit"?b("React").jsx(b("VideoComposerTabItemContainer.react"),babelHelpers["extends"]({videoComposerID:this.props.videoComposerID,tabConfig:b("VideoComposerTrimmingTabConfig")},this.state)):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingTimestampContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTrimmingConstants","VideoComposerTrimmingTimestamp.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a){return[b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID),b("VideoComposerStores").getClippingStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=a.videoDuration;a=a||0;if(c.isManualInput===!0){var d=b("VideoComposerStores").getClippingStore(c.videoComposerID).getState(),e=d.selectedStartTime;d=d.selectedEndTime;return{endTime:d||a,startTime:e||0,videoDuration:a}}else{d=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getState();e=d.draftEndTime;c=d.draftStartTime;return{endTime:e||a,startTime:c||0,videoDuration:a}}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTrimmingTimestamp.react"),{videoComposerID:this.props.videoComposerID,endTime:this.state.endTime,maxTime:this.state.videoDuration,minimumDuration:b("VideoComposerTrimmingConstants").MIN_TRIM_DURATION,minTime:0,startTime:this.state.startTime,isManualInput:this.props.isManualInput})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingVideoPlayerContainer.react",["FluxContainer","React","VideoComposerStores","VideoComposerTrimmingActions","VideoComposerTrimmingConstants","VideoComposerTrimmingVideoPlayer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("VideoComposerTrimmingActions").setVPC(d.props.videoComposerID,a)},d.$3=function(a){b("VideoComposerTrimmingActions").setPlayerState(d.props.videoComposerID,a)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){return[b("VideoComposerStores").getMetadataStore(a.videoComposerID),b("VideoComposerStores").getUploadStore(a.videoComposerID)]};c.calculateState=function(a,c){a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=a.videoDuration;c=b("VideoComposerStores").getUploadStore(c.videoComposerID).getState();c=c.videoData;return{videoData:c,videoDuration:a}};var d=c.prototype;d.$2=function(a){};d.render=function(){var a=this.state.videoData;return a?b("React").jsx(b("VideoComposerTrimmingVideoPlayer.react"),{height:b("VideoComposerTrimmingConstants").PLAYER_HEIGHT,width:b("VideoComposerTrimmingConstants").PLAYER_WIDTH,videoData:a,videoDuration:this.state.videoDuration,onEnableVPC:this.$1,onUpdatePlayerState:this.$3,onUpdateCurrentPlayPosition:this.$2}):null};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerTrimmingVisualizerContainer.react",["FluxContainer","React","VideoComposerClippingActions","VideoComposerStores","VideoComposerTrimmingActions","VideoComposerTrimmingTypes","VideoComposerTrimmingVisualizer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoComposerTrimmingTypes").TimestampTypes;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c){d.props.isScrubberInput===!0?c===g.START_TIME?b("VideoComposerClippingActions").setClippingStartTime(d.props.videoComposerID,a):b("VideoComposerClippingActions").setClippingEndTime(d.props.videoComposerID,a):c===g.START_TIME?b("VideoComposerTrimmingActions").setTrimmingStartTime(d.props.videoComposerID,a):b("VideoComposerTrimmingActions").setTrimmingEndTime(d.props.videoComposerID,a)},d.$2=function(a,c){d.props.isScrubberInput===!0?b("VideoComposerClippingActions").previewByStartEndTime(d.props.videoComposerID,a,c):b("VideoComposerTrimmingActions").previewByStartEndTime(d.props.videoComposerID,a,c)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(a){var c;return[(c=b("VideoComposerStores")).getMetadataStore(a.videoComposerID),c.getThumbnailsStore(a.videoComposerID),c.getTrimmingEditorStore(a.videoComposerID),c.getClippingStore(a.videoComposerID)]};c.calculateState=function(a,c){__p&&__p();a=b("VideoComposerStores").getMetadataStore(c.videoComposerID).getState();a=a.videoDuration;a=a||0;var d=b("VideoComposerStores").getThumbnailsStore(c.videoComposerID).getState();d=d.originalOrderThumbnails;var e=0;if(c.isScrubberInput===!0){var f=b("VideoComposerStores").getClippingStore(c.videoComposerID).getState(),g=f.selectedEndTime;f=f.selectedStartTime;e=f;f=g}else{g=b("VideoComposerStores").getTrimmingEditorStore(c.videoComposerID).getState();c=g.draftEndTime;g=g.draftStartTime;e=g;f=c}return{endTime:f||a,thumbnailURLs:d.map(function(a){return a.getURL()}),videoDuration:a,startTime:e||0}};var d=c.prototype;d.render=function(){return b("React").jsx(b("VideoComposerTrimmingVisualizer.react"),{maxTime:this.state.videoDuration,minTime:0,endTime:this.state.endTime,thumbnailURLs:this.state.thumbnailURLs,startTime:this.state.startTime,onPreview:this.$2,onTimeChange:this.$1})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("VideoComposerStoreBase",["invariant","FluxReduceStore","VideoComposerActionTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.reduce=function(a,c){var d=a;switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:case b("VideoComposerActionTypes").INITIALIZE_CROSSPOST_COMPOSER:case b("VideoComposerActionTypes").INITIALIZE_COMPOSER_PREVIEW:d=a.set("videoComposerID",c.videoComposerID)}return this.reduceImpl(d,c)};d.reduceImpl=function(a,b){g(0,85)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("VideoComposerAdBreakImageAdsLoggerStoreClass",["ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerAdBreakImageAdsUITypedLogger","VideoComposerDispatchers","VideoComposerStoreBase","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=a({videoComposerID:""});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getAdBreakStore(a.videoComposerID).getDispatchToken(),b("VideoComposerStores").getLoggingStore(a.videoComposerID).getDispatchToken()]);switch(c.type){case b("VideoComposerActionTypes").LOG_MID_ROLL_OPT_OUT_EVENT:case b("VideoComposerActionTypes").LOG_SHORTER_CONTENT_MONETIZATION_EVENT:this.logImageAdsEvent(c.event);return a;case b("VideoComposerActionTypes").POST_FINISHED:case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_SUCCESS:this.logImageAdsEvent("video_saved_successfully");return a;case b("VideoComposerActionTypes").EXIT_DIALOG:this.logImageAdsEvent("composer_exited");return a;case b("VideoComposerActionTypes").POST_FAILED:case b("VideoComposerActionTypes").UPLOAD_FAILED:case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_FAILURE:this.logImageAdsEvent("video_save_failure");return a;default:return a}};d.logImageAdsEvent=function(a,c){var d=b("VideoComposerStores").getAdBreakStore(this.getState().videoComposerID).getState(),e=d.canUseVODAdBreaks,f=d.isPageMidRollOptOutEnabled;d=d.isShorterContentMonetizationEligible;if(!e||!(d||f))return;this.buildCommonFieldLogger(c).setEvent(a).log()};d.buildCommonFieldLogger=function(a){a=a==null?b("VideoComposerStores").getAdBreakStore(this.getState().videoComposerID).getState():a;var c=a.adBreaksDisabled,d=a.isAdBreakAutoInsertionEnabled,e=a.isPageMidRollOptOutEnabled;a=a.shouldUseImageAds;var f=b("VideoComposerStores").getLoggingStore(this.getState().videoComposerID).getState(),g=f.actorID,h=f.dialogMode,i=f.hasUploadFinished,j=f.videoAssetID;f=f.videoID;return new(b("VideoComposerAdBreakImageAdsUITypedLogger"))().setPageID(g).setVideoAssetID(j).setVideoID(f).setIsVideoAdBreakEnabled(!c).setAutoInsertionFlag(d).setManualAdBreaksFlag(!c&&!d).setImageAdsFlag(a).setIsPageMidRollOptOutEnabled(e).setComposerDialogMode(h).setHasUploadFinished(i).setIsMidRollOptOut(!0)};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerAdBreakStoreClass",["Promise","DateConsts","ImmutableRecordWithV4Types","PagesSettingsInstreamAdsBlockListActions","PagesSettingsInstreamAdsBlockListStore","VideoComposerActionTypes","VideoComposerAdBreakActions","VideoComposerDialogAdBreakUtils","VideoComposerDispatchers","VideoComposerStoreBase","VideoComposerStores","flattenPHPQueryData","generateVideoThumbnails","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=b("VideoComposerDialogAdBreakUtils").canShortVideoUseImageAds,h=1e3,i=44,j=60,k=78,l=180,m={videoComposerID:"",adBreakPrereviewStatus:"not_opted_for_prereview",adBreaksDisabled:!1,canUseAdBreaks:!1,currentAdBreakTimeOffset:0,currentPreviewIndex:null,hasGapRule:!0,hasUserSeenAdBreakTab:!1,holdoutTestEnabled:!1,holdoutTestPublicMetadata:{isEligibleCreator:!1,isExpired:!1,isNuxVisible:!1,isStarted:!1},holdoutTestRevenueLossThresholdInCents:1e4,insertedAdBreaks:b("immutable").List(),isAdBreakAutoAdjustmentEnabled:!1,isAdBreakAutoInsertionEnabled:!1,isAdBreakInsertionRedesignV1:!1,isAdBreakInsertionRedesignV2:!1,isAdBreakPrereviewDialogOpen:!1,isAdBreakPrereviewVisible:!1,prereviewDisabledReason:"client_loading",isImageAdsDropdownExpanded:!1,isShorterContentMonetizationEligible:!1,canUseVODAdBreaks:!1,adBreaksOnboardingSurface:null,isAdBreakComposerOnboardingEligible:!1,isCountryRestrictionsEligible:!1,pageOnboardingPending:!1,showOnboardedPageNux:!1,isAutoInsertionEnabledOnProfile:!1,isAdBreakToggleEdited:!1,showAdBreaksUpsellDialog:!1,shouldShowAutoInsertionProfileNux:!1,shouldShowImageAdsModal:!1,shouldShowImageAdsUpsell:!1,shouldUseImageAds:!1,isBrandedContentVideo:!1,isDemonetized:!1,isPageOnboardingVisible:!1,isPageMidRollOptOutEnabled:!1,serverSideDisabledReasons:b("immutable").List(),videoRightsAgreed:!1,vpc:null,isAdBreaksPollCreationEnabled:!1,isNPSEligible:!1},n=a(m);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return n()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:return this.$VideoComposerAdBreakStoreClass1(a);case b("VideoComposerActionTypes").RESET_COMPOSER:return this.$VideoComposerAdBreakStoreClass2();case b("VideoComposerActionTypes").AGREE_VIDEO_RIGHTS:return this.$VideoComposerAdBreakStoreClass3(a);case b("VideoComposerActionTypes").BOOTLOAD_AD_BREAK_PARAMETERS:return this.$VideoComposerAdBreakStoreClass4(a,c.data);case b("VideoComposerActionTypes").DELETE_AD_BREAK:return this.$VideoComposerAdBreakStoreClass5(a,c.adBreakIndex);case b("VideoComposerActionTypes").FETCH_AD_BREAK_EDIT_PARAMETERS:return this.$VideoComposerAdBreakStoreClass6(a,c.data);case b("VideoComposerActionTypes").INSERT_AD_BREAK:return this.$VideoComposerAdBreakStoreClass7(a);case b("VideoComposerActionTypes").SET_CAN_USE_AD_BREAKS:return this.$VideoComposerAdBreakStoreClass8(a,c.canUseAdBreaks);case b("VideoComposerActionTypes").SET_CURRENT_AD_BREAK:return this.$VideoComposerAdBreakStoreClass9(a,c.adBreakTimeOffset);case b("VideoComposerActionTypes").SET_CURRENT_PREVIEW_INDEX:return this.$VideoComposerAdBreakStoreClass10(a,c.currentPreviewIndex);case b("VideoComposerActionTypes").SET_IS_AD_BREAK_AUTO_ADJUSTMENT_ENABLED:return this.$VideoComposerAdBreakStoreClass11(a,c.isAdBreakAutoAdjustmentEnabled);case b("VideoComposerActionTypes").SET_IS_AD_BREAK_AUTO_INSERTION_ENABLED:return this.$VideoComposerAdBreakStoreClass12(a,c.isAdBreakAutoInsertionEnabled);case b("VideoComposerActionTypes").SET_IS_AD_BREAK_TOGGLE_EDITED:return this.$VideoComposerAdBreakStoreClass13(a,c.isAdBreakToggleEdited);case b("VideoComposerActionTypes").SET_IS_BRANDED_CONTENT_VIDEO:return this.$VideoComposerAdBreakStoreClass14(a,c.isBrandedContentVideo);case b("VideoComposerActionTypes").SET_SHOW_AD_BREAKS_UPSELL_DIALOG:return this.$VideoComposerAdBreakStoreClass15(a,c.showAdBreaksUpsellDialog);case b("VideoComposerActionTypes").START_PAGE_ONBOARDING:return this.$VideoComposerAdBreakStoreClass16(a,c.pageID);case b("VideoComposerActionTypes").SET_PAGE_ONBOARDING_PENDING:return a.set("pageOnboardingPending",c.isPending);case b("VideoComposerActionTypes").SHOW_ONBOARDED_PAGE_NUX:return a.set("showOnboardedPageNux",c.enabled);case b("VideoComposerActionTypes").UPDATE_AD_BREAK_STATUS:return this.$VideoComposerAdBreakStoreClass17(a,c.adBreaksDisabled,c.isMonetizableShortVideo);case b("VideoComposerActionTypes").UPDATE_HOLDOUT_TEST_STATUS:return this.$VideoComposerAdBreakStoreClass18(a,c.enabled);case b("VideoComposerActionTypes").UPDATE_THUMBNAIL_URL:return this.$VideoComposerAdBreakStoreClass19(a,c.adBreakTimeOffset,c.thumbnailURL);case b("VideoComposerActionTypes").UPDATE_VPC:return this.$VideoComposerAdBreakStoreClass20(a,c.vpc);case b("VideoComposerActionTypes").SET_PREREVIEW_DIALOG:return a.set("isAdBreakPrereviewDialogOpen",c.isAdBreakPrereviewDialogOpen);case b("VideoComposerActionTypes").SUBMIT_FOR_PREREVIEW:return a.set("isAdBreakPrereviewDialogOpen",!1);case b("VideoComposerActionTypes").SET_IS_AUTO_INSERTION_PAGE_ENABLED:return this.$VideoComposerAdBreakStoreClass21(a,c.pageID,c.enabled);case b("VideoComposerActionTypes").SET_SHOULD_USE_IMAGE_ADS:return this.$VideoComposerAdBreakStoreClass22(a,c.shouldUseImageAds);case b("VideoComposerActionTypes").SET_IS_IMAGE_ADS_DROPDOWN_EXPANDED:return this.videoIsLessThanThreeMinutes()?a:a.set("isImageAdsDropdownExpanded",c.isImageAdsDropdownExpanded);case b("VideoComposerActionTypes").SET_SHOULD_SHOW_IMAGE_ADS_UPSELL:return this.videoIsLessThanThreeMinutes()?a:a.set("shouldShowImageAdsUpsell",c.shouldShowImageAdsUpsell);case b("VideoComposerActionTypes").SET_SHOULD_SHOW_IMAGE_ADS_MODAL:return this.videoIsLessThanThreeMinutes()?a:a.set("shouldShowImageAdsModal",c.shouldShowImageAdsModal);case b("VideoComposerActionTypes").SET_HAS_USER_SEEN_AD_BREAK_TAB:return a.set("hasUserSeenAdBreakTab",c.hasUserSeenAdBreakTab);case b("VideoComposerActionTypes").OPEN_PUBLISH_DRAWER:b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getUIStore(a.videoComposerID).getDispatchToken()]);this.getShouldIgnorePublishNextStep()&&(a=a.set("shouldShowImageAdsModal",!0));return a;default:return a}};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c=a.adBreaksDisabled||a.isBrandedContentVideo,d=a.insertedAdBreaks.map(function(a){return{time_offset:a.timeOffset*b("DateConsts").MS_PER_SEC,status:c?"disabled":"enabled"}}).toArray(),e=b("PagesSettingsInstreamAdsBlockListStore").getComposerBlockListIdsToApply(),f=a.holdoutTestEnabled&&!c&&d.length>0,g={};g.ad_breaks=d;g.ad_breaks_experiment_revenue_loss_threshold=a.holdoutTestRevenueLossThresholdInCents;g.enable_ad_breaks_experiment=f;e&&(g.ad_breaks_block_lists=e,g.has_ad_breaks_block_lists=!0);g.should_auto_adjust_manual_ad_breaks=a.isAdBreakAutoAdjustmentEnabled;g.should_auto_insert_ad_breaks=a.isAdBreakAutoInsertionEnabled&&!a.adBreaksDisabled;g.should_use_image_ads=a.shouldUseImageAds;return b("Promise").resolve(g)};d.getEditRequestDataToSend=function(){var a=this.getPostRequestDataToSend();return a.then(function(a){return b("flattenPHPQueryData")(a)})};d.getIsMidRollOptOutFeatureEnabled=function(){var a=this.getState();a=a.shouldUseImageAds;return a};d.getShouldIgnorePublishNextStep=function(){if(this.videoIsLessThanThreeMinutes())return!1;var a=this.getState(),b=a.adBreaksDisabled,c=a.isPageMidRollOptOutEnabled,d=a.hasUserSeenAdBreakTab;a=a.shouldShowImageAdsModal;return b&&c&&!d&&!a};d.videoIsLessThanThreeMinutes=function(){var a=b("VideoComposerStores").getMetadataStore(this.getState().videoComposerID).getVideoPreviewTimeData();a=a.videoDuration;return(a||0)<l};d.$VideoComposerAdBreakStoreClass22=function(a,c){var d=a.get("shouldUseImageAds")!=c;a=a.set("shouldUseImageAds",c);if(d){d=c?"image_ads_enabled":"image_ads_disabled";b("VideoComposerStores").getAdBreakImageAdsLoggerStore(a.videoComposerID).logImageAdsEvent(d,a)}return a};d.$VideoComposerAdBreakStoreClass1=function(a){return a.merge({adBreaksDisabled:m.adBreaksDisabled,currentAdBreakTimeOffset:m.currentAdBreakTimeOffset,currentPreviewIndex:m.currentPreviewIndex,insertedAdBreaks:m.insertedAdBreaks,videoRightsAgreed:m.videoRightsAgreed||a.isAdBreakInsertionRedesignV2,vpc:m.vpc})};d.$VideoComposerAdBreakStoreClass2=function(){return this.getInitialState()};d.$VideoComposerAdBreakStoreClass3=function(a){a=a.set("videoRightsAgreed",!0);return a};d.$VideoComposerAdBreakStoreClass4=function(a,c,d){__p&&__p();d===void 0&&(d=null);b("PagesSettingsInstreamAdsBlockListActions").initializeBlockLists(c.pageID,d?[d]:null);a=a.set("holdoutTestEnabled",c.holdoutTestPublicMetadata.isStarted);a=a.set("holdoutTestPublicMetadata",c.holdoutTestPublicMetadata);a=a.set("serverSideDisabledReasons",b("immutable").List(c.serverSideDisabledReasons));a=a.set("hasGapRule",c.hasGapRule);a=a.set("isAdBreakAutoAdjustmentEnabled",c.isAdBreakInsertionRedesignV1||c.isAdBreakInsertionRedesignV2);a=a.set("isAdBreakAutoInsertionEnabled",c.isAdBreakInsertionRedesignV2);a=a.set("isAdBreaksPollCreationEnabled",c.isAdBreaksPollCreationEnabled);a=a.set("isNPSEligible",c.isNPSEligible);a=a.set("isAdBreakInsertionRedesignV1",c.isAdBreakInsertionRedesignV1);a=a.set("isAdBreakInsertionRedesignV2",c.isAdBreakInsertionRedesignV2);a=a.set("isAdBreakPrereviewVisible",c.isAdBreakPrereviewVisible);a=a.set("prereviewDisabledReason",c.prereviewDisabledReason);a=a.set("canUseVODAdBreaks",c.canUseVODAdBreaks);a=a.set("adBreaksOnboardingSurface",c.adBreaksOnboardingSurface);a=a.set("isAdBreakComposerOnboardingEligible",c.isAdBreakComposerOnboardingEligible);a=a.set("isPageOnboardingVisible",c.isPageOnboardingVisible);a=a.set("isAutoInsertionEnabledOnProfile",c.isAutoInsertionEnabledOnProfile);a=a.set("isShorterContentMonetizationEligible",c.isShorterContentMonetizationEligible);a=a.set("isCountryRestrictionsEligible",c.isCountryRestrictionsEligible);a=a.set("shouldShowAutoInsertionProfileNux",c.shouldShowAutoInsertionProfileNux);a=a.set("videoRightsAgreed",c.isAdBreakInsertionRedesignV2);c.isAdBreakInsertionRedesignV2&&c.isAutoInsertionEnabledOnProfile?a=a.set("adBreaksDisabled",!1):a=a.set("adBreaksDisabled",!0);a=a.set("isPageMidRollOptOutEnabled",c.isPageMidRollOptOutEnabled);d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getVideoPreviewTimeData();d=d.videoDuration;a=a.set("shouldUseImageAds",c.isAutoInsertionEnabledOnProfile&&g(c.isShorterContentMonetizationEligible,d));return a};d.$VideoComposerAdBreakStoreClass5=function(a,b){a=a.set("insertedAdBreaks",a.insertedAdBreaks.splice(b,1));return a};d.$VideoComposerAdBreakStoreClass6=function(a,c){__p&&__p();a=this.$VideoComposerAdBreakStoreClass4(a,c,c.videoAssetID);a=a.set("adBreaksDisabled",c.adBreaksDisabled);a=a.set("adBreakPrereviewStatus",c.adBreakPrereviewStatus);a=a.set("insertedAdBreaks",b("immutable").List(c.insertedAdBreaks));a=a.set("isAdBreakAutoAdjustmentEnabled",c.isAdBreakAutoAdjustmentEnabled);a=a.set("isAdBreakAutoInsertionEnabled",c.isAdBreakAutoInsertionEnabled);a=a.set("shouldUseImageAds",c.shouldUseImageAds);a=a.set("isImageAdsDropdownExpanded",c.shouldUseImageAds);a=a.set("isDemonetized",c.isDemonetized);a=a.set("videoRightsAgreed",a.videoRightsAgreed||a.insertedAdBreaks.count()>0);this.$VideoComposerAdBreakStoreClass23(a);return a};d.$VideoComposerAdBreakStoreClass7=function(a){if(a.insertedAdBreaks.findIndex(function(b){return b.timeOffset===a.currentAdBreakTimeOffset})>=0)return a;a=a.set("insertedAdBreaks",a.insertedAdBreaks.push({status:a.adBreaksDisabled?"disabled":"enabled",thumbnailURL:null,timeOffset:a.currentAdBreakTimeOffset}).sort(function(a,b){return a.timeOffset-b.timeOffset}));this.$VideoComposerAdBreakStoreClass23(a);return a};d.$VideoComposerAdBreakStoreClass9=function(a,b){b=Math.round(b*h)/h;a=a.set("currentAdBreakTimeOffset",b);return a};d.$VideoComposerAdBreakStoreClass10=function(a,b){a=a.set("currentPreviewIndex",b);return a};d.$VideoComposerAdBreakStoreClass11=function(a,b){a=a.set("isAdBreakAutoAdjustmentEnabled",b);return a};d.$VideoComposerAdBreakStoreClass12=function(a,b){a=a.set("isAdBreakAutoInsertionEnabled",b);b||(a=a.set("isImageAdsDropdownExpanded",!1),a=this.$VideoComposerAdBreakStoreClass22(a,!1));return a};d.$VideoComposerAdBreakStoreClass13=function(a,b){a=a.set("isAdBreakToggleEdited",b);return a};d.$VideoComposerAdBreakStoreClass8=function(a,b){a=a.set("canUseAdBreaks",b);return a};d.$VideoComposerAdBreakStoreClass14=function(a,b){a=a.set("isBrandedContentVideo",b);return a};d.$VideoComposerAdBreakStoreClass16=function(a,c){b("VideoComposerDialogAdBreakUtils").startPageOnboarding(c);return a};d.$VideoComposerAdBreakStoreClass21=function(a,c,d){b("VideoComposerDialogAdBreakUtils").updateInsertionProfileStatus(c,d);return a};d.$VideoComposerAdBreakStoreClass15=function(a,b){a=a.set("showAdBreaksUpsellDialog",b);return a};d.$VideoComposerAdBreakStoreClass17=function(a,b,c){a=a.set("adBreaksDisabled",b);a=a.set("insertedAdBreaks",a.insertedAdBreaks.map(function(a){a.status=b?"disabled":"enabled";return a}));b?(a=a.set("shouldShowImageAdsUpsell",!1).set("isImageAdsDropdownExpanded",!1),a=this.$VideoComposerAdBreakStoreClass22(a,!1)):c&&this.$VideoComposerAdBreakStoreClass24()&&(a=this.$VideoComposerAdBreakStoreClass22(a,!0));return a};d.$VideoComposerAdBreakStoreClass18=function(a,b){a=a.set("holdoutTestEnabled",b);return a};d.$VideoComposerAdBreakStoreClass19=function(a,b,c){var d=a.insertedAdBreaks.findIndex(function(a){return a.timeOffset===b});if(d<0)return a;var e=a.insertedAdBreaks,f=e.get(d);f=babelHelpers["extends"]({},f,{thumbnailURL:c});e=e.set(d,f);return a.set("insertedAdBreaks",e)};d.$VideoComposerAdBreakStoreClass20=function(a,b){a=a.set("vpc",b);this.$VideoComposerAdBreakStoreClass23(a);return a};d.$VideoComposerAdBreakStoreClass23=function(a){__p&&__p();var c=a.vpc,d=a.insertedAdBreaks,e=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getVideoPreviewTimeData(),f=e?e.videoStartTime:0;if(c&&c.getVideoNodeNullable()){e=function(e){var g=d.get(e);if(g.thumbnailURL!==null)return"continue";b("promiseDone")(b("generateVideoThumbnails")(c.getVideoNode(),a.isAdBreakInsertionRedesignV2?k:j,a.isAdBreakInsertionRedesignV2?i:j,1,"cover",g.timeOffset+f),function(c){b("VideoComposerAdBreakActions").updateThumbnailURL(a.videoComposerID,g.timeOffset,c.thumbnails[0].getURL())},function(a){})};for(var g=0;g<d.count();g++){var h=e(g);if(h==="continue")continue}}};d.$VideoComposerAdBreakStoreClass24=function(){var a=this.getState(),c=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getVideoPreviewTimeData();c=c.videoDuration;return c!=null?b("VideoComposerDialogAdBreakUtils").canShortVideoUseImageAds(a.isShorterContentMonetizationEligible,c):!1};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerBasicStoreClass",["fbt","invariant","Promise","AdsCallToActionTypesCond","ComposerVideoPostUtils","EditorState","ImmutableRecordWithV4Types","PageContentTabShowsStore","PagesComposerBoostedPostsStore","ReactComposerMultilingualStatusActions","ReactComposerMultilingualStatusStore","ReactComposerPostDataUtils","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerTargetingUtils","StaticSearchSource","VideoComposerActionTypes","VideoComposerDealUtils","VideoComposerDialogBasicUtils","VideoComposerDispatchers","VideoComposerPublishingTypes","VideoComposerPublishingUtils","VideoComposerStoreBase","VideoComposerStores","VideoComposerTagSuggestionSources","dotAccess","flattenPHPQueryData","getMentionsInputDecorator","getMentionsTextForContentState"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var i=b("VideoComposerDealUtils").getDeal,j=b("VideoComposerDealUtils").videoRequiresReview,k=b("VideoComposerDispatchers").DEFAULT_VIDEO_COMPOSER_ID,l=b("VideoComposerPublishingTypes").PublishActions,m=a({videoComposerID:"",autoCrosspostToShowParent:!1,bootloaded:!1,canEditShowAndParent:!1,composerConfig:null,contentTags:[],descriptionEditorState:b("EditorState").createEmpty(b("getMentionsInputDecorator")()),fromComposerID:null,fundedContentProgram:0,hasFundedContentReviews:!1,missingVideoTypeTooltipText:null,missingFundedContentProgramText:null,mentionsSearchSource:new(b("StaticSearchSource"))([]),deal:null,deals:[],playlistIDs:[],playlistOptions:{},seasonIDOld:null,seasonOptionsOld:{},selectedGame:null,showDealSelector:!1,showFundedContentFlag:!1,showMissingFundedContentProgramTooltip:!1,showMissingVideoTypeTooltip:!1,showNewPlaylistSelector:!1,showParentPageName:"",showParentPageProfileURI:"",taggerSearchSource:new(b("StaticSearchSource"))([]),videoPreviewController:null,isRecapSupported:!1,isGamingPage:!1,isExplicitlyTaggedAsGamingVideo:!1,showVideoDetailsLanguageSelector:!1,showMultilingualComposer:!1,showSoundEditor:!1,showTrimmingEditor:!1,enableDonationTagger:!1,browseTags:[],historyTags:[],showTaggingNux:!1,suggestedTags:[],taggingGrowthExperimentEnabled:!1,tagSuggestionSource:b("VideoComposerTagSuggestionSources").BROWSE,isVideoPreviewPaused:!1});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return m()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:if(c.clientParams.entryPointRef==="page_content_tab_playlist_details"){var d=b("PageContentTabShowsStore").getVideoListID();a=a.set("playlistIDs",d?[d]:[])}else c.clientParams.entryPointRef==="page_content_tab_season_details"&&(a=a.set("seasonIDOld",b("PageContentTabShowsStore").getVideoListID()||null));c.serverParams.composerID&&(a=a.set("fromComposerID",c.serverParams.composerID));return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:if(c.editParams.isVideoShowPage){d=c.editParams.episodeData.get("playlistIDs");var e=c.editParams.episodeData.get("seasonID");d&&(a=a.set("playlistIDs",d));e&&(a=a.set("seasonIDOld",e));a=a.set("isRecapSupported",c.editParams.isRecapSupported||!1);b("VideoComposerDialogBasicUtils").fetchVideoListOptions(c.editParams.common.actorID,k)}else{d=c.editParams.playlistIDs;a=a.set("playlistIDs",d);b("VideoComposerDialogBasicUtils").fetchVideoListOptions(c.editParams.common.actorID,k)}a=a.set("isGamingPage",c.editParams.isGamingPage);a=a.set("selectedGame",c.editParams.taggedGame);c.editParams.taggedGame!==null&&(a=a.set("isExplicitlyTaggedAsGamingVideo",!0));return a;case b("VideoComposerActionTypes").BOOTLOAD_DEFAULT_TAB_PARAMETERS:a=this.$VideoComposerBasicStoreClass1(a,c.data);a=a.set("isGamingPage",c.data.isGamingPage);a=a.set("showVideoDetailsLanguageSelector",c.data.showVideoDetailsLanguageSelector);a=a.set("showSoundEditor",c.data.showSoundEditor);a=a.set("showTrimmingEditor",c.data.showTrimmingEditor);a=a.set("taggingGrowthExperimentEnabled",c.data.taggingGrowthExperimentEnabled);a=a.set("showTaggingNux",c.data.showTaggingNux);a=a.set("enableDonationTagger",c.data.enableDonationTagger);a=a.set("showFundedContentFlag",c.data.showFundedContentFlag);a=a.set("hasFundedContentReviews",c.data.hasFundedContentReviews);a=a.set("showDealSelector",c.data.showDealSelector);a=a.set("deal",c.data.deal);a=a.set("deals",c.data.deals);e=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=e.isVideoShowPage;d&&(a=a.set("autoCrosspostToShowParent",c.data.canEditShowAndParent),a=a.set("canEditShowAndParent",c.data.canEditShowAndParent),a=a.set("showParentPageName",c.data.showParentPageName),a=a.set("showParentPageProfileURI",c.data.showParentPageProfileURI),a=a.set("isRecapSupported",c.data.isRecapSupported));a=a.set("showNewPlaylistSelector",c.data.showNewPlaylistSelector);return a;case b("VideoComposerActionTypes").BOOTLOAD_CROSSPOST_DEFAULT_TAB:a=this.$VideoComposerBasicStoreClass1(a,c.data);a=a.set("taggingGrowthExperimentEnabled",c.data.taggingGrowthExperimentEnabled);a=a.set("contentTags",b("VideoComposerDialogBasicUtils").convertVideoTagsToEntryArray(c.data.contentTags,c.data.freeFormTags));a=a.set("descriptionEditorState",b("VideoComposerDialogBasicUtils").getEditorStateForText(c.data.description));if(c.data.multilingualData){e=Array.from(c.data.multilingualData).reduce(function(a,b){var c=b[0];b=b[1];return Object.assign(a,(a={},a[c]=b,a))},{});b("ReactComposerMultilingualStatusActions").prefillData(c.data.composerConfig.contextConfig.composerID,e)}c.data.gatingAndTargetingData&&b("ReactComposerTargetingUtils").setData(c.data.composerConfig.contextConfig.composerID,{gating:c.data.gatingAndTargetingData.gating,gatingSentences:b("ReactComposerTargetingUtils").renderSentences(c.data.gatingAndTargetingData.gatingSentences),targeting:c.data.gatingAndTargetingData.targeting,targetingSentences:b("ReactComposerTargetingUtils").renderSentences(c.data.gatingAndTargetingData.targetingSentences)});return a;case b("VideoComposerActionTypes").BOOTLOAD_DEFAULT_EDIT_PARAMS:a=this.$VideoComposerBasicStoreClass1(a,c.data);a=a.set("taggingGrowthExperimentEnabled",c.data.taggingGrowthExperimentEnabled);a=a.set("contentTags",b("VideoComposerDialogBasicUtils").convertVideoTagsToEntryArray(c.data.contentTags,c.data.freeFormTags));a=a.set("descriptionEditorState",b("VideoComposerDialogBasicUtils").getEditorStateForText(c.data.description));a=a.set("fundedContentProgram",c.data.fundedContentProgram);a=a.set("showFundedContentFlag",c.data.showFundedContentFlag);a=a.set("showDealSelector",c.data.showDealSelector);d=c.data.deals;e=i(c.data.dealID,d);a=a.set("deal",e);a=a.set("deals",d);a=a.set("showNewPlaylistSelector",c.data.showNewPlaylistSelector);b("VideoComposerDialogBasicUtils").setComposerTaggerData(c.data.composerConfig.contextConfig.composerID,c.data.tags,c.data.locationEntry,c.data.backdate,{sponsors:c.data.sponsorTags,directShareStatus:c.data.directShareStatus,sponsorRelationship:c.data.sponsorRelationship},c.data.productTags,c.data.composerConfig.contextConfig.actorID,c.data.hasSupportNowCTA);if(c.data.multilingualData){e=Array.from(c.data.multilingualData).reduce(function(a,b){var c=b[0];b=b[1];return Object.assign(a,(a={},a[c]=b,a))},{});b("ReactComposerMultilingualStatusActions").prefillData(c.data.composerConfig.contextConfig.composerID,e)}return a;case b("VideoComposerActionTypes").CHANGE_GAME:a=a.set("selectedGame",c.game);return a;case b("VideoComposerActionTypes").UPDATE_IS_EXPLICITLY_TAGGED_AS_GAMING_VIDEO:return a.set("isExplicitlyTaggedAsGamingVideo",c.isExplicitlyTaggedAsGamingVideo);case b("VideoComposerActionTypes").HIDE_MISSING_FUNDED_CONTENT_PROGRAM_TYPE_TOOLTIP:a=a.set("missingFundedContentProgramText",null);a=a.set("showMissingFundedContentProgramTooltip",!1);return a;case b("VideoComposerActionTypes").HIDE_MISSING_VIDEO_TYPE_TOOLTIP:case b("VideoComposerActionTypes").UPDATE_SHOW_VIDEO_TYPE:a=a.set("showMissingVideoTypeTooltip",!1);return a.set("missingVideoTypeTooltipText",null);case b("VideoComposerActionTypes").HIGHLIGHT_MISSING_FUNDED_CONTENT_PROGRAM_TYPE_TOOLTIP:a=a.set("missingFundedContentProgramText",c.tooltipTextFCF);a=a.set("showMissingFundedContentProgramTooltip",!0);return a;case b("VideoComposerActionTypes").HIGHLIGHT_MISSING_VIDEO_TYPE:a=a.set("showMissingVideoTypeTooltip",!0);return a.set("missingVideoTypeTooltipText",c.tooltipText);case b("VideoComposerActionTypes").PAUSE_VIDEO_PREVIEW:d=a.get("videoPreviewController");if(d){d.pause("user_initiated");return a.set("isVideoPreviewPaused",!0)}return a;case b("VideoComposerActionTypes").TOGGLE_CROSSPOST_TO_PARENT:return a.set("autoCrosspostToShowParent",!a.autoCrosspostToShowParent);case b("VideoComposerActionTypes").UPDATE_CONTENT_TAGS:a=a.set("contentTags",c.tags);return a;case b("VideoComposerActionTypes").APPEND_CONTENT_TAGS:e=this.getState();d=e.contentTags;e=new Set(d.concat(c.tags));a=a.set("contentTags",Array.from(e));return a;case b("VideoComposerActionTypes").UPDATE_BROWSE_TAGS:a=a.set("browseTags",c.tags);return a;case b("VideoComposerActionTypes").UPDATE_HISTORY_TAGS:a=a.set("historyTags",c.tags);return a;case b("VideoComposerActionTypes").UPDATE_SUGGESTED_TAGS:a=a.set("suggestedTags",c.tags);return a;case b("VideoComposerActionTypes").UPDATE_TAG_SUGGESTION_SOURCE:a=a.set("tagSuggestionSource",c.tab);return a;case b("VideoComposerActionTypes").UPDATE_DESCRIPTION_EDITOR_STATE:a=a.set("descriptionEditorState",c.editorState);return a;case b("VideoComposerActionTypes").UPDATE_PLAYLIST_IDS:a=a.set("playlistIDs",c.playlistIDs);return a;case b("VideoComposerActionTypes").UPDATE_SEASON_ID_OLD:a=a.set("seasonIDOld",c.seasonIDOld);return a;case b("VideoComposerActionTypes").UPDATE_VIDEO_LIST_OPTIONS:a=a.set("playlistOptions",c.playlistOptions);a=a.set("seasonOptionsOld",c.seasonOptionsOld);return a;case b("VideoComposerActionTypes").UPDATE_VIDEO_PREVIEW_CONTROLLER:a=a.set("videoPreviewController",c.videoPreviewController);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;case b("VideoComposerActionTypes").UPDATE_FUNDED_CONTENT_PROGRAM:a=a.set("fundedContentProgram",c.fundedContentProgram);return a;case b("VideoComposerActionTypes").SET_IS_VIDEO_PREVIEW_PAUSED:a=a.set("isVideoPreviewPaused",c.isVideoPreviewPaused);return a;case b("VideoComposerActionTypes").UPDATE_DEAL:a=a.set("deal",c.deal);return a;default:return a}};d.$VideoComposerBasicStoreClass1=function(a,c){__p&&__p();a=a.set("composerConfig",c.composerConfig);a=a.set("mentionsSearchSource",c.mentionsSearchSource);a=a.set("taggerSearchSource",c.taggerSearchSource);a=a.set("bootloaded",!0);a=a.set("showMultilingualComposer",c.showMultilingualComposer);var d=this.getState();d=d.fromComposerID;if(d!=null){b("VideoComposerDialogBasicUtils").setComposerTaggerDataFromOriginalComposer(d,c.composerConfig.contextConfig.composerID,[(d=b("ReactComposerTaggerType")).PEOPLE,d.TARGETING,d.LOCATION,d.ACTIVITY,d.SPONSOR,d.FUNDRAISER,d.PRODUCT,d.SUPPORT_NOW])}return a};d.getFundedContentProgramSelectorText=function(){return g._("\u0110\u00e2y c\u00f3 ph\u1ea3i l\u00e0 b\u00e0i vi\u1ebft \u0111\u01b0\u1ee3c t\u00e0i tr\u1ee3 kh\u00f4ng? H\u00e3y ch\u1ecdn xem Facebook c\u00f3 xem x\u00e9t b\u00e0i vi\u1ebft video n\u00e0y kh\u00f4ng.")};d.getMissingFundedContentProgramText=function(a){__p&&__p();var c=this.getState(),d=c.fundedContentProgram,e=c.showFundedContentFlag;c=c.videoComposerID;if(!e)return null;switch(d){case 1:if(a===l.PUBLISH_NOW&&!j(c))return null;if(!(a===l.SAVE_DRAFT||a===l.SCHEDULE||a===l.OPEN_DRAWER))return b("VideoComposerPublishingUtils").fundedContentAllowedActionTypeTooltipText;break;case 0:return this.getFundedContentProgramSelectorText()}return null};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c=a.bootloaded,d=a.composerConfig,e=a.autoCrosspostToShowParent,f=a.contentTags,g=a.descriptionEditorState,i=a.deal,j=a.fundedContentProgram,k=a.playlistIDs,l=a.seasonIDOld,m=a.selectedGame,n=a.enableDonationTagger,o=a.isExplicitlyTaggedAsGamingVideo;a=a.videoComposerID;var p=b("VideoComposerStores").getMetadataStore(a).getState();p=p.showVideoType;a=b("VideoComposerStores").getDistributionStore(a).getState();a=a.charityData;var q=p==="episode"||p==="recap";p=p==="recap";c&&d||h(0,158);c=b("getMentionsTextForContentState")(g.getCurrentContent());g={isEpisode:q,seasonID:q?l:null,playlistIDs:k,isRecap:p};q=d.taggersConfig;l=q.get(b("ReactComposerTaggerType").TARGETING);p=l?b("dotAccess")(l,"feedTargetingGK"):!1;q=b("ReactComposerPostDataUtils").getPostData({composerID:d.contextConfig.composerID,targetID:parseInt(d.contextConfig.targetID,10),composerConfig:{contextInfo:{}},useHints:p});l=b("ReactComposerTaggerStore").hasMessagingCTA(d.contextConfig.composerID)?b("AdsCallToActionTypesCond").TYPES.MESSAGE_PAGE.name:null;p=b("ReactComposerTaggerStore").getTaggerData(d.contextConfig.composerID,b("ReactComposerTaggerType").GET_SHOWTIMES);var r=b("ReactComposerMultilingualStatusStore").getPostData(d.contextConfig.composerID),s=b("ReactComposerTaggerStore").getTaggerData(d.contextConfig.composerID,b("ReactComposerTaggerType").SUPPORT_NOW),t=null;n&&q.charity_id?t=q.charity_id:a&&(t=a.id);return b("Promise").resolve({action_type_id:q.action_type_id,composertags_place:q.composertags_place,composertags_place_name:q.composertags_place_name,composertags_product_items:q.composertags_product_items,composertags_sponsor:q.composertags_sponsors,composertags_with:q.composertags_with,content_tags:b("VideoComposerDialogBasicUtils").getContentTagEntryIDs(f),cta_type:l,deal_id:i==null?void 0:i.deal_id,direct_share_status:q.direct_share_status,episode_data_json:JSON.stringify(g),external_movie_data:p,feed_targeted_data:q.feed_targeted_data,free_form_tags:b("VideoComposerDialogBasicUtils").getFreeFormContentTags(f),funded_content_program:j,fundraiser_for_story_charity_id:t,game_id:m?m.getUniqueID():"",fan_funding_promotion_metadata:{is_promotional_post:(s==null?void 0:s.hasSupportNowCTA)?!0:"",page_id:d.contextConfig.targetID,payload:s==null?void 0:s.fanFundingPromotionPayload},is_explicitly_tagged_as_gaming_video:o,icon_id:q.icon_id,multilingual_specified_lang:r.multilingual_specified_lang,multilingual_status_langs:r.multilingual_status_langs,multilingual_statuses:r.multilingual_statuses,object_id:q.object_id,object_str:q.object_str,share_to_parent_page_option_selected:e,sponsor_relationship:q.sponsor_relationship,targeted_privacy_data:q.targeted_privacy_data||void 0,branded_content_data:q.branded_content_data||void 0,xhpc_message:c,playlistIDs:k})};d.getCrosspostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c=a.composerConfig,d=a.contentTags;a=a.descriptionEditorState;c=(c=c)!=null?(c=c.contextConfig)!=null?c.composerID:c:c;if(!c)return b("Promise").reject();var e={};a=b("getMentionsTextForContentState")(a.getCurrentContent());e.description=a;e.content_tags=b("VideoComposerDialogBasicUtils").getContentTagEntryIDs(d);e.free_form_tags=b("VideoComposerDialogBasicUtils").getFreeFormContentTags(d);a=b("ReactComposerTaggerStore").getTaggerData(c,b("ReactComposerTaggerType").PEOPLE)||[];e.tags=a.map(function(a){return a.getUniqueID()});d=b("ReactComposerTaggerStore").getTaggerData(c,b("ReactComposerTaggerType").LOCATION);d&&d.place&&d.place.getUniqueID&&d.place.getUniqueID()&&(e.place=d.place.getUniqueID());a=b("ReactComposerTaggerStore").getTaggerData(c,b("ReactComposerTaggerType").ACTIVITY);if(a&&a.action&&a.object){d=a.object;e.og_action_type_id=a.action.getUniqueID();a=d.getAuxiliaryData();a&&a.original_id?e.og_object_id=d.getUniqueID():e.og_phrase=d.getTitle()}a=b("ReactComposerTaggerStore").getTaggerData(c,b("ReactComposerTaggerType").TARGETING);d=null;var f=null;a&&(d=a.targeting,f=a.gating,a.woodhengeInfo!==null&&(f||(f={}),f.woodhenge_info=a.woodhengeInfo));a=b("ComposerVideoPostUtils").convertBaseTargeting(d);b("ComposerVideoPostUtils").convertExcludedLocations(f);delete a.zipcodes;e.pages_feed_targeting=a;e.pages_targeting=f;d=b("ReactComposerTaggerStore").getTaggerData(c,b("ReactComposerTaggerType").SPONSOR);if(d){a=(d.sponsors||[]).map(function(a){return a.getUniqueID()});a.length>0&&(e.sponsor_id=a[0],e.direct_share_status=d.directShareStatus,e.sponsor_relationship=d.sponsorRelationship)}f=b("ReactComposerTaggerStore").getTaggerData(c,b("ReactComposerTaggerType").FUNDRAISER);d=(a=f)!=null?a.charityID:a;d&&(e.fundraiser_for_story_charity_id=d);f=b("PagesComposerBoostedPostsStore").getConfig(c);f!==null&&(e.boosted_post=f);e.multilingual_data=b("ReactComposerMultilingualStatusStore").getCrosspostData(c);e.specified_dialect=b("ReactComposerMultilingualStatusStore").getSpecifiedPostLanguage(c);return b("Promise").resolve(b("flattenPHPQueryData")(e))};d.getEditRequestDataToSend=function(){var a=this.getPostRequestDataToSend(),c=this.getState(),d=c.composerConfig,e=c.deal,f=c.fundedContentProgram,g=c.selectedGame,h=c.isExplicitlyTaggedAsGamingVideo;d=(c=d)!=null?(c=c.contextConfig)!=null?c.composerID:c:c;if(!d)return b("Promise").reject();var i=b("VideoComposerDialogBasicUtils").getComposerTaggerData(d);return a.then(function(a){a={deal_id:e==null?void 0:e.deal_id,description:a.xhpc_message,content_tags:a.content_tags,episode_data:a.episode_data_json,free_form_tags:a.free_form_tags,funded_content_program:f,game_id:g?g.getUniqueID():"",is_explicitly_tagged_as_gaming_video:h,multilingual_specified_lang:a.multilingual_specified_lang,multilingual_status_langs:a.multilingual_status_langs,multilingual_statuses:a.multilingual_statuses,playlist_ids:a.playlistIDs};Object.assign(a,i);return b("Promise").resolve(b("flattenPHPQueryData")(a))})};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerDialogStoreClass",["DOM","ImmutableRecordWithV4Types","React","ReactDOM","VideoComposerActionTypes","VideoComposerDialogContainer.react","VideoComposerStoreBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;c={videoComposerID:"",dialogMounted:!1};var g=b("DOM").create("div"),h=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return h()};d.reduceImpl=function(a,c){switch(c.type){case b("VideoComposerActionTypes").MOUNT_COMPOSER_DIALOG:a.dialogMounted||(b("ReactDOM").render(b("React").jsx(b("VideoComposerDialogContainer.react"),{videoComposerID:a.videoComposerID}),g),a=a.set("dialogMounted",!0));return a;case b("VideoComposerActionTypes").EXIT_DIALOG:case b("VideoComposerActionTypes").CLOSE_PUBLISH_CONFIRM_DIALOG:case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_SUCCESS:case b("VideoComposerActionTypes").MINIMIZE_DIALOG:b("ReactDOM").unmountComponentAtNode(g);return a.set("dialogMounted",!1);default:return a}};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerDistributionStoreClass",["Promise","ActorURI","AsyncRequest","ImmutableRecordWithV4Types","ReactComposerAudienceStore","SimpleNUXMessage","SimpleNUXMessageTypes","VideoCommentatingPermission","VideoComposerActions","VideoComposerActionTypes","VideoComposerDialogDistributionUtils","VideoComposerDispatchers","VideoComposerDistributionActions","VideoComposerMatureContentRatingUtils","VideoComposerPostType","VideoComposerPublishingTypes","VideoComposerStoreBase","VideoComposerStores","VideoComposerUtils","VideoEditPublishingAction","XVideoComposerFetchCrosspostPagesController","XVideoComposerMatureContentRatingAppealFormController","flattenPHPQueryData","immutable","keyMirror","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=b("VideoComposerMatureContentRatingUtils").MATURE_CONTENT_APPEAL_FORM_STATUS,h=b("VideoComposerPostType").VideoComposerPostTypes,i=b("VideoComposerPublishingTypes").PublishingType,j=b("keyMirror")(b("VideoCommentatingPermission")),k=a({videoComposerID:"",addToPagesStory:!1,displayInWatch:!0,showInNewsFeed:!0,shouldShowIsMonetizable:!1,allowEmbedding:!0,disableEmbeddingOption:!1,allMonetizableSelected:!1,addAsSecretVideo:!1,charityData:null,disableAddAsSecretVideo:!1,disableShowInNewsFeed:!1,disableShowInWatchForSecretVideo:!1,crosspostPages:null,enableCrosspostRefresh:!1,allowGraphicWarningOption:!1,showDisplayInWatchOptionIsToggleEnabled:!1,showGraphicWarning:!1,showFundraiser:!1,showNewTag:!1,showStoriesIntegration:!1,blockSocial:!1,commentatingPermission:"allow",showCommentatingPermissionToggle:!0,canShowMatureContentRating:!1,matureContentAppealFormStatus:g.NOT_INITIATED,allowSettingMatureContentRating:!1,matureContentRating:0,originalMatureContentRating:0,showMatureContentAppealFormEditor:!1,allowSettingDrm:!1,enableDrm:!1,originalCrosspostPages:b("immutable").Map(),reducedCrosspostingPayloadEligible:!1,showMultipostUpsellNux:!1,showID:null,seasonID:null,isShowDraft:!1,isSeasonDraft:!1,isSeriesDogfooded:!1,isSeasonDogfooded:!1,isShowTrailer:!1,seriesOptionsMap:b("immutable").Map(),seriesToSeasonOptionsMap:b("immutable").Map()});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return k()};d.reduceImpl=function(a,c){__p&&__p();var d;switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=a.set("reducedCrosspostingPayloadEligible",c.serverParams.common.reducedCrosspostingPayloadEligible);c.clientParams.entryPointRef==="cs_content_show_trailer_upload"&&(a=a.set("isShowTrailer",!0));a=a.set("isShowDraft",(d=c.clientParams.isShowDraft)!=null?d:!1);a=a.set("isSeasonDraft",(d=c.clientParams.isSeasonDraft)!=null?d:!1);a=a.set("isSeriesDogfooded",(d=c.clientParams.isSeriesDogfooded)!=null?d:!1);a=a.set("isSeasonDogfooded",(d=c.clientParams.isSeasonDogfooded)!=null?d:!1);return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:return a.set("reducedCrosspostingPayloadEligible",c.editParams.common.reducedCrosspostingPayloadEligible);case b("VideoComposerActionTypes").BOOTLOAD_DISTRIBUTION_TAB:return this.$VideoComposerDistributionStoreClass1(a).set("allowGraphicWarningOption",c.data.allowGraphicWarningOption).set("disableEmbeddingOption",c.data.disableEmbeddingOption).set("allowEmbedding",!c.data.disableEmbeddingOption).set("showDisplayInWatchOptionIsToggleEnabled",c.data.showDisplayInWatchOptionIsToggleEnabled).set("showFundraiser",c.data.showFundraiser).set("canShowMatureContentRating",c.data.showMatureContentRating).set("allowSettingMatureContentRating",c.data.allowSettingMatureContentRating).set("showCommentatingPermissionToggle",c.data.showCommentatingPermissionToggle).set("showStoriesIntegration",c.data.showStoriesIntegration).set("allowSettingDrm",c.data.allowSettingDrm).set("showNewTag",this.$VideoComposerDistributionStoreClass2()).set("showMultipostUpsellNux",c.data.showMultipostUpsellNux).set("seriesOptionsMap",b("immutable").Map(c.data.seriesOptionsMap)).set("seriesToSeasonOptionsMap",b("immutable").Map(c.data.seriesToSeasonOptionsMap));case b("VideoComposerActionTypes").BOOTLOAD_DISTRIBUTION_TAB_FOR_EDIT:a=this.$VideoComposerDistributionStoreClass3(c.data.crosspostPages,a);a=a.set("allowEmbedding",c.data.allowEmbedding).set("disableEmbeddingOption",c.data.disableEmbeddingOption).set("canShowMatureContentRating",c.data.showMatureContentRating).set("allowSettingMatureContentRating",c.data.allowSettingMatureContentRating).set("matureContentRating",c.data.matureContentRating).set("originalMatureContentRating",c.data.matureContentRating).set("commentatingPermission",c.data.commentatingPermission).set("showCommentatingPermissionToggle",c.data.showCommentatingPermissionToggle).set("crosspostPages",c.data.crosspostPages).set("showNewTag",this.$VideoComposerDistributionStoreClass2()).set("seriesOptionsMap",b("immutable").Map(c.data.seriesOptionsMap)).set("seriesToSeasonOptionsMap",b("immutable").Map(c.data.seriesToSeasonOptionsMap));if(c.data.showsV2EpisodeData!=null){d=c.data.showsV2EpisodeData;a=a.set("showID",String(d.show_id));d.season_id!=null&&(a=a.set("seasonID",String(d.season_id)));a=a.set("isShowTrailer",(d=d.is_show_trailer)!=null?d:!1)}return a;case b("VideoComposerActionTypes").BOOTLOAD_DISTRIBUTION_TAB_FOR_CROSSPOST:return a.set("showCommentatingPermissionToggle",c.data.showCommentatingPermissionToggle);case b("VideoComposerActionTypes").TOGGLE_ADD_TO_PAGES_STORY:return a.set("addToPagesStory",!a.get("addToPagesStory"));case b("VideoComposerActionTypes").TOGGLE_DISPLAY_IN_WATCH_OPTION:return a.set("displayInWatch",!a.get("displayInWatch"));case b("VideoComposerActionTypes").TOGGLE_NEWS_FEED:return a.set("showInNewsFeed",!a.get("showInNewsFeed"));case b("VideoComposerActionTypes").TOGGLE_EMBEDDING:return a.set("allowEmbedding",!a.get("allowEmbedding"));case b("VideoComposerActionTypes").TOGGLE_SECRET_VIDEO:d=!a.get("addAsSecretVideo");a=a.set("addAsSecretVideo",d);d?(a=a.set("displayInWatch",!1).set("showInNewsFeed",!1),a=this.$VideoComposerDistributionStoreClass4(a),a=a.set("blockSocial",!0)):(a=this.$VideoComposerDistributionStoreClass4(a),a=a.set("blockSocial",!1));return a;case b("VideoComposerActionTypes").SET_PUBLISHING_TYPE:c.publishingType===i.PREMIERE?(a=a.set("showInNewsFeed",!0),a=a.set("addAsSecretVideo",!1),a=a.set("blockSocial",!1)):(c.publishingType===i.PUBLISH_FOR_DOGFOODING||c.publishingType===i.DOGFOOD_WITH_SERIES_OR_SEASON)&&(a=a.set("showInNewsFeed",!1),a=a.set("addAsSecretVideo",!1));a=this.$VideoComposerDistributionStoreClass4(a);return a;case b("VideoComposerActionTypes").SET_POST_TYPE:(c.postType===h.PREMIERE||c.postType===h.VIDEO_UPLOAD_WATCH_PARTY)&&(a=a.set("showInNewsFeed",!0),a=a.set("addAsSecretVideo",!1),a=a.set("blockSocial",!1));a=this.$VideoComposerDistributionStoreClass4(a);return a;case b("VideoComposerActionTypes").SELECT_TAB:d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=d.dialogMode;if(c.tab==="distribution"&&d==="video_upload"&&!Array.isArray(a.crosspostPages)){d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d.targetID&&this.$VideoComposerDistributionStoreClass5(d.targetID)}return a;case b("VideoComposerActionTypes").OPEN_PUBLISH_DRAWER:if(!Array.isArray(a.crosspostPages)){d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d.targetID&&this.$VideoComposerDistributionStoreClass5(d.targetID)}return a;case b("VideoComposerActionTypes").CROSSPOST_PAGES_FETCHED:a=a.set("shouldShowIsMonetizable",c.shouldShowIsMonetizable);a=this.$VideoComposerDistributionStoreClass3(c.pages,a);return a.set("crosspostPages",c.pages);case b("VideoComposerActionTypes").CROSSPOST_LINK_CLICKED:return a.set("enableCrosspostRefresh",!0);case b("VideoComposerActionTypes").REFRESH_CROSSPOST_PAGES:d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d.targetID&&(this.$VideoComposerDistributionStoreClass5(d.targetID),a=a.set("crosspostPages",null),a=a.set("originalCrosspostPages",b("immutable").Map()));return a;case b("VideoComposerActionTypes").TOGGLE_CROSSPOST_PAGE:var e=c.pageType==="monetizable_pages",f=a.get("allMonetizableSelected"),j=c.pageID;d=a.get("crosspostPages");d&&(a=a.set("crosspostPages",d.map(function(a){a.id===j&&(a.allow=!a.allow);e&&a.is_monetizable&&(a.allow=!f);return a})));e&&(a=a.set("allMonetizableSelected",!f));return a;case b("VideoComposerActionTypes").TOGGLE_GRAPHIC_WARNING:return a.set("showGraphicWarning",!a.get("showGraphicWarning"));case b("VideoComposerActionTypes").TOGGLE_BLOCK_SOCIAL:return a.set("blockSocial",!a.get("blockSocial"));case b("VideoComposerActionTypes").TOGGLE_COMMENTATING_PERMISSION:return this.$VideoComposerDistributionStoreClass6(a);case b("VideoComposerActionTypes").UPDATE_CHARITY_DATA:return a.set("charityData",c.charityData);case b("VideoComposerActionTypes").UPDATE_MATURE_CONTENT_RATING:return a.set("matureContentRating",c.rating);case b("VideoComposerActionTypes").SHOW_MATURE_CONTENT_APPEAL_FORM:return a.set("showMatureContentAppealFormEditor",!0);case b("VideoComposerActionTypes").HIDE_MATURE_CONTENT_APPEAL_FORM:return a.set("showMatureContentAppealFormEditor",!1);case b("VideoComposerActionTypes").SUBMIT_MATURE_CONTENT_APPEAL_FORM:return this.$VideoComposerDistributionStoreClass7(a,c);case b("VideoComposerActionTypes").SUBMIT_MATURE_CONTENT_APPEAL_FORM_SUCCESS:return a.set("matureContentAppealFormStatus",g.SUBMITTED);case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();case b("VideoComposerActionTypes").TOGGLE_DRM:return a.set("enableDrm",!a.get("enableDrm"));case b("VideoComposerActionTypes").TOGGLE_PREMIERE_NOW:a=this.$VideoComposerDistributionStoreClass4(a);return a;case b("VideoComposerActionTypes").UPDATE_SHOW_AND_SEASON_ID:a=a.set("showID",c.showID).set("seasonID",c.seasonID);d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=d.composerEntryPointRef;if(b("VideoComposerUtils").isFromCreatorStudioShowsPanel(d))return a;d=this.$VideoComposerDistributionStoreClass8(c.showID);c=this.$VideoComposerDistributionStoreClass9(c.showID,c.seasonID);a=a.set("isShowDraft",d).set("isSeasonDraft",c);var k=b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState();k=k.publishingType;d=d||c;d?k===i.PUBLISH_NOW&&b("setTimeout")(function(){return b("VideoComposerActions").setPublishingType(a.videoComposerID,i.PUBLISH_WITH_SHOW_OR_SEASON)}):k===i.PUBLISH_WITH_SHOW_OR_SEASON&&b("setTimeout")(function(){return b("VideoComposerActions").setPublishingType(a.videoComposerID,i.PUBLISH_NOW)});return a;default:return a}};d.$VideoComposerDistributionStoreClass8=function(a){var b=this.getState();return a!=null?b.seriesOptionsMap.get(a)!=null&&b.seriesOptionsMap.get(a).publishing_status===2:!1};d.$VideoComposerDistributionStoreClass9=function(a,b){var c=this.getState();if(a!=null){c=c.seriesToSeasonOptionsMap.get(a);if(c&&b!=null)return c.get(b).publishing_status===2}return!1};d.$VideoComposerDistributionStoreClass3=function(a,c){var d=b("immutable").Map();a.forEach(function(a){return d=d.set(a.id,a.allow)});return c.set("originalCrosspostPages",d)};d.$VideoComposerDistributionStoreClass6=function(a){return a.get("commentatingPermission")==="disallow"?a.set("commentatingPermission","allow"):a.set("commentatingPermission","disallow")};d.$VideoComposerDistributionStoreClass7=function(a,c){if(c.type!==b("VideoComposerActionTypes").SUBMIT_MATURE_CONTENT_APPEAL_FORM)return a;b("XVideoComposerMatureContentRatingAppealFormController").getURIBuilder().setFBID("page_id",c.pageID).setFBID("video_id",c.videoID).setEnum("original_mature_content_rating",c.originalMatureContentRating).setEnum("expected_mature_content_rating",c.expectedMatureContentRating).setString("additional_info",c.additionalInfo).getRequest_LEGACY_UNTYPED(new(b("AsyncRequest"))().setMethod("POST")).setPayloadHandler(function(c){return b("VideoComposerDistributionActions").submitMatureContentAppealFormSuccess(a.videoComposerID)}).send();return a.set("matureContentAppealFormStatus",g.IN_PROGRESS)};d.$VideoComposerDistributionStoreClass4=function(a){b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getPublishingStore(a.videoComposerID).getDispatchToken()]);var c=b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState();c=c.isComposerPostScheduleRedesign;return c?this.$VideoComposerDistributionStoreClass10(a):this.$VideoComposerDistributionStoreClass11(a)};d.$VideoComposerDistributionStoreClass11=function(a){__p&&__p();var c;b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([(c=b("VideoComposerStores")).getPublishingStore(a.videoComposerID).getDispatchToken()]);var d=c.getPublishingStore(a.videoComposerID).getState();d=d.publishingType;b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([c.getPremiereStore(a.videoComposerID).getDispatchToken()]);c=c.getPremiereStore(a.videoComposerID).getState();c=c.shouldPremiere;a=a.set("disableShowInWatchForSecretVideo",a.get("addAsSecretVideo"));if(d===i.PREMIERE||d===i.PUBLISH_FOR_DOGFOODING||d===i.PUBLISH_WITH_SHOW_OR_SEASON||d===i.DOGFOOD_WITH_SERIES_OR_SEASON||c)return a.set("disableShowInNewsFeed",!0).set("disableAddAsSecretVideo",!0);return a.get("addAsSecretVideo")===!0?a.set("disableShowInNewsFeed",!0).set("disableAddAsSecretVideo",!1):a.set("disableShowInNewsFeed",!1).set("disableAddAsSecretVideo",!1)};d.$VideoComposerDistributionStoreClass10=function(a){__p&&__p();var c;b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([(c=b("VideoComposerStores")).getPublishingStore(a.videoComposerID).getDispatchToken()]);var d=c.getPublishingStore(a.videoComposerID).getState();d=d.postType;b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([c.getPremiereStore(a.videoComposerID).getDispatchToken()]);c=c.getPremiereStore(a.videoComposerID).getState();c=c.shouldPremiere;var e=a.get("addAsSecretVideo");a=a.set("disableShowInWatchForSecretVideo",e);d=d===h.PREMIERE||d===h.VIDEO_UPLOAD_WATCH_PARTY||c;a=a.set("disableShowInNewsFeed",d||e);a=a.set("disableAddAsSecretVideo",d);return a};d.$VideoComposerDistributionStoreClass1=function(a){var c=b("VideoComposerStores").getBasicStore(a.videoComposerID).getState();c=c.fromComposerID;var d=!1;c&&(d=b("ReactComposerAudienceStore").getStoriesSelected(c));return a.set("addToPagesStory",d)};d.$VideoComposerDistributionStoreClass2=function(){return!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").VIDEO_COMPOSER_MATURE_CONTENT_RATING)};d.$VideoComposerDistributionStoreClass5=function(a){var c=this,d=b("XVideoComposerFetchCrosspostPagesController").getURIBuilder().setFBID("page_id",a).getURI();d=b("ActorURI").create(d,a);new(b("AsyncRequest"))().setURI(d).setHandler(function(a){a=a.getPayload();b("VideoComposerDistributionActions").crosspostPagesFetched(c.getState().videoComposerID,a.crosspostPages,a.shouldShowIsMonetizable)}).send()};d.$VideoComposerDistributionStoreClass12=function(){var a=this.getState(),c=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState();c=c.shouldPremiereWithShowOrSeason;var d=b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState();d=d.publishingType;var e=b("VideoComposerStores").getEditStore(a.videoComposerID).getState();return{show_id:a.showID,season_id:a.seasonID,publish_with_video_list:d===i.PUBLISH_WITH_SHOW_OR_SEASON||d===i.DOGFOOD_WITH_SERIES_OR_SEASON||e.selectedPublishingAction===b("VideoEditPublishingAction").PUBLISH_WITH_SERIES.value||e.selectedPublishingAction===b("VideoEditPublishingAction").PUBLISH_WITH_SEASON.value,should_premiere:c,is_show_trailer:a.isShowTrailer}};d.getCrosspostRequestDataToSend=function(){var a=this.getState();a={no_story:!a.showInNewsFeed,embeddable:a.allowEmbedding,secret:a.addAsSecretVideo,social_actions:!a.blockSocial};this.getShowCommentatingPermissionToggle()&&(a.commentating_permission=this.$VideoComposerDistributionStoreClass13());return b("Promise").resolve(b("flattenPHPQueryData")(a))};d.getEditRequestDataToSend=function(){var a=this.getState(),c=this.filterCrossposted(a.crosspostPages);c={embeddable:a.allowEmbedding,has_embeddable:!0,crossposting_config:c,shows_v2_episode_data:JSON.stringify(this.$VideoComposerDistributionStoreClass12())};this.getShowMatureContentRating()&&a.allowSettingMatureContentRating&&(c.mature_content_rating=a.matureContentRating);this.getShowCommentatingPermissionToggle()&&(c.commentating_permission=a.commentatingPermission);return b("Promise").resolve(b("flattenPHPQueryData")(c))};d.getPostRequestDataToSend=function(){var a=this.getState(),c=this.filterCrossposted(a.crosspostPages),d=this.getShowMatureContentRating()&&a.allowSettingMatureContentRating?a.matureContentRating:null,e=this.getShowCommentatingPermissionToggle()?a.commentatingPermission:null,f=!a.showInNewsFeed||b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().publishingType===i.PUBLISH_WITH_SHOW_OR_SEASON;return b("Promise").resolve({exclude_from_watch:!a.displayInWatch,no_story:f,embeddable:a.allowEmbedding,secret:a.addAsSecretVideo,crossposting_config:c||[],disturbing:a.showGraphicWarning,social_actions:!a.blockSocial,mature_content_rating:d,enable_drm:a.enableDrm,commentating_permission:e,shows_v2_episode_data:JSON.stringify(this.$VideoComposerDistributionStoreClass12())})};d.getIsAllMonetizableClicked=function(){var a=this.getState();a=a.crosspostPages;if(a&&a.length>0){a=a.find(function(a){return a.allow&&a.type==="monetizable_pages"});return!!a}return!1};d.getCrosspostPages=function(){var a=this.getState();a=a.crosspostPages;return this.filterCrossposted(a)};d.filterCrossposted=function(a){__p&&__p();if(!a)return null;var b=this.getState();b=b.reducedCrosspostingPayloadEligible;if(!b)return a.filter(function(a){return a.type!=="monetizable_pages"});var c=this.getState().originalCrosspostPages;return a.filter(function(a){return a.type!=="monetizable_pages"&&a.allow!==c.get(a.id)})};d.getShowCommentatingPermissionToggle=function(){var a=this.getState();a=a.showCommentatingPermissionToggle;return a};d.getShowMatureContentRating=function(){var a=this.getState(),c=a.canShowMatureContentRating,d=a.originalMatureContentRating;a=a.videoComposerID;a=b("VideoComposerStores").getMetadataStore(a).getState();var e=a.dialogMode;a=a.showVideoType;var f=!1;e==="video_edit"&&(f=d!==0);return c&&(a==="episode"||f)};d.getShowMatureContentAppealForm=function(){var a=this.getShowMatureContentRating(),b=this.getState(),c=b.allowSettingMatureContentRating;b=b.originalMatureContentRating;return b===0||b===1?!1:a===!0&&c===!1};d.shouldAddToPagesStory=function(){var a=this.getState();a=a.videoComposerID;var c=b("VideoComposerStores").getBasicStore(a).getState();c=c.composerConfig;var d=b("VideoComposerStores").getMetadataStore(a).getState(),e=d.pagesComposerContextConfig;d=d.videoDuration;a=b("VideoComposerStores").getPublishingStore(a).getState();a=a.publishingType;return this.getState().addToPagesStory&&b("VideoComposerDialogDistributionUtils").enableAddToStoriesOption(c,e,d||0,a)};d.$VideoComposerDistributionStoreClass13=function(){var a=this.getState();a=a.commentatingPermission;switch(a){case"allow":return j.ALLOW;case"disallow":return j.DISALLOW;default:return j.UNSET}};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerEditStoreClass",["ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerDialogEditUtils","VideoComposerStoreBase","VideoComposerStores"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=a({videoComposerID:"",canMakeFeatured:!1,creationTime:0,downloadGeneratedThumbnailsUrl:null,downloadHDUrl:null,downloadSDUrl:null,editTabsLoaded:!1,embedURL:"",isFeaturedVideo:!1,isSaving:!1,isSavePending:!1,isTitleEmptyInitially:!1,publishingConfig:null,selectedPublishingAction:"",editSource:null,storyDomID:null,timelineIdentifier:null});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("canMakeFeatured",c.editParams.canMakeFeatured);a=a.set("creationTime",c.editParams.creationTime);a=a.set("downloadGeneratedThumbnailsUrl",c.editParams.downloadGeneratedThumbnailsUrl);a=a.set("downloadHDUrl",c.editParams.downloadHDUrl);a=a.set("downloadSDUrl",c.editParams.downloadSDUrl);a=a.set("editSource",c.editParams.editSource);a=a.set("embedURL",c.editParams.embedURL);a=a.set("isFeaturedVideo",c.editParams.isFeaturedVideo);a=a.set("isTitleEmptyInitially",c.editParams.title==="");a=a.set("publishingConfig",c.editParams.publishingConfig);a=a.set("selectedPublishingAction",c.editParams.publishingConfig.selectedValue);a=a.set("storyDomID",c.editParams.storyDomID);a=a.set("timelineIdentifier",c.editParams.timelineIdentifier);return a;case b("VideoComposerActionTypes").EDIT_TABS_LOADED:a=a.set("editTabsLoaded",!0);return a;case b("VideoComposerActionTypes").UPDATE_IS_FEATURED_VIDEO:a=a.set("isFeaturedVideo",!0);return a;case b("VideoComposerActionTypes").UPLOAD_FAILED:a.isSavePending&&(a=a.set("isSavePending",!1));return a;case b("VideoComposerActionTypes").UPLOAD_FINISHED:a.isSavePending&&(a=a.set("isSavePending",!1),a=a.set("isSaving",!0),this.$VideoComposerEditStoreClass1());return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO:var d=b("VideoComposerStores").getUploadStore(a.videoComposerID).getState(),e=d.videoUploader;d=d.uploadFinished;if(e&&!d)return a.set("isSavePending",!0);a=a.set("isSaving",!0);this.$VideoComposerEditStoreClass1();return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_SUCCESS:e=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=b("VideoComposerStores").getAdBreakStore(a.videoComposerID).getState();d=!d.adBreaksDisabled&&(d.isAdBreakAutoInsertionEnabled||d.insertedAdBreaks.count()>0);b("VideoComposerDialogEditUtils").onSuccessfulSave(a.videoComposerID,e.actorID||"",e.videoID||"",e.videoAssetID||"",e.isOriginalVideo,d,a.timelineIdentifier,a.storyDomID,a.editSource);return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_FAILURE:a=a.set("isSaving",!1);return a;case b("VideoComposerActionTypes").SELECT_EDITING_PUBLISH_ACTION:a=a.set("selectedPublishingAction",c.publishAction);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;default:return a}};d.$VideoComposerEditStoreClass1=function(){var a=this.getState();a=a.videoComposerID;var c=b("VideoComposerStores").getMetadataStore(a).getState(),d=c.actorID,e=c.enabledTabs,f=c.videoID;c=c.composerEntryPointRef;d&&f&&b("VideoComposerDialogEditUtils").onSave(a,d,f,e,c)};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerLoggingStoreClass",["FunnelLogger","ImmutableRecordWithV4Types","PremiereLivingRoomTypedLogger","PremiereVideoTypedLogger","ShowsVideoDataTypedLogger","SphericalDirectorFunnelConstants","SphericalDirectorFunnelUtils","VideoAssetWaterfallTypedLogger","VideoComposerActionTypes","VideoComposerAdBreakEnabledCrosspostingTypedLogger","VideoComposerDialogSphericalDirectorUtils","VideoComposerDialogUIEvent","VideoComposerDialogUITypedLogger","VideoComposerDispatchers","VideoComposerPostType","VideoComposerPublishingTypes","VideoComposerStoreBase","VideoComposerStores","VideoEditTypedLogger","VideoUploadLogger","gkx","uuid","videoComposerGetPremiereDisabledReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=b("VideoComposerPostType").VideoComposerPostTypes,h=b("VideoComposerPublishingTypes").PublishingType;c={videoComposerID:"",actorID:null,composerEntryPointRef:null,dialogMode:null,hasBeenReset:!1,hasPlayedPreview:!1,hasUploadFinished:!1,isVideoTrimmed:!1,loggedOptOutOfPremiereDefault:!1,postAttemptCount:0,selectedTab:"basic",sessionID:"",uploadAttemptCount:0,videoAssetID:null,videoAssetWaterfallSource:null,videoID:null};var i=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return i()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").LOG_EVENT:this.logEventGeneric(a,c.event);return a;case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=a.set("actorID",c.serverParams.common.actorID);a=a.set("composerEntryPointRef",c.clientParams.entryPointRef);a=a.set("sessionID",b("uuid")());a=a.set("dialogMode","video_upload");this.logEventGeneric(a,"dialog_opened");this.$VideoComposerLoggingStoreClass1(a);return a;case b("VideoComposerActionTypes").INITIALIZE_CROSSPOST_COMPOSER:a=a.set("actorID",c.params.common.actorID);a=a.set("dialogMode","video_crosspost");a=a.set("sessionID",b("uuid")());a=a.set("videoAssetID",c.params.videoAssetID);a=a.set("videoAssetWaterfallSource",c.params.videoAssetWaterfallSource);this.logEventGeneric(a,"dialog_opened");this.logVideoAssetWaterfallEvent(a,"ui.new_post_from_asset_start");return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("actorID",c.editParams.common.actorID);a=a.set("dialogMode","video_edit");a=a.set("sessionID",b("uuid")());a=a.set("videoID",c.editParams.videoID);this.logEventGeneric(a,"dialog_opened");this.logEditWaterfallEvent(a,"js_loaded");return a;case b("VideoComposerActionTypes").SELECT_TAB:this.logTabSwitchEvent(a,c.tab);a=a.set("selectedTab",c.tab);return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:c.data?this.logEventGeneric(a,"metadata_load_success"):this.logEventGeneric(a,"metadata_load_failed");return a;case b("VideoComposerActionTypes").PAGE_STORY_CREATION_ATTEMPT:this.logEventGeneric(a,"page_story_creation_attempt");return a;case b("VideoComposerActionTypes").PAGE_STORY_CREATION_FAILURE:this.logEventGeneric(a,"page_story_creation_failure",c.error||"");return a;case b("VideoComposerActionTypes").PAGE_STORY_CREATION_SUCCESS:this.logEventGeneric(a,"page_story_creation_success");return a;case b("VideoComposerActionTypes").TAB_BOOTLOAD_ERROR:this.logTabErrorEvent(a,c.tab,c.error);return a;case b("VideoComposerActionTypes").EDIT_TABS_LOADED:this.logEventGeneric(a,"edit_tabs_loaded");return a;case b("VideoComposerActionTypes").UPLOAD_FAILED:this.logEventGeneric(a,"upload_failure",c.errorData.error_description);return a;case b("VideoComposerActionTypes").UPLOAD_FINISHED:b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getMetadataStore(a.videoComposerID).getDispatchToken()]);var d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=d.videoID;a=a.set("hasUploadFinished",!0);a=a.set("videoID",d);this.logEventGeneric(a,"upload_finished");return a;case b("VideoComposerActionTypes").POST_FAILED:this.logEventGeneric(a,"post_failure",c.errorMessage,a.isVideoTrimmed?{is_trimmed:!0}:{});a.dialogMode==="video_crosspost"&&this.logVideoAssetWaterfallEvent(a,"ui.new_post_from_asset_failure",c.errorMessage);a=a.set("postAttemptCount",a.postAttemptCount+1);b("FunnelLogger").appendActionIfNew(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.POST_VIDEO_FAILURE_COMPOSER);this.$VideoComposerLoggingStoreClass2(a,"premiere_submit_error","post_premiere_failure");this.$VideoComposerLoggingStoreClass3(a,"create_request_failed");return a;case b("VideoComposerActionTypes").EXIT_DIALOG_REPLACE_FILE:this.logEventGeneric(a,"exit_composer_replace_file");return a;case b("VideoComposerActionTypes").EXIT_DIALOG_SAVE_DRAFT:this.logEventGeneric(a,"exit_composer_save_draft");return a;case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:this.logEventGeneric(a,"file_replaced");this.logVideoUploadEvent(b("VideoUploadLogger").EVENT_REPLACE_VIDEO);a=a.set("uploadAttemptCount",a.uploadAttemptCount+1);return a;case b("VideoComposerActionTypes").BACKDATE_CONFIRM:this.logEventGeneric(a,"post_backdate_attempt");return a;case b("VideoComposerActionTypes").NAVIGATED_FROM_PAGE:d=b("VideoComposerStores").getUIStore(a.videoComposerID).getState();d=d.composerShown;d&&this.logEventGeneric(a,"navigated_from_page");return a;case b("VideoComposerActionTypes").TOGGLE_PREMIERE_NOW:b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getPremiereStore(a.videoComposerID).getDispatchToken()]);d=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState();d.shouldPremiere&&d.canCreateMultiVideoPremiereLivingRoom&&this.$VideoComposerLoggingStoreClass4(this.getState(),!0).setEvent("selected_premiere_now_with_living_room").log();return a;case b("VideoComposerActionTypes").UPDATE_PREMIERE_CUSTOM_NAME:this.logEventGeneric(a,"set_living_room_title");return a;case b("VideoComposerActionTypes").SAVE_AS_DRAFT:case b("VideoComposerActionTypes").PUBLISH_POST:d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=d.title;if(!d)return a;d=b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState();d=d.isDraft;d&&this.logEventGeneric(a,"post_draft_attempt");this.logEventGeneric(a,"post_publish_attempt");b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getPremiereStore(a.videoComposerID).getDispatchToken()]);d=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState();b("VideoComposerStores").getPremiereStore(a.videoComposerID).getShouldPremiereOldSchool()?this.logEventGeneric(a,d.premiereDate?"post_premiere_attempt":"post_premiere_now_attempt"):b("VideoComposerStores").getPremiereStore(a.videoComposerID).getShouldPremiereNowInLivingRoom()?this.logEventGeneric(a,"post_premiere_living_room_attempt"):b("VideoComposerStores").getPremiereStore(a.videoComposerID).getShouldPremiereScheduledInLivingRoom()?this.logEventGeneric(a,"post_scheduled_premiere_living_room_attempt"):b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().scheduleDate&&this.logEventGeneric(a,"post_schedule_attempt");this.$VideoComposerLoggingStoreClass3(a,"create_request_attempted");return a;case b("VideoComposerActionTypes").POST_FINISHED:d=c==null?void 0:(d=c.data)==null?void 0:d.video_asset_id;d&&(a=a.set("videoAssetID",d));this.logEventGeneric(a,"post_success",null,a.isVideoTrimmed?{is_trimmed:!0}:{});a.dialogMode==="video_crosspost"&&this.logVideoAssetWaterfallEvent(a,"ui.new_post_from_asset_finish");this.logShowsVideoData(a);d=b("VideoComposerStores").getDistributionStore(a.videoComposerID).getIsAllMonetizableClicked();this.logMonetizableCrosspostsData(a,d);d&&this.logEventGeneric(a,"crosspost_all_monetizable_clicked");b("VideoComposerStores").getAdBreakStore(a.videoComposerID).getIsMidRollOptOutFeatureEnabled()&&this.logEventGeneric(a,"ad_breaks_mid_roll_opt_out_enabled");a=a.set("postAttemptCount",a.postAttemptCount+1);b("FunnelLogger").appendActionIfNew(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.POST_VIDEO_SUCCESS_COMPOSER);b("FunnelLogger").endFunnel(b("SphericalDirectorFunnelConstants").FUNNEL_NAME);this.$VideoComposerLoggingStoreClass2(a,"premiere_submit_success","post_premiere_success");this.$VideoComposerLoggingStoreClass3(a,"create_request_completed");return a;case b("VideoComposerActionTypes").CLOSE_PUBLISH_CONFIRM_DIALOG:this.logEventGeneric(a,"confirmation_dialog_close");return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO:this.logEventGeneric(a,"save_edited_video_attempt");this.logEditWaterfallEvent(a,"save_clicked");return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_SUCCESS:this.logSaveEditedVideoSuccess(a);this.logShowsVideoData(a);b("FunnelLogger").appendActionIfNew(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.SAVE_VIDEO_SUCCESS_COMPOSER);b("FunnelLogger").endFunnel(b("SphericalDirectorFunnelConstants").FUNNEL_NAME);return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_FAILURE:this.logEventGeneric(a,"save_edited_video_failure",c.errorMessage?c.errorMessage.toString():null);b("FunnelLogger").appendActionIfNew(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.SAVE_VIDEO_FAILURE_COMPOSER);return a;case b("VideoComposerActionTypes").SELECT_EDITING_PUBLISH_ACTION:this.logEventGeneric(a,"select_editing_publish_action");return a;case b("VideoComposerActionTypes").EXIT_DIALOG_ATTEMPT:this.logEventGeneric(a,"exit_composer_attempt");return a;case b("VideoComposerActionTypes").CLOSE_CONFIRM_DIALOG:this.logEventGeneric(a,"exit_composer_cancel");return a;case b("VideoComposerActionTypes").EXIT_DIALOG:this.logEventGeneric(a,"exit_composer_confirm",null,a.isVideoTrimmed?{is_trimmed:!0}:{});this.logEditWaterfallEvent(a,"cancel_flow");b("FunnelLogger").appendActionIfNew(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.EXIT_COMPOSER);b("FunnelLogger").endFunnel(b("SphericalDirectorFunnelConstants").FUNNEL_NAME);return a;case b("VideoComposerActionTypes").USER_PLAYED_VIDEO_PREVIEW:a.hasPlayedPreview||(this.logEventGeneric(a,"user_played_video_preview"),a=a.set("hasPlayedPreview",!0));return a;case b("VideoComposerActionTypes").UPLOAD_LOCAL_CAPTIONS:this.logLocalCaptionsUpload(a,c.captions.length);return a;case b("VideoComposerActionTypes").DELETE_LOCAL_CAPTION_FILE:this.logEventGeneric(a,"captions_local_file_delete");return a;case b("VideoComposerActionTypes").SET_DEFAULT_CAPTION_LOCALE:this.logEventGeneric(a,"captions_default_locale_selected");return a;case b("VideoComposerActionTypes").TOGGLE_ADD_TO_PAGES_STORY:this.logEventGeneric(a,"stories_option_toggled");return a;case b("VideoComposerActionTypes").GENERATED_THUMBNAILS:this.logVideoUploadEvent(b("VideoUploadLogger").EVENT_FINISHED_GENERATE_THUMBNAILS);return a;case b("VideoComposerActionTypes").GENERATED_THUMBNAILS_FAILED:this.logVideoUploadEvent(b("VideoUploadLogger").EVENT_VIDEO_DIMENSIONS_UNREADABLE);return a;case b("VideoComposerActionTypes").GENERATED_THUMBNAILS_STARTED:this.logVideoUploadEvent(b("VideoUploadLogger").EVENT_STARTED_GENERATE_THUMBNAILS);return a;case b("VideoComposerActionTypes").SUBMIT_MATURE_CONTENT_APPEAL_FORM_SUCCESS:this.$VideoComposerLoggingStoreClass5(a);return a;case b("VideoComposerActionTypes").UPDATE_CUSTOM_THUMBNAIL:this.logEventGeneric(a,"custom_thumbnail_selected");this.logVideoUploadEvent(b("VideoUploadLogger").EVENT_SELECTED_CUSTOM_THUMBNAIL);return a;case b("VideoComposerActionTypes").TOGGLE_SELECTED_GENERATED_THUMBNAIL:this.logEventGeneric(a,"generated_thumbnail_selected");return a;case b("VideoComposerActionTypes").UPDATE_SCRUBBED_THUMBNAIL:this.logEventGeneric(a,"scrubbed_thumbnail_selected");return a;case b("VideoComposerActionTypes").TAB_LOAD_ERROR:this.logEventGeneric(a,"tab_load_error",c.error);return a;case b("VideoComposerActionTypes").POST_REQUEST_SENT:this.logPostRequestSentEvent(a,c.postData);return a;case b("VideoComposerActionTypes").PREMIERE_CONFIRM:this.logEventGeneric(a,"premiere_dialog_submitted");return a;case b("VideoComposerActionTypes").OPEN_PUBLISH_DRAWER:this.logEventGeneric(a,"open_publish_drawer");return a;case b("VideoComposerActionTypes").CLOSE_PUBLISH_DRAWER:this.logEventGeneric(a,"close_publish_drawer");return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();a=a.set("hasBeenReset",!0);return a;case b("VideoComposerActionTypes").POST_REQUEST_INVALID:this.logPostRequestInvalidEvent(a,c.invalidationReasons);return a;case b("VideoComposerActionTypes").SENDING_POST_REQUEST:this.logEventGeneric(a,"sending_post_request");return a;case b("VideoComposerActionTypes").OPEN_TRIMMING_EDITOR:this.logEventGeneric(a,"open_trimming_editor");return a;case b("VideoComposerActionTypes").TRIMMING_SAVE_DRAFT:b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID).getDispatchToken()]);if(b("VideoComposerStores").getTrimmingEditorStore(a.videoComposerID).isVideoTrimmed()){this.logEventGeneric(a,"saved_trimmed_video");return a.set("isVideoTrimmed",!0)}else{this.logEventGeneric(a,"save_untrimmed_video");return a.set("isVideoTrimmed",!1)}case b("VideoComposerActionTypes").CONFIRM_CLOSE_TRIMMING_EDITOR:this.logEventGeneric(a,"abort_trimming");return a;case b("VideoComposerActionTypes").SET_PUBLISHING_TYPE:return!b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().isComposerPostScheduleRedesign?this.$VideoComposerLoggingStoreClass6(a,c.publishingType===h.PREMIERE):a;case b("VideoComposerActionTypes").SET_POST_TYPE:return b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().isComposerPostScheduleRedesign?this.$VideoComposerLoggingStoreClass6(a,c.postType===g.PREMIERE):a;default:return a}};d.$VideoComposerLoggingStoreClass5=function(a){this.$VideoComposerLoggingStoreClass4(a).setEvent("submit_mature_content_appeal_form_success").log()};d.logSaveEditedVideoSuccess=function(a,c){var d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=d.originalShowVideoType;this.$VideoComposerLoggingStoreClass4(a).setEvent("save_edited_video_success").setOriginalShowVideoType(d).setErrorMessage(c).log()};d.logClickedAddVideoDialog=function(){this.$VideoComposerLoggingStoreClass4(this.getState(),!0).setEvent("clicked_add_videos_dialog").log()};d.logEventGeneric=function(a,b,c,d){d===void 0&&(d={}),this.$VideoComposerLoggingStoreClass4(a).setEvent(b).setErrorMessage(c).updateExtraData(d).log()};d.logPostRequestInvalidEvent=function(a,b){b=b.map(function(a){return a.loggingCode});this.$VideoComposerLoggingStoreClass4(a).setEvent("post_request_invalid").setInvalidationReasons(b).log()};d.logTabErrorEvent=function(a,b,c){this.$VideoComposerLoggingStoreClass4(a).setEvent("tab_bootload_error").setErrorMessage(c).setErrorTab(b).log()};d.logTabSwitchEvent=function(a,c){this.$VideoComposerLoggingStoreClass4(a).setEvent("tab_switched").setNextTab(c).log();if(c==="spherical_director"){c=a.dialogMode;c&&b("SphericalDirectorFunnelUtils").startFunnel(b("VideoComposerDialogSphericalDirectorUtils").getComponentSourceFromDialogMode(c),b("VideoComposerStores").getSphericalDirectorStore(a.videoComposerID).getState().spherical,!1);b("FunnelLogger").appendActionIfNew(b("SphericalDirectorFunnelConstants").FUNNEL_NAME,b("SphericalDirectorFunnelConstants").ACTIONS.OPEN_SPHERICAL_TAB_COMPOSER)}};d.logLocalCaptionsUpload=function(a,b){this.$VideoComposerLoggingStoreClass4(a).setEvent("captions_local_files_upload").setCaptionsNumSelectedFiles(b).log()};d.logPostRequestSentEvent=function(a,b){this.$VideoComposerLoggingStoreClass2(a,null,"post_premiere_attempt"),delete b.access_token,this.$VideoComposerLoggingStoreClass4(a).setEvent("post_request_sent").updateExtraData(b).log()};d.logShowsVideoData=function(a){__p&&__p();var c=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState(),d=c.isVideoShowPage;c=c.showVideoType;if(!d)return;d=b("VideoComposerStores").getBasicStore(a.videoComposerID).getState();var e=d.autoCrosspostToShowParent,f=d.fundedContentProgram,g=d.playlistIDs;d=d.seasonIDOld;var h=b("VideoComposerStores").getDistributionStore(a.videoComposerID).getState();h=h.matureContentRating;c=c==="episode"||c==="recap";var i=a.dialogMode==="video_upload"?"upload":"edit";new(b("ShowsVideoDataTypedLogger"))().setVideoID(a.videoID).setSource(i).setComposerDialogVersion("V2").setFundedContentProgram(f).setIsEpisode(c).setMatureContentRating(h).setSeasonID(d).setPlaylistIds(g).setAutoCrosspostToParent(e).setPageID(a.actorID).log()};d.logMonetizableCrosspostsData=function(a,c){__p&&__p();var d=b("VideoComposerStores").getDistributionStore(a.videoComposerID).getCrosspostPages();if(!d||d.length===0)return;var e=d.filter(function(a){return a.is_monetizable}).length,f=d.filter(function(a){return a.is_monetizable&&a.allow}).length;d=d.filter(function(a){return!a.is_monetizable&&a.allow}).length;if(f+d===0||e===0)return;new(b("VideoComposerAdBreakEnabledCrosspostingTypedLogger"))().setTotalMonetizablePages(e).setChosenMonetizablePages(f).setChosenNonMonetizablePages(d).setAllMonetizableClicked(c).setVideoID(a.videoID).setPageID(a.actorID).log()};d.logVideoAssetWaterfallEvent=function(a,c,d){new(b("VideoAssetWaterfallTypedLogger"))().setEvent(c).setComposerDialogVersion("V2").setPageID(a.actorID).setVideoAssetIDOverride(a.videoAssetID).setError(d).setSource(a.videoAssetWaterfallSource).log()};d.logEditWaterfallEvent=function(a,c){if(a.dialogMode!=="video_edit")return;var d=b("VideoComposerStores").getEditStore(a.videoComposerID).getState();d=d.editSource;new(b("VideoEditTypedLogger"))().setEvent(c).setSource(d).setFlow("dialog_v2").setVideoID(a.videoID||0).log()};d.$VideoComposerLoggingStoreClass3=function(a,c){__p&&__p();var d=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState(),e=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getShouldPremiereNowInLivingRoom(),f=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getShouldPremiereScheduledInLivingRoom();if(!e&&!f)return;var g=0,h=0,i=0,j=0,k=0;if(d.premiereLivingRoomVideos&&d.premiereLivingRoomVideos.count()>0){var l=!1;d.premiereLivingRoomVideos.forEach(function(b){if(b.id===a.videoID){k++;if(!l){l=!0;return}}l?(i++,j+=b.playable_duration):(g++,h+=b.playable_duration)})}else k=1;new(b("PremiereLivingRoomTypedLogger"))().setEvent(c).setPremiereVideoID(a.videoID).setPageID(a.actorID).setInitialBeforeVideosCount(g).setInitialBeforeVideosTotalDurationSeconds(Math.round(h)).setInitialAfterVideosCount(i).setInitialAfterVideosTotalDurationSeconds(Math.round(j)).setInitialLoopCount(k).setIsScheduled(f).log()};d.logVideoUploadEvent=function(a){var c=this.getState();c=c.videoComposerID;c=b("VideoComposerStores").getUploadStore(c).getState();c=c.videoUploader;c&&c.getLogger()&&c.getLogger().logEvent(a)};d.$VideoComposerLoggingStoreClass2=function(a,c,d){__p&&__p();b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getPremiereStore(a.videoComposerID).getDispatchToken()]);if(b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState().shouldPremiere){c&&this.logEventGeneric(a,c);if(d){c=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState();var e=c.shouldDefaultToNewRelease;c=c.premiereDate;var f=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();f=f.showPremiereNowOption;var g="none";f&&(g="non-default",e&&(g="default"));new(b("PremiereVideoTypedLogger"))().setEvent(d).setSourceVideoID(a.videoID).setOwnerID(a.actorID).setPremiereNowCondition(g).setPremiereType(c&&c.getTime()?"scheduled":"now").log()}}};d.$VideoComposerLoggingStoreClass1=function(a){b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getMetadataStore(a.videoComposerID).getDispatchToken()]),b("gkx")("678836")&&this.logEventGeneric(a,"premiere_button_rendered")};d.$VideoComposerLoggingStoreClass4=function(a,c){__p&&__p();c===void 0&&(c=!1);c||b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getEditStore(a.videoComposerID).getDispatchToken(),b("VideoComposerStores").getMetadataStore(a.videoComposerID).getDispatchToken(),b("VideoComposerStores").getPremiereStore(a.videoComposerID).getDispatchToken()]);c=b("VideoComposerStores").getEditStore(a.videoComposerID).getState();c=c.editSource;var d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState(),e=d.isVideoShowPage,f=d.showPremiereNowOption;d=d.showVideoType;var g=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState(),h=g.shouldDefaultToNewRelease,i=g.premiereCSType;g=g.shouldPremiere;var j=b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState();j=j.isComposerPostScheduleRedesign;var k=b("VideoComposerStores").getUploadStore(a.videoComposerID).getState();k=k.videoUploader;k=k&&k.getLogger()&&k.getLogger().getWaterfallID()||null;var l="control";h?l="default":f&&(l="non_default");return new(b("VideoComposerDialogUITypedLogger"))().setActorID(a.actorID).setComposerDialogVersion("V2").setComposerEntryPoint(a.composerEntryPointRef).setCurrentTab(a.selectedTab).setDialogMode(a.dialogMode).setEditSource(c).setHasBeenReset(a.hasBeenReset).setHasUploadFinished(a.hasUploadFinished).setIsPremiere(g).setIsShowPage(e).setIsTwoStepPublish(!0).setPostAttemptCount(a.postAttemptCount).setPremiereContentStrategyCondition(i).setPremiereNowCondition(l).setIsComposerPostScheduleRedesign(j).setSessionID(a.sessionID).setShowVideoType(d).setUploadAttemptCount(a.uploadAttemptCount).setVideoAssetID(a.videoAssetID).setVideoAssetWaterfallSource(a.videoAssetWaterfallSource).setVideoID(a.videoID).setWaterfallID(k)};d.$VideoComposerLoggingStoreClass6=function(a,c){var d=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState();if(b("videoComposerGetPremiereDisabledReason")(this.getState().videoComposerID)==null&&d.shouldDefaultToPremiere&&!a.loggedOptOutOfPremiereDefault&&!c){new(b("PremiereVideoTypedLogger"))().setEvent("opted_out_of_premiere_default").setSourceVideoID(a.videoID).setOwnerID(a.actorID).setPremiereDefaultCondition("default").log();return a.set("loggedOptOutOfPremiereDefault",!0)}return a};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerMetadataStoreClass",["Promise","ImmutableRecordWithV4Types","MediaManagerContentActions","MediaManagerPostStatus","MediaManagerPostType","VideoComposerActions","VideoComposerActionTypes","VideoComposerDialogTabUtils","VideoComposerDialogUtils","VideoComposerStoreBase","VideoComposerStores","VideoPlayerMetaData","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=720,h=1280;c={videoComposerID:"",accessToken:"",actorID:null,allTabsBootloaded:!1,boostedPostButtonConfig:null,composerEntryPointRef:null,dialogMode:null,enabledTabs:[],eventCallbacks:null,isComposerUpsellEligible:!1,hasAdBreaksBefore:!1,highlightTitleField:!1,showTitleTooltip:!1,isDogfooded:!1,isEditModeUpgrade:!1,isMetadataAvailable:!1,isOriginalVideo:!1,isReplacingPremiere:!1,isSpherical:!1,isTargetFeatureBlocked:!1,isVideoAssetOwner:!0,isVideoHighQuality:!1,isVideoShowPage:!1,minBackdateTime:null,originalShowVideoType:null,pagesComposerContextConfig:null,passesUpsellGK:!1,profileDisplayName:"",profilePictureURI:"",showAddToSeriesNux:!1,showPremiereNowOption:!1,showRightsConfirmationDialog:!1,showVideoType:null,targetID:null,title:"",titleTooltipCaption:null,titleTooltipText:null,unpublishedContentType:null,useRevampedUI:!1,videoAssetID:null,videoDataForID:null,videoDuration:null,videoEndTime:null,videoHeight:null,videoStartTime:null,videoWidth:null,videoID:null,videoStatus:null,needToUploadThreeMinVideoForBonus:!1};var i=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return i()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_COMPOSER_PREVIEW:a=a.set("composerEntryPointRef",c.entryPointRef);a=a.set("dialogMode","video_upload");a=a.set("enabledTabs",["basic","thumbnails","distribution","captions"]);a=a.set("eventCallbacks",c.eventCallbacks);return a;case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=this.$VideoComposerMetadataStoreClass1(a,c.serverParams.common);a=a.set("composerEntryPointRef",c.clientParams.entryPointRef);a=a.set("dialogMode","video_upload");a=a.set("eventCallbacks",c.clientParams.eventCallbacks);a=a.set("isTargetFeatureBlocked",c.serverParams.isTargetFeatureBlocked);a=a.set("isVideoAssetOwner",!0);a=a.set("isVideoShowPage",c.serverParams.isVideoShowPage);a=a.set("pagesComposerContextConfig",c.serverParams.pagesComposerContextConfig);a=a.set("minBackdateTime",c.serverParams.minBackdateTime);a=a.set("showPremiereNowOption",c.serverParams.showPremiereNowOption);a=a.set("needToUploadThreeMinVideoForBonus",c.serverParams.needToUploadThreeMinVideoForBonus);a=a.set("showRightsConfirmationDialog",c.serverParams.showRightsConfirmationDialog);a=a.set("showAddToSeriesNux",c.serverParams.showAddToSeriesNux);if(c.serverParams.isVideoShowPage){var d=b("VideoComposerDialogUtils").getShowVideoTypeFromEntryPoint(c.clientParams.entryPointRef);a=a.set("originalShowVideoType",d).set("showVideoType",d)}a=a.set("targetID",c.serverParams.targetID);b("VideoComposerDialogTabUtils").fetchCreatePostParameters(c.videoComposerID,c.serverParams);return a;case b("VideoComposerActionTypes").INITIALIZE_CROSSPOST_COMPOSER:a=this.$VideoComposerMetadataStoreClass1(a,c.params.common);a=a.set("boostedPostButtonConfig",c.params.boostedPostButtonConfig);a=a.set("isSpherical",c.params.isSpherical);a=a.set("dialogMode","video_crosspost");a=a.set("isVideoAssetOwner",c.params.isVideoAssetOwner);a=a.set("title",c.params.title);a=a.set("videoAssetID",c.params.videoAssetID);b("promiseDone")(b("VideoPlayerMetaData").genVideoData(c.params.videoAssetID).then(function(a){return b("VideoComposerActions").loadVideoDataForID(c.videoComposerID,a)}));b("VideoComposerDialogTabUtils").fetchCrosspostParameters(c.videoComposerID,c.params);return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("composerEntryPointRef",c.editParams.composerEntryPointRef);a=this.$VideoComposerMetadataStoreClass1(a,c.editParams.common);a=a.set("hasAdBreaksBefore",c.editParams.hasAdBreaksBefore);a=a.set("targetID",c.editParams.common.actorID);a=a.set("title",c.editParams.title);a=a.set("isOriginalVideo",c.editParams.isOriginalVideo);a=a.set("isVideoAssetOwner",c.editParams.isVideoAssetOwner);a=a.set("isVideoShowPage",c.editParams.isVideoShowPage);if(c.editParams.isVideoShowPage){d=c.editParams.episodeData.get("isEpisode")?c.editParams.episodeData.get("isRecap")?"recap":"episode":"basic_video";a=a.set("originalShowVideoType",d).set("showVideoType",d)}a=a.set("unpublishedContentType",c.editParams.unpublishedContentType);a=a.set("videoDuration",c.editParams.videoDuration);a=a.set("videoID",c.editParams.videoID);a=a.set("videoAssetID",c.editParams.videoAssetID);a=a.set("videoStatus",c.editParams.videoStatus);a=a.set("isSpherical",c.editParams.isSpherical);a=a.set("dialogMode","video_edit");a=a.set("isDogfooded",!!c.editParams.isDogfooded);a=a.set("isEditModeUpgrade",c.editParams.isEditModeUpgrade);d=c.editParams.isPremiere&&c.editParams.premiereSourceVideoID?c.editParams.premiereSourceVideoID:c.editParams.videoID;b("promiseDone")(b("VideoPlayerMetaData").genVideoData(d).then(function(a){return b("VideoComposerActions").loadVideoDataForID(c.videoComposerID,a)}));b("VideoComposerDialogTabUtils").fetchEditPostParameters(c.videoComposerID,c.editParams);return a;case b("VideoComposerActionTypes").LOAD_VIDEO_DATA_FOR_ID:a=a.set("videoDataForID",c.videoData);return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_HTML_PLAYER:d=c.videoPlayer;var e=d.videoHeight?d.videoHeight:null,f=d.videoWidth?d.videoWidth:null;e>=g&&f>=h&&(a=a.set("isVideoHighQuality",!0));a=a.set("videoDuration",d.duration?d.duration:null);a=a.set("videoHeight",e);a=a.set("videoWidth",f);return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:a=a.set("isMetadataAvailable",!0);d=c.data;if(d&&d.format){e=d.format.isSpherical;a=a.set("isSpherical",e)}return a;case b("VideoComposerActionTypes").UPDATE_SHOW_VIDEO_TYPE:a=a.set("showVideoType",c.showVideoType);return a;case b("VideoComposerActionTypes").UPDATE_TITLE:a=a.set("title",c.title);c.title&&c.title.trim()&&(a=a.set("highlightTitleField",!1),a=a.set("showTitleTooltip",!1));return a;case b("VideoComposerActionTypes").HIGHLIGHT_TITLE_WITH_ERROR_TOOLTIP:a=a.set("highlightTitleField",!0);a=a.set("showTitleTooltip",!0);a=a.set("titleTooltipText",c.tooltipText);a=a.set("titleTooltipCaption",c.tooltipCaption);return a;case b("VideoComposerActionTypes").CLOSE_TITLE_ERROR_TOOLTIP:return a.set("showTitleTooltip",!1);case b("VideoComposerActionTypes").SET_COMPOSER_UPSELL_ELIGIBILITY_STATUS:a=a.set("isComposerUpsellEligible",c.isEligible);return a;case b("VideoComposerActionTypes").SET_PASSES_UPSELL_GK:a=a.set("passesUpsellGK",c.passesUpsellGK);return a;case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:return a.set("isReplacingPremiere",!0);case b("VideoComposerActionTypes").UPLOAD_PROGRESSED:case b("VideoComposerActionTypes").UPLOAD_FINISHED:return a.isReplacingPremiere?a:this.$VideoComposerMetadataStoreClass2(a);case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();case b("VideoComposerActionTypes").SET_VIDEO_START_END_TIME:a=a.set("videoEndTime",c.endTime);a=a.set("videoStartTime",c.startTime);return a;case b("VideoComposerActionTypes").EXIT_DIALOG:a.eventCallbacks&&a.eventCallbacks.onExitConfirm&&a.eventCallbacks.onExitConfirm();return a;case b("VideoComposerActionTypes").POST_FINISHED:this.$VideoComposerMetadataStoreClass3(a.targetID,a.videoID);a.eventCallbacks&&a.eventCallbacks.onPublishSuccess&&a.eventCallbacks.onPublishSuccess(a.videoID,c.data?c.data.video_asset_id:null);return a;case b("VideoComposerActionTypes").ALL_TABS_BOOTLOADED:a=a.set("allTabsBootloaded",!0);a.eventCallbacks&&a.eventCallbacks.onAllTabsBootloaded&&a.eventCallbacks.onAllTabsBootloaded();return a;default:return a}};d.$VideoComposerMetadataStoreClass2=function(a){__p&&__p();var c=b("VideoComposerStores").getUploadStore(a.videoComposerID).getState();if(c.videoUploader){c=c.videoUploader.getUploadSession();var d=this.getState().get("videoID");if(c&&d!==c.getVideoID()){d=c.getVideoID();a=a.set("videoID",d)}}return a};d.$VideoComposerMetadataStoreClass1=function(a,b){a=a.set("accessToken",b.accessToken);a=a.set("actorID",b.actorID);a=a.set("enabledTabs",b.enabledTabs);a=a.set("profileDisplayName",b.profileDisplayName);a=a.set("profilePictureURI",b.profilePictureURI);a=a.set("useRevampedUI",b.useRevampedUI);return a};d.getAccessToken=function(){return this.getState().get("accessToken")};d.getPostRequestDataToSend=function(){var a=this.getState();return b("Promise").resolve({video_title:a.title})};d.getCrosspostRequestDataToSend=function(){var a=this.getState();return b("Promise").resolve({access_token:a.accessToken,title:a.title,video_asset_id:a.videoAssetID})};d.getEditRequestDataToSend=function(){var a=this.getState();return b("Promise").resolve({is_video_composer_v2:!0,title:a.title})};d.getVideoPreviewTimeData=function(){var a=this.getState(),b=a.videoDuration,c=a.videoEndTime;a=a.videoStartTime;c=c||b;a=a||0;b=b?Number(c)-a:b;return{videoDuration:b,videoEndTime:c,videoStartTime:a}};d.getNeedToUploadThreeMinVideoForBonus=function(){var a=this.getState();a=a.needToUploadThreeMinVideoForBonus;return a};d.getVideoDuration=function(){return this.getState().videoDuration};d.$VideoComposerMetadataStoreClass3=function(a,c){a!=null&&c!=null&&b("MediaManagerContentActions").prependRowToLoad("ALL_POSTS",[{attributes:{},id:c,matureContentRating:null,matureContentRatingStatus:null,postType:b("MediaManagerPostType").OTHER,postStatus:b("MediaManagerPostStatus").UNKNOWN,scheduledOrLastAddedTimestamp:0,lastAddedTime:0,pageID:a,pagePicture:"",pageName:"",title:""}])};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerPremiereStoreClass",["fbt","Promise","Bootloader","ImmutableRecordWithV4Types","LivePremiereConfig","VideoComposerActions","VideoComposerActionTypes","VideoComposerDialogConstants","VideoComposerDispatchers","VideoComposerPostType","VideoComposerPublishingTypes","VideoComposerStoreBase","VideoComposerStores","VideoComposerUtils","immutable","setImmediate","videoComposerGetPremiereDisabledReason"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var h=b("VideoComposerPostType").PREMIERE_VIDEO_MAX_DURATION,i=b("VideoComposerPostType").PREMIERE_VIDEO_MIN_DURATION,j=b("VideoComposerPostType").VideoComposerPostTypes,k=b("VideoComposerPublishingTypes").PublishingType;c={videoComposerID:"",customAnnouncementThumbnail:null,customProfileImage:null,customProfileImageFocus:null,feedBackgroundImage:null,feedBackgroundFocus:null,hasReplacedFile:!1,isPremierePreLive:!0,premiereBroadcastID:null,premiereCSType:"premiere",premiereCustomName:null,premiereDate:null,premiereLivingRoomVideos:b("immutable").List(),premiereSourceEditWindowConfig:null,premiereSourceVideoID:null,shouldPremiere:!1,shouldPremiereWithShowOrSeason:!1,showPremiereAudience:!1,wasLastUploadNewRelease:!1,premiereAudience:"ANYONE",canCreateMultiVideoPremiereLivingRoom:!1,canCreateSingleVideoPremiereLivingRoom:!1,canCreateSingleVideoScheduledPremiereLivingRoom:!1,shouldDefaultToNewRelease:!1,canOptOutOfNewReleaseDefault:!1,minimumDurationForNewReleaseDefaultEligibilitySeconds:0,shouldDefaultToPremiere:!1};var l=60*60*1e3,m=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return m()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:c.clientParams.entryPointRef==="page_content_tab_video_library_premiere"&&window.setTimeout(function(){return b("VideoComposerActions").setPublishingType(c.videoComposerID,k.PREMIERE)},0);a=a.set("wasLastUploadNewRelease",c.serverParams.wasLastUploadNewRelease);a=a.set("shouldDefaultToNewRelease",c.serverParams.shouldDefaultToNewRelease);a=a.set("canOptOutOfNewReleaseDefault",c.serverParams.canOptOutOfNewReleaseDefault);a=a.set("minimumDurationForNewReleaseDefaultEligibilitySeconds",c.serverParams.minimumDurationForNewReleaseDefaultEligibilitySeconds);a=a.set("shouldDefaultToPremiere",c.serverParams.shouldDefaultToPremiere);a=a.set("premiereCSType",c.serverParams.premiereCSType);a=a.set("showPremiereAudience",c.serverParams.showPremiereAudience);a=a.set("premiereAudience",c.serverParams.premiereAudience);a=a.set("canCreateMultiVideoPremiereLivingRoom",c.serverParams.canCreateMultiVideoPremiereLivingRoom);a=a.set("canCreateSingleVideoPremiereLivingRoom",c.serverParams.canCreateSingleVideoPremiereLivingRoom);a=a.set("canCreateSingleVideoScheduledPremiereLivingRoom",c.serverParams.canCreateSingleVideoScheduledPremiereLivingRoom);return a;case b("VideoComposerActionTypes").OPEN_PUBLISH_DRAWER:var d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();d=d.composerEntryPointRef;var e=b("VideoComposerStores").getDistributionStore(a.videoComposerID).getState(),f=e.isShowDraft;e=e.isSeasonDraft;d=b("VideoComposerUtils").isFromCreatorStudioShowsPanel(d)&&(f||e);this.$VideoComposerPremiereStoreClass1()&&!d?b("setImmediate")(function(){b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().isComposerPostScheduleRedesign&&b("VideoComposerActions").setPostType(a.videoComposerID,j.PREMIERE),b("VideoComposerActions").setPublishingType(a.videoComposerID,k.PREMIERE),b("VideoComposerActions").setPremiereDate(a.videoComposerID,new Date(Date.now()+l))}):this.$VideoComposerPremiereStoreClass2(a)&&!d&&window.setTimeout(function(){return b("VideoComposerActions").setPublishingType(a.videoComposerID,k.PUBLISH_NOW)},1);return a;case b("VideoComposerActionTypes").PREMIERE_CONFIRM:a=a.set("shouldPremiere",!0);a=a.set("premiereDate",c.scheduleDate);a=a.set("customProfileImageFocus",c.customProfileImageFocus);c.customProfileImage!=null&&(a=a.set("customProfileImage",c.customProfileImage));a=a.set("feedBackgroundFocus",c.feedBackgroundFocus);c.feedBackgroundImage!=null&&(a=a.set("feedBackgroundImage",c.feedBackgroundImage));c.customAnnouncementThumbnail!=null&&(a=a.set("customAnnouncementThumbnail",c.customAnnouncementThumbnail));a=a.set("premiereAudience",c.premiereAudience);window.setTimeout(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)},0);return a;case b("VideoComposerActionTypes").UPDATE_PREMIERE_DATA:a=a.set("shouldPremiere",!0);a=a.set("premiereDate",c.scheduleDate);a=a.set("customProfileImage",c.customProfileImage);a=a.set("customProfileImageFocus",c.customProfileImageFocus);c.feedBackgroundImage!==null&&(a=a.set("feedBackgroundImage",c.feedBackgroundImage));a=a.set("feedBackgroundFocus",c.feedBackgroundFocus);c.customAnnouncementThumbnail!=null&&(a=a.set("customAnnouncementThumbnail",c.customAnnouncementThumbnail));return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("shouldPremiere",c.editParams.isPremiere);a=a.set("premiereBroadcastID",c.editParams.premiereBroadcastID);a=a.set("premiereDate",c.editParams.premiereDate?new Date(c.editParams.premiereDate):null);a=a.set("isPremierePreLive",c.editParams.isPremierePreLive);a=a.set("premiereSourceEditWindowConfig",c.editParams.premiereSourceEditWindowConfig);a=a.set("premiereSourceVideoID",c.editParams.premiereSourceVideoID);return a;case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:return a.set("hasReplacedFile",!0);case b("VideoComposerActionTypes").SET_PREMIERE_DATE:return a.set("premiereDate",c.premiereDate);case b("VideoComposerActionTypes").SET_PREMIERE_FEED_BACKGROUND_IMAGE:return a.set("feedBackgroundImage",c.image);case b("VideoComposerActionTypes").SET_PUBLISHING_TYPE:f=c.publishingType===k.PUBLISH_NOW&&this.$VideoComposerPremiereStoreClass2(a);e=c.publishingType===k.PREMIERE||f;a=a.set("shouldPremiere",e);c.publishingType===k.PREMIERE&&a.premiereDate===null?a=a.set("premiereDate",new Date(Date.now()+b("LivePremiereConfig").defaultScheduledTimeDeltaMS)):f&&(a=a.set("premiereDate",null));c.publishingType===k.SAVE_AS_DRAFT&&(a=this.$VideoComposerPremiereStoreClass3(a));return a.set("shouldPremiereWithShowOrSeason",!1);case b("VideoComposerActionTypes").SAVE_AS_DRAFT_CONFIRM:return this.$VideoComposerPremiereStoreClass3(a);case b("VideoComposerActionTypes").TOGGLE_PREMIERE_NOW:a=a.set("shouldPremiere",!a.shouldPremiere);a=a.set("premiereDate",null);return a;case b("VideoComposerActionTypes").SET_POST_TYPE:if(b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().isComposerPostScheduleRedesign)switch(c.postType){case j.PREMIERE:b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getPublishingStore(a.videoComposerID).getDispatchToken()]);d=b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState();e=d.scheduleDate;a=a.set("shouldPremiere",!0);a=a.set("premiereDate",e);break;case j.VIDEO_UPLOAD_WATCH_PARTY:a=a.set("shouldPremiere",!0);a=a.set("premiereDate",null);break;case j.VIDEO_UPLOAD:a=a.set("shouldPremiere",!1);a=a.set("premiereDate",null);break;default:break}return a;case b("VideoComposerActionTypes").EDIT_SCHEDULED_TIME:b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().isComposerPostScheduleRedesign&&(a=a.set("premiereDate",c.scheduleDate));return a;case b("VideoComposerActionTypes").TOGGLE_PREMIERE_WITH_SHOW_OR_SEASON:a=a.set("shouldPremiereWithShowOrSeason",!a.shouldPremiereWithShowOrSeason);a=a.set("premiereDate",null);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();case b("VideoComposerActionTypes").UPDATE_SHOULD_PREMIERE:a=a.set("shouldPremiere",c.shouldPremiere);return a;case b("VideoComposerActionTypes").UPDATE_CUSTOM_THUMBNAIL:a.feedBackgroundImage==null&&c.thumbnail&&(a=a.set("feedBackgroundImage",c.thumbnail.getFile()));return a;case b("VideoComposerActionTypes").UPDATE_PREMIERE_AUDIENCE:a=a.set("premiereAudience",c.premiereAudience);return a;case b("VideoComposerActionTypes").UPDATE_PREMIERE_LIVING_ROOM_REMOVE_UNOWNED_VIDEOS:var g=c.ownerID;a=a.set("premiereLivingRoomVideos",a.get("premiereLivingRoomVideos").filter(function(a){return a.owner.id===g}));return a;case b("VideoComposerActionTypes").UPDATE_PREMIERE_LIVING_ROOM_VIDEOS:a=a.set("premiereLivingRoomVideos",c.premiereLivingRoomVideos);return a;case b("VideoComposerActionTypes").UPDATE_PREMIERE_CUSTOM_NAME:a=a.set("premiereCustomName",c.name);return a;case b("VideoComposerActionTypes").PUBLISH_POST:if(!a.shouldPremiere)return a;b("Bootloader").loadModules(["MediaManagerPostCreationStore","CreatorStudioTopPriorityTipUtils"],function(a,c){a=a.getState();a=a.entryPoint;a==="PREMIERE_PROMOTION_TO_VIDEO_UPLOAD"&&c.creatorStudioTopPriorityTipLogEvents("conversion",b("VideoComposerDialogConstants").PREMIERE_PROMOTION_TO_VIDEO_UPLOAD_ID,b("VideoComposerDialogConstants").CREATOR_STUDIO_ANNOUNCEMENT_CARD_CHANNEL_ID)},"VideoComposerPremiereStoreClass");return a;default:return a}};d.$VideoComposerPremiereStoreClass3=function(a){return a.set("premiereDate",null).set("shouldPremiere",!1).set("shouldPremiereWithShowOrSeason",!1)};d.$VideoComposerPremiereStoreClass2=function(a){__p&&__p();if(b("VideoComposerStores").getPublishingStore(a.videoComposerID).getState().isComposerPostScheduleRedesign)return!1;if(b("videoComposerGetPremiereDisabledReason")(a.videoComposerID)!=null)return!1;var c=a.get("wasLastUploadNewRelease"),d=a.get("shouldDefaultToNewRelease"),e=a.get("canOptOutOfNewReleaseDefault"),f=a.get("minimumDurationForNewReleaseDefaultEligibilitySeconds");if(c)return!0;if(!d)return!1;return e?!1:(b("VideoComposerStores").getMetadataStore(a.videoComposerID).getVideoDuration()||-1)>=f};d.$VideoComposerPremiereStoreClass1=function(){return b("videoComposerGetPremiereDisabledReason")(this.getState().videoComposerID)!=null?!1:!!this.getState().shouldDefaultToPremiere};d.getShouldShowReplacePremiereSection=function(a){var b;return!!((b=this.getState().premiereSourceEditWindowConfig)!=null?b.isInWindow:b)&&a==="video_edit"&&this.getState().isPremierePreLive};d.getPremiereAudience=function(){return this.getState().premiereAudience};d.getShouldPremiereNowInLivingRoom=function(){var a=this.getState();if(!a.shouldPremiere)return!1;return a.premiereDate?!1:a.canCreateSingleVideoPremiereLivingRoom&&a.premiereLivingRoomVideos.count()<=1||a.canCreateMultiVideoPremiereLivingRoom&&a.premiereLivingRoomVideos.count()>1};d.getShouldPremiereScheduledInLivingRoom=function(){var a=this.getState();if(!a.shouldPremiere)return!1;return!a.premiereDate?!1:a.canCreateSingleVideoScheduledPremiereLivingRoom};d.getShouldPremiereOldSchool=function(){var a=this.getState();return this.getShouldPremiereNowInLivingRoom()||this.getShouldPremiereScheduledInLivingRoom()?!1:a.shouldPremiere};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState(),d=c.dialogMode,e=c.isSpherical;c=c.title;d=d==="video_upload"&&e;e=this.getShouldPremiereOldSchool();var f=this.getShouldPremiereNowInLivingRoom(),g=this.getShouldPremiereScheduledInLivingRoom(),h=f||g;if(!h&&!e||d)return b("Promise").resolve({should_premiere:!1});d=[];f?d=a.premiereLivingRoomVideos?a.premiereLivingRoomVideos.toArray().map(function(a){return a.id}):[]:g&&(d=[b("VideoComposerStores").getUploadStore(a.videoComposerID).getUploaderVideoID()]);f={premiere_time_ms:a.premiereDate&&a.premiereDate.getTime(),should_premiere:e,premiere_in_living_room_video_ids:h?d.length?d:[b("VideoComposerStores").getUploadStore(a.videoComposerID).getUploaderVideoID()]:[],premiere_in_living_room_custom_name:h?a.premiereCustomName||c:null,premiere_custom_profile_image_focus:a.customProfileImageFocus,feed_background_focus:a.feedBackgroundFocus,premiere_audience:a.premiereAudience};a.customProfileImage&&(f.schedule_custom_profile_image=a.customProfileImage);a.feedBackgroundImage&&(f.schedule_feed_background_image=a.feedBackgroundImage);a.customAnnouncementThumbnail&&(f.schedule_custom_background_image=a.customAnnouncementThumbnail);return b("Promise").resolve(f)};d.getEditRequestDataToSend=function(){__p&&__p();var a=this.getState(),c={should_premiere:a.shouldPremiere};if(!a.shouldPremiere)return b("Promise").resolve(c);a.premiereDate&&(c.premiere_time_ms=a.premiereDate.getTime());a.customProfileImageFocus&&(c.premiere_custom_profile_image_focus_x=a.customProfileImageFocus.x,c.premiere_custom_profile_image_focus_y=a.customProfileImageFocus.y);a.feedBackgroundFocus&&(c.feed_background_image_focus_x=a.feedBackgroundFocus.x,c.feed_background_image_focus_y=a.feedBackgroundFocus.y);a.customProfileImage&&(c.schedule_custom_profile_image=a.customProfileImage);a.feedBackgroundImage&&(c.schedule_feed_background_image=a.feedBackgroundImage);a.customAnnouncementThumbnail&&(c.schedule_custom_background_image=a.customAnnouncementThumbnail);a.hasReplacedFile&&(b("VideoComposerStores").getUploadStore(a.videoComposerID).isUploading()||(c.premiere_replace_video_id=b("VideoComposerStores").getUploadStore(a.videoComposerID).getUploaderVideoID()));return b("Promise").resolve(c)};d.premieresVideoDurationIsInvalid=function(a){return this.$VideoComposerPremiereStoreClass1()?a==null||a>=h:a==null||a<i||a>=h};d.hasReplacedPremieresVideoFile=function(){return this.getState().hasReplacedFile};d.getInvalidationCheckers=function(){var a=g._("\u0110\u00e3 x\u1ea3y ra l\u1ed7i khi l\u01b0u bu\u1ed5i c\u00f4ng chi\u1ebfu c\u1ee7a b\u1ea1n");return[function(b){return b.shouldPremiere&&b.futureDate?{userMessage:a,loggingCode:"PREMIERE_AND_SCHEDULED"}:null},function(b){return b.shouldPremiere&&b.shouldPremiereInLivingRoom?{userMessage:a,loggingCode:"PREMIERE_AND_LIVING_ROOM_PREMIERE"}:null}]};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerPublishingStoreClass",["invariant","Promise","ExpirationTypeToExpirationTypeApiMap","ImmutableRecordWithV4Types","LiftTimeUtils","ReactComposerPostUtilsCore","SimpleNUXMessage","SimpleNUXMessageTypes.bs","VideoComposerActions","VideoComposerActionTypes","VideoComposerAdBreakActions","VideoComposerBasicActions","VideoComposerDialogCrosspostUtils","VideoComposerDialogEditUtils","VideoComposerDialogUtils","VideoComposerDispatchers","VideoComposerPostType","VideoComposerPublishingDataValidator","VideoComposerPublishingTypes","VideoComposerPublishingUtils","VideoComposerScheduleType","VideoComposerStoreBase","VideoComposerStores","VideoComposerUtils","flattenPHPQueryData","setImmediate","setTimeout","videoComposerDialogUploadDoPost","videoComposerValidatePublishAction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var h=b("LiftTimeUtils").MS_IN_SEC,i=b("VideoComposerPostType").VideoComposerPostTypes,j=b("VideoComposerPublishingDataValidator").validatePublishingData,k=b("VideoComposerPublishingDataValidator").validatePublishingRedesignData,l=b("VideoComposerPublishingTypes").PublishActions,m=b("VideoComposerPublishingTypes").PublishingType,n=b("VideoComposerPublishingUtils").getDefaultScheduleDate;c=b("VideoComposerScheduleType").DEFAULT_DISABLED_SCHEDULE_TYPES;var o=b("VideoComposerScheduleType").VideoComposerScheduleTypes;d={videoComposerID:"",backdateYear:null,backdateMonth:null,backdateDay:null,canPublish:!0,cannotPublishReason:null,canDraft:!0,disablePublish:!1,disabledScheduleTypesMap:c,editToExpired:!1,editToPublished:!1,hasAttemptedPublish:!1,uploadErrorData:null,hideFromNewsFeed:!1,isAdBreakPrereview:!1,isPosting:!1,isPostPending:!1,isDraft:!1,isDogfoodingPost:!1,isReviewableBrandedContent:!1,publishingType:m.PUBLISH_NOW,scheduleDate:null,originalScheduleDate:null,expireDate:null,originalExpireDate:null,expireType:null,originalExpireType:null,postEndDate:null,saveVideosInPagesComposer:!1,showBestPracticesChecklist:!1,showBestPracticesChecklistHDVideo:!1,postData:null,isComposerPostScheduleRedesign:!1,postType:i.VIDEO_UPLOAD,scheduleType:o.PUBLISH_NOW};var p=a(d);f=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return p()};d.reduceImpl=function(a,c){__p&&__p();var d=this,e=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();e=e.dialogMode;switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=a.set("saveVideosInPagesComposer",!!c.serverParams.saveVideosInPagesComposer).set("showBestPracticesChecklist",c.serverParams.showBestPracticesChecklist).set("showBestPracticesChecklistHDVideo",c.serverParams.showBestPracticesChecklistHDVideo).set("isComposerPostScheduleRedesign",c.serverParams.common.isComposerPostScheduleRedesign);return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("expireDate",new Date(c.editParams.publishingConfig.expirationTime));a=a.set("originalExpireDate",new Date(c.editParams.publishingConfig.expirationTime));a=a.set("expireType",c.editParams.publishingConfig.expirationType);a=a.set("originalExpireType",c.editParams.publishingConfig.expirationType);a=a.set("scheduleDate",new Date(c.editParams.publishingConfig.scheduledPublishTime));a=a.set("originalScheduleDate",new Date(c.editParams.publishingConfig.scheduledPublishTime)).set("isComposerPostScheduleRedesign",c.editParams.common.isComposerPostScheduleRedesign);return a;case b("VideoComposerActionTypes").INIT_VIDEO_UPLOADER:case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:a=a.set("disablePublish",!1);a=a.set("uploadErrorData",null);return a;case b("VideoComposerActionTypes").TOGGLE_NEWS_FEED:return a.set("postEndDate",null);case b("VideoComposerActionTypes").TOGGLE_SECRET_VIDEO:return a.set("postEndDate",null);case b("VideoComposerActionTypes").EDIT_EXPIRATION:a=a.set("expireDate",c.expirationTime);a=a.set("expireType",c.expirationType);a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").EDIT_SCHEDULED_TIME:a=a.set("scheduleDate",c.scheduleDate);a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").EDIT_POST_END_TIME:a=a.set("postEndDate",c.postEndDate);a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").EDIT_SHOULD_EXPIRE:a=a.set("editToExpired",c.expire);return a;case b("VideoComposerActionTypes").EDIT_SHOULD_PUBLISH:a=a.set("editToPublished",c.publish);return a;case b("VideoComposerActionTypes").BACKDATE_CONFIRM:a=a.set("backdateYear",c.year);a=a.set("backdateMonth",c.month);a=a.set("backdateDay",c.day);a=a.set("hideFromNewsFeed",c.hideFromNewsFeed);b("setTimeout")(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)},1);return a;case b("VideoComposerActionTypes").SET_BACKDATE_DATE:a=a.set("backdateYear",c.date.year);a=a.set("backdateMonth",c.date.month);a=a.set("backdateDay",c.date.day);a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").SET_BACKDATE_HIDE_FROM_NEWS_FEED:a=a.set("hideFromNewsFeed",c.hideFromNewsFeed);return a;case b("VideoComposerActionTypes").SET_PREMIERE_DATE:a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").POST_FAILED:var f=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();f=f.eventCallbacks;a=this.$VideoComposerPublishingStoreClass2(a);a=a.set("isPosting",!1);a=a.set("isPostPending",!1);f&&f.onPublishFailure&&f.onPublishFailure(c.errorMessage);return a;case b("VideoComposerActionTypes").POST_FINISHED:f=b("VideoComposerStores").getUploadStore(a.videoComposerID).getState();f=f.composerID;a.saveVideosInPagesComposer&&!!f&&b("ReactComposerPostUtilsCore").handlePostSucceeded(f);return a;case b("VideoComposerActionTypes").PUBLISH_POST:return this.$VideoComposerPublishingStoreClass3(a,e);case b("VideoComposerActionTypes").UPLOAD_FAILED:f=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();e=f.eventCallbacks;e&&e.onUploadFailure&&e.onUploadFailure(c.errorData);a=this.$VideoComposerPublishingStoreClass2(a);a=a.set("uploadErrorData",c.errorData);a=a.set("disablePublish",!0);a=a.set("isPostPending",!1);return a;case b("VideoComposerActionTypes").UPLOAD_FINISHED:a.isPostPending&&(a=a.set("isPostPending",!1),a=a.set("isPosting",!0),this.$VideoComposerPublishingStoreClass4());return a;case b("VideoComposerActionTypes").SAVE_POST_DATA_FOR_PAGES_COMPOSER:return a.set("postData",c.postData);case b("VideoComposerActionTypes").SCHEDULE_CONFIRM:c.scheduleDate&&(a=a.set("scheduleDate",c.scheduleDate));c.expireDate&&(a=a.set("expireDate",c.expireDate),a=a.set("expireType",c.expirationType));c.postEndDate&&(a=a.set("postEndDate",c.postEndDate));b("setTimeout")(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)},1);return a;case b("VideoComposerActionTypes").EXIT_DIALOG_SAVE_DRAFT:case b("VideoComposerActionTypes").SAVE_AS_DRAFT_CONFIRM:a=this.$VideoComposerPublishingStoreClass5(a);b("setTimeout")(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)},1);return a;case b("VideoComposerActionTypes").SUBMIT_FOR_PREREVIEW:a=a.set("isAdBreakPrereview",!0);b("setTimeout")(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)},1);return a;case b("VideoComposerActionTypes").CANCEL_UPLOAD:a=this.$VideoComposerPublishingStoreClass2(a);a=a.set("isPostPending",!1).set("isPosting",!1);return a;case b("VideoComposerActionTypes").MARK_AS_REVIEWABLE_BRANDED_CONTENT:case b("VideoComposerActionTypes").CONFIRM_REVIEWABLE_BRANDED_CONTENT:a=a.set("isReviewableBrandedContent",!0);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;case b("VideoComposerActionTypes").SET_PUBLISHING_TYPE:a=a.set("publishingType",c.publishingType);c.publishingType!==m.PUBLISH_FOR_DOGFOODING&&c.publishingType!==m.DOGFOOD_WITH_SERIES_OR_SEASON&&(a=a.set("isDogfoodingPost",!1));c.publishingType!==m.SAVE_AS_DRAFT&&c.publishingType!==m.PUBLISH_WITH_SHOW_OR_SEASON&&(a=a.set("isDraft",!1));a=this.$VideoComposerPublishingStoreClass6(a);c.publishingType===m.SAVE_AS_DRAFT||c.publishingType===m.PUBLISH_WITH_SHOW_OR_SEASON?a=this.$VideoComposerPublishingStoreClass5(a):c.publishingType===m.PUBLISH_FOR_DOGFOODING||c.publishingType===m.DOGFOOD_WITH_SERIES_OR_SEASON?a=this.$VideoComposerPublishingStoreClass7(a):c.publishingType===m.SCHEDULE?a.scheduleDate===null&&(a=a.set("scheduleDate",n())):(a=a.set("scheduleDate",null),a=a.set("expireDate",null),a=a.set("expireType",0));a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").SAVE_AS_DRAFT:a=a.set("isDraft",!0);b("setImmediate")(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)});return a;case b("VideoComposerActionTypes").SET_POST_TYPE:a=a.set("postType",c.postType);var g;switch(c.postType){case i.PREMIERE:g={PUBLISH_NOW:!0,BACKDATE:!0,SCHEDULE:!1};a=this.$VideoComposerPublishingStoreClass8(a,o.SCHEDULE);break;case i.VIDEO_UPLOAD:g={PUBLISH_NOW:!1,BACKDATE:!1,SCHEDULE:!1};break;case i.VIDEO_UPLOAD_WATCH_PARTY:g={PUBLISH_NOW:!1,BACKDATE:!0,SCHEDULE:!0};a=this.$VideoComposerPublishingStoreClass8(a,o.PUBLISH_NOW);break;default:g={PUBLISH_NOW:!0,BACKDATE:!0,SCHEDULE:!0};break}a=a.set("disabledScheduleTypesMap",g);a=a.set("canDraft",a.postType===i.VIDEO_UPLOAD&&a.scheduleType===o.PUBLISH_NOW);return a;case b("VideoComposerActionTypes").SET_SCHEDULE_TYPE:a=this.$VideoComposerPublishingStoreClass8(a,c.scheduleType);a=this.$VideoComposerPublishingStoreClass1(a);return a;case b("VideoComposerActionTypes").FIRST_STEP_FOOTER_NEXT_BUTTON_CLICKED:f=b("VideoComposerStores").getBasicStore(a.videoComposerID).getState();var h=f.fundedContentProgram;b("setImmediate")(function(){return d.$VideoComposerPublishingStoreClass9(l.OPEN_DRAWER,function(){b("VideoComposerActions").openPublishDrawer(a.videoComposerID),h===1&&b("VideoComposerActions").setPublishingType(a.videoComposerID,m.SCHEDULE)})});return a;case b("VideoComposerActionTypes").FIRST_STEP_FOOTER_AD_BREAK_SUBMIT_FOR_REVIEW:b("setImmediate")(function(){return d.$VideoComposerPublishingStoreClass9(l.AD_BREAK_SUBMIT_FOR_REVIEW,function(){d.$VideoComposerPublishingStoreClass10(a.videoComposerID)})});return a;default:return a}};d.$VideoComposerPublishingStoreClass8=function(a,b){__p&&__p();a=a.set("scheduleType",b);switch(b){case o.SCHEDULE:a=this.$VideoComposerPublishingStoreClass6(a);a.scheduleDate===null&&(a=a.set("scheduleDate",n()));break;case o.BACKDATE:a=this.$VideoComposerPublishingStoreClass11(a);break;case o.PUBLISH_NOW:a=this.$VideoComposerPublishingStoreClass6(a);a=this.$VideoComposerPublishingStoreClass11(a);break}a=a.set("canDraft",a.postType===i.VIDEO_UPLOAD&&a.scheduleType===o.PUBLISH_NOW);return a};d.$VideoComposerPublishingStoreClass3=function(a,c){var d=b("VideoComposerStores").getUploadStore(a.videoComposerID).getState(),e=d.videoUploader;d=d.uploadFinished;var f=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();f=f.title;this.assertNonEmptyTitle(f);c==="video_crosspost"?(a=a.set("isPosting",!0),this.$VideoComposerPublishingStoreClass12(a)):(e&&!a.saveVideosInPagesComposer&&e.postUserRequest(),d?(a=a.set("isPosting",!0),this.$VideoComposerPublishingStoreClass4()):a=a.set("isPostPending",!0));a=a.set("uploadErrorData",null);a=a.set("hasAttemptedPublish",!0);return a};d.$VideoComposerPublishingStoreClass2=function(a){a=this.$VideoComposerPublishingStoreClass6(a);a=this.$VideoComposerPublishingStoreClass11(a);a=a.set("publishingType",m.PUBLISH_NOW);a=a.set("isDraft",!1);a=a.set("isDogfoodingPost",!1);a=a.set("isReviewableBrandedContent",!1);return a};d.$VideoComposerPublishingStoreClass11=function(a){a=a.set("scheduleDate",null);a=a.set("expireDate",null);a=a.set("expireType",null);a=a.set("postEndDate",null);return a};d.$VideoComposerPublishingStoreClass6=function(a){a=a.set("backdateYear",null);a=a.set("backdateMonth",null);a=a.set("backdateDay",null);a=a.set("hideFromNewsFeed",!1);return a};d.$VideoComposerPublishingStoreClass10=function(a){!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes.bs").AD_BREAK_PREREVIEW_DIALOG)?b("VideoComposerAdBreakActions").setPrereviewDialog(this.getState().videoComposerID,!0):b("VideoComposerActions").submitForPrereview(this.getState().videoComposerID)};d.$VideoComposerPublishingStoreClass9=function(a,c){__p&&__p();var d=this,e=b("VideoComposerStores").getMetadataStore(this.getState().videoComposerID).getState(),f=e.composerEntryPointRef,g=e.isVideoShowPage,h=e.showVideoType,i=e.title;e=e.videoDuration;var j=b("VideoComposerStores").getDistributionStore(this.getState().videoComposerID).getState();j=j.showInNewsFeed;if(a===l.OPEN_DRAWER&&(b("VideoComposerUtils").isFromCreatorStudioMultipostPanel(f)||b("VideoComposerUtils").isFromCreatorStudioBulkUploadPanel(f))){c();return}f=g&&h===null;b("videoComposerValidatePublishAction")(this.getState().videoComposerID,a,i,f,j,e,function(a){return b("VideoComposerBasicActions").highlightMissingFundedContentProgram(d.getState().videoComposerID,a)},c)};d.$VideoComposerPublishingStoreClass1=function(a){__p&&__p();var c,d=null,e=a,f=e.expireDate,g=e.scheduleDate;e=e.postEndDate;var h=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState(),i=h.composerEntryPointRef;h=h.videoDuration;b("VideoComposerDispatchers").get(a.videoComposerID).waitFor([b("VideoComposerStores").getPremiereStore(a.videoComposerID).getDispatchToken()]);var l=b("VideoComposerStores").getPremiereStore(a.videoComposerID).getState(),m=l.premiereDate;l=l.shouldPremiere;if(a.isComposerPostScheduleRedesign){var n={postType:a.postType,scheduleType:a.scheduleType,shouldPremiere:l,expireDate:f,scheduleDate:g,backdateYear:a.backdateYear,backdateMonth:a.backdateMonth,backdateDay:a.backdateDay,premiereDate:m,postEndDate:e,videoDuration:h};n=k(a.videoComposerID,n,i);c=n.canPublish;d=n.cannotPublishReason}else{n={publishingType:a.publishingType,shouldPremiere:l,expireDate:f,scheduleDate:g,backdateYear:a.backdateYear,backdateMonth:a.backdateMonth,backdateDay:a.backdateDay,premiereDate:m,postEndDate:e,videoDuration:h};l=j(a.videoComposerID,n,i);c=l.canPublish;d=l.cannotPublishReason}a=a.set("canPublish",c);a=a.set("cannotPublishReason",d);return a};d.$VideoComposerPublishingStoreClass4=function(){var a=this.getState(),c=a.saveVideosInPagesComposer;a=a.videoComposerID;var d=b("VideoComposerStores").getMetadataStore(a).getState();d=d.enabledTabs;var e=b("VideoComposerStores").getUploadStore(a).getState();e=e.videoUploader;b("videoComposerDialogUploadDoPost")(a,e,d,c)};d.$VideoComposerPublishingStoreClass12=function(a){b("VideoComposerDialogCrosspostUtils").createCrosspost(a.videoComposerID)};d.$VideoComposerPublishingStoreClass7=function(a){a=this.$VideoComposerPublishingStoreClass11(a);a=this.$VideoComposerPublishingStoreClass6(a);a=a.set("isDraft",!1).set("isDogfoodingPost",!0);return a};d.$VideoComposerPublishingStoreClass5=function(a){a=this.$VideoComposerPublishingStoreClass11(a);a=this.$VideoComposerPublishingStoreClass6(a);a=a.set("isDraft",!0);a=a.set("isDogfoodingPost",!1);return a};d.assertNonEmptyTitle=function(a){!a&&g(0,2870)};d.getCrosspostRequestDataToSend=function(){var a=this.getState(),c={published:!0};a.isDraft&&(c.published=!1,c.unpublished_content_type="DRAFT");a.scheduleDate&&(c.published=!1,c.unpublished_content_type="SCHEDULED",c.scheduled_publish_time=Math.floor(a.scheduleDate.getTime()/h));a.expireDate&&(c.expiration={time:Math.floor(a.expireDate.getTime()/h),type:b("ExpirationTypeToExpirationTypeApiMap")[a.expireType||0]});a.backdateYear&&(c.backdated_post={backdated_time:Math.floor(new Date(a.backdateYear||0,(a.backdateMonth||0)-1,a.backdateDay||0).getTime()/h),backdated_time_granularity:"day",hide_from_newsfeed:a.hideFromNewsFeed});return b("Promise").resolve(b("flattenPHPQueryData")(c))};d.getEditRequestDataToSend=function(){__p&&__p();var a=this.getState(),c={};a.editToPublished&&(c.publish=!0);a.editToExpired&&(c.expire=!0);var d=a.originalScheduleDate,e=a.scheduleDate;if(d&&e){d=Math.floor(d.getTime()/h);e=Math.floor(e.getTime()/h);d!==e&&!b("VideoComposerDialogEditUtils").areTwoTimesAlmostTheSame(d,e)&&(c.scheduled_publish_time=e)}d=a.originalExpireDate;e=a.expireDate;if(d&&e){d=Math.floor(d.getTime()/h);e=Math.floor(e.getTime()/h);d!==e&&!b("VideoComposerDialogEditUtils").areTwoTimesAlmostTheSame(d,e)&&(c.expiration_time=e)}a.originalExpireType!==a.expireType&&(c.expiration_type=a.expireType);return b("Promise").resolve(c)};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c={dogfooding:a.isDogfoodingPost,draft:a.isDraft,ad_break_prereview:a.isAdBreakPrereview,is_reviewable_branded_content:a.isReviewableBrandedContent};if(a.scheduleDate!=null&&(!a.isComposerPostScheduleRedesign||a.isComposerPostScheduleRedesign&&a.postType===i.VIDEO_UPLOAD)){var d=b("VideoComposerDialogUtils").formatDateAndTime(a.scheduleDate),e=d.dateStr;d=d.timeSec;c.scheduled=!0;c.future_date=e;c.future_time=d}a.expireDate&&(c.expiring=!0,c.expire_type=a.expireType,c.expire_time=a.expireDate&&a.expireDate.getTime()/h);if(a.postEndDate){e=b("VideoComposerDialogUtils").formatDateAndTime(a.postEndDate);d=e.dateStr;e=e.timeSec;c["feed_targeted_data[relevant-until-date]"]=d;c["feed_targeted_data[relevant-until-time]"]=e}a.backdateYear&&(c["backdated_date[year]"]=a.backdateYear,c["backdated_date[month]"]=a.backdateMonth,c["backdated_date[day]"]=a.backdateDay,c.hide_from_newsfeed=a.hideFromNewsFeed);return b("Promise").resolve(c)};return c}(b("VideoComposerStoreBase"));e.exports=f}),null);
__d("VideoComposerRightsStoreClass",["fbt","Promise","ImmutableRecordWithV4Types","VideoComposerActions","VideoComposerActionTypes","VideoComposerRightsActions","VideoComposerRightsUtil","VideoComposerStoreBase","VideoComposerStores","VideoCopyrightAPI","VideoCopyrightMonitoringType","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var h=b("VideoComposerRightsUtil").errorMessageMissingMediaCategory;c={videoComposerID:"",areCountriesIncluded:!0,attributionID:null,category:null,copyrightID:null,fbWhitelistedUsers:[],igWhitelistedUsers:[],isIgRightsManagementEnabled:!1,matchRuleID:null,monitoringType:b("VideoCopyrightMonitoringType").VIDEO_ONLY.value,ownershipCountries:[],shouldDetectMatches:!1,showAttributionSelector:!1,showCategoryRequiredError:!1,rmVersion:null};var i=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return i()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").BOOTLOAD_RIGHTS_PARAMETERS:a=a.set("isIgRightsManagementEnabled",c.data.isIgRightsManagementEnabled).set("rmVersion",c.data.rmVersion).set("showAttributionSelector",c.data.showAttributionSelector);var d=c.data.defaultSettings;d&&d.use_custom_copyright_settings&&(a=a.set("monitoringType",d.copyright_monitoring_type).set("matchRuleID",d.copyright_match_rule_id).set("ownershipCountries",d.copyright_ownership_countries).set("areCountriesIncluded",d.are_countries_included).set("attributionID",d.copyright_attribution_id));return a;case b("VideoComposerActionTypes").BOOTLOAD_EDIT_RIGHTS_PARAMETERS:a=a.set("isIgRightsManagementEnabled",c.data.isIgRightsManagementEnabled).set("showAttributionSelector",c.data.showAttributionSelector).set("rmVersion",c.data.rmVersion).set("shouldDetectMatches",c.data.shouldDetectMatches);return c.data.shouldDetectMatches?a.set("areCountriesIncluded",c.data.areCountriesIncluded).set("attributionID",c.data.attributionID).set("category",c.data.category).set("copyrightID",c.data.copyrightID).set("fbWhitelistedUsers",c.data.fbWhitelistedUsers).set("igWhitelistedUsers",c.data.igWhitelistedUsers).set("matchRuleID",c.data.matchRuleID).set("monitoringType",c.data.monitoringType).set("ownershipCountries",c.data.ownershipCountries):a;case b("VideoComposerActionTypes").UPDATE_MONITORING_TYPE:a=a.set("monitoringType",c.monitoringType);return a;case b("VideoComposerActionTypes").UPDATE_CATEGORY:a=a.set("category",c.category).set("showCategoryRequiredError",!c.category);return a;case b("VideoComposerActionTypes").UPDATE_CATEGORY_REQUIRED_ERROR:a=a.set("showCategoryRequiredError",!0);return a;case b("VideoComposerActionTypes").UPDATE_OWNERSHIP_COUNTRIES:a=a.set("ownershipCountries",c.ownershipCountries).set("areCountriesIncluded",c.areCountriesIncluded);return a;case b("VideoComposerActionTypes").UPDATE_SHOULD_DETECT_MATCHES:a=a.set("shouldDetectMatches",c.shouldDetectMatches);a=a.set("showCategoryRequiredError",!this.$VideoComposerRightsStoreClass1(a));return a;case b("VideoComposerActionTypes").UPDATE_MATCH_RULE:a=a.set("matchRuleID",c.matchRuleID);return a;case b("VideoComposerActionTypes").UPDATE_ATTRIBUTION:a=a.set("attributionID",c.attributionID);return a;case b("VideoComposerActionTypes").UPDATE_FB_WHITELISTED_USERS:a=a.set("fbWhitelistedUsers",c.fbWhitelistedUsers);return a;case b("VideoComposerActionTypes").UPDATE_IG_WHITELISTED_USERS:a=a.set("igWhitelistedUsers",c.igWhitelistedUsers);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;default:return a}};d.$VideoComposerRightsStoreClass1=function(a){a===void 0&&(a=this.getState());a=a;var b=a.category,c=a.shouldDetectMatches;a=a.rmVersion;return!c||b!==null||a==="LITE"};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c=a.attributionID,d=a.category,e=a.copyrightID,f=a.monitoringType,i=a.ownershipCountries,j=a.areCountriesIncluded,k=a.shouldDetectMatches,l=a.matchRuleID,m=a.fbWhitelistedUsers,n=a.igWhitelistedUsers,o=a.videoComposerID;if(!e&&!k)return b("Promise").resolve({});if(!this.$VideoComposerRightsStoreClass1()){b("setTimeout")(function(){b("VideoComposerRightsActions").updateShowCategoryRequiredError(o),b("VideoComposerActions").selectTab(o,"rights")},1);return b("Promise").reject(h)}a=b("VideoComposerStores").getMetadataStore(o).getState();var p=a.accessToken,q=a.targetID;a=a.videoID;if(!q||!a)return b("Promise").reject(g._("Kh\u00f4ng gi\u00e1m s\u00e1t \u0111\u01b0\u1ee3c video tr\u00f9ng kh\u1edbp"));j={areCopyrightCountriesIncluded:j,copyrightAttributionID:c,copyrightRuleID:l,copyrightMonitoringType:f,copyrightOwnershipCountries:i,copyrightWhitelistedIGUserNames:n,copyrightWhitelistedFBUsers:m,selectedCategory:d};e&&!k?c=b("VideoCopyrightAPI").uncopyrightVideo(p,q,a,e,j,"video_edit_dialog"):e&&k?c=b("VideoCopyrightAPI").editVideoCopyright(p,q,a,e,j,"video_edit_dialog"):c=b("VideoCopyrightAPI").copyrightVideo(p,q,a,j,"video_upload_composer");return c.then(function(a){return{}},function(a){return b("Promise").reject(a.error_user_title)})};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerQEStoreClass",["ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerStoreBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=a({videoComposerID:"",gameTaggingAlwaysShowGenericTagging:!1,gameTaggingToggle:!0,gameTaggingNewTypeahead:!1});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").BOOTLOAD_DEFAULT_TAB_PARAMETERS:a=a.set("gameTaggingAlwaysShowGenericTagging",c.data.gameTaggingAlwaysShowGenericTagging);a=a.set("gameTaggingToggle",c.data.gameTaggingToggle);a=a.set("gameTaggingNewTypeahead",c.data.gameTaggingNewTypeahead);return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("gameTaggingAlwaysShowGenericTagging",c.editParams.gameTaggingAlwaysShowGenericTagging);a=a.set("gameTaggingToggle",c.editParams.gameTaggingToggle);a=a.set("gameTaggingNewTypeahead",c.editParams.gameTaggingNewTypeahead);return a;default:return a}};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerStoreKeys",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({AD_BREAK:"",BASIC:"",CAPTIONS:"",CAPTION_EDITOR:"",CLIPPING:"",DIALOG:"",DISTRIBUTION:"",EDIT:"",GAMESHOW_LIGHTWEIGHT:"",LOGGING:"",METADATA:"",POLLS:"",PREMIERE:"",PUBLISHING:"",QES:"",QUESTIONS:"",RIGHTS:"",SOUND_EDITOR:"",SOUND_EDITOR_SOUND_COLLECTION:"",SPHERICAL_DIRECTOR:"",THUMBNAILS:"",TRACKING:"",TRIMMING_EDITOR:"",UI:"",UPLOAD:"",AD_BREAK_IMAGE_ADS_LOGGING:""});e.exports=a}),null);
__d("VideoComposerTrackingStoreClass",["Promise","ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerStoreBase","flattenPHPQueryData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=a({videoComposerID:"",customLabels:[],universalID:""});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").APPEND_CUSTOM_LABELS:var d=this.getState();d=d.customLabels;d=new Set(d.concat(c.customLabels));a=a.set("customLabels",Array.from(d));return a;case b("VideoComposerActionTypes").BOOTLOAD_TRACKING_EDIT_PARAMS:a=a.set("customLabels",c.data.customLabels);a=a.set("universalID",c.data.universalID);return a;case b("VideoComposerActionTypes").UPDATE_CUSTOM_LABELS:a=a.set("customLabels",c.customLabels);return a;case b("VideoComposerActionTypes").UPDATE_UNIVERSAL_ID:a=a.set("universalID",c.universalID);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;default:return a}};d.getPostRequestDataToSend=function(){var a=this.getState(),c=a.customLabels;a=a.universalID;return b("Promise").resolve({custom_labels:c,external_video_id:a})};d.getEditRequestDataToSend=function(){return this.getPostRequestDataToSend().then(function(a){return b("Promise").resolve(b("flattenPHPQueryData")(a))})};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerStores",["VideoComposerAdBreakImageAdsLoggerStoreClass","VideoComposerAdBreakStoreClass","VideoComposerBasicStoreClass","VideoComposerCaptionEditorStoreClass","VideoComposerCaptionsStoreClass","VideoComposerClippingStoreClass","VideoComposerDialogStoreClass","VideoComposerDispatchers","VideoComposerDistributionStoreClass","VideoComposerEditStoreClass","VideoComposerGameshowLightweightStoreClass","VideoComposerLoggingStoreClass","VideoComposerMetadataStoreClass","VideoComposerPollsStoreClass","VideoComposerPremiereStoreClass","VideoComposerPublishingStoreClass","VideoComposerQEStoreClass","VideoComposerQuestionsStoreClass","VideoComposerRightsStoreClass","VideoComposerSoundEditorSoundCollectionStoreClass","VideoComposerSoundEditorStoreClass","VideoComposerSphericalDirectorStoreClass","VideoComposerStoreKeys","VideoComposerThumbnailsStoreClass","VideoComposerTrackingStoreClass","VideoComposerTrimmingEditorStoreClass","VideoComposerUIStoreClass","VideoComposerUploadStoreClass"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("VideoComposerDispatchers").DEFAULT_VIDEO_COMPOSER_ID,j={};function a(a,b){if(j[a]!=null)return;var c={};Object.keys(K).forEach(function(a){c[a]=new K[a](b)});j[a]=c}function c(){j={}}function d(a){return j[a]}function k(a){return a!=null&&a.trim()!==""?a:i}function f(a){a=k(a);return j[a][b("VideoComposerStoreKeys").AD_BREAK]}function l(a){a=k(a);return j[a][b("VideoComposerStoreKeys").BASIC]}function m(a){a=k(a);return j[a][b("VideoComposerStoreKeys").CAPTIONS]}function n(a){a=k(a);return j[a][b("VideoComposerStoreKeys").CAPTION_EDITOR]}function o(a){a=k(a);return j[a][b("VideoComposerStoreKeys").CLIPPING]}function p(a){a=k(a);return j[a][b("VideoComposerStoreKeys").DIALOG]}function q(a){a=k(a);return j[a][b("VideoComposerStoreKeys").DISTRIBUTION]}function r(a){a=k(a);return j[a][b("VideoComposerStoreKeys").EDIT]}function s(a){a=k(a);return j[a][b("VideoComposerStoreKeys").GAMESHOW_LIGHTWEIGHT]}function t(a){a=k(a);return j[a][b("VideoComposerStoreKeys").LOGGING]}function u(a){a=k(a);return j[a][b("VideoComposerStoreKeys").METADATA]}function v(a){a=k(a);return j[a][b("VideoComposerStoreKeys").POLLS]}function w(a){a=k(a);return j[a][b("VideoComposerStoreKeys").PREMIERE]}function x(a){a=k(a);return j[a][b("VideoComposerStoreKeys").PUBLISHING]}function y(a){a=k(a);return j[a][b("VideoComposerStoreKeys").QES]}function z(a){a=k(a);return j[a][b("VideoComposerStoreKeys").QUESTIONS]}function A(a){a=k(a);return j[a][b("VideoComposerStoreKeys").RIGHTS]}function B(a){a=k(a);return j[a][b("VideoComposerStoreKeys").SOUND_EDITOR]}function C(a){a=k(a);return j[a][b("VideoComposerStoreKeys").SOUND_EDITOR_SOUND_COLLECTION]}function D(a){a=k(a);return j[a][b("VideoComposerStoreKeys").SPHERICAL_DIRECTOR]}function E(a){a=k(a);return j[a][b("VideoComposerStoreKeys").THUMBNAILS]}function F(a){a=k(a);return j[a][b("VideoComposerStoreKeys").TRACKING]}function G(a){a=k(a);return j[a][b("VideoComposerStoreKeys").TRIMMING_EDITOR]}function H(a){a=k(a);return j[a][b("VideoComposerStoreKeys").UI]}function I(a){a=k(a);return j[a][b("VideoComposerStoreKeys").UPLOAD]}function J(a){a=k(a);return j[a][b("VideoComposerStoreKeys").AD_BREAK_IMAGE_ADS_LOGGING]}var K=(g={},g[(h=b("VideoComposerStoreKeys")).AD_BREAK]=b("VideoComposerAdBreakStoreClass"),g[h.BASIC]=b("VideoComposerBasicStoreClass"),g[h.CAPTIONS]=b("VideoComposerCaptionsStoreClass"),g[h.CAPTION_EDITOR]=b("VideoComposerCaptionEditorStoreClass"),g[h.CLIPPING]=b("VideoComposerClippingStoreClass"),g[h.DIALOG]=b("VideoComposerDialogStoreClass"),g[h.DISTRIBUTION]=b("VideoComposerDistributionStoreClass"),g[h.EDIT]=b("VideoComposerEditStoreClass"),g[h.GAMESHOW_LIGHTWEIGHT]=b("VideoComposerGameshowLightweightStoreClass"),g[h.LOGGING]=b("VideoComposerLoggingStoreClass"),g[h.METADATA]=b("VideoComposerMetadataStoreClass"),g[h.POLLS]=b("VideoComposerPollsStoreClass"),g[h.PREMIERE]=b("VideoComposerPremiereStoreClass"),g[h.PUBLISHING]=b("VideoComposerPublishingStoreClass"),g[h.QES]=b("VideoComposerQEStoreClass"),g[h.QUESTIONS]=b("VideoComposerQuestionsStoreClass"),g[h.RIGHTS]=b("VideoComposerRightsStoreClass"),g[h.SOUND_EDITOR]=b("VideoComposerSoundEditorStoreClass"),g[h.SOUND_EDITOR_SOUND_COLLECTION]=b("VideoComposerSoundEditorSoundCollectionStoreClass"),g[h.SPHERICAL_DIRECTOR]=b("VideoComposerSphericalDirectorStoreClass"),g[h.THUMBNAILS]=b("VideoComposerThumbnailsStoreClass"),g[h.TRACKING]=b("VideoComposerTrackingStoreClass"),g[h.TRIMMING_EDITOR]=b("VideoComposerTrimmingEditorStoreClass"),g[h.UI]=b("VideoComposerUIStoreClass"),g[h.UPLOAD]=b("VideoComposerUploadStoreClass"),g[h.AD_BREAK_IMAGE_ADS_LOGGING]=b("VideoComposerAdBreakImageAdsLoggerStoreClass"),g);a(i,b("VideoComposerDispatchers").get(i));e.exports={createNewStores:a,getAllStores:d,clearAll:c,getAdBreakStore:f,getBasicStore:l,getCaptionsStore:m,getCaptionEditorStore:n,getClippingStore:o,getDialogStore:p,getDistributionStore:q,getEditStore:r,getGameshowLightweightStore:s,getLoggingStore:t,getMetadataStore:u,getPollsStore:v,getPremiereStore:w,getPublishingStore:x,getQEStore:y,getQuestionsStore:z,getRightsStore:A,getSoundEditorStore:B,getSoundEditorSoundCollectionStore:C,getSphericalDirectorStore:D,getThumbnailsStore:E,getTrackingStore:F,getTrimmingEditorStore:G,getUIStore:H,getUploadStore:I,getAdBreakImageAdsLoggerStore:J}}),null);
__d("VideoComposerThumbnailsStoreClass",["Promise","FileVideoThumbnail","ImmutableRecordWithV4Types","SphericalDirectorStore","URLVideoThumbnail","VideoComposerActionTypes","VideoComposerDialogThumbnailUtils","VideoComposerDialogUtils","VideoComposerStoreBase","VideoComposerStores","VideoComposerThumbnailTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=10,h=a({videoComposerID:"",backgroundSize:"contain",customThumbnail:null,displayOrder:[],generatedThumbnails:[],hasSelectedGeneratedThumb:!1,improvedThumbnailSelection:!1,newFileAdded:!1,originalOrderThumbnails:[],previousCustomThumbnail:null,previousHasSelectedGeneratedThumb:!1,previousScrubbedThumbnail:null,previousSelectedGeneratedIndex:0,previousSelectedThumbnail:null,previousSelectedSection:b("VideoComposerThumbnailTypes").ThumbnailSection.GENERATED,scrubbedThumbnail:null,selectedGeneratedIndex:0,selectedSection:b("VideoComposerThumbnailTypes").ThumbnailSection.GENERATED,selectedThumbnail:null,showEditor:!1,showThumbnailPreview:!1,videoMetadataUnavailable:!1,videoPlayer:null});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return h()};d.reduceImpl=function(a,c){__p&&__p();var d=this.getState(),e=d.customThumbnail,f=d.generatedThumbnails,g=d.scrubbedThumbnail;d=d.selectedGeneratedIndex;var h=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();h=h.eventCallbacks;switch(c.type){case b("VideoComposerActionTypes").THUMBNAIL_PREVIEW_HIDE:a=a.set("showThumbnailPreview",!1);return a;case b("VideoComposerActionTypes").THUMBNAIL_EDITOR_CANCEL:a=a.set("customThumbnail",a.previousCustomThumbnail);a=a.set("selectedThumbnail",a.previousSelectedThumbnail);a=a.set("scrubbedThumbnail",a.previousScrubbedThumbnail);a=a.set("hasSelectedGeneratedThumb",a.previousHasSelectedGeneratedThumb);a=a.set("selectedGeneratedIndex",a.previousSelectedGeneratedIndex);a=a.set("selectedSection",a.previousSelectedSection);a=a.set("showEditor",!1);return a;case b("VideoComposerActionTypes").THUMBNAIL_EDITOR_OPEN:a=a.set("previousCustomThumbnail",a.customThumbnail);a=a.set("previousSelectedThumbnail",a.selectedThumbnail);a=a.set("previousScrubbedThumbnail",a.scrubbedThumbnail);a=a.set("previousHasSelectedGeneratedThumb",a.hasSelectedGeneratedThumb);a=a.set("previousSelectedGeneratedIndex",a.selectedGeneratedIndex);a=a.set("previousSelectedSection",a.selectedSection);a=a.set("showEditor",!0);return a;case b("VideoComposerActionTypes").THUMBNAIL_EDITOR_SAVE:a=a.set("showEditor",!1);a=a.set("showThumbnailPreview",!0);return a;case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=a.set("improvedThumbnailSelection",c.serverParams.common.improvedThumbnailSelection);return a;case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:a=a.set("improvedThumbnailSelection",c.editParams.common.improvedThumbnailSelection);return a;case b("VideoComposerActionTypes").INITIALIZE_CROSSPOST_COMPOSER:a=a.set("improvedThumbnailSelection",c.params.common.improvedThumbnailSelection);return a;case b("VideoComposerActionTypes").BOOTLOAD_CROSSPOST_THUMBNAILS:case b("VideoComposerActionTypes").BOOTLOAD_THUMBNAILS_FOR_EDIT:a=this.$VideoComposerThumbnailsStoreClass1(a,c.data.selectedThumbnail,c.data.thumbnails);return a;case b("VideoComposerActionTypes").GENERATED_THUMBNAILS:var i=c.data.selectedThumbnail,j=c.data.thumbnails,k=j.slice(0),l=j.findIndex(function(a){return a.getURL()===i.getURL()})||0;l>0&&(j.splice(l,1),j.unshift(i));a=a.set("selectedThumbnail",i);a=a.set("generatedThumbnails",j);a=a.set("originalOrderThumbnails",k);a=a.set("showThumbnailPreview",!0);h&&h.onThumbnailsGenerationDone&&h.onThumbnailsGenerationDone(j);return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_HTML_PLAYER:if(a.generatedThumbnails.length===0||a.newFileAdded){a=a.set("newFileAdded",!1).set("videoPlayer",c.videoPlayer);l=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();k=l.isMetadataAvailable;j=l.isSpherical;l=b("SphericalDirectorStore").getState().get("originalSphericalMetadata");var m=Object.keys(l).length===0;(k&&!j||j&&!m)&&b("VideoComposerDialogThumbnailUtils").onMetadataLoaded(a.videoComposerID,c.videoPlayer,l)}return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:if(c.data){a=a.set("videoMetadataUnavailable",!1);k=b("VideoComposerDialogUtils").isVideoSpherical(c.data);a.videoPlayer&&!k&&b("VideoComposerDialogThumbnailUtils").onMetadataLoaded(a.videoComposerID,a.videoPlayer,null)}else a=a.set("videoMetadataUnavailable",!0).set("selectedThumbnail",null);h&&h.onVideoMetadataLoaded&&h.onVideoMetadataLoaded(!!c.data);return a;case b("VideoComposerActionTypes").SPHERICAL_METADATA_PARSED:j=b("VideoComposerDialogThumbnailUtils").getThumbnailBackgroundSize(c.sphericalMetadata);a=a.set("backgroundSize",j);a.videoPlayer&&b("VideoComposerDialogThumbnailUtils").onMetadataLoaded(a.videoComposerID,a.videoPlayer,c.sphericalMetadata);return a;case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:a=a.set("newFileAdded",!0);a=a.set("scrubbedThumbnail",null);return a;case b("VideoComposerActionTypes").SELECT_SECTION:a=a.set("selectedSection",c.section);switch(c.section){case b("VideoComposerThumbnailTypes").ThumbnailSection.GENERATED:a=a.set("selectedThumbnail",f[d]);break;case b("VideoComposerThumbnailTypes").ThumbnailSection.CUSTOM:e!==null&&(a=a.set("selectedThumbnail",e));break;case b("VideoComposerThumbnailTypes").ThumbnailSection.VIDEO_FRAME:g!==null&&(a=a.set("selectedThumbnail",g));break;default:break}return a;case b("VideoComposerActionTypes").TOGGLE_SELECTED_GENERATED_THUMBNAIL:a=a.set("hasSelectedGeneratedThumb",!0);a=a.set("selectedGeneratedIndex",c.index);a=a.set("selectedThumbnail",f[c.index]);return a;case b("VideoComposerActionTypes").UPDATE_CUSTOM_THUMBNAIL:a=a.set("customThumbnail",c.thumbnail);a=a.set("selectedThumbnail",c.thumbnail);return a;case b("VideoComposerActionTypes").UPDATE_SCRUBBED_THUMBNAIL:a=a.set("scrubbedThumbnail",c.thumbnail);a=a.set("selectedThumbnail",c.thumbnail);return a;case b("VideoComposerActionTypes").UPDATE_SELECTED_THUMBNAIL:a=a.set("selectedThumbnail",c.thumbnail);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;default:return a}};d.$VideoComposerThumbnailsStoreClass1=function(a,c,d){__p&&__p();a=a.set("originalOrderThumbnails",d.map(function(a){return new(b("URLVideoThumbnail"))(a)}));var e=[],f=[];for(var h=d.length-1;h>=g;h--)e.push(h),f.push(d[h]);for(var h=0;h<Math.min(d.length,g);h++)e.push(h),f.push(d[h]);a=a.set("displayOrder",e);a=a.set("generatedThumbnails",f.map(function(a){return new(b("URLVideoThumbnail"))(a)}));a=a.set("selectedThumbnail",new(b("URLVideoThumbnail"))(c));a=a.set("selectedGeneratedIndex",f.findIndex(function(a){return a===c}));return a};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState(),c=a.hasSelectedGeneratedThumb,d=a.scrubbedThumbnail;a=a.selectedThumbnail;var e={};if(a){a instanceof b("FileVideoThumbnail")?e.thumbnail_type="custom":d!==null&&d===a?(e.thumbnail_type="scrubber_selected",e.user_scrubbed_thumbnail_timestamp=a.getTime()):e.thumbnail_type=c?"generated_selected":"generated_default";return a.getData().then(function(a){e.thumb=a;return e})}return b("Promise").resolve(e)};d.getCrosspostRequestDataToSend=function(){return this.$VideoComposerThumbnailsStoreClass2("thumb")};d.getEditRequestDataToSend=function(){return this.$VideoComposerThumbnailsStoreClass2("custom_thumbnail")};d.$VideoComposerThumbnailsStoreClass2=function(a){__p&&__p();var c=this.getState(),d=c.generatedThumbnails,e=c.selectedThumbnail,f=c.displayOrder;c=c.scrubbedThumbnail;var g={},h=-1;e instanceof b("URLVideoThumbnail")&&(d.forEach(function(a,b){a.getURL()===e.getURL()&&(h=b)}),h!=-1&&Object.assign(g,{preferred_thumbnail_index:f[h]+1}));if(e instanceof b("FileVideoThumbnail")){f=e.getData();Object.assign(g,{preferred_thumbnail_index:d.length+1});return f.then(function(b){b&&(g[a]=b);return g})}if(e!=null&&c===e){Object.assign(g,{preferred_thumbnail_index:d.length+1});return e.getData().then(function(b){g[a]=b;return g})}return b("Promise").resolve(g)};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerUIStoreClass",["ComposerXVideoUploadDialogController_DEPRECATED","ImmutableRecordWithV4Types","VideoComposerActions","VideoComposerActionTypes","VideoComposerStoreBase","VideoComposerStores","setImmediate","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;c={videoComposerID:"",composerShown:!1,isPreviewMode:!1,selectedTab:"basic",showExitConfirmDialog:!1,previewDialogShown:!1,primaryActionErrorDialogShown:!1,primaryActionErrorMessage:null,publishConfirmDialogShown:!1,publishConfirmDialogData:null,publishDrawerShown:!1,rightsConfirmDialogShown:!1,showReviewableBrandedContentConfirmationDialog:!1,navigatedAwayFromLoadedTab:!1};var g=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_COMPOSER_PREVIEW:a=a.set("composerShown",!0).set("isPreviewMode",!0);return a;case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:return a.set("composerShown",!0).set("isPreviewMode",!1);case b("VideoComposerActionTypes").INITIALIZE_CROSSPOST_COMPOSER:case b("VideoComposerActionTypes").INITIALIZE_EDIT_COMPOSER:return a.set("composerShown",!0).set("isPreviewMode",!1);case b("VideoComposerActionTypes").MINIMIZE_DIALOG:return a.set("composerShown",!1);case b("VideoComposerActionTypes").SET_COMPOSER_SHOWN:return a.set("composerShown",c.composerShown);case b("VideoComposerActionTypes").POST_FINISHED:a=a.set("publishConfirmDialogShown",!0);a=a.set("showExitConfirmDialog",!1);a=a.set("composerShown",!1);return a;case b("VideoComposerActionTypes").POST_FAILED:a=a.set("primaryActionErrorDialogShown",!0);a=a.set("primaryActionErrorMessage",c.errorMessage);return a;case b("VideoComposerActionTypes").EXIT_DIALOG:a=a.set("showExitConfirmDialog",!1);a=a.set("composerShown",!1);this.$VideoComposerUIStoreClass1();return a;case b("VideoComposerActionTypes").EXIT_DIALOG_ATTEMPT:a=a.set("showExitConfirmDialog",!0);return a;case b("VideoComposerActionTypes").CLOSE_PRIMARY_ERROR_DIALOG:a=a.set("primaryActionErrorDialogShown",!1);a=a.set("primaryActionErrorMessage",null);return a;case b("VideoComposerActionTypes").POST_REQUEST_INVALID:b("setImmediate")(function(){return b("VideoComposerActions").postFailed(a.videoComposerID,{},{error_summary:c.invalidationReasons[0].userMessage,error_description:""})});return a;case b("VideoComposerActionTypes").EXIT_DIALOG_REPLACE_FILE:case b("VideoComposerActionTypes").EXIT_DIALOG_SAVE_DRAFT:case b("VideoComposerActionTypes").CLOSE_CONFIRM_DIALOG:a=a.set("showExitConfirmDialog",!1);return a;case b("VideoComposerActionTypes").CLOSE_PUBLISH_CONFIRM_DIALOG:a=a.set("publishConfirmDialogShown",!1);this.$VideoComposerUIStoreClass1();return a;case b("VideoComposerActionTypes").SELECT_TAB:a=a.set("selectedTab",c.tab);a=a.set("navigatedAwayFromLoadedTab",!0);return a;case b("VideoComposerActionTypes").HIGHLIGHT_TITLE_WITH_ERROR_TOOLTIP:return a.set("selectedTab","basic");case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_SUCCESS:a=a.set("showExitConfirmDialog",!1);a=a.set("composerShown",!1);this.$VideoComposerUIStoreClass1();return a;case b("VideoComposerActionTypes").SAVE_EDITED_VIDEO_FAILURE:a=a.set("primaryActionErrorDialogShown",!0);a=a.set("primaryActionErrorMessage",c.errorMessage);return a;case b("VideoComposerActionTypes").RESET_COMPOSER:b("ComposerXVideoUploadDialogController_DEPRECATED").clearInstances();return this.getInitialState();case b("VideoComposerActionTypes").SHOW_RIGHTS_CONFIRM_DIALOG:a=a.set("rightsConfirmDialogShown",!0);return a;case b("VideoComposerActionTypes").HIDE_RIGHTS_CONFIRM_DIALOG:a=a.set("rightsConfirmDialogShown",!1);return a;case b("VideoComposerActionTypes").SHOW_REVIEWABLE_BRANDED_CONTENT_CONFIRMATION:a=a.set("showReviewableBrandedContentConfirmationDialog",!0);return a;case b("VideoComposerActionTypes").HIDE_REVIEWABLE_BRANDED_CONTENT_CONFIRMATION:a=a.set("showReviewableBrandedContentConfirmationDialog",!1);return a;case b("VideoComposerActionTypes").CONFIRM_REVIEWABLE_BRANDED_CONTENT:a=a.set("showReviewableBrandedContentConfirmationDialog",!1);b("setTimeout")(function(){return b("VideoComposerActions").publishPost(a.videoComposerID)},1);return a;case b("VideoComposerActionTypes").OPEN_PUBLISH_DRAWER:b("VideoComposerStores").getAdBreakStore(a.videoComposerID).getShouldIgnorePublishNextStep()||(a=a.set("publishDrawerShown",!0));return a;case b("VideoComposerActionTypes").CLOSE_PUBLISH_DRAWER:a=a.set("publishDrawerShown",!1);return a;case b("VideoComposerActionTypes").OPEN_PREVIEW_DIALOG:a=a.set("previewDialogShown",!0);return a;case b("VideoComposerActionTypes").CLOSE_PREVIEW_DIALOG:a=a.set("previewDialogShown",!1);return a;default:return a}};d.$VideoComposerUIStoreClass1=function(){var a=this;b("setTimeout")(function(){return b("VideoComposerActions").resetComposer(a.getState().videoComposerID)},1)};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerUploadStoreClass",["cx","Arbiter","DOM","EventListener","ImmutableRecordWithV4Types","React","ReactDOM","SubscriptionsHandler","VideoComposerActions","VideoComposerActionTypes","VideoComposerDialogUtils","VideoComposerStoreBase","VideoComposerStores","VideoUploadFile","videoComposerDialogUploadAddUploadSubscriptions","videoComposerDialogUploadCreateVideoData","videoComposerDialogUploadLoadVideoUploader","videoComposerDialogUploadPostFinished"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("ImmutableRecordWithV4Types").Record;d={videoComposerID:"",composerID:"",hasFileBeenReplaced:!1,hasReplacedPremiere:!1,subscriptionsHandler:new(b("SubscriptionsHandler"))(),videoData:null,videoFile:null,videoMetadata:null,videoSize:null,videoUploader:null,uploadFinished:!1,uploadProgress:0};var h=c(d);f=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){return c.apply(this,arguments)||this}var e=d.prototype;e.getInitialState=function(){return h()};e.reduceImpl=function(a,c){__p&&__p();var d=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState(),e=d.actorID,f=d.composerEntryPointRef,g=d.targetID;d=d.dialogMode;var h=this.getState();h=h.videoUploader;switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_COMPOSER_PREVIEW:return this.setFileData(a,c.file);case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=this.setFileData(a,c.clientParams.file);a=a.set("composerID",c.serverParams.composerID);c.clientParams.skipVideoUploaderInit!==!0&&b("videoComposerDialogUploadLoadVideoUploader")(c.videoComposerID,c.serverParams.common.actorID,c.serverParams.targetID,c.clientParams.entryPointRef,c.clientParams.videoPublisherActionSource);var i=a.videoFile;i&&this.$VideoComposerUploadStoreClass1(c.videoComposerID,i);return a;case b("VideoComposerActionTypes").PREMIERE_REPLACE_FILE:a=a.set("hasReplacedPremiere",!0);h&&(a=a.set("hasFileBeenReplaced",!0),h.cancel());this.$VideoComposerUploadStoreClass2(a);a=a.set("uploadProgress",0);a=a.set("videoFile",c.file);a=a.set("videoSize",c.file.size);e&&g&&f&&b("videoComposerDialogUploadLoadVideoUploader")(a.videoComposerID,e,g,f,null);i=a.videoFile;i&&this.$VideoComposerUploadStoreClass1(a.videoComposerID,i);return a;case b("VideoComposerActionTypes").INIT_VIDEO_UPLOADER:c.videoUploader.setHasFileBeenReplaced(a.hasFileBeenReplaced);a=a.set("videoUploader",c.videoUploader);a=a.set("subscriptionsHandler",new(b("SubscriptionsHandler"))());b("videoComposerDialogUploadAddUploadSubscriptions")(a.videoComposerID,a.subscriptionsHandler,c.videoUploader);e=a.videoFile;e&&c.videoUploader.upload(b("VideoUploadFile").fromFile(e));return a;case b("VideoComposerActionTypes").SET_VIDEO_START_END_TIME:g=a;f=g.videoMetadata;if(f&&f.format&&c.endTime){i=c.startTime||0;f.format.duration=c.endTime-i;a=a.set("videoMetadata",f)}return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:a=a.set("videoMetadata",c.data);e=b("VideoComposerDialogUtils").isVideoSpherical(c.data);g=a.videoFile;!e&&g&&(a=a.set("videoData",b("videoComposerDialogUploadCreateVideoData")(g,null)));return a;case b("VideoComposerActionTypes").SPHERICAL_METADATA_PARSED:i=a.videoFile;i&&(a=a.set("videoData",b("videoComposerDialogUploadCreateVideoData")(i,c.sphericalMetadata)));return a;case b("VideoComposerActionTypes").NAVIGATED_FROM_PAGE:h&&h.abandon();return a;case b("VideoComposerActionTypes").UPLOAD_FINISHED:f=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();e=f.eventCallbacks;e&&e.onUploadProgress&&e.onUploadProgress(a.uploadProgress,!0);a=a.set("uploadFinished",!0);return a;case b("VideoComposerActionTypes").POST_FINISHED:d==="video_upload"&&b("videoComposerDialogUploadPostFinished")(a.videoComposerID,c.data||{},a.composerID);return a;case b("VideoComposerActionTypes").UPLOAD_PROGRESSED:g=b("VideoComposerStores").getMetadataStore(a.videoComposerID).getState();i=g.eventCallbacks;a=a.set("uploadProgress",c.progress);i&&i.onUploadProgress&&i.onUploadProgress(c.progress,a.uploadFinished);return a;case b("VideoComposerActionTypes").EXIT_DIALOG:b("Arbiter").inform("videoUpload/cancel",{composerID:a.composerID});h&&h.cancel();return a;case b("VideoComposerActionTypes").RESET_COMPOSER:this.$VideoComposerUploadStoreClass2(a);a=this.getInitialState();return a;default:return a}};e.isUploading=function(){var a=this.getState(),c=a.videoUploader,d=a.uploadFinished;a=a.videoComposerID;a=b("VideoComposerStores").getMetadataStore(a).getState();a=a.dialogMode;return a==="video_upload"&&!!c&&!d};e.getUploaderVideoID=function(){var a=this.getState();return a.videoUploader?a.videoUploader.getVideoID():null};e.getVideoSize=function(){return this.getState().videoSize};e.fetchUploadDataForMediaStore=function(){var a=this.getState();return{composerID:a.composerID,videoFile:a.videoFile,videoMetadata:a.videoMetadata}};e.setFileData=function(a,b){a=a.set("videoFile",b);a=a.set("videoSize",b.size);return a};e.$VideoComposerUploadStoreClass2=function(a){var b=a.videoUploader;b&&(a.hasReplacedPremiere?b.reset():b.abandon());a.subscriptionsHandler.release()};e.$VideoComposerUploadStoreClass1=function(c,d){d=a.URL.createObjectURL(d);var e;d=b("React").jsx("video",{ref:function(a){return e=a},className:"_6eji",src:d});b("ReactDOM").render(d,b("DOM").create("div"),function(){e&&b("EventListener").listen(e,"loadedmetadata",function(){return e&&b("VideoComposerActions").metadataLoadedFromHTMLPlayer(c,e)})})};return d}(b("VideoComposerStoreBase"));e.exports=f}),null);
__d("VideoComposerCaptionEditorStoreClass",["DateConsts","ImmutableObject","VideoCaptionEditorLanguages","VideoCaptionEditorLogger","VideoCaptionEditorStateEnums","VideoComposerActionTypes","VideoComposerCaptionEditorActions","VideoComposerCaptionsTabActions","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorUtils","VideoComposerStoreBase","VideoComposerStores","WebApiApplication","immutable","nullthrows","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoCaptionEditorStateEnums").EditorStateEnum,h=1e3,i=-1;c={videoComposerID:"",captions:(a=b("immutable")).List(),language:b("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED,locale:b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE,availableLanguages:a.List(b("VideoCaptionEditorLanguages").languagesInEnglish),captionsChangeSet:a.List(),captionID:"",captionLocale:b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE,editorState:g.INIT,editSectionState:{selected:-1},previewEntry:null,captionSelected:i,nextEntryIdx:0,videoID:"",vpc:null,videoDuration:0,currentPlayPositionInMs:0,shouldShowExitDialog:!1,captionFile:null,isPlaying:!1,isAutoCaption:!1};var j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.Record(c));d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.$VideoComposerCaptionEditorStoreClass1=new(b("VideoCaptionEditorLogger"))();return c}var d=c.prototype;d.getInitialState=function(){return new j()};d.reduceImpl=function(a,c){__p&&__p();var d=null;switch(c.type){case b("VideoComposerActionTypes").RESET_CAPTION_EDITOR:return this.getInitialState();case b("VideoComposerActionTypes").SET_CAPTIONS:a=this.$VideoComposerCaptionEditorStoreClass4(a,c);break;case b("VideoComposerActionTypes").EDIT_CAPTION_ENTRY:a=this.$VideoComposerCaptionEditorStoreClass5(a,c);break;case b("VideoComposerActionTypes").REMOVE_CAPTION_ENTRY:a=this.$VideoComposerCaptionEditorStoreClass6(a,c);break;case b("VideoComposerActionTypes").ADD_CAPTION_ENTRY:a=this.$VideoComposerCaptionEditorStoreClass7(a,c);break;case b("VideoComposerActionTypes").RESET_PLAYER:a=a.set("previewEntry",null).set("captionSelected",i).set("nextEntryIdx",0).set("videoDuration",null).set("currentPlayPositionInMs",0);break;case b("VideoComposerActionTypes").SET_DURATION:a=a.set("videoDuration",c.duration);break;case b("VideoComposerActionTypes").SET_PLAYER_STATE:a=a.set("isPlaying",c.isPlaying);break;case b("VideoComposerActionTypes").SET_PREVIEW_ENTRY:a=a.set("captionSelected",c.idx);c.idx===i?a=a.set("previewEntry",null):a=a.set("previewEntry",new(b("ImmutableObject"))(this.getCaptions().get(c.idx)));a=a.set("nextEntryIdx",(c.idx+1)%a.captions.size);break;case b("VideoComposerActionTypes").SET_EDITOR_LANGUAGE:a.get("captionID")&&(a=a.set("editorState",g.UNSAVED));a=a.set("language",c.language);this.$VideoComposerCaptionEditorStoreClass8("caption_editor_set_language");break;case b("VideoComposerActionTypes").SET_EDITOR_LOCALE:a.get("captionID")&&(a=a.set("editorState",g.UNSAVED));a=a.set("locale",c.locale);break;case b("VideoComposerActionTypes").INITIALIZE_EDITOR_LANGUAGE:d=b("VideoComposerStores").getCaptionsStore(a.videoComposerID).getState().get("selectedCaption");d&&(a=a.set("language",d.language).set("locale",d.locale));break;case b("VideoComposerActionTypes").INITIALIZE_IS_AUTO_CAPTION:a=a.set("isAutoCaption",c.isAutoCaption);break;case b("VideoComposerActionTypes").PLAY_PREVIEW_ENTRY:a=this.$VideoComposerCaptionEditorStoreClass9(a,c);break;case b("VideoComposerActionTypes").SET_NEXT_ENTRY:a=a.set("nextEntryIdx",c.idx);break;case b("VideoComposerActionTypes").SET_VPC:a=a.set("vpc",c.vpc);break;case b("VideoComposerActionTypes").SET_CURRENT_PLAY_POSITION:a=a.set("currentPlayPositionInMs",c.position);break;case b("VideoComposerActionTypes").CONFIRM_CLOSE_DIALOG:a=a.set("editorState",g.EXIT);a=a.set("shouldShowExitDialog",!1);this.$VideoComposerCaptionEditorStoreClass8("caption_editor_close");break;case b("VideoComposerActionTypes").CANCEL_CLOSE_DIALOG:a=a.set("shouldShowExitDialog",!1);break;case b("VideoComposerActionTypes").SHOW_EXIT_DIALOG:a=a.set("shouldShowExitDialog",!0);break;case b("VideoComposerActionTypes").START_SAVE_CAPTION_CHANGESET:a=a.set("editorState",g.SAVING);d=a.get("locale");if(b("VideoComposerDialogCaptionEditorUtils").isLanguageDefaultOrEmpty(d)){c=b("VideoComposerStores").getCaptionsStore(a.videoComposerID).getState().get("selectedCaption");c!==null&&!b("VideoComposerDialogCaptionEditorUtils").isLanguageDefaultOrEmpty(b("nullthrows")(c).locale)&&(d=b("nullthrows")(c).locale,a.set("locale",d))}b("promiseDone")(b("VideoComposerDialogCaptionEditorUtils").saveCaptionChangeset(a.get("captionID"),a.get("captions"),a.get("captionsChangeSet"),d,b("VideoComposerStores").getCaptionsStore(a.videoComposerID).getState().get("pageID")).then(function(c){b("VideoComposerCaptionEditorActions").finishSaveCaptionChangeset(a.videoComposerID),b("VideoComposerCaptionEditorActions").confirmCloseDialog(a.videoComposerID),b("VideoComposerCaptionsTabActions").updateCaptionFiles(a.videoComposerID),b("VideoComposerCaptionEditorActions").resetCaptionEditor(a.videoComposerID)}));this.$VideoComposerCaptionEditorStoreClass8("caption_editor_save");break;case b("VideoComposerActionTypes").FINISH_SAVE_CAPTION_CHANGESET:a=this.$VideoComposerCaptionEditorStoreClass10(a);break}return a};d.$VideoComposerCaptionEditorStoreClass8=function(a,c,d){b("VideoComposerStores").getCaptionsStore(this.getState().videoComposerID).getLogger().setEvent(a).setError(d).setSubtitleID(this.getState().get("captionID")).setIsCaptionEditor(!0).updateExtraData({language:this.getLanguage()}).log()};d.$VideoComposerCaptionEditorStoreClass4=function(a,c){var d=c.captions,e=c.captionsChangeSet;d.size===0&&(d=b("immutable").List([{node:{text:" ",start_time_in_ms:0,duration_in_ms:h,confidence:1,left:0,width:h*b("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT}}]));a=a.set("captions",d).set("captionsChangeSet",e);d=!b("VideoComposerDialogCaptionEditorUtils").areHeadLocalesEqual(a.get("locale"),c.captionLocale);d&&(a=a.set("editorState",g.UNSAVED));this.$VideoComposerCaptionEditorStoreClass2=c.appID||b("WebApiApplication").getClientID();this.$VideoComposerCaptionEditorStoreClass3=c.placement;return a.merge({captionID:c.captionID,captionLocale:c.captionLocale,videoID:c.videoID})};d.$VideoComposerCaptionEditorStoreClass10=function(a){a=a.set("editorState",g.SAVED).set("captionLocale",a.get("locale"));var c=a.get("locale"),d=c!==b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE&&c!==b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE;if(!d)return a;d=b("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(a.get("captions"),b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(c),a.get("language"),a.get("isAutoCaption")===!0);return a.set("captionFile",d)};d.$VideoComposerCaptionEditorStoreClass5=function(a,b){var c=a.get("captions");c=c.splice(b.idx,1,b.caption);b=a.get("captionsChangeSet").splice(b.idx,1,b.caption);a=a.set("captions",c).set("captionsChangeSet",b);return a.set("editorState",g.UNSAVED)};d.$VideoComposerCaptionEditorStoreClass6=function(a,b){var c=a.get("captions"),d=c.get(b.idx);c=c["delete"](b.idx);var e=a.get("captionsChangeSet")["delete"](b.idx);d&&d.node&&(e=e.push({node:{id:d.node.id}}));a=a.set("captions",c).set("captionsChangeSet",e);d=a.get("previewEntry");d&&a.get("captionSelected")===b.idx&&(a=a.set("previewEntry",null));return a.set("editorState",g.UNSAVED)};d.$VideoComposerCaptionEditorStoreClass7=function(a,b){var c=a.get("captions").splice(b.idx,0,b.caption);b=a.get("captionsChangeSet").splice(b.idx,0,b.caption);a=a.set("captions",c).set("captionsChangeSet",b);return a.set("editorState",g.UNSAVED)};d.$VideoComposerCaptionEditorStoreClass9=function(a,c){__p&&__p();a=a.set("captionSelected",c.idx);c.idx===i?a=a.set("previewEntry",null):(a=a.set("previewEntry",new(b("ImmutableObject"))(this.getCaptions().get(c.idx))),a=a.set("nextEntryIdx",(c.idx+1)%a.captions.size));c=a.get("vpc");if(c){var d=a.get("previewEntry"),e=(d?d.node.start_time_in_ms:0)/b("DateConsts").MS_PER_SEC;d=((d?d.node.start_time_in_ms+d.node.duration_in_ms:a.videoDuration)-b("VideoComposerDialogCaptionEditorConstants").PREVIEW_END_TIME_OFFSET_IN_MS)/b("DateConsts").MS_PER_SEC;c.emit("previewByStartEndTime",{startTime:e,endTime:d})}a=a.set("isPlaying",!0);return a};d.getLanguage=function(){return this.getState().get("language")};d.getCaptions=function(){return this.getState().get("captions")};d.getLanguages=function(){return this.getState().get("availableLanguages")};d.getVPC=function(){return this.getState().get("vpc")};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);