if (self.CavalryLogger) { CavalryLogger.start_js(["oJVvl"]); }

__d("FBRTCRingType",[],(function(a,b,c,d,e,f){e.exports={GROUP_AUDIO_CALL:0,PEER_VIDEO_CALL:1,PEER_AUDIO_CALL:2,GROUP_VIDEO_CALL:3,LIVE_STREAM:4,PEER_ESCALATED_VIDEO_CALL:5,PEER_ESCALATED_AUDIO_CALL:6}}),null);
__d("RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"server_session_id",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"guest_id",type:"ID",defaultValue:null}],b=[{kind:"Variable",name:"server_session_id",variableName:"server_session_id"}],c=[{kind:"Variable",name:"find",variableName:"guest_id"}],d={kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null}]},e={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_call_query",storageKey:null,args:b,concreteType:"MessengerCall",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"connected_participants",storageKey:null,args:c,concreteType:"MessengerCallToConnectedParticipantsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessengerCallToConnectedParticipantsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"joining_context",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"MessengerCallInviteLink",selections:[{kind:"LinkedField",alias:null,name:"link_owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d]}]}]}]}]}]}]},operation:{kind:"Operation",name:"RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_call_query",storageKey:null,args:b,concreteType:"MessengerCall",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"connected_participants",storageKey:null,args:c,concreteType:"MessengerCallToConnectedParticipantsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessengerCallToConnectedParticipantsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"joining_context",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,f,{kind:"InlineFragment",type:"MessengerCallInviteLink",selections:[{kind:"LinkedField",alias:null,name:"link_owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,f,d]}]}]}]}]},f]}]},params:{operationKind:"query",name:"RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery",id:"1824858160953429",text:null,metadata:{}}}}();e.exports=a}),null);
__d("CreateMessengerCallInviteLinkMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"CreateMessengerCallInviteLinkData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"link_url",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CreateMessengerCallInviteLinkMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"create_messenger_call_invite_link",storageKey:null,args:b,concreteType:"CreateMessengerCallInviteLinkResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messenger_call_invite_link",storageKey:null,args:null,concreteType:"MessengerCallInviteLink",plural:!1,selections:[d]}]}]},operation:{kind:"Operation",name:"CreateMessengerCallInviteLinkMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"create_messenger_call_invite_link",storageKey:null,args:b,concreteType:"CreateMessengerCallInviteLinkResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messenger_call_invite_link",storageKey:null,args:null,concreteType:"MessengerCallInviteLink",plural:!1,selections:[d,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"CreateMessengerCallInviteLinkMutation",id:"1879632448805157",text:null,metadata:{}}}}();e.exports=a}),null);
__d("EnterMessengerCallRoomMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"EnterMessengerCallRoomData!",defaultValue:null}],b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};b=[{kind:"LinkedField",alias:null,name:"enter_messenger_call_room",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"EnterMessengerCallRoomResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_call_room",storageKey:null,args:null,concreteType:"MessengerCallRoom",plural:!1,selections:[b,{kind:"ScalarField",alias:null,name:"conference_name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"room_message_thread",storageKey:null,args:null,concreteType:"MessengerGlobalGroupThread",plural:!1,selections:[b]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"EnterMessengerCallRoomMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"EnterMessengerCallRoomMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"EnterMessengerCallRoomMutation",id:"3128858310465008",text:null,metadata:{}}}}();e.exports=a}),null);
__d("RevokeMessengerCallInviteLinksForThreadMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"RevokeMessengerCallInviteLinksForThreadData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"revoke_messenger_call_invite_links_for_thread",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"RevokeMessengerCallInviteLinksForThreadResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"RevokeMessengerCallInviteLinksForThreadMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"RevokeMessengerCallInviteLinksForThreadMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"RevokeMessengerCallInviteLinksForThreadMutation",id:"2525319784152965",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebGroupItem_messageThread.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},b=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Fragment",name:"VFWebGroupItem_messageThread",type:"MessageThread",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},a,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:b},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:b}]}]}]}]}]}}();e.exports=a}),null);
__d("VFWebListTraySearchResultsGroupsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"name",type:"String!",defaultValue:null}],b=[{kind:"Variable",name:"query",variableName:"name"}],c=[{kind:"Literal",name:"first",value:10},{kind:"Literal",name:"of_type",value:["group_thread"]}],d={kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},e={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},h=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebListTraySearchResultsGroupsQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"entities_named",storageKey:null,args:b,concreteType:"SearchableEntitiesQuery",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:'search_results(first:10,of_type:["group_thread"])',args:c,concreteType:"SearchableResultsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"InlineFragment",type:"MessageThread",selections:[d,e,{kind:"FragmentSpread",name:"VFWebGroupItem_messageThread",args:null}]}]}]}]}]},operation:{kind:"Operation",name:"VFWebListTraySearchResultsGroupsQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"entities_named",storageKey:null,args:b,concreteType:"SearchableEntitiesQuery",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:'search_results(first:10,of_type:["group_thread"])',args:c,concreteType:"SearchableResultsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:null,plural:!0,selections:[f,g,{kind:"InlineFragment",type:"MessageThread",selections:[d,e,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:h},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[f,e,g,{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:h}]},g]}]}]}]}]}]},g]}]},params:{operationKind:"query",name:"VFWebListTraySearchResultsGroupsQuery",id:"2014457745310112",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebListTraySearchResultsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"name",type:"String",defaultValue:null}],b=[{kind:"Literal",name:"first",value:50},{kind:"Variable",name:"name_like",variableName:"name"},{kind:"Literal",name:"orderby",value:"communication"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebListTraySearchResultsQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_contacts",storageKey:null,args:b,concreteType:"MessengerContactsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Contact",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"messaging_profile",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c,d,{kind:"FragmentSpread",name:"VFWebMessengerContact_messagingActor",args:null},{kind:"FragmentSpread",name:"VFWebSelectableUserRow_messagingActor",args:null}]}]}]}]}]},operation:{kind:"Operation",name:"VFWebListTraySearchResultsQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"messenger_contacts",storageKey:null,args:b,concreteType:"MessengerContactsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"nodes",storageKey:null,args:null,concreteType:"Contact",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"messaging_profile",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,d,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_message_blocked_by_viewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_messenger_only",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www"}],storageKey:'url(site:"www")'}]}]},c]}]}]}]},params:{operationKind:"query",name:"VFWebListTraySearchResultsQuery",id:"1039634849494200",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebMessengerContact_messagingActor.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"VFWebMessengerContact_messagingActor",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_message_blocked_by_viewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_messenger_only",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:[{kind:"Literal",name:"site",value:"www"}],storageKey:'url(site:"www")'}]};e.exports=a}),null);
__d("VFWebSelectableUserRow_messagingActor.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"VFWebSelectableUserRow_messagingActor",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("VFRTCGroupCallIncomingDialogBodyQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={kind:"ScalarField",alias:null,name:"thread_name",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"VFRTCGroupCallIncomingDialogBodyQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:b,concreteType:"MessageThread",plural:!1,selections:[c,d]}]},operation:{kind:"Operation",name:"VFRTCGroupCallIncomingDialogBodyQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:b,concreteType:"MessageThread",plural:!1,selections:[c,d,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"VFRTCGroupCallIncomingDialogBodyQuery",id:"2013561045387033",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebBlockUserMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"MessengerBlockData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"is_message_blocked_by_viewer",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebBlockUserMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_block",storageKey:null,args:b,concreteType:"MessengerBlockResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d]}]}]},operation:{kind:"Operation",name:"VFWebBlockUserMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_block",storageKey:null,args:b,concreteType:"MessengerBlockResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},d,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"VFWebBlockUserMutation",id:"2170031336348755",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebCreateCallMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"MessengerCreateCallConferenceData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"messenger_create_call_conference",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerCreateCallConferenceResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"conference_name",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebCreateCallMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"VFWebCreateCallMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"VFWebCreateCallMutation",id:"1720220268047488",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebConferenceUtilsCallThreadLookupQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"callId",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"callId"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebConferenceUtilsCallThreadLookupQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"MessengerCall",selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c]}]}]}]},operation:{kind:"Operation",name:"VFWebConferenceUtilsCallThreadLookupQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[d,c,{kind:"InlineFragment",type:"MessengerCall",selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,c]}]}]}]},params:{operationKind:"query",name:"VFWebConferenceUtilsCallThreadLookupQuery",id:"2214702778569422",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VFWebIncomingCallDialogUtils_actorQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"actor_ids",type:"[ID!]!",defaultValue:null},{kind:"LocalArgument",name:"thread_id",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"should_fetch_thread",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"picture_width",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"picture_height",type:"Int",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"actor_ids"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},e=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],f={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:[{kind:"Variable",name:"height",variableName:"picture_height"},{kind:"Variable",name:"width",variableName:"picture_width"}],concreteType:"Image",plural:!1,selections:e},g={kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null}]},h=[{kind:"Variable",name:"id",variableName:"thread_id"}],i={kind:"ScalarField",alias:null,name:"thread_name",args:null,storageKey:null};e={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:e};return{kind:"Request",fragment:{kind:"Fragment",name:"VFWebIncomingCallDialogUtils_actorQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messaging_actors",storageKey:null,args:b,concreteType:null,plural:!0,selections:[c,d,f,g]},{kind:"Condition",passingValue:!0,condition:"should_fetch_thread",selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:h,concreteType:"MessageThread",plural:!1,selections:[i,e]}]}]},operation:{kind:"Operation",name:"VFWebIncomingCallDialogUtils_actorQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messaging_actors",storageKey:null,args:b,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,d,f,g]},{kind:"Condition",passingValue:!0,condition:"should_fetch_thread",selections:[{kind:"LinkedField",alias:null,name:"message_thread",storageKey:null,args:h,concreteType:"MessageThread",plural:!1,selections:[i,e,c]}]}]},params:{operationKind:"query",name:"VFWebIncomingCallDialogUtils_actorQuery",id:"1990230701030206",text:null,metadata:{}}}}();e.exports=a}),null);
__d("FBRTCUtils",["AsyncRequest","FBIDCheck","FBRTCConfig","RTCConfig","RTWebUserActionLogger","assignMediaStream","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3,h="setSinkId"in window.HTMLMediaElement.prototype;a={attachMediaStream:function(a,c){if(a==null)return;b("assignMediaStream")(a,c);if(c){c=a.play();c!==void 0&&c["catch"](function(a){b("RTWebUserActionLogger").logError({errorDomain:"autoplay was prevented",errorType:a.toString()})})}},aboutEqual:function(a,b){return a-b<.01&&b-a<.01},sendServerRequest:function(a,c,d,e,f,h){c===void 0&&(c=b("emptyFunction"));d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=g);h===void 0&&(h={});a=new(b("AsyncRequest"))().setURI(a).setData(h).setAllowCrossPageTransition(!0).setHandler(c).setErrorHandler(d).setTimeoutHandler(f,function(){d()});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()},supportsSetSink:function(){return h},isPeerVCEndpoint:function(a){var c=b("FBRTCConfig").isVCEndpointCall();return c!==void 0?c:!!a&&!b("FBIDCheck").isUser_deprecated(a)&&b("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function(a){return a==="quickdial"||a==="meeting_room_page_profile"}};e.exports=a}),null);
__d("FBRTCAdminMessage",["FBRTCCallConstants","FBRTCConstants","FBRTCLogger","FBRTCUtils","RTWebUserActionLogger","XVideoCallAdminMessageController","emptyFunction","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,this.$3=Date.now(),this.$4=null,this.$5=null}var c=a.prototype;c.getPeerID=function(){return this.$1};c.getCallID=function(){return this.$2};c.getStartTimestamp=function(){return this.$3};c.getConnectedTime=function(){return this.$4};c.getEndTime=function(){return this.$5};c.onCallConnected=function(){this.$4||(this.$4=(g||(g=b("performanceNow")))())};c.onCallEnded=function(){this.$5||(this.$5=(g||(g=b("performanceNow")))())};c.submit=function(a,c,d){this.$5||this.onCallEnded();var e=0,f=b("FBRTCCallConstants").FBRTCCallConnectionType.MISSED_CALL;this.$4&&this.$5&&(e=Math.ceil(this.$5-this.$4),f=b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL);c=f===b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL||c===b("FBRTCConstants").CallEndReason.IGNORE_CALL;b("RTWebUserActionLogger").logCheckpoint({checkpoint:"admin_message_"+f});this.$6({peer_id:this.$1,call_id:this.$2,start_time:this.$3,call_duration:e,message_type:f,call_category:a,call_acknowledged:c,conference_name:d})};c.$6=function(a){var c=b("XVideoCallAdminMessageController").getURIBuilder().getURI();b("FBRTCUtils").sendServerRequest(c,b("emptyFunction"),this.$7.bind(this,a.peer_id,a.call_id),!1,void 0,a)};c.$7=function(a,c,d){d?d="Fail to log admin message, error "+d.error:d="Server timed out on logging admin message";b("FBRTCLogger").getInstance().logError(a,c,d)};return a}();e.exports=a}),null);
__d("FBRTCIceCache",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=new Map()}var b=a.prototype;b.getCache=function(){__p&&__p();var a={};for(var b=this.$1,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];a[f]={};for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];a[f][j]=i}}return a};b.reset=function(a,b){var c=this.$1.get(a);c||(c=new Map(),this.$1.set(a,c));c.set(b,[])};b.cacheCandidate=function(a,b,c){var d=this.$1.get(a);d||(d=new Map(),this.$1.set(a,d));a=d.get(b);a||(a=[],d.set(b,a));a.unshift(c)};b.drainCandidates=function(a,b,c){a=this.$1.get(a);if(a){a=a.get(b)||[];while(a.length>0){b=a.pop();c(b)}}};return a}();e.exports=a}),null);
__d("RTWebClientFeatureGating",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCSupport","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isVCCallOrWorkUser:function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()},canCallMWeb:function(){return b("gkx")("797400")},shouldShowEndCallQPs:function(){return b("gkx")("867914")},shouldShowCreateVCLButton:function(){return b("gkx")("947293")},addScreenContentTypeInSDP:function(){return!1},draggableSelfView:function(){return b("FBRTCExperiment").gen("rtc_www_larger_self_view").getBool("draggable_self_view",!1)},endCallSurveyDropdownOptions:function(){return!this.isVCCallOrWorkUser()},canUseMWVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("FBRTCExperiment").gen("rtc_www_video_chat_filters").getBool("use_filters_mw",!1)},isChatEnabled:function(){if(b("FBRTCConfig").isVCEndpointCall())return!1;return b("CurrentUser").isWorkUser()&&!b("gkx")("1020560")?!1:!0},isGroupChatEnabled:function(){return!1},canUseP2PVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("gkx")("678346")&&!this.stopVideoWhenMute()},isGuestLoginEnabled:function(){return b("gkx")("678347")},useNewIncomingCallDialog:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)},answerCallWithThreeButtons:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)},callUnification:function(){return b("FBRTCExperiment").gen("rtc_www_call_unification").getBool("in_call_background_updated",!1)},waitForMediaPermission:function(){return b("gkx")("678348")},shouldUseRealMultiwayAppID:function(){return b("gkx")("678349")},canUseMultiwaySandbox:function(){return b("gkx")("678350")},stopVideoWhenMute:function(){if(b("FBRTCConfig").isVCEndpointCall())return!1;var a=b("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("camera_off",!1)},restartVideoWithTrackAPI:function(){var a=b("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("track_api",!1)},shouldAlwaysShowRedial:function(){return!this.isVCCallOrWorkUser()},disableOpusStereo:function(){return b("gkx")("678351")},shouldApplySdpMidTranslation:function(){return b("gkx")("700608")},preserveFirefoxInactiveDataChannelBlock:function(){return b("gkx")("724606")},showMojavePermissionsWarning:function(){return navigator.userAgent.indexOf("Intel Mac OS X 10_14")!==-1},alwaysOpenChatTab:function(){return b("FBRTCExperiment").gen("rt_web_fb_profile_rtc_buttons").getBool("open_chat_tab",!1)},shouldAlwaysShowStarRating:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("FBRTCExperiment").gen("rtc_www_p2p_end_call_screen").getBool("persist_star_rating",!0)},shouldShowNetworkQualityIndicator:function(){return this.isVCCallOrWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("show_network_indicator",!1)},shouldMonitorNetworkQuality:function(){return this.isVCCallOrWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("monitor_network_quality",!1)},preferIsacForGroupCalls:function(){return!b("FBRTCConfig").isVCEndpointCall()}};e.exports=a}),null);
__d("FBRTCSdpUtils",["FBLogger","RTWebClientFeatureGating","UserAgent"],(function(a,b,c,d,e,f){__p&&__p();var g="a=x-fb-feature:",h="\r\n",i="m=video 0";f=["audio","video"].map(function(a){return new RegExp("m="+a+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")});var j=f[0],k=f[1],l=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],m=function(a){return a.match(/^a=rtpmap:(\d+)\s/)[1]},n=function(a,b,c){var d=m(a[b]);o(a,c,[d]);a.splice(b,1)},o=function(a,b,c){var d=a[b].split("RTP/SAVPF"),e=d[1].split(/\s+/);for(var f=0;f<c.length;f++){var g=e.indexOf(c[f]);g>=0&&e.splice(g,1)}d[1]=e.join(" ");a[b]=d.join("RTP/SAVPF")},p=function(a,b,c){__p&&__p();var d=m(a[b]);n(a,b,c);var e=new RegExp("^a=(rtcp-fb|fmtp):"+d+" ");a=a.filter(function(a,b){return!(e.test(a)&&b>=c)});var f=new RegExp("^a=fmtp:(\\d+)\\s+apt="+d+"($|;)");b=a.reduce(function(a,b,c){c=b.match(f);return c?[].concat(a,[c[1]]):a},[]);d=b.join("|");o(a,c,b);var g=new RegExp("^a=rtpmap:("+d+")\\s+rtx/|^a=fmtp:("+d+")\\s+apt=");return a.filter(function(a){return!g.test(a)})};f={RX_SDP_MEDIA_AUDIO:j,RX_SDP_MEDIA_VIDEO:k,replaceRTPSAVPFProfile:function(a){var b="UDP/TLS/RTP/SAVPF",c="RTP/SAVPF";while(a.indexOf(b)>=0)a=a.replace(b,c);return a},addIceOptionToSdp:function(a,b){"use strict";__p&&__p();var c="a=ice-options:",d=a.indexOf(c);if(d>=0)return a.split(h).map(function(a){return a.startsWith(c)?a+" "+b:a}).join(h);d=c+b;var e=a.split(h),f=!1,g=-1;for(var i=0;i<e.length;i++){var j=e[i].slice(0,2);if(j=="s="){f=!0;continue}if(f&&j=="a="){g=i;break}}if(g>=0){e.splice(g,0,d);return e.join(h)}return[a,d,h].join("")},preferIsac:function(a){__p&&__p();a=a.split(h);var b=-1,c=-1,d=-1;for(var e=0;e<a.length;e++){var f=a[e];f.match(j)&&(b=e);d===-1&&b>-1&&f.match(/^a=rtpmap:/)&&(d=e);f.match(/^a=rtpmap:\d+\s+ISAC\/16000/)&&(c=e)}if(b===-1||c===-1||d===-1||a[b].indexOf("RTP/SAVPF")===-1)return a.join(h);f=a[c];n(a,c,b);a.splice(d,0,f);a[b]=a[b].replace("RTP/SAVPF","RTP/SAVPF "+m(f));return a.join(h)},preferCodec:function(a,b,c){__p&&__p();a=a.split(h);var d=c?k:j,e=a.findIndex(function(a){return d.test(a)});if(e!==-1&&a[e].indexOf("RTP/SAVPF")!==-1){var f=new RegExp("^a=rtpmap:\\d+\\s+"+b);c=a.findIndex(function(a){return f.test(a)});var g=/^a=rtpmap:/;b=a.findIndex(function(a,b){return b>e&&g.test(a)});if(c!==-1&&b!==-1){var i=a[c];n(a,c,e);a.splice(b,0,i);a[e]=a[e].replace("RTP/SAVPF","RTP/SAVPF "+m(i))}}return a.join(h)},disableVideo:function(a){var c=/m=video\s+\S+/;a=a.replace(c,i);b("UserAgent").isBrowser("Firefox <= 37")&&(a=this._makeDisabledVideoReceiveOnly(a));return a},_makeDisabledVideoReceiveOnly:function(a){if(a.indexOf(i)>-1){var b=a.split(i);b[1]=b[1].replace(/send(recv|only)/,"recvonly");a=b.join(i)}return a},fixMobileIceSdp:function(a){__p&&__p();a=a.replace(/^a=/,"");a=a.split(/\s+username\s+.+password.+/)[0];var b=a.match(/\s+relay\s+|\s+srflx\s+/),c=a.match(/raddr.+rport.+/);if(b&&!c){b=b[0];c=a.split(b);var d=c[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),e,f;d?(e=d[1],f=d[2],c[1]=c[1].replace(d[0],"")):(d=c[0].split(/\s+/),e=d[4],f=d[5]);a=""+c[0]+b+"raddr "+e+" rport "+f+" "+c[1]}return a},addAudioNack:function(a){var b=this,c=[];a=a.split(h).map(function(a){var d="";c.length>0&&(/^a=rtpmap:(\d+)/.test(a)||/^a=ssrc/.test(a)||/^m=/.test(a))&&(d+=b._getrtcpFeedbackLinesFromAudioFMTs(c)+h,c=[]);/^m=audio/.test(a)&&(c=a.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" "));return d+a}).join(h);c.length>0&&(a+=h+this._getrtcpFeedbackLinesFromAudioFMTs(c));return a},addSetup:function(a){if(a.indexOf("a=setup:")>=0)return a;a=a.split(h);var b=a.findIndex(function(a){return a.startsWith("s=")}),c=a.findIndex(function(a,c){return c>b&&a.startsWith("a=")});a.splice(c,0,"a=setup:actpass");return a.join(h)},_replaceFmtp:function(a,b,c,d){a=a==b?[]:a.substr(b.length).split(";");var e=a.findIndex(function(a){return a.startsWith(c+"=")});d=c+"="+d;e<0?a.push(d):a[e]=d;return""+b+a.join(";")},_addFmtpToMediaSection:function(a,b,c,d){__p&&__p();var e=new RegExp("^a=rtpmap:(\\d+)\\s"+b);b=a.findIndex(function(a){return a.match(e)});if(b<0)return a;var f=a[b].match(e);f=f[1];var g="a=fmtp:"+f+" ";f=a.findIndex(function(a){return a.startsWith(g)});f===-1&&(f=b+1,a.splice(f,0,g));a[f]=this._replaceFmtp(a[f],g,c,d);return a},addFmtp:function(a,b,c,d){__p&&__p();a=a.split(h);var e=-1;for(var f=0;f<=a.length;f++)if(f===a.length||a[f].startsWith("m=")){if(e!==-1){var g=a.splice(e,f-e);g=this._addFmtpToMediaSection(g,b,c,d);a.splice.apply(a,[e,0].concat(g));f=e+1+g.length}e=f}return a.join(h)},_getrtcpFeedbackLinesFromAudioFMTs:function(a){return a.map(function(a){return"a=rtcp-fb:"+a+" nack"}).join(h)},_removeCodec:function(a,b){__p&&__p();var c=a;a=function(){var a=c.split(h),d=new RegExp("^a=rtpmap:\\d+\\s+"+b+"\\/"),e=a.findIndex(function(a){return d.test(a)}),f=a.findIndex(function(a){return/^m=video/.test(a)});if(e==-1||f==-1)return"break";c=p(a,e,f).join(h)};do{var d=a();if(d==="break")break}while(!0);return c},removeRED:function(a){return this._removeCodec(a,"red")},removeH264:function(a){return this._removeCodec(a,"H264")},removeVP9:function(a){return this._removeCodec(a,"VP9")},removeUnknownRtpHeaderExtensions:function(a){a=a.split(h);a=a.filter(function(a){return!a.match(/^a=extmap:/)||l.some(function(b){return a.includes(b)})});return a.join(h)},isVideoSupported:function(a){return!!a&&a.indexOf("m=video")!==-1&&a.indexOf(i)===-1},setDtlsRole:function(a,b){if(!a.match(/setup:(active|passive|actpass)/))return a.replace(/(a=fingerprint:.+)/g,"$1"+h+"a=setup:"+b);else return a.replace(/setup:actpass/g,"setup:"+b)},setVideoBitrateConstraint:function(a){var c=b("UserAgent").isBrowser("Firefox"),d=c?"TIAS":"AS";c=c?72e4:720;var e=new RegExp("^b="+d+":","m");if(a.match(e))return a;a=a.replace(/^a=mid:video\r\n/m,"a=mid:video"+h+"b="+d+":"+c+h);return a},removeSdparta:function(a){__p&&__p();if(b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;a=a.split(h);var c="audio",d=!1,e=-1;for(var f=0;f<a.length;f++){var g=a[f];g.indexOf("m=audio")===0&&(c="audio");g.indexOf("m=video")===0&&(d=!0,c="video");g.indexOf("a=mid:sdparta_")===0&&(a[f]="a=mid:"+c);g.indexOf("a=group:BUNDLE sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio video sdparta_")===0&&b("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}e>-1&&(d?a[e]="a=group:BUNDLE audio video":a[e]="a=group:BUNDLE audio");return a.join(h)},constructMidMap:function(a){if(!b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return{answerSdpMap:null,offerSdpMap:null};a=a.split(h);var c={},d={},e=null;a.forEach(function(b){b.startsWith("m=audio")?e="audio":b.startsWith("m=video")?e="video":b.startsWith("m=")?e=null:b.startsWith("a=mid:")&&e&&(a=b.split("a=mid:")[1],a!==e&&(c[a]=e,d[e]||(d[e]=a)))});return{offerSdpMap:Object.keys(c).length?c:null,answerSdpMap:Object.keys(d).length?d:null}},transformSdpMids:function(a,c){__p&&__p();if(c==null||!b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;var d=c,e=a.split(h);c=-1;e.forEach(function(b,f){if(b.startsWith("a=group:BUNDLE"))c=f;else if(b.startsWith("a=mid:")){a=b.split("a=mid:")[1];b=d[a]||a;e[f]="a=mid:"+b}});if(c>-1){var f=e[c].split("a=group:BUNDLE ")[1].split(" ");f=f.map(function(a){return d[a]||a});e[c]="a=group:BUNDLE "+f.join(" ")}return e.join(h)},useDTLSOverCrypto:function(a){if(!(b("UserAgent").isBrowser("Chrome >= 57")||b("UserAgent").isBrowser("Opera >= 44")))return a;return!/^a=fingerprint:/m.test(a)?a:a.split(h).filter(function(a){return a.indexOf("a=crypto:")!==0}).join(h)},validateOfferSdp:function(a,b){__p&&__p();if(a.split(":")[0]==="LIVE"){a=/^m=/;var c=/^m=audio/,d=/^m=video/,e=/^a=ssrc:/;b=b.split(h);var f=[];for(var g=b.length-1;g>=0;g--)a.test(b[g])&&f.push(b.splice(g));var i=!1,j=!1;f.forEach(function(a){c.test(a[0])&&!i?i=a.some(function(a){return e.test(a)}):d.test(a[0])&&!j&&(j=a.some(function(a){return e.test(a)}))});return i&&j}return!0},_removeCodecID:function(a,b){var c=a.findIndex(function(a){a=a.match(/^a=rtpmap:(\S+)\s/);return a&&a[1]===b?!0:!1}),d=a.findIndex(function(a){return/^m=video/.test(a)});return c===-1||d===-1?a:p(a,c,d)},_getAllCodecIds:function(a,b){__p&&__p();var c=a.findIndex(function(a){return/^m=video/.test(a)});if(c===-1)return[];var d=new RegExp("^a=rtpmap:\\S+\\s+"+b+"\\/"),e=[];a.forEach(function(b,f){if(d.test(b)){b=m(a[f]);a[c].indexOf(b)>0&&e.push(b)}});return e},_getCodecIDMatchingH264Profile:function(a,b){var c=b.levelAsymmetryAllowed?"1":"0",d=b.packetizationMode?"1":"0";c=new RegExp("^a=fmtp:(\\S+)\\s+level-asymmetry-allowed="+c+";packetization-mode="+d+";profile-level-id="+b.profileLevelId);for(var d=0;d<a.length;d++){b=a[d].match(c);if(b)return b[1]}return null},pickSpecificH264ProfileIfExists:function(a,b){var c=this,d=a.split(h),e=this._getCodecIDMatchingH264Profile(d,b);if(!e)return a;b=this._getAllCodecIds(d,"H264");return b.reduce(function(a,b){return b!==e?c._removeCodecID(a,b):a},d).join(h)},clearFirefoxInactiveDataChannelBlock:function(a){__p&&__p();if(!b("UserAgent").isBrowser("Firefox")||b("RTWebClientFeatureGating").preserveFirefoxInactiveDataChannelBlock())return a;var c=a.split(h),d=c.findIndex(function(a){return a.startsWith("m=application")});if(d===-1)return a;var e=c.slice(d),f=e.findIndex(function(a,b){return b>0&&a.startsWith("m=")});f!==-1&&(e=e.slice(0,f));if(e[0]!=null&&e[0].endsWith("0")&&e.some(function(a){return a.startsWith("a=inactive")})){f=e.findIndex(function(a){return a.startsWith("c=")});return[].concat(c.slice(0,d+1+(f!==-1?f:0)),c.slice(d+e.length),[""]).join(h)}return a},addFBFeatures:a,getFBFeatures:c,addSSRCContentType:d};function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(c.length<1)return a;var e=q(a),f=e[0],i=e[1],j=f.split(h),k=r(j),l=j.filter(function(a){return!a.startsWith(g)}),m=1+l.map(function(a){return a?a.substr(0,2):""}).lastIndexOf("a=")||l.length;return[].concat(l.slice(0),s([].concat(k,c)).map(function(a){return""+g+a}),l.slice(m),[i?[i.trim(),""].join(h):""]).join(h)}function c(a){a=q(a);a=a[0];return r(a.split(h))}function q(a){if(!a)return["",""];var b=a.trim().split(h),c=0;while(c<b.length){if(b[c].startsWith("m="))break;c++}return c===b.length?[a.trim(),""]:[b.slice(0,c).join(h).trim(),b.slice(c).join(h).trim()]}function r(a){return s(a.filter(function(a){return a.startsWith(g)}).map(function(a){return a.substr(g.length)}))}function s(a){__p&&__p();var b=Object.create(null);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e&&(b[e]=!0)}return Object.keys(b).sort()}function d(a,b){__p&&__p();var c=a.split(h);b.forEach(function(a,b){__p&&__p();var d=new RegExp("^a=ssrc:\\d+ label:"+b);b=c.findIndex(function(a){return d.test(a)});if(b!==-1){var e=c[b].trim().split(" ")[0];if(/^a=ssrc:\d+$/.test(e)){e=e+" x-fb-content:"+a;c.splice(b+1,0,e)}}});return c.join(h)}e.exports=f}),null);
__d("FBRTCMessage",["FBRTCConstants","FBRTCExperiment","FBRTCSdpUtils","FBRTCSupport"],(function(a,b,c,d,e,f){__p&&__p();var g="mobile";a=function(){"use strict";__p&&__p();function a(a){__p&&__p();if(!this.$1(a))throw new Error("invalid webrtc message");this.originalMessageData=a;this.peerID=a.from;this.callID=parseInt(a.call_id,10);this.msg=JSON.parse(a.payload);this.msg.json_payload&&(this.escalationName=this.msg.sessionName,this.msg=this.msg.json_payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=a.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$2();this.$3();this.$4();this.$5()}var c=a.prototype;c.$1=function(a){return a.from&&a.call_id&&a.payload};c.$2=function(){if(this.peerSupportsVideoInterop)return;this.isFromMobile()&&this.disableVideo()};c.disableVideo=function(){this.msg.sdp&&(this.msg.sdp=b("FBRTCSdpUtils").disableVideo(this.msg.sdp)),(this.msgType===b("FBRTCConstants").PayloadType.SET_VIDEO||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ANSWER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER)&&(this.msg.videoon=!1)};c.$3=function(){this.isFromMobile()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE&&(this.msg.sdp=b("FBRTCSdpUtils").removeRED(this.msg.sdp))};c.$4=function(){if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen("rtc_browser_use_h264");a.getBool("allow_h264",!1)||(this.msg.sdp=b("FBRTCSdpUtils").removeH264(this.msg.sdp))}};c.$5=function(){if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen("rtc_browser_use_vp9");a.getBool("allow_vp9",!1)||(this.msg.sdp=b("FBRTCSdpUtils").removeVP9(this.msg.sdp))}};c.isOffer=function(){return this.msgType===b("FBRTCConstants").PayloadType.OFFER};c.isFromMobile=function(){return this.source===g};c.isRemoteVideoSupported=function(){return!this.msg.sdp||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE?!0:b("FBRTCSdpUtils").isVideoSupported(this.msg.sdp)};c.isRetry=function(){return!!this.msg.flag};c.isForCall=function(a,c){return this.escalationName&&(this.msgType===b("FBRTCConstants").PayloadType.HANGUP||this.msgType===b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY)?c===this.escalationName:!a||a===this.callID||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE};c.getSignalingExperiments=function(){if(this.isFromMobile()){if(!this.msg.experiments)return["sdp_update"];this.msg.experiments.includes("sdp_update")||this.msg.experiments.push("sdp_update")}return this.msg.experiments};return a}();e.exports=a}),null);
__d("FBRTCMessageDedup",[],(function(a,b,c,d,e,f){var g={};a={check:function(a,b,c){g[a]||(g[a]={});g[a][b]||(g[a][b]={});if(g[a][b][c])return!1;g[a][b][c]=!0;return!0}};e.exports=a}),null);
__d("VFWebIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={"audio-off":"M23.4286183,9.326875 L9.71033611,23.036875 C9.41360039,23.333375 9.0119581,23.499875 8.59283138,23.499875 C7.7196091,23.499875 7.01173954,22.792375 7.01173954,21.919375 L7.01173954,14.501875 C7.01173954,13.397875 7.90744181,12.502375 9.01245765,12.502375 L14.1843514,12.502375 C14.7153785,12.502375 15.223426,12.291875 15.5985919,11.916875 L20.9962846,6.521875 C21.3274896,6.190375 21.7770892,6.003875 22.2461714,6.003875 C23.2228016,6.003875 24.0145964,6.795875 24.0145964,7.771375 L24.0145964,7.912875 C24.0145964,8.443375 23.8037841,8.951875 23.4286183,9.326875 Z M24.0145964,28.230875 C24.0145964,29.206875 23.2228016,29.997875 22.2461714,29.997875 C21.7770892,29.997875 21.3274896,29.811875 20.9962846,29.480375 L15.9033205,24.389375 C15.3812854,23.867875 14.5355387,23.867875 14.0135036,24.389375 L8.7072295,29.692375 C8.31707698,30.082875 7.68314158,30.082875 7.29298906,29.692375 C6.90233698,29.302375 6.90233698,28.669875 7.29298906,28.279375 L29.2928954,6.292875 C29.6830479,5.902375 30.3169833,5.902375 30.7066363,6.292875 C31.0977879,6.682875 31.0977879,7.315875 30.7066363,7.705875 L24.6005745,13.808875 C24.2254086,14.183875 24.0145964,14.692375 24.0145964,15.222875 L24.0145964,28.230875","audio-on":"M20.23045,30 C19.76195,30 19.31145,29.8135 18.97995,29.482 L13.58295,24.0855 C13.20745,23.7105 12.69895,23.5 12.16845,23.5 L6.99595,23.5 C5.89095,23.5 4.99545,22.6045 4.99545,21.5 L4.99545,14.5 C4.99545,13.3955 5.89095,12.5 6.99595,12.5 L12.16845,12.5 C12.69895,12.5 13.20745,12.2895 13.58295,11.914 L18.97995,6.518 C19.31145,6.1865 19.76195,6 20.23045,6 C21.20695,6 21.99845,6.7915 21.99845,7.768 L21.99845,28.232 C21.99845,29.2085 21.20695,30 20.23045,30 M26.63345,27.269 C26.22145,27.6105 25.61145,27.562 25.25345,27.164 C24.86795,26.735 24.93395,26.0805 25.37695,25.7115 C27.58495,23.8705 28.99145,21.0985 28.99145,17.996 C28.99145,14.8935 27.58495,12.1215 25.37695,10.2805 C24.93395,9.911 24.86795,9.257 25.25345,8.828 C25.61145,8.43 26.22145,8.3815 26.63345,8.723 C29.29645,10.9315 30.99695,14.2625 30.99695,17.996 C30.99695,21.729 29.29645,25.0605 26.63345,27.269",cross:"M24.4386402,26.5608358 L18.4998126,20.6218774 L12.5614847,26.5608358 C11.9754458,27.1463881 11.0251934,27.1463881 10.4391545,26.5608358 C9.85361517,25.974784 9.85361517,25.0250103 10.4391545,24.4389584 L16.377982,18.5 L10.4391545,12.5610416 C9.85361517,11.9754893 9.85361517,11.025216 10.4391545,10.4391642 C11.0251934,9.85361194 11.9754458,9.85361194 12.5614847,10.4391642 L18.4998126,16.3786222 L24.4386402,10.4391642 C25.0246791,9.85361194 25.9744319,9.85361194 26.5604708,10.4391642 C27.1465097,11.025216 27.1465097,11.9754893 26.5604708,12.5610416 L20.6211437,18.5 L26.5604708,24.4389584 C27.1465097,25.0250103 27.1465097,25.974784 26.5604708,26.5608358 C25.9744319,27.1463881 25.0246791,27.1463881 24.4386402,26.5608358 Z",plus:"M27.5 19.5h-8v8c0 .8285-.6715 1.5-1.5 1.5s-1.5-.6715-1.5-1.5v-8h-8c-.8285 0-1.5-.6715-1.5-1.5s.6715-1.5 1.5-1.5h8v-8c0-.8285.6715-1.5 1.5-1.5s1.5.6715 1.5 1.5v8h8c.8285 0 1.5.6715 1.5 1.5s-.6715 1.5-1.5 1.5z","plus-circle":"M24,17 L19,17 L19,12 C19,11.448 18.552,11 18,11 C17.4475,11 17,11.448 17,12 L17,17 L12,17 C11.4475,17 11,17.448 11,18 C11,18.552 11.4475,19 12,19 L17,19 L17,24 C17,24.552 17.4475,25 18,25 C18.552,25 19,24.552 19,24 L19,19 L24,19 C24.552,19 25,18.552 25,18 C25,17.448 24.552,17 24,17 M18,30 C11.3725,30 6,24.6275 6,18 C6,11.3725 11.3725,6 18,6 C24.627,6 30,11.3725 30,18 C30,24.6275 24.627,30 18,30",camcorder:"M20,27 L9,27 C6.791,27 5,25.209 5,23 L5,13 C5,10.791 6.791,9 9,9 L20,9 C22.209,9 24,10.791 24,13 L24,23 C24,25.209 22.209,27 20,27 M30.5525,23.3995 L26.829,21.536 C26.321,21.282 26,20.762 26,20.193 L26,15.808 C26,15.2395 26.321,14.719 26.829,14.465 L30.5525,12.6015 C31.218,12.269 32,12.753 32,13.497 L32,22.504 C32,23.2485 31.218,23.732 30.5525,23.3995","camcorder-cross":"M6.52219159,23.73575 C6.00847773,24.24975 5.008035,24.00175 5.008035,23.01175 L5.008035,13.00725 C5.008035,10.79725 6.79803794,9.00525 9.00680761,9.00525 L19.1191748,9.00575 C19.9062364,9.00575 20.3005168,9.95775 19.7438269,10.51425 L6.52219159,23.73575 Z M27.1966755,8.70725 L24.589128,11.31625 C24.2143368,11.69125 24.0039539,12.19925 24.0039539,12.72875 L24.0019551,23.01175 C24.0019551,25.22175 22.2149504,27.00675 20.0061808,27.00675 L9.73590149,27.00675 C9.20569683,27.00675 8.69698019,27.21725 8.32218896,27.59225 L5.20642449,30.70925 C4.81614189,31.10025 4.18249484,31.10025 3.79271195,30.70925 C3.40242935,30.31875 3.40242935,29.68575 3.79271195,29.29525 L25.782963,7.29325 C26.1727459,6.90225 26.8063929,6.90225 27.1966755,7.29325 C27.5869581,7.68375 27.5869581,8.31725 27.1966755,8.70725 Z M30.5533058,23.41125 L26.8308793,21.54725 C26.3226624,21.29275 26.0018411,20.77225 26.0018411,20.20375 L26.0018411,15.81625 C26.0018411,15.24725 26.3226624,14.72725 26.8308793,14.47275 L30.5533058,12.60875 C31.2179356,12.27575 32,12.75975 32,13.50425 L32,22.51575 C32,23.25975 31.2179356,23.74425 30.5533058,23.41125 Z",microphone:"M14,28 L22,28 C22.552,28 23,28.448 23,29 C23,29.552 22.552,30 22,30 L14,30 C13.448,30 13,29.552 13,29 C13,28.448 13.448,28 14,28 M18,22.5 C15.239,22.5 13,20.2615 13,17.5 L13,11 C13,8.2385 15.239,6 18,6 C20.761,6 23,8.2385 23,11 L23,17.5 C23,20.2615 20.761,22.5 18,22.5 M18,26.5 C13.0295,26.5 9,22.4705 9,17.5 C9,16.948 9.448,16.5 10,16.5 C10.552,16.5 11,16.948 11,17.5 C11,21.366 14.134,24.5 18,24.5 C21.866,24.5 25.0005,21.366 25.0005,17.5 L25,17.5 C25,16.948 25.448,16.5 26,16.5 C26.552,16.5 27,16.948 27,17.5 C27,22.4705 22.9705,26.5 18,26.5","microphone-cross":"M14.0098327,28.0001562 L22.0107909,28.0001562 C22.5632535,28.0001562 23.0112232,28.4478973 23.0112232,29.0000781 C23.0112232,29.5522589 22.5632535,30 22.0107909,30 L14.0098327,30 C13.4573701,30 13.0094004,29.5522589 13.0094004,29.0000781 C13.0094004,28.4478973 13.4573701,28.0001562 14.0098327,28.0001562 M9.00917125,17.5022253 C9.00917125,16.9500445 9.45714092,16.5023034 10.0091036,16.5023034 C10.5615661,16.5023034 11.0090358,16.9500445 11.0090358,17.5022253 C11.0090358,18.2512922 11.1275278,18.9728751 11.346013,19.6494839 C11.4595053,20.0017802 11.3620119,20.3875572 11.1000297,20.6499055 C10.5795649,21.1706045 9.67562613,20.9747177 9.44764157,20.2751222 C9.16366079,19.4016272 9.00917125,18.4701657 9.00917125,17.5022253 M23.0112232,17.5022253 C23.0112232,20.2631291 20.7718748,22.5013352 18.0100618,22.5013352 C17.2881107,22.5013352 16.6031571,22.3449256 15.984699,22.0670862 C15.7147172,21.9461561 15.3987386,22.0066212 15.1897528,22.2155004 L14.6942863,22.7112138 C14.3908069,23.0145385 14.4578023,23.5347377 14.8397765,23.7316239 C15.7912121,24.2213408 16.8661393,24.501179 18.0100618,24.501179 C21.8768,24.501179 25.0115878,21.3674907 25.0115878,17.5022253 L25.0110878,17.5022253 C25.0110878,16.9500445 25.4585575,16.5023034 26.0115201,16.5023034 C26.5634827,16.5023034 27.0114523,16.9500445 27.0114523,17.5022253 C27.0114523,22.4718522 22.9812252,26.5005231 18.0100618,26.5005231 C16.2806789,26.5005231 14.6712879,26.0053094 13.3023806,25.1568 C12.9194065,24.9194372 12.42494,24.9789028 12.1064615,25.2972188 L7.7072594,29.6946765 C7.31678584,30.0849509 6.68332873,30.0849509 6.29285517,29.6946765 C5.90238161,29.3039024 5.90238161,28.6717679 6.29285517,28.2809938 L28.2928656,6.29270578 C28.6833391,5.90243141 29.3167963,5.90243141 29.7067699,6.29270578 C30.0977434,6.68298015 30.0977434,7.31561441 29.7067699,7.70638849 L23.5971835,13.8128582 C23.2217089,14.1881412 23.0112232,14.6963474 23.0112232,15.2270406 L23.0112232,17.5022253 Z M22.2895221,9.46592126 L13.9005901,17.8510736 C13.5681126,18.1828818 13.000151,17.9475178 13.001151,17.4782891 L13.0091504,11.0035323 C13.0091504,8.24262848 15.2484988,6.00442244 18.0098118,6.00442244 C19.9141829,6.00442244 21.5680709,7.06930681 22.4120138,8.6349017 C22.5595038,8.90774396 22.5085072,9.2470478 22.2895221,9.46592126 Z","screen-share":"M10,16.9983 L10,19.9983 C10,20.5503 9.552,20.9983 9,20.9983 L8,20.9983 C6.8955,20.9983 6,20.1028 6,18.9983 L6,7.9983 C6,6.8938 6.8955,5.9983 8,5.9983 L22,5.9983 C23.1045,5.9983 24,6.8938 24,7.9983 L24,11.9983 C24,12.5503 23.552,12.9983 23,12.9983 L14,12.9983 C11.791,12.9983 10,14.7893 10,16.9983 M28,29.9983 L14,29.9983 C12.8955,29.9983 12,29.1028 12,27.9983 L12,16.9983 C12,15.8938 12.8955,14.9983 14,14.9983 L28,14.9983 C29.1045,14.9983 30,15.8938 30,16.9983 L30,27.9983 C30,29.1028 29.1045,29.9983 28,29.9983","screen-share-cross":"M26.20995,26.2842 C26.60095,26.6747 26.60095,27.3072 26.20995,27.6982 C25.81945,28.0882 25.18545,28.0882 24.79445,27.6977 L20.99745,23.9067 L17.20045,27.6977 C16.80995,28.0882 16.17645,28.0882 15.78495,27.6982 C15.39395,27.3072 15.39395,26.6747 15.78495,26.2842 L19.58195,22.4927 L15.78495,18.7012 C15.39395,18.3112 15.39395,17.6782 15.78495,17.2877 C16.17595,16.8972 16.80995,16.8972 17.20045,17.2877 L20.99745,21.0792 L24.79445,17.2877 C25.18545,16.8972 25.81945,16.8972 26.20995,17.2877 C26.60095,17.6782 26.60095,18.3112 26.20995,18.7012 L22.41295,22.4927 L26.20995,26.2842 Z M27.99995,14.9982 L13.99995,14.9982 C12.89545,14.9982 11.99995,15.8937 11.99995,16.9982 L11.99995,27.9982 C11.99995,29.1027 12.89545,29.9982 13.99995,29.9982 L27.99995,29.9982 C29.10445,29.9982 29.99995,29.1027 29.99995,27.9982 L29.99995,16.9982 C29.99995,15.8937 29.10445,14.9982 27.99995,14.9982 Z M22.99995,12.9982 C23.55245,12.9982 23.99995,12.5507 23.99995,11.9982 L23.99995,7.9982 C23.99995,6.8937 23.10445,5.9982 21.99995,5.9982 L7.99995,5.9982 C6.89545,5.9982 5.99995,6.8937 5.99995,7.9982 L5.99995,18.9982 C5.99995,20.1032 6.89545,20.9982 7.99995,20.9982 L8.99995,20.9982 C9.55245,20.9982 9.99995,20.5507 9.99995,19.9982 L9.99995,16.9982 C9.99995,14.7892 11.79095,12.9982 13.99995,12.9982 L22.99995,12.9982 Z",refresh:"M29.002971,18.0012843 C29.002971,24.0738602 24.079045,28.9966377 18.0047858,28.9966377 C15.8321566,28.9966377 13.8125717,28.3609727 12.1095785,27.2726903 L10.8897252,29.1036655 C10.4946108,29.6968194 9.58484729,29.6102969 9.30326574,28.9511259 L7.07712102,23.7382731 C6.82554816,23.1491202 7.2586736,22.4994516 7.90286017,22.4994516 L13.6010104,22.500952 C14.3207189,22.500952 14.7573453,23.298659 14.3617307,23.8923131 L13.2188998,25.6072581 C14.6048011,26.4834855 16.2422754,26.9976189 18.0047858,26.9976189 C22.974225,26.9976189 27.0033919,22.9700738 27.0033919,18.0012843 C27.0033919,17.5396645 26.9663812,17.0865469 26.8978614,16.6444322 C26.8038341,16.042276 27.2734701,15.5021358 27.8826466,15.5021358 C28.3707879,15.5021358 28.7939105,15.853727 28.8699325,16.335352 C28.9554573,16.8779928 29.002971,17.4341371 29.002971,18.0012843 M7.00610045,18.0012843 C7.00610045,11.9282083 11.9305266,7.00543083 18.0047858,7.00543083 C20.1769149,7.00543083 22.1964998,7.64159592 23.899493,8.72987834 L25.1193463,6.89890318 C25.5144607,6.30574926 26.4242242,6.39227171 26.7058057,7.05144277 L28.9319505,12.2642955 C29.1835233,12.8534484 28.7503979,13.503117 28.1067115,13.503117 L22.4080611,13.5011165 C21.6883526,13.5016166 21.2517262,12.7039096 21.6473407,12.1097554 L22.7901717,10.3953105 C21.4042703,9.51858301 19.7667961,9.00494972 18.0047858,9.00494972 C13.0348465,9.00494972 9.0061797,13.0324949 9.0061797,18.0012843 C9.0061797,18.4629041 9.04269027,18.9160217 9.11171026,19.3581364 C9.20523735,19.9597926 8.73560134,20.5004329 8.12642491,20.5004329 C7.63828354,20.5004329 7.215161,20.1488416 7.13913898,19.6672166 C7.05361421,19.1240757 7.00610045,18.5684315 7.00610045,18.0012843","resize-up":"M12.59815,24.8169 L14.71915,26.9374 C15.28365,27.5019 14.99015,28.4679 14.20715,28.6249 L7.19665,29.9799 C6.49715,30.1199 5.88015,29.5039 6.02065,28.8044 L7.37615,21.7964 C7.53315,21.0134 8.50015,20.7204 9.06465,21.2849 L11.18465,23.4044 L15.29865,19.2879 C15.68915,18.8979 16.32165,18.8979 16.71215,19.2879 C17.10215,19.6784 17.10215,20.3104 16.71215,20.7009 L12.59815,24.8169 Z M29.9799519,7.1959 L28.6250542,14.2034 C28.4678921,14.9869 27.5018955,15.2799 26.9373131,14.7154 L24.8176264,12.5959 L20.7048838,16.7119 C20.3149815,17.1019 19.6823289,17.1019 19.2924267,16.7119 C18.9025244,16.3219 18.9025244,15.6894 19.2924267,15.2994 L23.4051694,11.1829 L21.2849822,9.0624 C20.7203998,8.4979 21.0137023,7.5324 21.7965099,7.3749 L28.8037385,6.0199 C29.5039609,5.8794 30.1200965,6.4959 29.9799519,7.1959 Z","resize-down":"M15.6250542,27.200149 C15.4678921,27.9828278 14.5018955,28.2757076 13.9373131,27.7114392 L11.818127,25.5928087 L7.70538427,29.70762 C7.31498153,30.09746 6.68282941,30.09746 6.29242667,29.70762 C5.90252444,29.3172802 5.90252444,28.6855394 6.29242667,28.2951996 L10.4051694,24.1808881 L8.28498218,22.061258 C7.72039976,21.4969895 8.01370233,20.5313858 8.79650987,20.3744502 L15.8037385,19.0200061 C16.5039609,18.8800635 17.1200965,19.4958108 16.9799519,20.1950239 L15.6250542,27.200149 Z M29.7076063,7.70480407 L25.5951021,11.818856 L27.7158308,13.9389441 C28.2796257,14.5029996 27.9867322,15.4684505 27.2035171,15.6256053 L20.1960657,16.9799392 C19.4963202,17.1200772 18.8800443,16.5044709 19.0199934,15.8047818 L20.3750006,8.79988262 C20.5319435,8.01711166 21.498592,7.72432329 22.0628867,8.28837884 L24.182116,10.4069654 L28.2951201,6.292413 C28.6849783,5.902529 29.3177481,5.902529 29.7076063,6.292413 C30.0974646,6.68279749 30.0974646,7.31441958 29.7076063,7.70480407 Z",phone:"M12.8546683,23.0915802 C10.2003459,20.4371382 8.18827548,17.4933995 7.18895039,14.801598 C6.11677282,11.9134196 6.30082118,9.54827444 7.70754499,8.14106577 C8.38574404,7.46332572 9.22115105,6.9556194 9.80301228,6.64860076 C10.1768605,6.45174482 10.6202062,6.44887101 10.9902201,6.6495587 C12.2608248,7.33735708 14.2542027,9.8624776 14.6055242,11.228016 C14.6980277,11.5867632 14.6266131,11.9694589 14.4094936,12.2774354 L12.8029047,14.5630718 C12.7056083,14.7019726 12.682123,14.8820647 12.7415553,15.0406032 C13.4096892,16.8233229 14.2192144,18.3129141 15.9254961,20.01852 C17.6303399,21.7246049 19.1209399,22.5340612 20.904867,23.2027008 C21.0635129,23.2625718 21.2432476,23.2391024 21.3822424,23.1413929 L23.6205389,21.5679822 C23.9339963,21.3476569 24.313596,21.2868279 24.6572488,21.3696894 C26.1948195,21.7356211 28.7992956,23.6898115 29.3811568,24.9135753 C29.5474713,25.2637011 29.5388441,25.6674713 29.3576715,26.0209499 C29.0993327,26.5267404 28.5534185,27.4875506 27.8018877,28.2395308 C24.2474537,31.7915592 16.8807262,27.1187451 12.8546683,23.0915802","phone-end":"M17.9966165,12.0000034 C21.8267777,12.0010033 25.4032059,12.6879152 28.0666783,13.9342554 C30.924921,15.271084 32.4990327,17.1473434 32.4999993,19.2175779 C32.5004826,20.21545 32.2641483,21.2033233 32.0659949,21.8567395 C31.9388867,22.2766857 31.6203913,22.6046436 31.209102,22.7296276 C29.7959296,23.1575727 26.5355804,22.765623 25.2963964,22.0187188 C24.9711347,21.8227439 24.7463997,21.4887867 24.6806707,21.1023363 L24.1896368,18.2387035 C24.1596722,18.0647258 24.047063,17.9152449 23.8890235,17.8422543 C22.1211081,17.0213595 20.4638686,16.5069255 18.0024161,16.5059256 C15.5409636,16.5049258 13.8793744,17.0188599 12.1100091,17.8387547 C11.952453,17.9117454 11.8398438,18.0612262 11.8098791,18.2352039 L11.3309277,21.0393443 C11.2637489,21.431794 11.0341809,21.7557525 10.7268014,21.9477279 C9.35374293,22.8091174 6.06439564,23.2865562 4.76141587,22.8136168 C4.38879072,22.6781342 4.10364308,22.3746731 3.97895139,21.9812236 C3.80012998,21.4192956 3.5004833,20.3109377 3.5,19.2045796 C3.5,13.9757501 12.1863707,11.9970038 17.9966165,12.0000034","friend-woman-add":"M11,18.9984598 L8.5,18.9984598 L8.5,21.4988098 C8.5,22.0508871 8.052,22.4989499 7.5,22.4989499 C6.948,22.4989499 6.5,22.0508871 6.5,21.4988098 L6.5,18.9984598 L4,18.9984598 C3.448,18.9984598 3,18.5503971 3,17.9983198 C3,17.4462425 3.448,16.9981797 4,16.9981797 L6.5,16.9981797 L6.5,14.4978297 C6.5,13.9457524 6.948,13.4976897 7.5,13.4976897 C8.052,13.4976897 8.5,13.9457524 8.5,14.4978297 L8.5,16.9981797 L11,16.9981797 C11.552,16.9981797 12,17.4462425 12,17.9983198 C12,18.5503971 11.552,18.9984598 11,18.9984598 Z M30.5,28.0607585 C30.5,28.8557498 29.82455,29.5 29.075,29.5 L12.925,29.5 C12.17545,29.5 11.5,28.8557498 11.5,28.0607585 C11.5,24.0872422 15.750775,20.8655112 21,20.8655112 C26.249225,20.8655112 30.5,24.0872422 30.5,28.0607585 Z M26.0559,18.4584542 C25.332,18.4584542 24.581025,18.3494789 24.00295,18.1137659 C23.224425,18.9135579 22.182275,19.4185886 20.966275,19.4185886 C19.830075,19.4185886 18.74755,18.9759666 17.98185,18.2664273 C17.8365,18.2861101 17.68735,18.300032 17.52965,18.300032 C15.673825,18.300032 14.35,15.7729582 14.35,12.6976477 C14.35,9.48695817 17.2646,5.97670674 18.9309,5.97670674 C19.6263,5.97670674 20.167325,6.30267237 20.167325,6.30267237 C20.62855,5.91381793 21.12065,5.5 22.277275,5.5 C24.483175,5.5 28.091275,9.10194427 28.091275,12.6976477 C28.091275,14.2981917 27.582075,14.7979417 27.582075,15.5780509 C27.582075,16.8953553 28.6076,16.8267057 28.6076,17.3523793 C28.6076,17.7887604 27.625775,18.4584542 26.0559,18.4584542 Z","magnifying-glass":"M15.499,9.000053 C11.909,9.000053 8.9995,11.9106492 8.9995,15.5009175 C8.9995,19.0911858 11.909,22.0022817 15.499,22.0022817 C19.0885,22.0022817 21.998,19.0911858 21.998,15.5009175 C21.998,11.9106492 19.0885,9.000053 15.499,9.000053 Z M25.4875,28.30874 L21.6335,23.8523894 C21.313,23.482068 20.7755,23.4056049 20.355,23.6574834 C18.934,24.5085729 17.276,25.0023347 15.499,25.0023347 C10.253,25.0023347 6,20.7483865 6,15.5009175 C6,10.2539482 10.253,6 15.499,6 C20.7445,6 24.9975,10.2539482 24.9975,15.5009175 C24.9975,17.2770608 24.5045,18.9357608 23.655,20.3565755 C23.4065,20.7708757 23.491,21.3016197 23.8555,21.6184668 L28.3065,25.4841024 L25.4875,28.30874 Z M28.3065,25.4841024 C29.183,26.2452352 29.231,27.5915859 28.4105,28.4131896 C27.591,29.2352931 26.247,29.1873162 25.4875,28.30874 L28.3065,25.4841024 Z",more:"M7.5,9 L28.5,9 C29.3284271,9 30,9.67157288 30,10.5 C30,11.3284271 29.3284271,12 28.5,12 L7.5,12 C6.67157288,12 6,11.3284271 6,10.5 C6,9.67157288 6.67157288,9 7.5,9 Z M7.5,16.5 L28.5,16.5 C29.3284271,16.5 30,17.1715729 30,18 C30,18.8284271 29.3284271,19.5 28.5,19.5 L7.5,19.5 C6.67157288,19.5 6,18.8284271 6,18 C6,17.1715729 6.67157288,16.5 7.5,16.5 Z M7.5,24 L28.5,24 C29.3284271,24 30,24.6715729 30,25.5 C30,26.3284271 29.3284271,27 28.5,27 L7.5,27 C6.67157288,27 6,26.3284271 6,25.5 C6,24.6715729 6.67157288,24 7.5,24 Z",lock:"M22,10 C22,7.3615 20.6385,6 18,6 C15.3615,6 14,7.3615 14,10 L14,14 L22,14 L22,10 Z M25,30 L11,30 C9.3435,30 8,28.6565 8,27 L8,17 C8,15.3435 9.3435,14 11,14 L12,14 L12,10 C12,6.0415 14.0415,4 18,4 C21.9585,4 24,6.0415 24,10 L24,14 L25,14 C26.6565,14 28,15.3435 28,17 L28,27 C28,28.6565 26.6565,30 25,30 Z",link:"M23.32815,21.2285 C22.14065,22.412 20.55715,23 18.99865,23 C18.05665,23 15.50165,22.7085 15.50165,21.052 C15.50165,20.1945 16.20465,19.535 17.01415,19.535 C17.69965,19.535 17.87065,20 18.99865,20 C19.78615,20 20.59865,19.7045 21.19815,19.1065 C21.79815,18.509 25.47665,14.843 26.07915,14.243 C26.68115,13.643 26.99865,12.7855 26.99865,12 C26.99865,10.253 25.64815,9 23.99865,9 C23.21015,9 22.31765,9.2955 21.72065,9.9005 C21.26265,10.364 20.85015,10.8025 20.58265,11.0695 C20.31515,11.336 19.95465,11.496 19.54365,11.496 C18.62315,11.496 18.00215,10.8075 18.00215,10.008 C18.00215,9.6355 18.14115,9.258 18.44015,8.96 C18.73815,8.6625 19.08965,8.28 19.59065,7.7785 C20.77665,6.589 22.43915,6 23.99865,6 C27.25515,6 29.99865,8.5395 29.99865,12 C29.99865,13.554 29.39915,15.1795 28.20915,16.365 C27.01915,17.5515 24.51565,20.0455 23.32815,21.2285 Z M12.6719,14.7715 C13.8594,13.588 15.4429,13 17.0014,13 C17.9434,13 20.4984,13.2915 20.4984,14.948 C20.4984,15.8055 19.7954,16.465 18.9859,16.465 C18.3004,16.465 18.1294,16 17.0014,16 C16.2144,16 15.4019,16.2955 14.8019,16.8935 C14.2019,17.491 10.5234,21.157 9.9209,21.757 C9.3189,22.357 9.0014,23.2145 9.0014,24 C9.0014,25.747 10.3519,27 12.0014,27 C12.7899,27 13.6824,26.7045 14.2799,26.0995 C14.7374,25.636 15.1499,25.1975 15.4174,24.9305 C15.6849,24.664 16.0454,24.5045 16.4564,24.5045 C17.3769,24.5045 17.9979,25.1925 17.9979,25.992 C17.9979,26.3645 17.8589,26.742 17.5599,27.04 C17.2619,27.3375 16.9104,27.72 16.4094,28.2215 C15.2234,29.411 13.5609,30 12.0014,30 C8.7449,30 6.0014,27.4605 6.0014,24 C6.0014,22.446 6.6009,20.8205 7.7909,19.635 C8.9809,18.4485 11.4844,15.9545 12.6719,14.7715 Z",leave:"M23.9926813 21.9947277V18.995818H13.996744c-.5520823 0-.999244-.4471883-.999244-.9993034 0-.5516155.4471617-.9993035.999244-.9993035h9.9959373v-2.999909c0-.7984434.890826-1.2746115 1.5558229-.8314204l6.0034579 3.9987128c.5940505.3957241.5940505 1.2676164 0 1.6633406l-6.0034579 3.9987128c-.6649969.4426914-1.5558229-.0334767-1.5558229-.8319202M6.0025 25V11c0-2.209 1.79089545-4 4.0005003-4h6.9989994C19.2111043 7 21.0025 8.791 21.0025 11v3c0 .5525-.4477239 1-1.0005003 1-.5522761 0-1-.4475-1-1v-3c0-1.1045-.8954477-2-2-2h-6.9989994c-1.10455233 0-2.00000005.8955-2.00000005 2v14c0 1.1045.89544772 2 2.00000005 2h6.9989994c1.1045523 0 2-.8955 2-2v-3c0-.552.4477239-1 1-1 .5527764 0 1.0005003.448 1.0005003 1v3c0 2.2095-1.7913957 4-4.0005003 4h-6.9989994C7.79339545 29 6.0025 27.2095 6.0025 25",settings:"M18 11.00025c-3.8655 0-6.9995 3.134-6.9995 7 0 3.8655 3.134 6.9995 6.9995 6.9995 3.8655 0 6.9995-3.134 6.9995-6.9995 0-3.866-3.134-7-6.9995-7zm13 6.427v1.146c0 .568-.321 1.087-.829 1.3415l-1.533.766c-.3405.1705-.6165.4565-.7465.814-.124.341-.2675.673-.425.997-.1665.342-.1805.7385-.0605 1.1l.554 1.6605c.1795.539.039 1.1335-.3625 1.535l-.8105.8105c-.4015.4015-.996.542-1.5345.362l-1.6575-.5525c-.361-.12-.758-.106-1.1.0605-.3245.158-.658.302-1.0005.4265-.359.1305-.6455.407-.816.7485l-.764 1.528c-.254.508-.7735.8295-1.3415.8295h-1.146c-.568 0-1.0875-.3215-1.3415-.8295l-.764-1.528c-.1705-.3415-.4575-.618-.816-.7485-.343-.1245-.6755-.2685-1.0005-.4265-.342-.1665-.739-.1805-1.1-.0605l-1.6575.5525c-.539.18-1.133.0395-1.5345-.362l-.8105-.8105c-.402-.4015-.542-.996-.3625-1.535l.554-1.6605c.12-.3615.106-.758-.0605-1.1-.1575-.324-.301-.656-.425-.997-.13-.3575-.406-.6435-.7465-.814l-1.533-.766c-.508-.2545-.829-.7735-.829-1.3415v-1.146c0-.5685.321-1.088.829-1.342l1.533-.766c.3405-.1705.6165-.4565.7465-.814.124-.341.2675-.673.425-.997.1665-.342.1805-.7385.0605-1.1l-.554-1.6605c-.1795-.539-.0395-1.133.3625-1.535l.8105-.81c.4015-.402.9955-.5425 1.5345-.3625l1.6575.5525c.361.12.758.106 1.1-.0605.325-.158.6575-.302 1.0005-.4265.3585-.1305.6455-.407.816-.7485l.764-1.528c.254-.508.7735-.829 1.3415-.829h1.146c.568 0 1.0875.321 1.3415.829l.764 1.528c.1705.3415.457.618.816.7485.3425.1245.676.2685 1.0005.4265.342.1665.739.1805 1.1.0605l1.6575-.5525c.5385-.18 1.133-.0395 1.5345.3625l.8105.81c.4015.402.542.996.3625 1.535l-.554 1.6605c-.12.3615-.106.758.0605 1.1.1575.324.301.656.425.997.13.3575.406.6435.7465.814l1.533.766c.508.254.829.7735.829 1.342z",download:"M18.83275,24.56885 C18.43675,25.16335 17.56425,25.16335 17.16825,24.56885 L13.16675,18.56035 C12.72375,17.89535 13.20025,17.00385 13.99925,17.00385 L16.99975,17.00385 L16.99975,4.99985 C16.99975,4.44785 17.44775,3.99985 17.99975,3.99985 C18.55225,3.99985 18.99975,4.44785 18.99975,4.99985 L18.99975,17.00385 L22.00175,17.00385 C22.80075,17.00385 23.27725,17.89535 22.83425,18.56035 L18.83275,24.56885 Z M27.99975,28.99985 L7.99975,28.99985 C7.44775,28.99985 6.99975,28.55235 6.99975,27.99985 C6.99975,27.44785 7.44775,26.99985 7.99975,26.99985 L27.99975,26.99985 C28.55225,26.99985 28.99975,27.44785 28.99975,27.99985 C28.99975,28.55235 28.55225,28.99985 27.99975,28.99985 Z",redo:"M16,28.0039 L22,28.0039 C22.552,28.0039 23,27.5559 23,27.0039 C23,26.4519 22.552,26.0039 22,26.0039 L15.9985,26.0044 C12.1335,26.0034 9,22.8694 9,19.0039 C9,15.1379 12.134,12.0039 16,12.0039 L21,12.0039 L21.004,15.0049 C21.004,15.8044 21.895,16.2804 22.5605,15.8374 L28.569,11.8359 C29.1635,11.4399 29.1635,10.5674 28.569,10.1714 L22.5605,6.1699 C21.895,5.7264 21.004,6.2029 21.004,7.0019 L21,10.0039 L16,10.0039 C11.0295,10.0039 7,14.0339 7,19.0039 C7,23.9744 11.0295,28.0039 16,28.0039",group:"M28.5,19.9955 C31.539,19.9955 34,22.2345 34,24.996 C34,25.548 33.609,25.996 33.175,25.996 L28.267,25.996 C27.8055,25.996 27.412,25.6145 27.299,25.0775 C27.012,23.715 26.426,22.4615 25.612,21.384 C25.4415,21.1575 25.5155,20.794 25.7485,20.671 C26.5575,20.243 27.496,19.9955 28.5,19.9955 M18,19.993 C22.1425,19.993 25.497,22.6075 25.497,25.832 C25.497,26.477 24.964,27 24.3725,27 L11.6275,27 C11.036,27 10.503,26.477 10.503,25.832 C10.503,22.6075 13.8575,19.993 18,19.993 M7.5,19.9955 C8.504,19.9955 9.4425,20.243 10.2515,20.671 C10.4845,20.794 10.559,21.158 10.388,21.384 C9.5745,22.4615 8.9885,23.7155 8.7015,25.0775 C8.5885,25.6145 8.195,25.996 7.7335,25.996 L2.825,25.996 C2.391,25.996 2,25.548 2,24.996 C2,22.2345 4.461,19.9955 7.5,19.9955 M7.5,19.0005 C5.7485,19.0005 4.588,17.559 4.36,15.6535 C4.132,15.516 3.998,15.1945 3.998,14.748 C3.998,14.325 4.1195,14.017 4.326,13.868 C4.377,11.9715 4.9255,10.9945 5.51,10.9945 C6.0875,10.9945 6.306,11.1965 6.306,11.1965 C6.306,10.813 6.5495,10.5 7.5,10.5 C9.8255,10.5 10.6245,11.427 10.6785,13.872 C10.8825,14.022 11.0025,14.328 11.0025,14.748 C11.0025,15.1945 10.868,15.516 10.64,15.6535 C10.412,17.559 9.2515,19.0005 7.5,19.0005 M21.9615,17.9665 C21.403,17.9665 20.8985,17.9065 20.444,17.8145 C19.843,18.469 18.938,18.996 18,18.996 C17.1235,18.996 16.388,18.52 15.7975,17.939 C15.685,17.9555 15.57,17.9665 15.4485,17.9665 C14.0165,17.9665 13,15.774 13,13.2565 C13,10.8445 15.2145,8.488 16.5,8.488 C17.037,8.488 17.484,8.7235 17.484,8.7235 C17.84,8.4055 18.2195,8 19.1125,8 C20.8145,8 23.5,10.2915 23.5,13.2345 C23.5,14.5445 22.995,15.2485 22.995,15.8865 C22.995,16.9645 23.997,16.8775 23.997,17.3075 C23.997,17.664 23.1735,17.9665 21.9615,17.9665 M28.5,19.0005 C26.7485,19.0005 25.588,17.559 25.36,15.6535 C25.132,15.516 24.998,15.1945 24.998,14.748 C24.998,14.325 25.1195,14.017 25.326,13.868 C25.377,11.9715 25.9255,10.9945 26.5105,10.9945 C27.0875,10.9945 27.306,11.1965 27.306,11.1965 C27.306,10.813 27.5495,10.5 28.5,10.5 C30.8255,10.5 31.6245,11.427 31.6785,13.872 C31.8825,14.022 32.0025,14.328 32.0025,14.748 C32.0025,15.1945 31.868,15.516 31.64,15.6535 C31.412,17.559 30.2515,19.0005 28.5,19.0005","caution-triangle":"M20.0051526,16.0130814 C20.0051526,16.3394431 19.9651454,16.6653049 19.8856311,16.9816708 L19.1705023,19.8389596 C19.0734848,20.2287943 18.7234217,20.5006791 18.3218494,20.5006791 L17.6877352,20.5006791 C17.2861628,20.5006791 16.9360998,20.2287943 16.8390823,19.8389596 L16.1239535,16.9816708 C16.0444392,16.6653049 16.004432,16.3394431 16.004432,16.0130814 L16.004432,12.258673 C16.004432,11.8443486 16.3404925,11.5094905 16.7545671,11.5094905 L19.2550175,11.5094905 C19.6690921,11.5094905 20.0051526,11.8443486 20.0051526,12.258673 L20.0051526,16.0130814 Z M18.0047923,25.9968492 C16.9000933,25.9968492 16.004432,25.1017286 16.004432,23.9986962 C16.004432,22.8946642 16.9000933,22.0000435 18.0047923,22.0000435 C19.1094913,22.0000435 20.0051526,22.8946642 20.0051526,23.9986962 C20.0051526,25.1017286 19.1094913,25.9968492 18.0047923,25.9968492 Z M30.6590717,24.2660829 L20.1356761,6.22722976 C19.1805041,4.59092341 16.8225793,4.59092341 15.8674073,6.22722976 L5.34401171,24.2660829 C4.37883786,25.919382 5.56755198,28 7.47789609,28 L28.5246872,28 C30.4350313,28 31.6237455,25.919382 30.6590717,24.2660829 Z",grids:"M16,17 L8,17 C7.448,17 7,16.552 7,16 L7,11 C7,8.791 8.791,7 11,7 L16,7 C16.552,7 17,7.448 17,8 L17,16 C17,16.552 16.552,17 16,17 M16,29 L11,29 C8.791,29 7,27.209 7,25 L7,20 C7,19.448 7.448,19 8,19 L16,19 C16.552,19 17,19.448 17,20 L17,28 C17,28.552 16.552,29 16,29 M28,17 L20,17 C19.448,17 19,16.552 19,16 L19,8 C19,7.448 19.448,7 20,7 L25,7 C27.209,7 29,8.791 29,11 L29,16 C29,16.552 28.552,17 28,17 M25,29 L20,29 C19.448,29 19,28.552 19,28 L19,20 C19,19.448 19.448,19 20,19 L28,19 C28.552,19 29,19.448 29,20 L29,25 C29,27.209 27.209,29 25,29","app-facebook":"M25.00295,29.00025 L22.48645,29.00025 C22.20995,29.00025 21.98645,28.77675 21.98645,28.50075 L21.98645,20.48625 L24.31995,20.48625 C24.59695,20.48625 24.83095,20.27925 24.86545,20.00375 L25.17195,17.51025 C25.20495,17.24175 24.99545,17.00525 24.72545,17.00525 L21.98645,17.00525 L21.98645,15.11825 C21.98645,14.15675 22.24395,13.50175 23.62245,13.50175 L24.99095,13.50225 C25.26645,13.50225 25.49045,13.27825 25.49045,13.00225 L25.49045,11.08025 C25.49045,10.81875 25.29195,10.60125 25.03095,10.58225 C24.51245,10.54325 23.68095,10.50175 22.81895,10.50175 C20.28395,10.50175 18.50245,11.86925 18.50245,14.71125 L18.50245,17.00525 L16.01345,17.00525 C15.73745,17.00525 15.51345,17.22925 15.51345,17.50475 L15.51345,19.98675 C15.51345,20.26275 15.73745,20.48625 16.01345,20.48625 L18.50145,20.48625 L18.50145,28.50075 C18.50145,28.77675 18.27795,29.00025 18.00195,29.00025 L10.99695,29.00025 C8.78945,29.00025 6.99995,27.21075 6.99995,25.00325 L6.99995,10.99625 C6.99995,8.78925 8.78945,6.99975 10.99695,6.99975 L25.00295,6.99975 C27.21095,6.99975 29.00045,8.78925 29.00045,10.99625 L29.00045,25.00325 C29.00045,27.21075 27.21095,29.00025 25.00295,29.00025 Z",chat:"M29.99925,17.4582055 C29.99825,24.1159345 24.97375,28.9897983 17.99975,28.9897983 C16.83775,28.9897983 15.73075,28.8862481 14.69225,28.6326251 C13.82875,28.4220229 12.92725,28.4435334 12.08525,28.7306726 L8.08375,29.9587683 C7.43925,30.178875 6.81375,29.5525713 7.03225,28.8832466 L7.82675,26.2534712 C8.12425,25.3415289 8.00875,24.3410437 7.50925,23.5261484 C6.45225,21.8008116 6.00125,19.7398121 6.00075,17.4582055 L6.00075,17.457205 L6.00075,17.4562045 C6.00175,10.7989757 11.02625,6.00365 17.99975,6.00365 C24.97375,6.00365 29.99825,10.7989757 29.99925,17.4562045 L29.99925,17.457205 L29.99925,17.4582055 Z","star-filled":"M19.6219314,6.23068312 L21.6937028,12.8899639 C21.7726941,13.144131 22.000169,13.3166943 22.2566407,13.3166943 L29.2913645,13.3166943 C30.9436822,13.3166943 31.6301065,15.5246731 30.2937539,16.5387425 L24.7278681,21.0596935 C24.520391,21.2171835 24.4339005,21.4962995 24.5128918,21.7504665 L26.4271806,28.660276 C26.9376242,30.3017066 25.1393227,31.6661003 23.8024702,30.6515111 L18.347572,26.3810888 C18.1400949,26.2235988 17.8596259,26.2235988 17.6526487,26.3810888 L12.1972506,30.6515111 C10.8608981,31.6661003 9.06259648,30.3017066 9.57254022,28.660276 L11.4873289,21.7504665 C11.5663202,21.4962995 11.4798298,21.2171835 11.2723527,21.0596935 L5.70646678,16.5387425 C4.36961428,15.5246731 5.05653849,13.3166943 6.70885618,13.3166943 L13.74358,13.3166943 C14.0000517,13.3166943 14.2270267,13.144131 14.3065179,12.8899639 L16.3782893,6.23068312 C16.888733,4.58977229 19.1114877,4.58977229 19.6219314,6.23068312","star-outline":"M19.6219314,6.23068312 L20.0993599,6.08215016 L22.1711754,12.7415726 C22.18602,12.7893375 22.222101,12.8166943 22.2566407,12.8166943 L29.2913645,12.8166943 C31.4305512,12.8166943 32.3079943,15.637929 30.6089943,16.9268449 L25.0301753,21.4579526 C24.9918699,21.4870291 24.9732386,21.5469705 24.9947424,21.616975 L26.9046274,28.511802 C27.5558008,30.6057762 25.2350688,32.3664576 23.4942546,31.0452156 L18.0452648,26.7793479 C18.0165759,26.757571 17.9835762,26.757571 17.9608467,26.774807 L12.499596,31.0497413 C10.7652324,32.3665095 8.4445338,30.6058534 9.09069858,28.5267521 L11.0098564,21.6020753 C11.0269821,21.5469705 11.0083508,21.4870291 10.9571123,21.4477959 L5.40429143,16.9371017 C3.69178575,15.6380806 4.56953577,12.8166943 6.70885618,12.8166943 L13.74358,12.8166943 C13.7780211,12.8166943 13.8141142,12.789311 13.8290894,12.7414309 L15.9008558,6.08216626 C16.5570822,3.97261125 19.4431385,3.97261125 20.0993649,6.08216626 L19.6219314,6.23068312 Z M19.6219314,6.23068312 L19.1444979,6.37919997 C18.779837,5.20693334 17.2203837,5.20693334 16.8557178,6.37921608 L14.7837236,13.0392109 C14.639791,13.4994245 14.2216062,13.8166943 13.74358,13.8166943 L6.70885618,13.8166943 C5.5435323,13.8166943 5.04745001,15.4112711 6.02170717,16.1506401 L11.5746599,20.6614344 C11.9509606,20.9470736 12.1057914,21.4452004 11.9691706,21.8839905 L10.0500283,28.8086173 C9.68064228,29.9976141 10.956608,30.9656575 11.8890526,30.257793 L17.3498788,25.9831813 C17.7356755,25.6896265 18.2636139,25.6896265 18.6557875,25.9873843 L24.1047438,30.2532265 C25.0435322,30.9657094 26.3194646,29.9976913 25.94533,28.7937675 L24.0354192,21.8988578 C23.8944294,21.4452004 24.0492602,20.9470736 24.4126277,20.6715911 L29.9915069,16.1404377 C30.9524515,15.4112405 30.4565255,13.8166943 29.2913645,13.8166943 L22.2566407,13.8166943 C21.7783572,13.8166943 21.3594053,13.4990435 21.2162743,13.0384969 L19.1445029,6.37921608 L19.6219314,6.23068312 Z",checkmark:"M13.4397101,26.0625 L6.43933525,19.062 C5.85355492,18.476 5.85355492,17.526 6.43933525,16.9405 C7.02511558,16.354 7.97475947,16.354 8.5605398,16.9405 L14.4998126,22.8805 L27.4394602,9.9395 C28.0252405,9.3535 28.9748844,9.3535 29.5606648,9.9395 C30.1464451,10.525 30.1464451,11.4755 29.5606648,12.061 L15.5604148,26.0625 C14.9751343,26.6485 14.0249906,26.6485 13.4397101,26.0625 Z",bell:"M15.5120016,28 L20.4879984,28 C20.7988428,28 21.0505024,28.2755 20.9913177,28.5755 C20.718272,29.957 19.482852,31 18.0002487,31 C16.517148,31 15.281728,29.957 15.0086823,28.5755 C14.9494976,28.2755 15.2011572,28 15.5120016,28 M18,6 C21.910881,6 25.2161675,8.899 25.7263259,12.776 L26.7996071,20.94 C27.1293863,23.312 28.914191,22.814 28.9981348,24.458 C29.0416057,25.305 28.3190896,26 27.4706577,26 L8.5288426,26 C7.68091044,26 6.95839429,25.305 7.00186518,24.458 C7.0853093,22.814 8.87011406,23.312 9.20039288,20.94 L10.2736741,12.776 C10.7838325,8.899 14.089119,6 18,6"};function h(a){var c;return(c=b("React")).jsx("svg",{className:a.className,width:a.size+"px",height:a.size+"px",viewBox:"0 0 36 36",children:c.jsxs("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[c.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),c.jsx("path",{d:g[a.glyph],fill:a.color})]})})}h.GetGlyph=function(a){var b=Object.keys(g);b=b.find(function(b){return b===a});if(!b)throw new Error("Glyph not found!");return b};h.defaultProps={size:16,color:"currentColor"};h.examples=[{title:"Icons",render:function(){return b("React").jsx("div",{children:Object.keys(g).map(function(a){return b("React").jsx(h,{glyph:a,color:"white",size:36},a)})})}}];e.exports=h}),null);
__d("VFWebButton.react",["AbstractButton.react","React","VFWebIcon.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".alzwoclg{display:flex}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".jcxyg2ei{justify-content:center}",1);g.inject(".bdao358l{box-sizing:border-box}",1);g.inject(".f5m7p0br{border-top:none}",.3);g.inject(".iwso50tu{border-right:none}",.3,".iwso50tu{border-left:none}");g.inject(".ggolc4ur{border-bottom:none}",.3);g.inject(".js4msrqk{border-left:none}",.3,".js4msrqk{border-right:none}");g.inject(".m8h3af8h{margin-top:0}",1);g.inject(".l7ghb35v{margin-right:0}",1,".l7ghb35v{margin-left:0}");g.inject(".kjdc1dyq{margin-bottom:0}",1);g.inject(".kmwttqpk{margin-left:0}",1,".kmwttqpk{margin-right:0}");g.inject(".srn514ro{padding-top:0}",1);g.inject(".oxkhqvkx{padding-right:0}",1,".oxkhqvkx{padding-left:0}");g.inject(".rl78xhln{padding-bottom:0}",1);g.inject(".nch0832m{padding-left:0}",1,".nch0832m{padding-right:0}");g.inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");g.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");g.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");g.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");g.inject(".dc2r8xf1{transition:.2s ease background-color}",.1);g.inject(".m6d5ke1c{color:var(--fds-white)}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".igjjae4c{font-weight:bold}",1);g.inject(".sxswz4zx{text-transform:uppercase}",1);g.inject(".s4swhuz0{cursor:default}",1);g.inject(".qh2drquz{padding-left:12px}",1);g.inject(".tkmi5398{padding-right:12px}",1);g.inject(".f14lp6to{box-shadow:var(--fds-black-alpha-05) 0 2px 12px}",1);g.inject(".h8lelt7y{margin-right:4px}",1);g.inject(".m677dxdb{min-width:18px}",1);g.inject(".rkk71h3c{height:18px}",1);g.inject(".d6b6kj0r{min-width:20px}",1);g.inject(".dmdr2h6l{height:20px}",1);g.inject(".fdqkqcqg{min-width:28px}",1);g.inject(".k27skwkl{height:28px}",1);g.inject(".qu6abig5{border-top-left-radius:14px}",1,".qu6abig5{border-top-right-radius:14px}");g.inject(".jwqd9jel{border-top-right-radius:14px}",1,".jwqd9jel{border-top-left-radius:14px}");g.inject(".nv21v0br{border-bottom-right-radius:14px}",1,".nv21v0br{border-bottom-left-radius:14px}");g.inject(".k6xikxj3{border-bottom-left-radius:14px}",1,".k6xikxj3{border-bottom-right-radius:14px}");g.inject(".iryl7rsq{width:32px}",1);g.inject(".h7q9eq3y{height:32px}",1);g.inject(".bis24fgy{width:40px}",1);g.inject(".nq2b4knc{height:40px}",1);g.inject(".ddmobvp5{width:52px}",1);g.inject(".dk0hw2kk{height:52px}",1);g.inject(".t29kiutw{width:60px}",1);g.inject(".a26p89d5{height:60px}",1);g.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);g.inject(".nu7423ey{background-color:transparent}",1);g.inject(".fw0ser24:hover{color:var(--fds-white)}",8);g.inject(".t2zhz511:active{color:var(--fds-white)}",10);g.inject(".m6d5ke1c{color:var(--fds-white)}",1);g.inject(".pwojg24b{background-color:var(--fds-white-alpha-20)}",1);g.inject(".bk2nvruq:hover{background-color:var(--fds-white-alpha-40)}",8);g.inject(".ka9tncxw:active{background-color:var(--fds-white-alpha-20)}",10);g.inject(".r9sb4e79{color:var(--fds-black)}",1);g.inject(".jjseejtz{background-color:var(--fds-white)}",1);g.inject(".p8vua5wf:hover{background-color:var(--fds-white)}",8);g.inject(".m6d5ke1c{color:var(--fds-white)}",1);g.inject(".cf4ld0zp{background-color:#6cd64f}",1);g.inject(".t731g9xo:hover{background-color:#7DD964}",8);g.inject(".m6d5ke1c{color:var(--fds-white)}",1);g.inject(".jhrkuigy{background-color:#ff294e}",1);g.inject(".frzvp002:hover{background-color:#FF5370}",8);g.inject(".cpz3zgq0{color:var(--fds-white-alpha-30)}",1);g.inject(".pwojg24b{background-color:var(--fds-white-alpha-20)}",1);g.inject(".iciognh7:hover{background-color:var(--fds-white-alpha-20)}",8);g.inject(".ka9tncxw:active{background-color:var(--fds-white-alpha-20)}",10);g.inject(".m8jr9q61{background-color:rgba(0,0,0,.34)}",1);g.inject(".on8ftral:hover{background-color:rgba(0,0,0,.5)}",8);g.inject(".faa5pon4{background-color:rgba(255,255,255,.34)}",1);g.inject(".k4dq9ojn:hover{background-color:rgba(255,255,255,.5)}",8);function h(c){var d=c.size,e=c.use,f=c.icon,h=c.iconColor,m=c.label,n=c.labelIsHidden,o=c.tabIndex,a=c.onClick,p=c.disabled;c=babelHelpers.objectWithoutPropertiesLoose(c,["size","use","icon","iconColor","label","labelIsHidden","tabIndex","onClick","disabled"]);f=f?b("React").jsx(b("VFWebIcon.react"),{className:n?"":"h8lelt7y",glyph:f,size:k(d),color:h}):null;return b("React").jsx(b("AbstractButton.react"),babelHelpers["extends"]({},c,{className:(g||(g=b("stylex"))).dedupe({"display-1":"alzwoclg","align-items-1":"i85zmo3j","justify-content-1":"jcxyg2ei","box-sizing-1":"bdao358l","border-top-0.3":"f5m7p0br","border-end-0.3":"iwso50tu","border-bottom-0.3":"ggolc4ur","border-start-0.3":"js4msrqk","margin-top-1":"m8h3af8h","margin-end-1":"l7ghb35v","margin-bottom-1":"kjdc1dyq","margin-start-1":"kmwttqpk","padding-top-1":"srn514ro","padding-end-1":"oxkhqvkx","padding-bottom-1":"rl78xhln","padding-start-1":"nch0832m","border-top-start-radius-1":"qmqpeqxj","border-top-end-radius-1":"e7u6y3za","border-bottom-end-radius-1":"qwcclf47","border-bottom-start-radius-1":"nmlomj2f","transition-0.1":"dc2r8xf1","color-1":"m6d5ke1c","font-size-1":"nfkogyam","font-weight-1":"igjjae4c","text-transform-1":"sxswz4zx","cursor-1":"s4swhuz0"},d===18?{"min-width-1":"m677dxdb","height-1":"rkk71h3c"}:null,d===20?{"min-width-1":"d6b6kj0r","height-1":"dmdr2h6l"}:null,d===28?{"min-width-1":"fdqkqcqg","height-1":"k27skwkl","border-top-start-radius-1":"qu6abig5","border-top-end-radius-1":"jwqd9jel","border-bottom-end-radius-1":"nv21v0br","border-bottom-start-radius-1":"k6xikxj3"}:null,d===32?{"width-1":"iryl7rsq","height-1":"h7q9eq3y"}:null,d===40?{"width-1":"bis24fgy","height-1":"nq2b4knc"}:null,d===52?{"width-1":"ddmobvp5","height-1":"dk0hw2kk"}:null,d===60?{"width-1":"t29kiutw","height-1":"a26p89d5"}:null,e==="clear"?{"color-1":"hcekrtk9","background-color-1":"nu7423ey","color-8":"fw0ser24","color-10":"t2zhz511"}:null,e==="transparent"?{"color-1":"m6d5ke1c","background-color-1":"pwojg24b","background-color-8":"bk2nvruq","background-color-10":"ka9tncxw"}:null,e==="inverted"?{"color-1":"r9sb4e79","background-color-1":"jjseejtz","background-color-8":"p8vua5wf"}:null,e==="green"?{"color-1":"m6d5ke1c","background-color-1":"cf4ld0zp","background-color-8":"t731g9xo"}:null,e==="danger"?{"color-1":"m6d5ke1c","background-color-1":"jhrkuigy","background-color-8":"frzvp002"}:null,e==="close_light"?{"background-color-1":"m8jr9q61","background-color-8":"on8ftral"}:null,e==="close_dark"?{"background-color-1":"faa5pon4","background-color-8":"k4dq9ojn"}:null,e!=="clear"&&d>=40?{"box-shadow-1":"f14lp6to"}:null,n?null:{"padding-left-1":"qh2drquz","padding-right-1":"tkmi5398"},p?{"color-1":"cpz3zgq0","background-color-1":"pwojg24b","background-color-8":"iciognh7","background-color-10":"ka9tncxw"}:null),image:f,label:m,title:n?m:null,labelIsHidden:n,onClick:i(a),onContextMenu:j,size:"small",tabIndex:o,disabled:p}))}h.defaultProps={use:"transparent",labelIsHidden:!0,disabled:!1};function i(a){return function(b){b.stopPropagation(),a&&a(b)}}function j(a){a.preventDefault(),a.stopPropagation()}function k(a){__p&&__p();switch(a){case 18:return 18;case 20:return 16;case 28:return 20;case 32:return 22;case 40:return 28;case 52:return 31;case 60:return 36;default:a;return 0}}var l=function(){return!1};h.examples=[{title:"Small round button",description:"Used in side panels, assumes the background is dark",render:function(){return b("React").jsxs("div",{style:{display:"flex"},children:[b("React").jsx(h,{size:32,icon:"camcorder",onClick:l,label:"Test"}),b("React").jsx(h,{size:32,icon:"cross",onClick:l,label:"Test"})]})}},{title:"Medium round button",description:"Used for in-call controls",render:function(){var a;return(a=b("React")).jsxs("div",{style:{display:"flex"},children:[a.jsx(h,{size:60,use:"clear",icon:"camcorder",onClick:l,label:"Clear"}),a.jsx(h,{size:60,use:"transparent",icon:"camcorder",onClick:l,label:"Transparent"}),a.jsx(h,{size:60,use:"inverted",icon:"camcorder",onClick:l,label:"Inverted"}),a.jsx(h,{size:60,use:"danger",icon:"phone-end",onClick:l,label:"Danger"}),a.jsx(h,{size:60,use:"transparent",icon:"phone-end",onClick:l,label:"Transparent, disabled",disabled:!0})]})}},{title:"Pills",render:function(){var a;return(a=b("React")).jsxs("div",{style:{display:"flex",flexWrap:"wrap"},children:[a.jsx(h,{size:28,onClick:l,label:"Ring",labelIsHidden:!1}),a.jsx(h,{size:28,use:"clear",onClick:l,label:"Cancel",labelIsHidden:!1}),a.jsx(h,{size:28,icon:"refresh",onClick:l,label:"Refresh",labelIsHidden:!1}),a.jsx(h,{size:28,use:"danger",icon:"lock",onClick:l,label:"Lock",labelIsHidden:!1}),a.jsx(h,{size:28,use:"green",icon:"camcorder",onClick:l,label:"Join",labelIsHidden:!1})]})}},{title:"Very small close button",description:"Used for closing small dialogs such as NUX popovers",render:function(){return b("React").jsx("div",{style:{display:"flex"},children:b("React").jsx(h,{size:18,icon:"cross",onClick:l,label:"Close"})})}}];e.exports=h}),null);
__d("VFWebStrings",["fbt","FBRTCParticipantCallState","React","Timestamp.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();e.exports={app_name:g._("Video tr\u00ean Messenger"),list_tray_title:g._("Cu\u1ed9c g\u1ecdi"),ring_friend_button:g._("G\u1ecdi"),invite_friend_button:g._("Th\u00eam"),cancel_ring_button:g._("H\u1ee7y b\u1ecf"),preview_camera_microphone:g._("B\u1eadt xem tr\u01b0\u1edbc"),disable_camera_microphone:g._("T\u1eaft xem tr\u01b0\u1edbc"),join_video_chat_link:g._("Tham gia chat video"),redial_remote_user:g._("G\u1ecdi"),dont_join_video_chat_link:g._("L\u00fac kh\u00e1c"),blocked_user:g._("\u0110\u00e3 ch\u1eb7n"),archon_upsell_title:g._("Messenger Video kh\u00f4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 n\u1eefa"),archon_upsell_description:g._("Messenger Desktop \u0111\u00e3 kh\u00e1 \u0111\u1ea7y \u0111\u1ee7 tr\u1ea3i nghi\u1ec7m chat video r\u1ed3i. B\u1ea1n c\u00f3 th\u1ec3 t\u00ecm t\u00ednh n\u0103ng chat video \u1edf g\u00f3c ph\u1ea3i tr\u00ean c\u1ee7a c\u1eeda s\u1ed5 chat trong Messenger. Ch\u00fang t\u00f4i s\u1ebd d\u1ef1a v\u00e0o ph\u1ea3n h\u1ed3i c\u1ee7a b\u1ea1n \u0111\u1ec3 bi\u1ebft m\u00ecnh n\u00ean \u01b0u ti\u00ean \u0111i\u1ec1u g\u00ec trong qu\u00e1 tr\u00ecnh b\u1ed5 sung ti\u1ebfp c\u00e1c t\u00ednh n\u0103ng m\u00e0 b\u1ea1n y\u00eau th\u00edch tr\u00ean Messenger Video v\u00e0o Messenger Desktop."),dvc_feedback_title:g._("Ch\u00fang t\u00f4i mu\u1ed1n bi\u1ebft \u00fd ki\u1ebfn c\u1ee7a b\u1ea1n"),archon_upsell_cta_button_label:g._("T\u1ea3i Messenger"),feedback_message:g._("Ph\u1ea3n h\u1ed3i c\u1ee7a b\u1ea1n s\u1ebd gi\u00fap ch\u00fang t\u00f4i bi\u1ebft n\u00ean t\u1eadp trung v\u00e0o \u0111\u00e2u, c\u0169ng nh\u01b0 n\u00ean kh\u1eafc ph\u1ee5c v\u00e0 c\u1ea3i thi\u1ec7n \u0111i\u1ec1u g\u00ec."),feedback_submit_button_label:g._("G\u1eedi ph\u1ea3n h\u1ed3i"),welcome_screen_message:g._("Video tr\u00ean Messenger"),welcome_screen_call_to_action:g._("K\u1ebft n\u1ed1i v\u1edbi nh\u1eefng ng\u01b0\u1eddi b\u1ea1n y\u00eau th\u00edch"),call_history_recent_header_label:g._("G\u1ea7n \u0111\u00e2y"),call_history_tab_button:g._("G\u1ea7n \u0111\u00e2y"),people_list_tab_button:g._("\u0110ang ho\u1ea1t \u0111\u1ed9ng"),toggle_tray:g._("Hi\u1ec7n\/\u1ea9n khay"),leaveCall:g._("R\u1eddi cu\u1ed9c g\u1ecdi"),toggleScreenShare:g._("B\u1eadt\/t\u1eaft t\u00ednh n\u0103ng chia s\u1ebb m\u00e0n h\u00ecnh"),toggleMute:g._("Chuy\u1ec3n sang t\u1eaft"),toggleVideo:g._("B\u1eadt\/t\u1eaft video"),close_modal:g._("\u0110\u00f3ng"),close_window_warning:g._("B\u1ea1n r\u1eddi \u0111i s\u1edbm v\u1eady?"),ignore_button_label:g._("B\u1ecf qua"),label_refresh:g._("L\u00e0m m\u1edbi"),load_error_media:g._("\u0110\u00e3 x\u1ea3y ra l\u1ed7i khi c\u1ed1 g\u1eafng l\u1ea5y quy\u1ec1n truy c\u1eadp v\u00e0o M\u00e1y \u1ea3nh v\u00e0\/ho\u1eb7c Micr\u00f4:"),load_error_media_permission:g._("Vui l\u00f2ng cho ph\u00e9p truy c\u1eadp m\u00e1y \u1ea3nh v\u00e0 micr\u00f4"),load_error_media_permission_explanation:g._("\u0110\u1ec3 s\u1eed d\u1ee5ng VFWeb, b\u1ea1n c\u1ea7n b\u1eadt m\u00e1y \u1ea3nh v\u00e0 micr\u00f4. Nh\u01b0 v\u1eady, b\u1ea1n b\u00e8 s\u1ebd c\u00f3 th\u1ec3 nh\u00ecn m\u1eb7t v\u00e0 nghe gi\u1ecdng b\u1ea1n khi c\u00e1c b\u1ea1n k\u1ebft n\u1ed1i v\u1edbi nhau."),load_error_media_permission_explanation_later:g._("B\u1ea1n c\u00f3 th\u1ec3 t\u1eaft c\u00e1c thi\u1ebft b\u1ecb n\u00e0y sau."),load_error_media_permission_learn_more:g._("T\u00ecm hi\u1ec3u th\u00eam"),load_error_unknown:g._("\u0110\u00e3 x\u1ea3y ra l\u1ed7i kh\u00f4ng x\u00e1c \u0111\u1ecbnh khi t\u1ea3i VFWeb."),load_error_unknown_refresh_request:g._("Vui l\u00f2ng l\u00e0m m\u1edbi tr\u00ecnh duy\u1ec7t ho\u1eb7c th\u1eed l\u1ea1i sau."),activeOnline:g._("\u0110ang ho\u1ea1t \u0111\u1ed9ng"),logout:g._("\u0110\u0103ng xu\u1ea5t"),settings:g._("C\u00e0i \u0111\u1eb7t"),audio_settings:g._("C\u00e0i \u0111\u1eb7t \u00e2m thanh"),audio_settings_modal_title:g._("C\u00e0i \u0111\u1eb7t \u00e2m thanh"),search_placeholder:g._("T\u00ecm ki\u1ebfm b\u1ea1n b\u00e8 v\u00e0 gia \u0111\u00ecnh"),search_placeholder_roster:g._("Th\u00eam m\u1ecdi ng\u01b0\u1eddi v\u00e0o cu\u1ed9c g\u1ecdi n\u00e0y"),search_results:g._("K\u1ebft qu\u1ea3 t\u00ecm ki\u1ebfm"),suggested_search_results:g._("\u0110\u01b0\u1ee3c g\u1ee3i \u00fd"),star_rating_title:g._("X\u1ebfp h\u1ea1ng ch\u1ea5t l\u01b0\u1ee3ng cu\u1ed9c g\u1ecdi"),star_rating_audio_call:g._("Vui l\u00f2ng x\u1ebfp h\u1ea1ng ch\u1ea5t l\u01b0\u1ee3ng cu\u1ed9c g\u1ecdi tho\u1ea1i c\u1ee7a b\u1ea1n"),star_rating_video_call:g._("Vui l\u00f2ng x\u1ebfp h\u1ea1ng ch\u1ea5t l\u01b0\u1ee3ng cu\u1ed9c g\u1ecdi video c\u1ee7a b\u1ea1n"),star_rating_not_now:g._("L\u00fac kh\u00e1c"),star_rating_submit:g._("G\u1eedi"),feedback_prompt:g._("Ph\u1ea3n h\u1ed3i kh\u00e1c"),feedback_title:g._("G\u1eedi ph\u1ea3n h\u1ed3i"),feedback_placeholder:g._("\u0110\u1ec3 l\u1ea1i b\u00ecnh lu\u1eadn ho\u1eb7c ph\u1ea3n h\u1ed3i b\u1ea5t k\u1ef3..."),hideListTray:g._("\u1ea8n"),ignore:g._("B\u1ecf qua"),join_button_label:g._("Tham gia"),joining_generic_error_title:g._("Kh\u00f4ng th\u1ec3 tham gia cu\u1ed9c g\u1ecdi"),joining_generic_error_message:g._("Kh\u00f4ng th\u1ec3 tham gia cu\u1ed9c g\u1ecdi n\u00e0y do \u0111\u00e3 x\u1ea3y ra l\u1ed7i. H\u00e3y th\u1eed l\u1ea1i."),okay:g._("Ok"),noAnswerOnOutgoingCall:g._("Kh\u00f4ng tr\u1ea3 l\u1eddi"),user_video_off:function(a){return g._("M\u00e1y \u1ea3nh c\u1ee7a {name} \u0111ang t\u1eaft",[g._param("name",a)])},video_escalation:g._("\u0110ang y\u00eau c\u1ea7u video..."),viewer_video_off:function(a){return g._("M\u00e1y \u1ea3nh \u0111ang t\u1eaft")},switchCallContent:function(a,b,c){b==="create"?Boolean(a)?b=c?g._("N\u1ebfu b\u1ea1n mu\u1ed1n t\u1ea1o cu\u1ed9c g\u1ecdi kh\u00e1c th\u00ec \u0111o\u1ea1n chat video hi\u1ec7n t\u1ea1i s\u1ebd k\u1ebft th\u00fac."):g._("N\u1ebfu mu\u1ed1n t\u1ea1o cu\u1ed9c g\u1ecdi kh\u00e1c, b\u1ea1n s\u1ebd ph\u1ea3i r\u1eddi kh\u1ecfi \u0111o\u1ea1n chat video hi\u1ec7n t\u1ea1i."):b=c?g._("N\u1ebfu b\u1ea1n mu\u1ed1n t\u1ea1o \u0111o\u1ea1n chat video kh\u00e1c th\u00ec \u0111o\u1ea1n chat video hi\u1ec7n t\u1ea1i s\u1ebd k\u1ebft th\u00fac."):g._("N\u1ebfu mu\u1ed1n t\u1ea1o m\u1ed9t \u0111o\u1ea1n chat video kh\u00e1c, b\u1ea1n s\u1ebd ph\u1ea3i r\u1eddi kh\u1ecfi \u0111o\u1ea1n chat video hi\u1ec7n t\u1ea1i."):b=c?g._("N\u1ebfu b\u1ea1n tham gia \u0111o\u1ea1n chat video kh\u00e1c th\u00ec \u0111o\u1ea1n chat video hi\u1ec7n t\u1ea1i s\u1ebd k\u1ebft th\u00fac."):g._("N\u1ebfu mu\u1ed1n tham gia \u0111o\u1ea1n chat video kh\u00e1c, b\u1ea1n s\u1ebd ph\u1ea3i r\u1eddi kh\u1ecfi \u0111o\u1ea1n chat video hi\u1ec7n t\u1ea1i.");return b},switchCallTitle:function(a,b){return b==="create"?Boolean(a)?g._("B\u1eaft \u0111\u1ea7u cu\u1ed9c g\u1ecdi m\u1edbi?"):g._("B\u1eaft \u0111\u1ea7u \u0111o\u1ea1n chat video m\u1edbi?"):g._("Tham gia \u0111o\u1ea1n chat video kh\u00e1c")},switchCallButtonLabel:function(a,b){return b==="create"?Boolean(a)?g._("B\u1eaft \u0111\u1ea7u cu\u1ed9c g\u1ecdi m\u1edbi"):g._("B\u1eaft \u0111\u1ea7u \u0111o\u1ea1n chat video m\u1edbi"):g._("Tham gia chat video")},call_state:function(a,c){__p&&__p();switch(a){case b("FBRTCParticipantCallState").DISCONNECTED:return g._("\u0110\u00e3 ng\u1eaft k\u1ebft n\u1ed1i");case b("FBRTCParticipantCallState").NO_ANSWER:case b("FBRTCParticipantCallState").REJECTED:return g._("Kh\u00f4ng tr\u1ea3 l\u1eddi");case b("FBRTCParticipantCallState").IN_ANOTHER_CALL:return g._("\u0110ang trong cu\u1ed9c g\u1ecdi kh\u00e1c");case b("FBRTCParticipantCallState").UNREACHABLE:return g._("Kh\u00f4ng li\u00ean h\u1ec7 \u0111\u01b0\u1ee3c");case b("FBRTCParticipantCallState").CONNECTION_DROPPED:return g._("M\u1ea5t k\u1ebft n\u1ed1i");case b("FBRTCParticipantCallState").CONTACTING:return Boolean(c)?g._("\u0110ang li\u00ean h\u1ec7"):g._("\u0110ang li\u00ean h\u1ec7...");case b("FBRTCParticipantCallState").RINGING:return Boolean(c)?g._("\u0110ang \u0111\u1ed5 chu\u00f4ng"):g._("\u0110ang \u0111\u1ed5 chu\u00f4ng...");case b("FBRTCParticipantCallState").CONNECTING:return Boolean(c)?g._("\u0110ang k\u1ebft n\u1ed1i"):g._("\u0110ang k\u1ebft n\u1ed1i...");case b("FBRTCParticipantCallState").CONNECTED:return g._("\u0110\u00e3 k\u1ebft n\u1ed1i");case b("FBRTCParticipantCallState").PARTICIPANT_LIMIT_REACHED:return g._("\u0110\u00e3 \u0111\u1ea1t s\u1ed1 ng\u01b0\u1eddi tham gia t\u1ed1i \u0111a");case b("FBRTCParticipantCallState").RING_TYPE_UNSUPPORTED:return g._("Kh\u00f4ng h\u1ed7 tr\u1ee3");default:return null}},full_label:g._("\u0110\u1ea7y \u0111\u1ee7"),call_created_time:function(a){return g._("{relative time, like '2 hours'} tr\u01b0\u1edbc",[g._param("relative time, like '2 hours'",b("React").jsx(b("Timestamp.react"),{minimize:!0,shorten:!0,time:a,useLargerTimeUnits:!0}))])},in_this_call_label:g._("\u0110ang trong cu\u1ed9c g\u1ecdi"),yourself_in_call_row:g._("B\u1ea1n"),oops_message:g._("\u0110\u00e3 x\u1ea3y ra l\u1ed7i."),oops_sub_message:g._("B\u1ea1n c\u00f3 th\u1ec3 gi\u00fap ch\u00fang t\u00f4i c\u1ea3i thi\u1ec7n b\u1eb1ng c\u00e1ch b\u00e1o c\u00e1o s\u1ef1 c\u1ed1, sau \u0111\u00f3 kh\u1edfi \u0111\u1ed9ng l\u1ea1i \u1ee9ng d\u1ee5ng \u0111\u1ec3 th\u1eed l\u1ea1i."),restart:g._("Kh\u1edfi \u0111\u1ed9ng l\u1ea1i"),no_internet_connection:g._("Kh\u00f4ng th\u1ec3 t\u1ea3i th\u00f4ng tin do m\u1ea5t k\u1ebft n\u1ed1i."),dismiss_failed_call:g._("B\u1ecf qua"),redial:g._("G\u1ecdi l\u1ea1i"),call_roster_ongoing_video_chat:g._("\u0110o\u1ea1n chat video \u0111ang di\u1ec5n ra"),ringing:g._("\u0110ang \u0111\u1ed5 chu\u00f4ng"),update_old_build_prompt:g._("R\u1ea5t ti\u1ebfc, b\u1ea1n \u0111ang s\u1eed d\u1ee5ng phi\u00ean b\u1ea3n c\u0169. H\u00e3y truy c\u1eadp {=fburl.com\/dvc} \u0111\u1ec3 c\u1eadp nh\u1eadt theo c\u00e1ch th\u1ee7 c\u00f4ng. C\u00e1c phi\u00ean b\u1ea3n m\u1edbi s\u1ebd t\u1ef1 \u0111\u1ed9ng c\u1eadp nh\u1eadt.",[g._param("=fburl.com/dvc",b("React").jsx("b",{children:g._("fburl.com\/dvc")}))]),no_camera_message_title:g._("Kh\u00f4ng t\u00ecm th\u1ea5y m\u00e1y \u1ea3nh."),no_camera_message_action:g._("Ki\u1ec3m tra c\u00e0i \u0111\u1eb7t video v\u00e0 \u00e2m thanh"),current_video_chat_status:g._("B\u1ea1n \u0111ang \u1edf trong \u0111o\u1ea1n chat video r\u1ed3i."),no_camera_permission_message_title:g._("Quy\u1ec1n truy c\u1eadp m\u00e1y \u1ea3nh b\u1ecb t\u1eeb ch\u1ed1i."),unknown_camera_error_title:g._("L\u1ed7i camera kh\u00f4ng x\u00e1c \u0111\u1ecbnh."),no_camera_permssion_message_action_macos:g._("Ch\u1ecdn \"B\u1ea3o m\u1eadt & quy\u1ec1n ri\u00eang t\u01b0\" trong T\u00f9y ch\u1ecdn h\u1ec7 th\u1ed1ng..."),no_camera_permssion_message_action_windows:g._("Ki\u1ec3m tra ph\u1ea7n \"C\u00e0i \u0111\u1eb7t quy\u1ec1n ri\u00eang t\u01b0 c\u1ee7a m\u00e1y \u1ea3nh\" trong C\u00e0i \u0111\u1eb7t"),search_no_results:g._("Kh\u00f4ng t\u00ecm th\u1ea5y k\u1ebft qu\u1ea3"),not_available_title:g._("N\u1ed9i dung kh\u00f4ng t\u1ed3n t\u1ea1i"),not_available_subtitle:g._("B\u1ea1n ch\u01b0a th\u1ec3 d\u00f9ng \u1ee9ng d\u1ee5ng n\u00e0y t\u1ea1i khu v\u1ef1c c\u1ee7a m\u00ecnh."),back_to_grid_view:g._("Xem t\u1ea5t c\u1ea3 ng\u01b0\u1eddi tham gia"),add_people_to_call:g._("Th\u00eam ng\u01b0\u1eddi v\u00e0o cu\u1ed9c g\u1ecdi n\u00e0y"),exit_miniview:g._("Tho\u00e1t ch\u1ebf \u0111\u1ed9 c\u1eeda s\u1ed5 xem nh\u1ecf"),settings_button_nux:g._("Ch\u1ec9nh s\u1eeda c\u00e0i \u0111\u1eb7t \u00e2m thanh v\u00e0 video"),start_audio_call:function(a){return g._("G\u1ecdi {name}",[g._param("name",a)])},start_video_call:function(a){return g._("Chat video v\u1edbi {name}",[g._param("name",a)])},join_ongoing_call:g._("Tham gia cu\u1ed9c g\u1ecdi \u0111ang di\u1ec5n ra"),open_facebook_profile:g._("Xem trang c\u00e1 nh\u00e2n"),message:function(a){return g._("Nh\u1eafn tin cho {name}",[g._param("name",a)])},block_calls:g._("Ch\u1eb7n cu\u1ed9c g\u1ecdi"),unblock_calls:g._("B\u1ecf ch\u1eb7n cu\u1ed9c g\u1ecdi"),join_notification:function(a){return g._("{name} \u0111\u00e3 tham gia cu\u1ed9c g\u1ecdi",[g._param("name",a)])},start_new_group_call_label:g._("B\u1eaft \u0111\u1ea7u cu\u1ed9c g\u1ecdi nh\u00f3m m\u1edbi"),cancel:g._("H\u1ee7y"),call:g._("G\u1ecdi"),video_chat:g._("Chat video"),create_group_call:g._("T\u1ea1o cu\u1ed9c g\u1ecdi nh\u00f3m"),leave_notification:function(a){return g._("{name} \u0111\u00e3 r\u1eddi kh\u1ecfi cu\u1ed9c g\u1ecdi",[g._param("name",a)])},local_user_name_label:g._("B\u1ea1n")}}),null);
__d("VFWebText.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".lq84ybu9{overflow-x:hidden}",1);g.inject(".hf30pyar{overflow-y:hidden}",1);g.inject(".oshhggmv{text-overflow:ellipsis}",1);g.inject(".qm54mken{white-space:nowrap}",1);g.inject(".aeinzg81{min-width:0}",1);g.inject(".rlwggjho{font-size:1.875rem}",1);g.inject(".luz166fr{line-height:1.2}",1);g.inject(".o48pnaf2{font-weight:700}",1);g.inject(".rq8durfe{font-size:1.25rem}",1);g.inject(".luz166fr{line-height:1.2}",1);g.inject(".o48pnaf2{font-weight:700}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".qc63is0g{line-height:1.1538}",1);g.inject(".innypi6y{font-weight:600}",1);g.inject(".sxswz4zx{text-transform:uppercase}",1);g.inject(".k1z55t6l{font-size:0.9375rem}",1);g.inject(".lmvsqxvg{line-height:1.0667}",1);g.inject(".o48pnaf2{font-weight:700}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".qc63is0g{line-height:1.1538}",1);g.inject(".o48pnaf2{font-weight:700}",1);g.inject(".sxswz4zx{text-transform:uppercase}",1);g.inject(".hg9jxets{font-size:0.6875rem}",1);g.inject(".rd8lw58x{line-height:1.8182}",1);g.inject(".innypi6y{font-weight:600}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".ee8w89ln{line-height:1.5385}",1);g.inject(".tes86rjd{font-weight:400}",1);g.inject(".nswx41af{max-width:inherit}",1);g.inject(".glosn74e{font-size:0.75rem}",1);g.inject(".b643thi7{line-height:1.5}",1);g.inject(".tes86rjd{font-weight:400}",1);g.inject(".k1z55t6l{font-size:0.9375rem}",1);g.inject(".oog5qr5w{line-height:1.3333}",1);g.inject(".innypi6y{font-weight:600}",1);g.inject(".ss6ugidx{white-space:normal}",1);g.inject(".k1z55t6l{font-size:0.9375rem}",1);g.inject(".oog5qr5w{line-height:1.3333}",1);g.inject(".tes86rjd{font-weight:400}",1);g.inject(".ss6ugidx{white-space:normal}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".dg7vue1a{line-height:1.3846}",1);g.inject(".tes86rjd{font-weight:400}",1);g.inject(".ss6ugidx{white-space:normal}",1);g.inject(".h5fs5mea{color:white}",1);g.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);function h(a){var c=a.style,d=a.color;return b("React").jsx("div",{className:(g||(g=b("stylex"))).dedupe({"overflow-x-1":"lq84ybu9","overflow-y-1":"hf30pyar","text-overflow-1":"oshhggmv","white-space-1":"qm54mken","min-width-1":"aeinzg81"},c==="headline"?{"font-size-1":"rlwggjho","line-height-1":"luz166fr","font-weight-1":"o48pnaf2"}:null,c==="title-large"?{"font-size-1":"rq8durfe","line-height-1":"luz166fr","font-weight-1":"o48pnaf2"}:null,c==="title-small"?{"font-size-1":"nfkogyam","line-height-1":"qc63is0g","font-weight-1":"innypi6y","text-transform-1":"sxswz4zx"}:null,c==="button-large"?{"font-size-1":"k1z55t6l","line-height-1":"lmvsqxvg","font-weight-1":"o48pnaf2"}:null,c==="button-small"?{"font-size-1":"nfkogyam","line-height-1":"qc63is0g","font-weight-1":"o48pnaf2","text-transform-1":"sxswz4zx"}:null,c==="button-very-small"?{"font-size-1":"hg9jxets","line-height-1":"rd8lw58x","font-weight-1":"innypi6y"}:null,c==="bubble-label"?{"font-size-1":"nfkogyam","line-height-1":"ee8w89ln","font-weight-1":"tes86rjd","max-width-1":"nswx41af"}:null,c==="bubble-sublabel"?{"font-size-1":"glosn74e","line-height-1":"b643thi7","font-weight-1":"tes86rjd"}:null,c==="body-medium-semibold"?{"font-size-1":"k1z55t6l","line-height-1":"oog5qr5w","font-weight-1":"innypi6y","white-space-1":"ss6ugidx"}:null,c==="body-medium"?{"font-size-1":"k1z55t6l","line-height-1":"oog5qr5w","font-weight-1":"tes86rjd","white-space-1":"ss6ugidx"}:null,c==="body-small"?{"font-size-1":"nfkogyam","line-height-1":"dg7vue1a","font-weight-1":"tes86rjd","white-space-1":"ss6ugidx"}:null,d==="white"?{"color-1":"h5fs5mea"}:null,d==="white-50"?{"color-1":"hcekrtk9"}:null),children:a.children})}h.defaultProps={color:"inherit"};h.examples=[{title:"Typography",render:function(){var a;return(a=b("React")).jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.jsx(h,{style:"headline",children:"Headline - Bold"}),a.jsx(h,{style:"title-large",children:"Title - Large Bold"}),a.jsx(h,{style:"title-small",children:"Title - Small Semibold"}),a.jsx(h,{style:"button-large",children:"Button - Large"}),a.jsx(h,{style:"button-small",children:"Button - Small"}),a.jsx(h,{style:"button-very-small",children:"Button - Very Small"}),a.jsx(h,{style:"bubble-label",children:"Label - Underneath a circular image"}),a.jsx(h,{style:"bubble-sublabel",children:"Sublabel - underneath a bubble label"}),a.jsx(h,{style:"body-medium-semibold",children:"Body - Medium Semibold"}),a.jsx(h,{style:"body-medium",children:"Body - Medium"}),a.jsx(h,{style:"body-small",children:"Body - Small"})]})}},{title:"Typography: Wrapping",render:function(){return b("React").jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[b("React").jsx(h,{style:"headline",children:"Headers and most other text styles don't wrap"}),b("React").jsx(h,{style:"body-medium",children:"Body styles do wrap: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."})]})}}];e.exports=h}),null);
__d("VFWebAddPeopleTray.react",["cx","FluxContainer","React","ScrollableArea.react","VFRTCCallStore","VFWebAddMemberWarning.react","VFWebAppFluxStore","VFWebListTraySearchBar.react","VFWebListTraySearchResults.react","VFWebMaxCallMemberWarning.react","VFWebModal.react","VFWebPeopleInCall.react","VFWebStrings","VFWebSupportUtils","VFWebText.react","VFWebTrayLabel.react","immutable","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(a=b("VFWebModal.react")).Body,j=a.Button,k=a.Dialog,l=a.Footer,m=a.Header,n=a.Sheet,o=7;(h||(h=b("stylex"))).inject(".sl27f92c{justify-content:space-between}",1);h.inject(".i85zmo3j{align-items:center}",1);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={searchQuery:null,remoteUsers:b("immutable").Set(),maxRemoteUsersReached:!1},d.searchDataSource=new(b("VFWebListTraySearchResults.react").DataSource)({includeGroups:!1}),d.$5=function(a){d.setState({searchQuery:a})},d.$3=function(){d.setState({searchQuery:null})},d.$4=function(){d.setState({searchQuery:""})},d.$1=function(a){d.containerDiv&&a.target instanceof Node&&!d.containerDiv.contains(a.target)&&d.$3()},d.$2=function(a){d.state.searchQuery==null&&d.setState({searchQuery:""})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("VFRTCCallStore")]};c.calculateState=function(a){var c=b("VFRTCCallStore").getState().remoteUsers;return babelHelpers["extends"]({},a,{remoteUsers:c,maxRemoteUsersReached:c.size>=o})};var d=c.prototype;d.componentDidMount=function(){this.searchDataSource.setQuery(""),document.addEventListener("click",this.$1,!1),document.addEventListener("keypress",this.$2,!0)};d.componentWillUnmount=function(){document.removeEventListener("click",this.$1,!1),document.removeEventListener("keypress",this.$2,!0)};d.render=function(){var a=this.state,c=a.searchQuery,d=a.maxRemoteUsersReached;a=a.remoteUsers;var e=c!=null&&c.length>0,f=null;c!=null&&a.size>1&&(f=b("React").jsx(b("VFWebAddMemberWarning.react"),{}));var g=navigator.platform==="Win32"?k:n,h=e?"vfweb_add_people_tray_search":"vfweb_add_people_tray_suggestions",o=b("React").jsx(b("VFWebTrayLabel.react"),{children:e?b("VFWebStrings").search_results:b("VFWebStrings").suggested_search_results});a=b("VFWebSupportUtils").showAddPeopleTrayV2()?b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("VFWebPeopleInCall.react"),{surface:"vfweb_add_people_tray"}),a.size>1&&b("React").jsx(b("VFWebAddMemberWarning.react"),{}),b("React").jsxs(b("ScrollableArea.react"),{tabIndex:0,children:[b("React").jsx(b("VFWebTrayLabel.react"),{children:e?b("VFWebStrings").search_results:b("VFWebStrings").suggested_search_results}),b("React").jsx(b("VFWebListTraySearchResults.react"),{dataSource:this.searchDataSource,searchQuery:c||"",resultButtonMode:"invite",surface:h,showLimitedContextMenu:!0,maxRemoteUsersReached:d})]})]}):b("React").jsxs(b("React").Fragment,{children:[f,c!=null&&o,b("React").jsx(b("ScrollableArea.react"),{tabIndex:0,children:c!=null?b("React").jsx(b("VFWebListTraySearchResults.react"),{dataSource:this.searchDataSource,searchQuery:c,resultButtonMode:"invite",surface:h,showLimitedContextMenu:!0,maxRemoteUsersReached:d}):b("React").jsx(b("VFWebPeopleInCall.react"),{surface:"vfweb_add_people_tray"})})]});return b("React").jsxs(g,{children:[b("React").jsxs(m,{className:"i85zmo3j sl27f92c",children:[b("React").jsx(b("VFWebText.react"),{style:"title-large",children:b("VFWebStrings").in_this_call_label}),b("React").jsx(b("VFWebMaxCallMemberWarning.react"),{className:d?"":"_87ux"})]}),b("React").jsxs(i,{height:"full",padding:"none",children:[b("React").jsx(b("VFWebListTraySearchBar.react"),{disableSearch:this.$3,enableSearch:this.$4,isFocused:c!=null,searchQuery:c||"",placeholder:b("VFWebStrings").search_placeholder_roster,surface:"vfweb_add_people_tray",updateSearchQuery:this.$5}),a]}),b("React").jsx(l,{children:b("React").jsx(j,{use:"confirm",label:"Done",onClick:b("VFWebAppFluxStore").removeOverlayModal})})]})};return c}(b("React").Component);e.exports=b("FluxContainer").create(c)}),null);
__d("VFRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO",FHD_IDEAL_LQ_REQUIRED_VIDEO:"FHD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20}),l=Object.freeze({ATTRIBUTE_SEND_ONLY:"sendonly",ATTRIBUTE_RECV_ONLY:"recvonly",ATTRIBUTE_SEND_RECV:"sendrecv",ATTRIBUTE_INACTIVE:"inactive"}),m=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout"],n=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),o=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),p=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var q=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),r=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"}),s=Object.freeze({LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"});p={CallBlockingConstants:p,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:n,GroupVideoViewLayout:r,IncomingCallDialogTypes:b,Orientation:s,PayloadType:a,RTCConstraints:j,SignalingProtocol:q,StreamType:h,TransceiverDirection:l,UIEventType:o,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return m.indexOf(a)},callEndReasonString:function(a){a=m[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=p}),null);
__d("VFWebContextMenu",["fbt","regeneratorRuntime","URI","VFDesktopHelper","VFRTCCallStore","VFRTCConstants","VFWebBlockUserMutation","VFWebCallUtils","VFWebLogger","VFWebStrings","XMessengerDotComMainController","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("VFRTCConstants").SignalingProtocol,j={type:"separator"};a={showForUser:function(a){var c=a.surface,d=a.fbid,e=a.name,f=a.isBlocked,g=a.profileUrl;a=a.showLimitedContextMenu;if(f){b("VFDesktopHelper").openContextMenu([p(d)]);return}Boolean(a)?b("VFDesktopHelper").openContextMenu([m(c,d,e),n(c,g)]):b("VFDesktopHelper").openContextMenu([l(c,[d],e,"audio"),l(c,[d],e,"video"),m(c,d,e),j,n(c,g),o(d,e)])},showForGroup:function(a){var c=a.surface,d=a.usersToRing,e=a.groupName;a=a.thread;b("VFDesktopHelper").openContextMenu([l(c,d,e,"audio",a),l(c,d,e,"video",a),m(c,a.id,e)])},showForOngoingCall:function(a){var c=a.surface,d=a.usersToRing,e=a.groupName,f=a.conferenceName;a=a.thread;f!=null&&b("VFDesktopHelper").openContextMenu([k(c,d,f,"video",a),m(c,a.id,e)])}};function k(a,c,d,e,f){return{label:b("VFWebStrings").join_ongoing_call,click:function(){b("VFWebLogger").logClick(a,"vfweb_context_menu",{event_extra:{context_menu_action:"video"}}),b("VFWebCallUtils").joinOngoingCall({conferenceName:d,initializeVideo:!0,signalingProtocol:i.MULTIWAY,endCurrentCall:!0,remoteUserFBIDs:c,thread:f})}}}function l(a,c,d,e,f){var g=c.length!==1||b("VFWebCallUtils").canStartOneOnOneCallWithUser(c[0],b("VFRTCCallStore").getState().remoteUsers);return{label:e==="audio"?b("VFWebStrings").start_audio_call(d):b("VFWebStrings").start_video_call(d),click:function(){b("VFWebLogger").logClick(a,"vfweb_context_menu",{event_extra:{context_menu_action:e}}),b("VFWebCallUtils").placeOutgoingCall({usersToRing:c,thread:{id:f==null?void 0:f.id,name:f==null?void 0:f.name,imageUri:f==null?void 0:f.imageUri},isAudioCall:e==="audio",trigger:"dvc_ring_button"})},enabled:g}}function m(a,c,d){return{label:b("VFWebStrings").message(d),click:function(){b("VFWebLogger").logClick(a,"vfweb_context_menu",{event_extra:{context_menu_action:"chat"}}),r(c)}}}function n(a,c){return c==null?{label:b("VFWebStrings").open_facebook_profile,enabled:!1}:{label:b("VFWebStrings").open_facebook_profile,click:function(){b("VFWebLogger").logClick(a,"vfweb_context_menu",{event_extra:{context_menu_action:"profile"}}),q(c)}}}function o(a,c){return{label:b("VFWebStrings").block_calls,click:function(){return b("promiseDone")(s(a,c))}}}function p(a){return{label:b("VFWebStrings").unblock_calls,click:function(){return t(a)}}}function q(a){a=new(h||(h=b("URI")))(a).setDomain("www.facebook.com");h.goURIOnNewWindow(a)}function r(a){a=b("XMessengerDotComMainController").getURIBuilder().setString("thread_key",a).getURI();(h||(h=b("URI"))).goURIOnNewWindow(a)}function s(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showMessageBox({title:g._("Ch\u1eb7n tr\u00ean Messenger"),type:"warning",message:g._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n ch\u1eb7n {name of the person to block} tr\u00ean Messenger kh\u00f4ng?",[g._param("name of the person to block",c)]),detail:g._("{bullet 1} {person name 1} s\u1ebd kh\u00f4ng b\u1ecb ch\u1eb7n tr\u00ean Facebook.{new line 1}{bullet 2} B\u1ea1n s\u1ebd kh\u00f4ng nh\u1eadn \u0111\u01b0\u1ee3c tin nh\u1eafn hay cu\u1ed9c g\u1ecdi c\u1ee7a {person name 2}. B\u1ea1n s\u1ebd kh\u00f4ng nh\u1eadn \u0111\u01b0\u1ee3c m\u1ecdi tin nh\u1eafn m\u00e0 {person name 3} g\u1eedi trong th\u1eddi gian ch\u1eb7n.{new line 2}{bullet 3} B\u1ea1n v\u00e0 {person name 4} s\u1ebd c\u00f3 th\u1ec3 nh\u00ecn th\u1ea5y, nh\u1eafn tin v\u00e0 g\u1ecdi \u0111i\u1ec7n cho nhau trong c\u00e1c nh\u00f3m chung, tr\u1eeb khi b\u1ea1n r\u1eddi kh\u1ecfi nh\u00f3m.",[g._param("bullet 1","\u2022"),g._param("person name 1",c),g._param("new line 1","\n"),g._param("bullet 2","\u2022"),g._param("person name 2",c),g._param("person name 3",c),g._param("new line 2","\n"),g._param("bullet 3","\u2022"),g._param("person name 4",c)]),buttons:[g._("Ch\u1eb7n"),g._("H\u1ee7y")]})["catch"](function(){return{response:0}}));case 2:d=f.sent;e=d.response;if(!(e===0)){f.next=7;break}f.next=7;return b("regeneratorRuntime").awrap(b("VFWebBlockUserMutation")(a,!0));case 7:case"end":return f.stop()}},null,this)}function t(a){b("promiseDone")(b("VFWebBlockUserMutation")(a,!1))}e.exports=a}),null);
__d("VFWebProfileImage.react",["Image.react","React","joinClasses","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".p9wrh9lq{object-fit:cover}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".jcxyg2ei{justify-content:center}",1);g.inject(".pwojg24b{background-color:var(--fds-white-alpha-20)}",1);g.inject(".cpz3zgq0{color:var(--fds-white-alpha-30)}",1);g.inject(".nqy9ujzi{background-color:var(--fds-black-alpha-20)}",1);g.inject(".n7hr3tvk{color:var(--fds-black-alpha-30)}",1);g.inject(".hpj0pwwo{font-size:1.0625rem}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={imageHasError:!Boolean(c.props.imageUri)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a){this.props.imageUri!==a.imageUri&&this.setState({imageHasError:!Boolean(this.props.imageUri)})};d.render=function(){var a=this,c=this.props,d=c.className,e=c.fallbackColor,f=c.fallbackText,h=c.fallbackTextSize;c=c.imageUri;return this.state.imageHasError?b("React").jsx("div",{className:b("joinClasses")(d,(g||(g=b("stylex"))).dedupe({"object-fit-1":"p9wrh9lq"},{"align-items-1":"i85zmo3j","display-1":"alzwoclg","justify-content-1":"jcxyg2ei"},e==="white"||!Boolean(e)?{"background-color-1":"pwojg24b","color-1":"cpz3zgq0"}:null,e==="black"?{"background-color-1":"nqy9ujzi","color-1":"n7hr3tvk"}:null,h===17||!Boolean(h)?{"font-size-1":"hpj0pwwo"}:null,h===13?{"font-size-1":"nfkogyam"}:null)),children:f}):b("React").jsx(b("Image.react"),{draggable:"false",src:c,className:b("joinClasses")(d,"p9wrh9lq"),onError:function(){a.setState({imageHasError:!0})}})};return c}(b("React").Component);e.exports=a}),null);
__d("VFWebSelectedProfileBubble.react",["ClickableArea.react","React","VFWebButton.react","VFWebIcon.react","VFWebProfileImage.react","VFWebText.react","joinClasses","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useState;(g||(g=b("stylex"))).inject(".alzwoclg{display:flex}",1);g.inject(".cqf1kptm{flex-direction:column}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".dikzu8ld{max-width:50px}",1);g.inject(".bis24fgy{width:40px}",1);g.inject(".om3e55n1{position:relative}",1);g.inject(".s79yelyc{margin-bottom:3px}",1);g.inject(".mfclru0v{width:100%}",1);g.inject(".pytsy3co{height:100%}",1);g.inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");g.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");g.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");g.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");g.inject(".nq2b4knc{height:40px}",1);g.inject(".esb1y2to{max-width:40px}",1);g.inject(".lq84ybu9{overflow-x:hidden}",1);g.inject(".hf30pyar{overflow-y:hidden}",1);g.inject(".bis24fgy{width:40px}",1);g.inject(".hqfru6jp{background-color:var(--fds-black)}",1);g.inject(".prpcwt51{top:1px}",1);g.inject(".dmdr2h6l{height:20px}",1);g.inject(".qqazbg9i{left:29px}",1);g.inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");g.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");g.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");g.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");g.inject(".s8sjc6am{position:absolute}",1);g.inject(".kgzac55p{width:20px}",1);g.inject(".s8sjc6am{position:absolute}",1);g.inject(".ekq1a7f9{top:0}",1);g.inject(".buh8m867{left:0}",1);g.inject(".bis24fgy{width:40px}",1);g.inject(".nq2b4knc{height:40px}",1);g.inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");g.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");g.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");g.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");g.inject(".alzwoclg{display:flex}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".jcxyg2ei{justify-content:center}",1);g.inject(".sfrfs97y{background-color:var(--fds-black-alpha-50)}",1);function a(a){__p&&__p();var c=a.className,d=a.userName,e=a.userProfileUri,f=a.onDelete,g=a.isGreyedOut,i=a.overlayIcon,j=a.showIconOnlyOnHover,k=a.onClick;a=a.subLabel;var l=h(!1),m=l[0],n=l[1];l=function(){return n(!0)};var o=function(){return n(!1)};m=(m||!j)&&i!=null||g;return b("React").jsxs("div",{className:b("joinClasses")(c,"bis24fgy dikzu8ld i85zmo3j cqf1kptm alzwoclg"),children:[b("React").jsx(b("ClickableArea.react"),{onClick:function(){k&&k()},children:b("React").jsxs("div",{className:"s79yelyc om3e55n1",onMouseEnter:l,onMouseLeave:o,children:[b("React").jsx("div",{className:"bis24fgy hf30pyar lq84ybu9 esb1y2to nq2b4knc nmlomj2f qwcclf47 e7u6y3za qmqpeqxj",children:b("React").jsx(b("VFWebProfileImage.react"),{className:"pytsy3co mfclru0v",imageUri:e,fallbackText:d!=null?d.charAt(0):null})}),f&&b("React").jsx("span",{className:"kgzac55p s8sjc6am nmlomj2f qwcclf47 e7u6y3za qmqpeqxj qqazbg9i dmdr2h6l prpcwt51 hqfru6jp",children:b("React").jsx(b("VFWebButton.react"),{size:20,icon:"cross",label:"close",onClick:f})}),m&&b("React").jsx("div",{className:"sfrfs97y jcxyg2ei i85zmo3j alzwoclg nmlomj2f qwcclf47 e7u6y3za qmqpeqxj nq2b4knc bis24fgy buh8m867 ekq1a7f9 s8sjc6am",children:i})]})}),b("React").jsx(b("VFWebText.react"),{style:"bubble-label",color:"white",children:d}),a!=null&&a!==""&&b("React").jsx(b("VFWebText.react"),{style:"bubble-sublabel",color:"white-50",children:a})]})}a.defaultProps={showIconOnlyOnHover:!0,isGreyedOut:!1};e.exports=a}),null);
__d("VFWebProfileBubbleArea.react",["cx","React","ReactCSSTransitionGroup","ScrollableArea.react","VFWebSelectedProfileBubble.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=2,j=16,k=6;(h||(h=b("stylex"))).inject(".c5yx2vzt{margin-right:28px}",1);h.inject(".p8bdhjjv{margin-bottom:16px}",1);h.inject(".qjfq86k5{margin-bottom:12px}",1);h.inject(".alzwoclg{display:flex}",1);h.inject(".hael596l{align-items:flex-start}",1);h.inject(".jl2a5g8c{flex-direction:row}",1);h.inject(".o7bt71qk{flex-wrap:wrap}",1);h.inject(".lq84ybu9{overflow-x:hidden}",1);h.inject(".hf30pyar{overflow-y:hidden}",1);h.inject(".q5qw6xdq{padding-left:16px}",1);h.inject(".pdh8n9ve{width:414px}",1);h.inject(".ole4ycd0{transition:height .3s ease}",.1);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.scrollEndRef=b("React").createRef(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a){a=b("React").Children.count(a.children);var c=b("React").Children.count(this.props.children),d=this.scrollEndRef.current;a<c&&c>k*i&&d!=null&&d.scrollIntoView({behavior:"smooth"})};d.render=function(){var a=this.props,c=a.children,d=a.userBubbleHeight,e=a.useAutoHeight;a=b("React").Children.count(c);var f=Math.ceil(a/k);return b("React").jsx("div",{className:a>0?"qjfq86k5":"",children:b("React").jsxs(b("ScrollableArea.react"),{maxHeight:this.$1(i,d),children:[b("React").jsx("div",{style:{height:Boolean(e)?"auto":this.$1(f,d)},className:"pdh8n9ve q5qw6xdq hf30pyar lq84ybu9 o7bt71qk jl2a5g8c hael596l alzwoclg"+(f<=i?" ole4ycd0":""),children:b("React").jsx(b("ReactCSSTransitionGroup"),{transitionName:{enter:"_7t0x",enterActive:"_7t0y",leave:"_7t0z",leaveActive:"_7t0-"},transitionEnterTimeout:150,transitionLeaveTimeout:150,component:b("React").Fragment,children:b("React").Children.map(c,function(a,c){c=c>=(f-1)*k;c="c5yx2vzt"+(!Boolean(e)||!c?" p8bdhjjv":"");return b("React").cloneElement(a,{className:c})})})}),b("React").jsx("div",{ref:this.scrollEndRef})]})})};d.$1=function(a,b){return a===0?0:a*(j+b)-j};return c}(b("React").Component);e.exports=a}),null);
__d("VFWebCreateGroupCallTray.react",["invariant","React","ScrollableArea.react","VFWebAppFluxStore","VFWebCallUtils","VFWebListTraySearchBar.react","VFWebListTraySearchResults.react","VFWebLogger","VFWebModal.react","VFWebProfileBubbleArea.react","VFWebSelectedProfileBubble.react","VFWebStrings","VFWebText.react","VFWebTrayLabel.react","immutable","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(a=b("VFWebModal.react")).Body,j=a.Button,k=a.Footer,l=a.Header,m=a.Sheet;(h||(h=b("stylex"))).inject(".rl78xhln{padding-bottom:0}",1);var n=63;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={searchQuery:null,selectedUsersForGroupCall:b("immutable").OrderedMap()},d.searchDataSource=new(b("VFWebListTraySearchResults.react").DataSource)({includeGroups:!1}),d.$3=function(a){d.setState({searchQuery:a})},d.$1=function(){d.setState({searchQuery:null})},d.$2=function(){d.setState({searchQuery:""})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c,d=this.state,e=d.searchQuery;d=d.selectedUsersForGroupCall;return(c=b("React")).jsxs(m,{children:[c.jsx(l,{className:"rl78xhln",children:c.jsx(b("VFWebText.react"),{style:"title-large",children:b("VFWebStrings").start_new_group_call_label})}),c.jsxs(i,{height:"full",padding:"none",children:[c.jsx(b("VFWebListTraySearchBar.react"),{disableSearch:this.$1,enableSearch:this.$2,isFocused:e!=null,searchQuery:e||"",placeholder:b("VFWebStrings").search_placeholder,surface:"vfweb_create_group_call_tray",updateSearchQuery:this.$3}),b("React").jsx(b("VFWebProfileBubbleArea.react"),{userBubbleHeight:n,children:d.mapEntries(function(c){var d=c[0];c=c[1];return[d,b("React").jsx(b("VFWebSelectedProfileBubble.react"),{userName:c.userName,userProfileUri:c.userProfileUri,onDelete:function(){return a.$4(d)}},d)]}).toArray()}),b("React").jsxs(b("ScrollableArea.react"),{tabIndex:"0",children:[b("React").jsx(b("VFWebTrayLabel.react"),{children:e!=null&&e!==""?b("VFWebStrings").search_results:b("VFWebStrings").suggested_search_results}),b("React").jsx(b("VFWebListTraySearchResults.react"),{dataSource:this.searchDataSource,searchQuery:e||"",resultButtonMode:"toggle",surface:"vfweb_create_group_call_tray",showRemoteUsersInResults:!0,onToggleUser:function(b,c,d,e){b?a.$5(c,d,e):a.$4(c)},selectedUsers:b("immutable").Set.fromKeys(d)})]})]}),b("React").jsxs(k,{children:[b("React").jsx(j,{use:"button",label:b("VFWebStrings").cancel,onClick:b("VFWebAppFluxStore").removeOverlayModal}),b("React").jsx(j,{use:"confirm",disabled:d.isEmpty(),label:b("VFWebStrings").call,icon:"phone",onClick:function(){return a.$6("audio")}}),b("React").jsx(j,{use:"confirm",disabled:d.isEmpty(),label:b("VFWebStrings").video_chat,icon:"camcorder",onClick:function(){return a.$6("video")}})]})]})};d.componentDidMount=function(){this.searchDataSource.setQuery("")};d.$5=function(a,c,d){b("VFWebLogger").logClick("vfweb_create_group_call_tray","vfweb_select_user"),this.setState(function(b){return{selectedUsersForGroupCall:b.selectedUsersForGroupCall.set(a,{userName:c,userProfileUri:d})}})};d.$4=function(a){b("VFWebLogger").logClick("vfweb_create_group_call_tray","vfweb_deselect_user"),this.setState(function(b){return{selectedUsersForGroupCall:b.selectedUsersForGroupCall["delete"](a)}})};d.$6=function(a){var c=this.state.selectedUsersForGroupCall.keySeq().toArray();c.length>0||g(0,14558);b("VFWebAppFluxStore").removeOverlayModal();a=a==="audio";b("VFWebLogger").logClick("vfweb_create_group_call_tray",a?"vfweb_call_place_audio":"vfweb_call_place",{event_extra:{initial_users_for_call:""+c.length}});b("VFWebCallUtils").placeOutgoingCall({usersToRing:c,thread:{id:null},isAudioCall:a,trigger:"dvc_ring_button"})};return c}(b("React").Component);e.exports=c}),null);
__d("VFWebGroupProfile.react",["React","VFWebProfileImage.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".om3e55n1{position:relative}",1);g.inject(".j9a9igkc{width:50px}",1);g.inject(".laml0ql6{height:50px}",1);g.inject(".iryl7rsq{width:32px}",1);g.inject(".h7q9eq3y{height:32px}",1);g.inject(".s8sjc6am{position:absolute}",1);g.inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");g.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");g.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");g.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");g.inject(".z6erz7xo{bottom:0}",1);g.inject(".buh8m867{left:0}",1);g.inject(".ekq1a7f9{top:0}",1);g.inject(".ql1abi13{right:0}",1);g.inject(".lsducnvl{clip-path:url(#vfwSecondAvatar50)}",1);var h=b("React").jsx("svg",{width:"50",height:"50",children:b("React").jsxs("defs",{children:[b("React").jsx("path",{id:"vfwSecondAvatarPath40",d:"M14.97 26 C14.47 17.96, 8.04 11.53, 0 11.03 L0 0 L26 0 L26 26 L14.97 26 Z",fill:"black"}),b("React").jsx("clipPath",{id:"vfwSecondAvatar50",transform:"scale(1.25)",children:b("React").jsx("use",{xlinkHref:"#vfwSecondAvatarPath40"})})]})});function i(a){a=a.profiles;var c=a[0];a=a[1];return b("React").jsxs("div",{className:"laml0ql6 j9a9igkc om3e55n1",children:[b("React").jsx(b("VFWebProfileImage.react"),{className:"nmlomj2f qwcclf47 e7u6y3za qmqpeqxj s8sjc6am h7q9eq3y iryl7rsq buh8m867 z6erz7xo",fallbackText:j(c),fallbackTextSize:13,imageUri:c==null?void 0:c.imageUri}),b("React").jsx(b("VFWebProfileImage.react"),{className:"nmlomj2f qwcclf47 e7u6y3za qmqpeqxj s8sjc6am h7q9eq3y iryl7rsq lsducnvl ql1abi13 ekq1a7f9",fallbackText:j(a),fallbackTextSize:13,imageUri:a==null?void 0:a.imageUri}),h]})}function j(a){a=a==null?void 0:a.userName;return a!=null?a.charAt(0):null}i.examples=[{title:"Profile picture for group",render:function(){return b("React").jsx("div",{children:b("React").jsx(i,{profiles:[{userName:"One",imageUri:"https://via.placeholder.com/52/f557d3/ffffff?text=1"},{userName:"Two",imageUri:"https://via.placeholder.com/52/57b8f5/ffffff?text=2"}]})})}}];e.exports=i}),null);
__d("VFWebListItem.react",["ClickableArea.react","React","emptyFunction","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useState;(g||(g=b("stylex"))).inject(".alzwoclg{display:flex}",1);g.inject(".c7y9u1f0{flex-grow:0}",1);g.inject(".jez8cy9q{flex-shrink:0}",1);g.inject(".cqf1kptm{flex-direction:column}",1);g.inject(".f9xcifuu{padding-top:6px}",1);g.inject(".r227ecj6{padding-right:16px}",1,".r227ecj6{padding-left:16px}");g.inject(".bmgto6uh{padding-bottom:6px}",1);g.inject(".gt60zsk1{padding-left:16px}",1,".gt60zsk1{padding-right:16px}");g.inject(".bdao358l{box-sizing:border-box}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".jl2a5g8c{flex-direction:row}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".ba049txn{background-color:var(--fds-white-alpha-10)}",1);g.inject(".laatuukc{margin-bottom:4px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".cgu29s5g{flex-grow:1}",1);g.inject(".jl2a5g8c{flex-direction:row}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".k88nbmki{align-self:stretch}",1);g.inject(".aeinzg81{min-width:0}",1);g.inject(".d1pn00lf{margin-left:12px}",1);g.inject(".alzwoclg{display:flex}",1);g.inject(".cgu29s5g{flex-grow:1}",1);g.inject(".i15ihif8{flex-shrink:1}",1);g.inject(".cqf1kptm{flex-direction:column}",1);g.inject(".aeinzg81{min-width:0}",1);g.inject(".k1z55t6l{font-size:0.9375rem}",1);g.inject(".igjjae4c{font-weight:bold}",1);g.inject(".oog5qr5w{line-height:1.3333}",1);g.inject(".lq84ybu9{overflow-x:hidden}",1);g.inject(".hf30pyar{overflow-y:hidden}",1);g.inject(".oshhggmv{text-overflow:ellipsis}",1);g.inject(".qm54mken{white-space:nowrap}",1);g.inject(".m6d5ke1c{color:var(--fds-white)}",1);g.inject(".aeinzg81{min-width:0}",1);g.inject(".l3gxykhd{margin-bottom:2px}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".qc63is0g{line-height:1.1538}",1);g.inject(".lq84ybu9{overflow-x:hidden}",1);g.inject(".hf30pyar{overflow-y:hidden}",1);g.inject(".oshhggmv{text-overflow:ellipsis}",1);g.inject(".qm54mken{white-space:nowrap}",1);g.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);g.inject(".aeinzg81{min-width:0}",1);g.inject(".l3od1t61{margin-left:1px}",1);g.inject(".d1pn00lf{margin-left:12px}",1);g.inject(".plzdoh0l{display:none}",1);function i(a){var c=a.subtitle==null?null:b("React").jsx("div",{className:"l3od1t61 aeinzg81 hcekrtk9 qm54mken oshhggmv hf30pyar lq84ybu9 qc63is0g nfkogyam",children:a.subtitle}),d=a.title==null?null:b("React").jsx("div",{className:"l3gxykhd aeinzg81 m6d5ke1c qm54mken oshhggmv hf30pyar lq84ybu9 oog5qr5w igjjae4c k1z55t6l",children:a.title}),e=h(!1),f=e[0],g=e[1];e=function(){return g(!0)};var i=function(){return g(!1)};f=a.showAuxOnlyOnHover&&!f;return b("React").jsx(b("ClickableArea.react"),{onClick:a.onClick||b("emptyFunction"),children:b("React").jsx("div",{className:"bdao358l gt60zsk1 bmgto6uh r227ecj6 f9xcifuu cqf1kptm jez8cy9q c7y9u1f0 alzwoclg"+(a.isLast?" laatuukc":"")+(a.alwaysHighlighted?" ba049txn":""),onMouseEnter:e,onMouseLeave:i,onContextMenu:a.onContextMenu,children:b("React").jsxs("div",{className:"i85zmo3j jl2a5g8c alzwoclg",children:[b("React").jsx("div",{children:a.icon}),b("React").jsxs("div",{className:"d1pn00lf aeinzg81 k88nbmki i85zmo3j jl2a5g8c cgu29s5g alzwoclg",children:[b("React").jsxs("div",{className:"aeinzg81 cqf1kptm i15ihif8 cgu29s5g alzwoclg",children:[d,c]}),b("React").jsx("div",{className:"d1pn00lf"+(f?" plzdoh0l":""),children:a.aux})]})]})})})}i.defaultProps={showAuxOnlyOnHover:!1,alwaysHighlighted:!1};var j=function(a){return b("React").jsx("div",{style:{backgroundColor:"#777",width:a,height:a,borderRadius:"50%"}})};i.examples=[{title:"List item with image and title",render:function(){var a;return(a=b("React")).jsxs("div",{children:[a.jsx(i,{icon:j(50),title:"Planet Express"}),a.jsx(i,{icon:j(50),title:"Planet Express",subtitle:"42 minutes ago"}),a.jsx(i,{icon:j(50),title:"The Planet Express: Hover this to see hidden aux",subtitle:"42 minutes ago",aux:j(32),showAuxOnlyOnHover:!0}),a.jsx(i,{icon:j(50),title:"This item is always highlighted",subtitle:"42 minutes ago",alwaysHighlighted:!0}),a.jsx(i,{icon:j(50),title:"The last Planet Express",subtitle:"42 minutes ago",aux:j(32),isLast:!0})]})}}];e.exports=i}),null);
__d("VFWebUserProfile.react",["cx","fbt","React","VFWebIcon.react","VFWebProfileImage.react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;(i||(i=b("stylex"))).inject(".mfclru0v{width:100%}",1);i.inject(".pytsy3co{height:100%}",1);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.fallbackColor,d=a.userName,e=a.userProfileUri,f=a.showShimmer,g=a.isProfileButton;a=a.profileSize;var i=Boolean(this.props.isOnline),j=b("React").jsx("div",{className:"_6j1l"+(a===32?" _7sq7":"")+(a===40?" _7sq8":"")+(a===50?" _7sq9":""),"aria-label":h._("\u0110ang ho\u1ea1t \u0111\u1ed9ng")});f=f===!0?b("React").jsx("div",{className:"_2upd _70w2"}):b("React").jsx(b("VFWebProfileImage.react"),{className:"pytsy3co mfclru0v",imageUri:e,fallbackColor:c,fallbackText:d!=null?d.charAt(0):null});return b("React").jsxs("div",{className:"_6jkp",children:[b("React").jsx("div",{className:"_2ug5"+(a===32?" _7sqa":"")+(a===40?" _7sqo":"")+(a===50?" _7sqp":"")+(i?" _6j2j":"")+(i&&a===32?" _7sqq":"")+(i&&a===40?" _7sqr":"")+(i&&a===50?" _7sqs":""),children:g==null?f:b("React").jsxs(b("React").Fragment,{children:[f,b("React").jsx("div",{className:"_7byj",children:b("React").jsx(b("VFWebIcon.react"),{glyph:"settings",size:28,color:"white"})})]})}),i===!0?j:null]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("VFWebGroupItem.react",["React","RelayModern","VFWebGroupProfile.react","VFWebListItem.react","VFWebListItemCallControls.react","VFWebUserProfile.react","VFWebGroupItem_messageThread.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a,c,d,e=this.props.messageThread;a=e==null?void 0:(a=e.thread_key)==null?void 0:a.thread_fbid;if(a==null)return null;c=(((c=e.other_participants)==null?void 0:c.edges)||[]).map(function(a){return a.node}).filter(Boolean).map(function(a){return a.messaging_actor});var f=c.map(function(a){return a&&a.name}).filter(Boolean).join(", "),g=c.map(function(a){return a&&a.id}).filter(Boolean);d=((d=e.image)==null?void 0:d.uri)?b("React").jsx(b("VFWebUserProfile.react"),{userProfileUri:(d=e.image)==null?void 0:d.uri,userName:e.name,profileSize:50}):b("React").jsx(b("VFWebGroupProfile.react"),{profiles:c.filter(Boolean).map(function(a){var b;return{imageUri:(b=a.profile_picture)==null?void 0:b.uri,userName:a.name}})});a=a===this.props.currentCallThreadId?null:b("React").jsx(b("VFWebListItemCallControls.react"),{thread:{id:a,imageUri:(a=(c=e.image)==null?void 0:c.uri)!=null?a:null,name:(c=e.name)!=null?c:null},usersToRing:g,surface:this.props.surface});c=e.name?{title:e.name,subtitle:f}:{title:f,subtitle:null};g=c.title;e=c.subtitle;return b("React").jsx(b("VFWebListItem.react"),{icon:d,title:g,subtitle:e,aux:a,showAuxOnlyOnHover:!0})};return c}(b("React").Component);e.exports=a(c,{messageThread:function(){return b("VFWebGroupItem_messageThread.graphql")}})}),null);
__d("VFWebListItemCallControls.react",["cx","React","VFWebRingButton.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").jsxs("div",{className:"_7g6f",children:[b("React").jsx(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create",isAudioCall:!0},a)),b("React").jsx(b("VFWebRingButton.react"),babelHelpers["extends"]({mode:"create"},a))]})}e.exports=a}),null);
__d("VFWebSearchInput.react",["cx","AbstractTextInput.react","React","VFWebButton.react","VFWebIcon.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={inputFieldFocused:!1},d.inputField=b("React").createRef(),d.$1=function(){d.setState({inputFieldFocused:!0});var a=d.props.onFocus;a&&a()},d.$2=function(){d.setState({inputFieldFocused:!1});var a=d.props.onBlur;a&&a()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this.props.isFocused,b=this.inputField.current;a&&b&&b.focusInput()};d.componentDidUpdate=function(a){var b=this.props.isFocused,c=this.inputField.current;if(b==null||!c)return;if(a.isFocused===b)return;b?c.focusInput():c.blurInput()};d.render=function(){return b("React").jsx("div",{className:b("joinClasses")(this.props.className,"_4-3c"),children:b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_6m4o"+(this.props.isFocused||!!this.props.value?" _2luq":"")+(this.state.inputFieldFocused?" _7-18":"")+(this.props.isFocused?"":" _2lup")),role:"search",children:[b("React").jsx(b("VFWebIcon.react"),{className:"_76ah",glyph:"magnifying-glass",size:20}),b("React").jsx(b("AbstractTextInput.react"),{ref:this.inputField,className:"_2qaw",onFocus:this.$1,onBlur:this.$2,onChange:this.props.onChange,onClick:this.props.onClick,onEnter:this.props.onEnter,onKeyUp:this.props.onKeyUp,placeholder:this.props.placeholder,value:this.props.value,disabled:this.props.isDisabled}),b("React").jsx("div",{className:(this.props.isFocused?"":"hidden_elem")+" _2lv8",children:b("React").jsx(b("VFWebButton.react"),{size:20,icon:"cross",use:"inverted",label:"Clear Search",onClick:this.props.onClear})})]})})};return c}(b("React").Component);e.exports=a}),null);
__d("VFWebListTraySearchBar.react",["cx","invariant","Keys","React","VFWebLogger","VFWebSearchInput.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a.target instanceof HTMLInputElement||h(0,1185);a=a.target.value;var b=d.props.updateSearchQuery;b&&b(a)},d.$2=function(){b("VFWebLogger").logClick(d.props.surface,"vfweb_search_input"),d.props.enableSearch()},d.$3=function(a){a.keyCode===b("Keys").ESC&&d.props.disableSearch()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("VFWebSearchInput.react"),{className:this.props.isBlurred?"_70w1":"",isFocused:this.props.isFocused,placeholder:this.props.placeholder,onChange:this.$1,onFocus:this.$2,onClear:this.props.disableSearch,onKeyUp:this.$3,value:this.props.searchQuery,isDisabled:this.props.isDisabled})};return c}(b("React").Component);e.exports=a}),null);
__d("VFDataSource",["EventEmitter","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$VFDataSource1=b;c.$VFDataSource3=null;c.$VFDataSource4=new Set();c.$VFDataSource2={"":{items:[],loading:!1}};return c}var d=c.prototype;d.setQuery=function(a){__p&&__p();var c=this,d=g(a);if(this.$VFDataSource4.has(d)){this.emit("change");return}var e=this.$VFDataSource5(d);e=this.$VFDataSource2[e].items;var f=e.filter(function(a){return c.$VFDataSource1.isMatchingQuery(a,d)});this.$VFDataSource6(d,{items:f,loading:!0});this.$VFDataSource3!==null&&clearTimeout(this.$VFDataSource3);this.$VFDataSource3=setTimeout(function(){c.$VFDataSource4.add(d),b("promiseDone")(c.$VFDataSource1.fetchData(a).then(function(a){var b=c.$VFDataSource1.getID,e=new Set(f.map(b));a=a.filter(function(a){return!e.has(b(a))});c.$VFDataSource6(d,{items:[].concat(f,a),loading:!1})}))},100)};d.$VFDataSource6=function(a,b){this.$VFDataSource2[a]=b,this.emit("change")};d.getState=function(a){return this.$VFDataSource2[g(a)]};d.$VFDataSource5=function(a){for(var b=a.length-1;b>0;b--){var c=a.substring(0,b);if(this.$VFDataSource2[c])return c}return""};return c}(b("EventEmitter"));function g(a){return a.toLowerCase().trim()}e.exports=a}),null);
__d("VFWebNoContent.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".rxumq3f8{margin-top:50px}",1);g.inject(".h6ft4zvz{padding-top:20px}",1);g.inject(".s9xz0pwp{padding-right:20px}",1,".s9xz0pwp{padding-left:20px}");g.inject(".q6feio67{padding-bottom:20px}",1);g.inject(".c4m0enpj{padding-left:20px}",1,".c4m0enpj{padding-right:20px}");g.inject(".hsphh064{text-align:center}",1);g.inject(".nfkogyam{font-size:0.8125rem}",1);g.inject(".qc63is0g{line-height:1.1538}",1);g.inject(".hcekrtk9{color:var(--fds-white-alpha-50)}",1);function a(a){return b("React").jsx("div",{className:"hcekrtk9 qc63is0g nfkogyam hsphh064 c4m0enpj q6feio67 s9xz0pwp h6ft4zvz rxumq3f8",children:a.message})}e.exports=a}),null);
__d("VFWebCheckbox.react",["React","VFWebIcon.react","cxMargin","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||(g=b("stylex"))).inject(".alzwoclg{display:flex}",1);g.inject(".i85zmo3j{align-items:center}",1);g.inject(".jcxyg2ei{justify-content:center}",1);g.inject(".gvytbark{border-top-width:2px}",.4);g.inject(".hh61tlkm{border-right-width:2px}",.4,".hh61tlkm{border-left-width:2px}");g.inject(".ntrxh2kl{border-bottom-width:2px}",.4);g.inject(".jjmr0tki{border-left-width:2px}",.4,".jjmr0tki{border-right-width:2px}");g.inject(".nho0698i{border-top-color:rgba(255,255,255,.2)}",.4);g.inject(".ggra9ail{border-right-color:rgba(255,255,255,.2)}",.4,".ggra9ail{border-left-color:rgba(255,255,255,.2)}");g.inject(".dqee7tk8{border-bottom-color:rgba(255,255,255,.2)}",.4);g.inject(".ii1x9cjt{border-left-color:rgba(255,255,255,.2)}",.4,".ii1x9cjt{border-right-color:rgba(255,255,255,.2)}");g.inject(".qmqpeqxj{border-top-left-radius:50%}",1,".qmqpeqxj{border-top-right-radius:50%}");g.inject(".e7u6y3za{border-top-right-radius:50%}",1,".e7u6y3za{border-top-left-radius:50%}");g.inject(".qwcclf47{border-bottom-right-radius:50%}",1,".qwcclf47{border-bottom-left-radius:50%}");g.inject(".nmlomj2f{border-bottom-left-radius:50%}",1,".nmlomj2f{border-bottom-right-radius:50%}");g.inject(".s9ok87oh{border-top-style:solid}",.4);g.inject(".s9ljgwtm{border-right-style:solid}",.4,".s9ljgwtm{border-left-style:solid}");g.inject(".lxqftegz{border-bottom-style:solid}",.4);g.inject(".bf1zulr9{border-left-style:solid}",.4,".bf1zulr9{border-right-style:solid}");g.inject(".bdao358l{box-sizing:border-box}",1);g.inject(".mx6bq00g{width:24px}",1);g.inject(".mwtcrujb{height:24px}",1);g.inject(".m8h3af8h{margin-top:0}",1);g.inject(".l7ghb35v{margin-right:0}",1,".l7ghb35v{margin-left:0}");g.inject(".kjdc1dyq{margin-bottom:0}",1);g.inject(".kmwttqpk{margin-left:0}",1,".kmwttqpk{margin-right:0}");g.inject(".srn514ro{padding-top:0}",1);g.inject(".oxkhqvkx{padding-right:0}",1,".oxkhqvkx{padding-left:0}");g.inject(".rl78xhln{padding-bottom:0}",1);g.inject(".nch0832m{padding-left:0}",1,".nch0832m{padding-right:0}");g.inject(".gxrezr7k{background-color:white}",1);function h(a){var c=a.checked,d=a.label,e=a.onToggle;return b("React").jsx("div",{"aria-checked":c,"aria-label":d,className:"nch0832m rl78xhln oxkhqvkx srn514ro kmwttqpk kjdc1dyq l7ghb35v m8h3af8h mwtcrujb mx6bq00g bdao358l bf1zulr9 lxqftegz s9ljgwtm s9ok87oh nmlomj2f qwcclf47 e7u6y3za qmqpeqxj ii1x9cjt dqee7tk8 ggra9ail nho0698i jjmr0tki ntrxh2kl hh61tlkm gvytbark jcxyg2ei i85zmo3j alzwoclg"+(c?" gxrezr7k":""),onClick:function(){return e(!c)},role:"checkbox",tabIndex:"0",children:c?b("React").jsx(b("VFWebIcon.react"),{glyph:"checkmark",size:20,color:"black"}):null})}h.examples=[{title:"Checkbox",render:function(){var a,c=(a=b("React")).createClass({displayName:"CheckBoxExample",getInitialState:function(){return{checked:this.props.checked}},render:function(){var a=this;return b("React").jsx("div",{className:"_3-8h",children:b("React").jsx(h,{checked:this.state.checked,onToggle:function(b){return a.setState({checked:b})},label:"testCheckbox"})})}});return a.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[a.jsx(c,{checked:!1}),a.jsx(c,{checked:!0})]})}}];e.exports=h}),null);
__d("VFWebSelectableUserRow.react",["React","RelayModern","VFWebCheckbox.react","VFWebUserRow.react","emptyFunction","nullthrows","VFWebSelectableUserRow_messagingActor.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.onToggle,d=a.messagingActor,e=a.selected,f=d.id;a=d.name;var g=d.short_name,h=d.profile_picture;if(f==null)return null;d=b("React").jsx(b("VFWebCheckbox.react"),{checked:e,onToggle:b("emptyFunction"),label:"Select user"});return b("React").jsx(b("VFWebUserRow.react"),{primaryButton:d,userProfileUri:h==null?void 0:h.uri,userName:a,handleContextMenu:null,showButtonOnlyOnHover:!1,onClick:function(){return c(!e,f,b("nullthrows")(g),h==null?void 0:h.uri)}})};return c}(b("React").Component);e.exports=a(c,{messagingActor:function(){return b("VFWebSelectableUserRow_messagingActor.graphql")}})}),null);
__d("VFWebListTraySearchResults.react",["invariant","regeneratorRuntime","Promise","CurrentUser","FluxContainer","React","RelayFBEnvironment","RelayModern","VFDataSource","VFRTCCallStore","VFWebConferenceUtils","VFWebGroupItem.react","VFWebLoadingIndicator.react","VFWebMessengerContact.react","VFWebNoContent.react","VFWebSelectableUserRow.react","VFWebStrings","immutable","promiseDone","VFWebListTraySearchResultsQuery.graphql","VFWebListTraySearchResultsGroupsQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=function(){return b("VFWebListTraySearchResultsQuery.graphql")},j=function(){return b("VFWebListTraySearchResultsGroupsQuery.graphql")};function k(a,c){__p&&__p();var d,e,f,g,k,l,m,n,o;return b("regeneratorRuntime").async(function(p){__p&&__p();while(1)switch(p.prev=p.next){case 0:p.next=2;return b("regeneratorRuntime").awrap(b("Promise").all([h(b("RelayFBEnvironment"),i,{name:a}),c.includeGroups?h(b("RelayFBEnvironment"),j,{name:a}):b("Promise").resolve({})]));case 2:k=p.sent;l=k[0];m=k[1];n=((l==null?void 0:(d=l.viewer)==null?void 0:(e=d.messenger_contacts)==null?void 0:e.nodes)||[]).map(function(a){return a==null?void 0:a.messaging_profile}).filter(function(a){return Boolean(a)&&a.id!==b("CurrentUser").getID()}).map(function(a){return{type:"contact",id:a.id,name:a.name,actor:a}});o=((m==null?void 0:(f=m.entities_named)==null?void 0:(g=f.search_results)==null?void 0:g.nodes)||[]).filter(function(a){return Boolean(a)&&a.thread_key!=null}).map(function(a){var b;return{type:"thread",id:(b=a.thread_key)==null?void 0:b.thread_fbid,name:a.name,messageThread:a}});return p.abrupt("return",[].concat(n,o));case 8:case"end":return p.stop()}},null,this)}function l(a,b){return((a==null?void 0:a.name)||"").toLowerCase().includes(b)}function m(a){return a.id||""}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,{getID:m,isMatchingQuery:l,fetchData:function(a){return k(a,b)}})||this}return b}(b("VFDataSource"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=babelHelpers["extends"]({},d.$1(),{remoteUserFbids:b("immutable").Set(),currentConferenceName:"",currentCallThreadId:null}),d.subscription=null,d.$2=function(){d.setState(d.$1())},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("VFRTCCallStore")]};c.calculateState=function(a){var c=b("VFRTCCallStore").getState().remoteUsers.map(function(a){return a.FBID}),d=b("VFRTCCallStore").getState().callInfo.conferenceName;return babelHelpers["extends"]({},a,{remoteUserFbids:c,currentConferenceName:d})};var d=c.prototype;d.componentDidMount=function(){this.subscription=this.props.dataSource.addListener("change",this.$2),this.$3()};d.componentDidUpdate=function(a,b){this.props.searchQuery!==a.searchQuery&&this.props.dataSource.setQuery(this.props.searchQuery),b.currentConferenceName!==this.state.currentConferenceName&&this.$3()};d.componentWillUnmount=function(){this.subscription&&(this.subscription.remove(),this.subscription=null)};d.$3=function(){var a=this;b("promiseDone")(b("VFWebConferenceUtils").queryThreadId(this.state.currentConferenceName).then(function(b){return a.setState({currentCallThreadId:b})}))};d.$1=function(){var a=this.props.dataSource.getState(this.props.searchQuery);return{items:a.items,loading:a.loading}};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.showRemoteUsersInResults,e=c.maxRemoteUsersReached,f=c.resultButtonMode,h=c.surface;c=this.state.items.map(function(c){__p&&__p();var i=c.id;if(!i)return null;if(a.state.remoteUserFbids.has(i)&&!Boolean(d))return null;if(c.type==="contact")if(f==="toggle"){var j=a.props,k=j.onToggleUser;j=j.selectedUsers;k!=null&&j!=null||g(0,14559);return b("React").jsx(b("VFWebSelectableUserRow.react"),{selected:j.has(i),onToggle:k,messagingActor:c.actor},i)}else return b("React").jsx(b("VFWebMessengerContact.react"),{buttonMode:f,disabled:e,messagingActor:c.actor,surface:h},i);else if(c.type==="thread")return b("React").jsx(b("VFWebGroupItem.react"),{currentCallThreadId:a.state.currentCallThreadId,messageThread:c.messageThread,surface:h},i);return null}).filter(Boolean);return b("React").jsxs("div",{children:[c,this.state.loading?b("React").jsx(b("VFWebLoadingIndicator.react"),{}):c.length===0?b("React").jsx(b("VFWebNoContent.react"),{message:b("VFWebStrings").search_no_results}):null]})};return c}(b("React").Component);c.DataSource=a;c.defaultProps={showLimitedContextMenu:!1};e.exports=b("FluxContainer").create(c)}),null);
__d("VFWebMessengerContact.react",["AvailableList","AvailableListConstants","FluxContainer","React","RelayModern","VFRTCCallStore","VFWebCallUtils","VFWebContextMenu","VFWebListItemCallControls.react","VFWebRingButton.react","VFWebStrings","VFWebSupportUtils","VFWebUserRow.react","immutable","VFWebMessengerContact_messagingActor.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$2=!1,d.$4=function(){if(!b("VFWebSupportUtils").showContactCards())return;var a=d.props,c=a.messagingActor;a=a.showLimitedContextMenu;var e=c.id,f=c.short_name,g=c.is_message_blocked_by_viewer,h=c.is_messenger_only;c=c.url;g=Boolean(g);e!=null&&f!=null&&b("VFWebContextMenu").showForUser({surface:d.props.surface,fbid:e,name:f,isBlocked:g,profileUrl:Boolean(h)?null:c,showLimitedContextMenu:a})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("VFRTCCallStore")]};c.calculateState=function(a,c){a=b("VFRTCCallStore").getState();a=a.remoteUsers;return{availability:b("AvailableList").get(c.messagingActor.id),remoteUsers:a}};var d=c.prototype;d.componentDidMount=function(){var a=this;this.$2=!0;this.$1=b("AvailableList").subscribe([b("AvailableListConstants").ON_AVAILABILITY_CHANGED],function(){if(!a.$2)return;var c=a.props.messagingActor.id;c=b("AvailableList").get(c);a.state.availability!==c&&a.setState({availability:c})})};d.componentWillUnmount=function(){this.$2=!1,this.$1&&(b("AvailableList").unsubscribe(this.$1),this.$1=null)};d.render=function(){var a,c=this.props,d=c.buttonMode;c=c.messagingActor;var e=c.name;a=(a=c.profile_picture)==null?void 0:a.uri;var f=this.$3(d);c=Boolean(c.is_message_blocked_by_viewer);return b("React").jsx(b("VFWebUserRow.react"),{availability:this.state.availability,primaryButton:c?null:f,showButtonOnlyOnHover:d!=="invite",userProfileUri:a,userName:e,userSubtitle:c?b("VFWebStrings").blocked_user:null,handleContextMenu:this.$4})};d.$3=function(a){var c=this.props.messagingActor.id,d=b("VFWebCallUtils").canStartOneOnOneCallWithUser(c,this.state.remoteUsers),e={usersToRing:[c?c:""],surface:this.props.surface,thread:{id:null,imageUri:null,name:null}};return c&&d?a==="create"?b("React").jsx(b("VFWebListItemCallControls.react"),babelHelpers["extends"]({},e)):b("React").jsx(b("VFWebRingButton.react"),babelHelpers["extends"]({disabled:this.props.disabled,mode:a},e)):null};return c}(b("React").Component);c.defaultProps={showLimitedContextMenu:!1};e.exports=a(b("FluxContainer").create(c,{withProps:!0}),{messagingActor:function(){return b("VFWebMessengerContact_messagingActor.graphql")}})}),null);
__d("VFWebPeopleInCall.react",["CurrentUser","FBRTCParticipantCallState","FluxContainer","React","VFRTCCallActions","VFRTCCallStore","VFWebAppFluxStore","VFWebButton.react","VFWebCallUtils","VFWebIcon.react","VFWebLogger","VFWebProfileBubbleArea.react","VFWebRingButton.react","VFWebSelectedProfileBubble.react","VFWebStrings","VFWebSupportUtils","VFWebUserRow.react","immutable","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;(g||b("stylex")).inject(".mi59tyey{opacity:.5}",1);var h=80;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("VFRTCCallStore"),b("VFWebAppFluxStore")]};c.calculateState=function(){var a=b("VFRTCCallStore").getState(),c=a.localUser;a=a.remoteUsers;var d=b("VFWebAppFluxStore").getState();d=d.locallyMutedUsers;return{locallyMutedUsers:d,localUser:c,remoteUsers:a}};var d=c.prototype;d.render=function(){var a=this,c=this.state,d=c.localUser;c=c.remoteUsers;c=c.filter(Boolean).groupBy(function(a){return a.FBID}).map(function(a){return a.first()}).toList().sort(b("VFWebSupportUtils").showAddPeopleTrayV2()?l:m).unshift(d);return b("VFWebSupportUtils").showAddPeopleTrayV2()?b("React").jsx(b("VFWebProfileBubbleArea.react"),{userBubbleHeight:h,useAutoHeight:!0,children:c.map(function(c){return b("React").jsx(b("VFWebSelectedProfileBubble.react"),{userName:c.userShortName,userProfileUri:c.profilePictureUrl,isGreyedOut:a.$1(c),overlayIcon:a.$2(c),showIconOnlyOnHover:a.$3(c),onClick:a.$4(c),subLabel:a.$5(c)},c.FBID)}).toArray()}):c.map(function(c,d){return b("React").jsx(b("VFWebUserRow.react"),{userProfileUri:c.profilePictureUrl,userName:c.userShortName,userSubtitle:b("VFWebStrings").call_state((d=c.participantState)==null?void 0:d.state),primaryButton:a.$6(c),showButtonOnlyOnHover:!1},c.FBID)})};d.$1=function(a){return!b("VFWebCallUtils").isConnected(a)&&a.FBID!==b("CurrentUser").getID()};d.$2=function(a){__p&&__p();if(a.FBID===b("CurrentUser").getID())return b("React").jsx(b("VFWebIcon.react"),{glyph:a.isAudioMuted()?"microphone-cross":"microphone",size:24});if(!b("VFWebCallUtils").isConnectedOrRinging(a))return b("React").jsx(b("VFWebIcon.react"),{glyph:"phone",size:24});else{if(b("VFWebCallUtils").isRinging(a))return b("VFWebCallUtils").isContacting(a)?null:b("React").jsx(b("VFWebIcon.react"),{glyph:"bell",size:24});var c=this.state.locallyMutedUsers,d=a.isAudioMuted();c=c.contains(a.FBID)?"audio-off":"audio-on";return b("React").jsx(b("VFWebIcon.react"),{className:d&&a.FBID!==b("CurrentUser").getID()?"mi59tyey":"",glyph:d?"microphone-cross":c,size:24})}};d.$3=function(a){var c=this.state.locallyMutedUsers;if(a.FBID===b("CurrentUser").getID())return!a.isAudioMuted();return!b("VFWebCallUtils").isConnectedOrRinging(a)?!1:!a.isAudioMuted()&&!c.contains(a.FBID)};d.$4=function(a){__p&&__p();var c=this,d=this.state,e=d.localUser;d=d.locallyMutedUsers;if(a.FBID===b("CurrentUser").getID())return function(){return b("VFRTCCallActions").toggleMuteAudio(e.isAudioMuted())};if(b("VFWebCallUtils").isConnectedOrConnecting(a)){if(a.isAudioMuted())return null;var f=d.contains(a.FBID);return function(){b("VFWebLogger").logClick(c.props.surface,f?"vfweb_call_audio_remote_un_mute":"vfweb_call_audio_remote_mute"),b("VFWebAppFluxStore").toggleMuteRemoteAudio(!f,a.FBID)}}else if(!b("VFWebCallUtils").isRinging(a))return function(){b("VFWebLogger").logClick(c.props.surface,"vfweb_ring_redial"),b("VFWebCallUtils").reInviteToCall([a.FBID])}};d.$5=function(a){var c;return!b("VFWebCallUtils").isRinging(a)&&((c=a.participantState)==null?void 0:c.state)!==b("FBRTCParticipantCallState").CONNECTING?null:b("VFWebStrings").call_state((c=a.participantState)==null?void 0:c.state,!0)};d.$6=function(a){var c=this.state.localUser;if(a.FBID===c.FBID)return a.isAudioMuted()?b("React").jsx(b("VFWebIcon.react"),{glyph:"microphone-cross",size:24}):null;if(b("VFWebCallUtils").isConnectedOrConnecting(a))return a.isAudioMuted()?b("React").jsx(b("VFWebIcon.react"),{glyph:"microphone-cross",size:24}):b("React").jsx(i,{user:a,surface:this.props.surface,isLocallyMuted:this.state.locallyMutedUsers.contains(a.FBID)});return b("VFWebCallUtils").isDisconnected(a)?b("React").jsx(b("VFWebRingButton.react"),{mode:"redial",usersToRing:[a.FBID],surface:"vfweb_list_tray"}):null};return c}(b("React").Component);function i(a){return b("React").jsx(b("VFWebButton.react"),{size:32,use:a.isLocallyMuted?"inverted":"transparent",icon:a.isLocallyMuted?"audio-off":"audio-on",onClick:function(){b("VFWebLogger").logClick(a.surface,a.isLocallyMuted?"vfweb_call_audio_remote_un_mute":"vfweb_call_audio_remote_mute"),b("VFWebAppFluxStore").toggleMuteRemoteAudio(!a.isLocallyMuted,a.user.FBID)},label:"Toggle mute"})}function j(a){switch(a){case b("FBRTCParticipantCallState").CONNECTED:return 1;case b("FBRTCParticipantCallState").UNKNOWN:case b("FBRTCParticipantCallState").CONTACTING:case b("FBRTCParticipantCallState").RINGING:case b("FBRTCParticipantCallState").CONNECTING:return 2;default:return 3}}function k(a){switch(a){case b("FBRTCParticipantCallState").CONNECTED:return 1;case b("FBRTCParticipantCallState").CONNECTING:return 2;case b("FBRTCParticipantCallState").RINGING:return 3;case b("FBRTCParticipantCallState").UNKNOWN:case b("FBRTCParticipantCallState").CONTACTING:return 4;default:return 5}}function l(a,b){return k((a=a.participantState)==null?void 0:a.state)-k((a=b.participantState)==null?void 0:a.state)}function m(a,b){var c;c=j((c=a.participantState)==null?void 0:c.state)-j((c=b.participantState)==null?void 0:c.state);return c!==0?c:a.userName.localeCompare(b.userName)}e.exports=b("FluxContainer").create(a)}),null);
__d("VFWebSwitchCallDialog.react",["FBRTCParticipantCallState","React","VFRTCCallStore","VFWebAppFluxStore","VFWebModal.react","VFWebStrings","VFWebText.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=(c=b("VFWebModal.react")).Body,i=c.Button,j=c.CloseButton,k=c.Dialog,l=c.Footer,m=c.Header;(g||(g=b("stylex"))).inject(".anf3k8p9{margin-top:20px}",1);g.inject(".ddi4lvqs{width:413px}",1);g.inject(".eno9y5tp{height:265px}",1);function a(a){var c,d=a.isAudioCall,e=a.mode,f=(c=b("VFWebStrings")).switchCallTitle(d,e),g=c.switchCallButtonLabel(d,e),n=b("VFRTCCallStore").getState();n=n.remoteUsers;n=n.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size;n=n<2;d=c.switchCallContent(d,e,n);return(e=b("React")).jsx("div",{className:"eno9y5tp ddi4lvqs",children:e.jsxs(k,{children:[e.jsxs(m,{children:[e.jsx(b("VFWebText.react"),{style:"title-large",children:f}),e.jsx(j,{onClick:b("VFWebAppFluxStore").removeOverlayModal})]}),e.jsxs(h,{children:[e.jsx(b("VFWebText.react"),{style:"body-small",children:c.current_video_chat_status}),e.jsx("div",{className:"anf3k8p9",children:e.jsx(b("VFWebText.react"),{style:"body-small",children:d})})]}),e.jsxs(l,{children:[e.jsx(i,{use:"button",label:"Cancel",onClick:b("VFWebAppFluxStore").removeOverlayModal}),e.jsx(i,{use:"confirm",label:g,onClick:o})]})]})});function o(){b("VFWebAppFluxStore").removeOverlayModal(),a.onConfirm()}}e.exports=a}),null);
__d("VFRTCAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("VFWebCallStore",["FluxReduceStore","VFRTCAppDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({incomingCallConferenceName:null}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new g()};d.reduce=function(a,b){switch(b.type){case"handle_incoming_call":return a.set("incomingCallConferenceName",b.conferenceName);case"resolve_incoming_call":return a.set("incomingCallConferenceName",null);default:return a}};d.isHandlingIncomingCall=function(){return this.getState().incomingCallConferenceName!==null};d.handleIncomingCall=function(a){b("VFRTCAppDispatcher").dispatch({type:"handle_incoming_call",conferenceName:a})};d.resolveIncomingCall=function(){b("VFRTCAppDispatcher").dispatch({type:"resolve_incoming_call"})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFWebSoundController",["RTCConfig","SoundPlayer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=[(a=b("RTCConfig")).ringtone_mp3_url,a.ringtone_ogg_url];d=[a.jirafa_searching_mp3_url,a.jirafa_searching_ogg_url];f=[a.ringback_mp3_url,a.ringback_ogg_url];var g=[a.jirafa_end_call_mp3_url,a.jirafa_end_call_ogg_url],h=[a.jirafa_preview_on_mp3_url,a.jirafa_preview_on_ogg_url],i=[a.jirafa_preview_off_mp3_url,a.jirafa_preview_off_ogg_url],j=[a.jirafa_join_request_mp3_url,a.jirafa_join_request_ogg_url],k=[a.jirafa_entry_mp3_url,a.jirafa_entry_ogg_url];a=[a.jirafa_exit_mp3_url,a.jirafa_exit_ogg_url];var l=function(){__p&&__p();function a(a,b){this.filePaths=a,this.loop=b}var c=a.prototype;c.preload=function(){b("SoundPlayer").preload(this.filePaths)};c.play=function(){b("SoundPlayer").play(this.filePaths,{loop:this.loop})};c.stop=function(){b("SoundPlayer").stop(this.filePaths)};return a}(),m=function(){function a(){}var b=a.prototype;b.preload=function(){};b.play=function(){};b.stop=function(){};return a}(),n={incomingRingTone:new l(c,!0),contactingTone:new l(d,!0),ringbackTone:new l(f,!0),leaveCallSound:new l(g,!1),previewOnSound:new l(h,!1),previewOffSound:new l(i,!1),joinRequestSound:new l(j,!1),participantEntrySound:new l(k,!1),participantExitSound:new l(a,!1),nullSound:new m(),preloadAllSounds:function(){n.incomingRingTone.preload(),n.contactingTone.preload(),n.ringbackTone.preload(),n.leaveCallSound.preload(),n.previewOnSound.preload(),n.previewOffSound.preload(),n.joinRequestSound.preload(),n.participantEntrySound.preload()}};e.exports=n}),null);
__d("VFWebGroupCallIncomingDialogController",["regeneratorRuntime","EventEmitter","FBRTCHangupReason","VFDesktopHelper","VFRTCCallStore","VFRTCUtils","VFWebAppFluxStore","VFWebCallStore","VFWebIncomingCallDialogUtils","VFWebSoundController","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=7e4;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h){__p&&__p();var i;i=a.call(this)||this;i.$VFWebGroupCallIncomingDialogController8=b("VFWebSoundController").nullSound;i.$VFWebGroupCallIncomingDialogController9=function(){i.$VFWebGroupCallIncomingDialogController13(),i.emit("timeout",b("VFRTCCallStore").isInCall())};i.$VFWebGroupCallIncomingDialogController1=c;i.$VFWebGroupCallIncomingDialogController2=d;i.$VFWebGroupCallIncomingDialogController3=e;i.$VFWebGroupCallIncomingDialogController4=f;i.$VFWebGroupCallIncomingDialogController5=g;i.$VFWebGroupCallIncomingDialogController6=h;i.$VFWebGroupCallIncomingDialogController7=null;return i}var d=c.prototype;d.serverInfoData=function(){return this.$VFWebGroupCallIncomingDialogController6};c.getHangUpReasonForNewRequest=function(){return b("VFWebCallStore").isHandlingIncomingCall()?b("FBRTCHangupReason").IN_ANOTHER_CALL:null};d.showIncomingDialog=function(){this.$VFWebGroupCallIncomingDialogController7=b("setTimeoutAcrossTransitions")(this.$VFWebGroupCallIncomingDialogController9,g),this.$VFWebGroupCallIncomingDialogController8=b("VFRTCCallStore").isInCall()?b("VFWebSoundController").joinRequestSound:b("VFWebSoundController").incomingRingTone,this.$VFWebGroupCallIncomingDialogController8.play(),b("VFWebCallStore").handleIncomingCall(this.$VFWebGroupCallIncomingDialogController1),b("promiseDone")(this.$VFWebGroupCallIncomingDialogController10())};d.$VFWebGroupCallIncomingDialogController10=function(){__p&&__p();var a,c,d,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:a=b("VFRTCUtils").getThreadID(this.$VFWebGroupCallIncomingDialogController1);j.next=3;return b("regeneratorRuntime").awrap(b("VFWebIncomingCallDialogUtils").fetchIncomingCallData(this.$VFWebGroupCallIncomingDialogController3,this.$VFWebGroupCallIncomingDialogController4,a,{width:60,height:60}));case 3:c=j.sent;d=c.participants;e=c.messageThread;f=d.filter(function(a){return a.id!==b("VFRTCCallStore").getState().localUser.FBID});j.next=9;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showIncomingCallDialog(f,this.$VFWebGroupCallIncomingDialogController5,e,!1,b("VFRTCCallStore").isInCall(),b("VFRTCCallStore").localUserHasVideoEnabled()));case 9:g=j.sent;h=g.response;i=g.initializeVideo;j.t0=h;j.next=j.t0==="accept"?15:j.t0==="ignore"?17:19;break;case 15:this.$VFWebGroupCallIncomingDialogController11(Boolean(i));return j.abrupt("break",20);case 17:this.$VFWebGroupCallIncomingDialogController12();return j.abrupt("break",20);case 19:throw new Error("Received unrecognized response "+h);case 20:case"end":return j.stop()}},null,this)};d.cancel=function(){this.$VFWebGroupCallIncomingDialogController13(),b("VFWebCallStore").resolveIncomingCall()};d.$VFWebGroupCallIncomingDialogController13=function(){this.$VFWebGroupCallIncomingDialogController7&&(b("clearTimeout")(this.$VFWebGroupCallIncomingDialogController7),this.$VFWebGroupCallIncomingDialogController7=null),this.$VFWebGroupCallIncomingDialogController8.stop(),this.$VFWebGroupCallIncomingDialogController8=b("VFWebSoundController").nullSound,b("VFDesktopHelper").dismissIncomingCallDialog()};d.$VFWebGroupCallIncomingDialogController11=function(a){this.$VFWebGroupCallIncomingDialogController13(),b("VFWebAppFluxStore").removeOverlayModal(),this.emit("answerCall",this.$VFWebGroupCallIncomingDialogController1,a)};d.$VFWebGroupCallIncomingDialogController12=function(){this.$VFWebGroupCallIncomingDialogController13(),this.emit("ignoreCall",b("VFRTCCallStore").isInCall())};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VFWebMissedCallDialogController",["regeneratorRuntime","VFDesktopHelper","VFWebCallUtils","VFWebIncomingCallDialogUtils","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=null}var c=a.prototype;c.onCallMissed=function(a){this.$1=a};c.showDialog=function(){if(this.$1==null)return;b("promiseDone")(this.$2(this.$1))};c.$2=function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(b("VFWebIncomingCallDialogUtils").fetchIncomingCallData(a,null,null,{width:120,height:120}));case 2:c=g.sent;d=c.participants;g.next=6;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showMissedCallDialog(d[0]));case 6:e=g.sent;f=e.response;g.t0=f;g.next=g.t0==="call-back"?11:g.t0==="close"?14:16;break;case 11:this.hideDialog();b("VFWebCallUtils").placeOutgoingCall({usersToRing:[a],thread:{id:null},trigger:"dvc_missed_call_dialog"});return g.abrupt("break",17);case 14:this.hideDialog();return g.abrupt("break",17);case 16:return g.abrupt("break",17);case 17:case"end":return g.stop()}},null,this)};c.hideDialog=function(){b("VFDesktopHelper").dismissMissedCallDialog()};return a}();e.exports=a}),null);
__d("VFWebP2PCallIncomingDialogController",["regeneratorRuntime","CurrentUser","EventEmitter","VFDesktopHelper","VFRTCCallStore","VFRTCConstants","VFWebAppFluxStore","VFWebCallStore","VFWebConferenceUtils","VFWebIncomingCallDialogUtils","VFWebSoundController","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=7e4;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.$VFWebP2PCallIncomingDialogController4=b("VFWebSoundController").nullSound;e.$VFWebP2PCallIncomingDialogController5=function(){e.$VFWebP2PCallIncomingDialogController9(),e.emit("timeout",!1)};e.$VFWebP2PCallIncomingDialogController1=c;e.$VFWebP2PCallIncomingDialogController2=d;e.$VFWebP2PCallIncomingDialogController3=null;return e}c.getCallEndReasonForNewRequest=function(){return b("VFWebCallStore").isHandlingIncomingCall()?b("VFRTCConstants").CallEndReason.IN_ANOTHER_CALL:null};var d=c.prototype;d.showIncomingDialog=function(a){this.$VFWebP2PCallIncomingDialogController3=b("setTimeoutAcrossTransitions")(this.$VFWebP2PCallIncomingDialogController5,g),this.$VFWebP2PCallIncomingDialogController4=b("VFRTCCallStore").isInCall()?b("VFWebSoundController").joinRequestSound:b("VFWebSoundController").incomingRingTone,this.$VFWebP2PCallIncomingDialogController4.play(),b("VFWebCallStore").handleIncomingCall(b("VFWebConferenceUtils").buildP2PConferenceName(this.$VFWebP2PCallIncomingDialogController1)),b("promiseDone")(this.$VFWebP2PCallIncomingDialogController6(a))};d.$VFWebP2PCallIncomingDialogController6=function(a){__p&&__p();var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:c=a===b("VFRTCConstants").IncomingCallDialogTypes.VIDEO;i.next=3;return b("regeneratorRuntime").awrap(b("VFWebIncomingCallDialogUtils").fetchIncomingCallData(this.$VFWebP2PCallIncomingDialogController1,[b("CurrentUser").getAccountID()],null,{width:120,height:120}));case 3:d=i.sent;e=d.participants;i.next=7;return b("regeneratorRuntime").awrap(b("VFDesktopHelper").showIncomingCallDialog(e,c,null,!0,b("VFRTCCallStore").isInCall(),b("VFRTCCallStore").localUserHasVideoEnabled()));case 7:f=i.sent;g=f.response;h=f.initializeVideo;i.t0=g;i.next=i.t0==="accept"?13:i.t0==="ignore"?15:17;break;case 13:this.$VFWebP2PCallIncomingDialogController7(Boolean(h));return i.abrupt("break",18);case 15:this.$VFWebP2PCallIncomingDialogController8();return i.abrupt("break",18);case 17:throw new Error("Received unrecognized response "+g);case 18:case"end":return i.stop()}},null,this)};d.cancel=function(){this.$VFWebP2PCallIncomingDialogController9(),b("VFWebCallStore").resolveIncomingCall()};d.$VFWebP2PCallIncomingDialogController9=function(){this.$VFWebP2PCallIncomingDialogController3&&b("clearTimeout")(this.$VFWebP2PCallIncomingDialogController3),this.$VFWebP2PCallIncomingDialogController4.stop(),this.$VFWebP2PCallIncomingDialogController4=b("VFWebSoundController").nullSound,b("VFDesktopHelper").dismissIncomingCallDialog()};d.$VFWebP2PCallIncomingDialogController7=function(a){this.$VFWebP2PCallIncomingDialogController9(),b("VFWebAppFluxStore").removeOverlayModal(),this.emit("answerCall",this.$VFWebP2PCallIncomingDialogController2.toString(),a)};d.$VFWebP2PCallIncomingDialogController8=function(){this.$VFWebP2PCallIncomingDialogController9(),this.emit("ignoreCall",!1)};d.isForPeer=function(a){return this.$VFWebP2PCallIncomingDialogController1===a};d.isForCall=function(a){return this.$VFWebP2PCallIncomingDialogController2===a};d.isForPeerAndCall=function(a,b){return this.$VFWebP2PCallIncomingDialogController1===a&&this.$VFWebP2PCallIncomingDialogController2===b};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VFWebAppFluxStore",["FluxReduceStore","React","VFRTCAppDispatcher","VFWebAppState","VFWebAppStateReducer","VFWebCallLogger","VFWebSupportUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("VFWebAppStateReducer").reduce,b("VFWebCallLogger").reduce];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("VFWebAppState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.toggleFullScreenUser=function(a){b("VFRTCAppDispatcher").dispatch({type:"toggle_full_screen_user",user:a})};d.closeListTray=function(){b("VFRTCAppDispatcher").dispatch({type:"close_list_tray"})};d.openListTray=function(){b("VFRTCAppDispatcher").dispatch({type:"open_list_tray"})};d.setLinkUrl=function(a){b("VFRTCAppDispatcher").dispatch({type:"link_url",linkUrl:a})};d.toggleListTray=function(){b("VFRTCAppDispatcher").dispatch({type:"toggle_list_tray"})};d.closeAddPeopleTray=function(){b("VFRTCAppDispatcher").dispatch({type:"close_add_people_tray"})};d.openAddPeopleTray=function(){b("VFRTCAppDispatcher").dispatch({type:"open_add_people_tray"})};d.openSettings=function(){b("VFRTCAppDispatcher").dispatch({type:"open_settings"})};d.closeSettings=function(){b("VFRTCAppDispatcher").dispatch({type:"close_settings"})};d.setMiniViewStatus=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_mini_view_status",isActive:a})};d.addNotification=function(a,c){b("VFRTCAppDispatcher").dispatch({type:"add_notification",key:a,notificationHTML:c})};d.removeNotification=function(a){b("VFRTCAppDispatcher").dispatch({type:"remove_notification",key:a})};d.saveAudioSettings=function(a){b("VFRTCAppDispatcher").dispatch({type:"save_audio_settings",audioSettings:a})};d.addOverlayModal=function(a){b("VFRTCAppDispatcher").dispatch({type:"add_overlay_modal",modal:a})};d.removeOverlayModal=function(){b("VFRTCAppDispatcher").dispatch({type:"remove_overlay_modal"})};d.changeUserSettings=function(a){b("VFWebSupportUtils").saveUserSettings(a),b("VFRTCAppDispatcher").dispatch({type:"CHANGE_USER_SETTINGS",settings:a})};d.joinedCall=function(a,c){b("VFRTCAppDispatcher").dispatch({type:"JOINED_CALL",protocolHandler:a,thread:c})};d.leftCall=function(){b("VFRTCAppDispatcher").dispatch({type:"LEFT_CALL"})};d.startCallingUsers=function(a,c){b("VFRTCAppDispatcher").dispatch({type:"STARTED_CALLING_USERS",users:a,thread:c})};d.setPromotionData=function(a){b("VFRTCAppDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})};d.toggleMuteRemoteAudio=function(a,c){b("VFRTCAppDispatcher").dispatch({type:a?"locally_mute_remote_audio":"locally_unmute_remote_audio",userID:c})};d.setNetworkConnectionStatus=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_network_connection_status",isNetworkConnected:a})};d.setPreviousCallData=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_previous_call_data",previousCallData:a})};d.updateMediaDevices=function(a,c){b("VFRTCAppDispatcher").dispatch({type:"update_media_devices",newVideoInput:a,newAudioInput:c})};d.setAppVersion=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_app_version",appVersion:a})};d.showCallSwitchDialog=function(a,c,d){b("VFRTCAppDispatcher").dispatch({type:"show_switch_call_dialog",onConfirm:a,mode:c,isAudioCall:d})};d.setCameraError=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_camera_error",cameraError:a})};d.setIsNativeDialogShown=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_native_dialog_shown",isShown:a})};d.showCallSettingsNUX=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_call_settings_nux_shown",isShown:a})};d.setApplicationMenu=function(a){b("VFRTCAppDispatcher").dispatch({type:"set_application_menu",menuItems:a})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("VFRTCAppDispatcher"))}),null);
__d("VFWebAppState",["React","SimpleNUXMessage","SimpleNUXMessageTypes","VFWebAddPeopleTray.react","VFWebCallErrorModal.react","VFWebCreateGroupCallTray.react","VFWebSettingsDialog.react","VFWebSupportUtils","VFWebSwitchCallDialog.react","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.findMenuItem=function(a){__p&&__p();var b=this.applicationMenu,c=null,d=a.split("/");a=function(a){var e=d[a];c=b&&b.find(function(a){return a.id===e});a=(a=c)==null?void 0:a.submenu;if(c==null)return"break";b=a};for(var e=0;e<d.length;e++){var f=a(e);if(f==="break")break}return c};c.shouldShowMediaStats=function(){var a;return Boolean((a=this.findMenuItem("dvc-debug/show-media-stats"))==null?void 0:a.checked)};return b}(b("immutable").Record({showListTray:!0,miniViewActive:!1,audioSettings:b("immutable").Map(),callGridLayout:{fullScreenUserID:null},overlayModal:null,userSettings:b("VFWebSupportUtils").getUserSettings(),linkUrl:null,locallyMutedUsers:b("immutable").Set(),protocolHandler:null,promotionData:null,isNetworkConnected:!0,previousCallData:null,appVersion:null,cameraError:null,isNativeDialogShown:!1,isCallSettingsNUXShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").DVC_CALL_SETTINGS),applicationMenu:null,currentCallThreadInfo:{id:null,imageUri:null,name:null}}));e.exports=a}),null);
__d("VFWebAppStateReducer",["React","VFRTCCallStore","VFRTCConstants","VFWebAddPeopleTray.react","VFWebCallErrorModal.react","VFWebCreateGroupCallTray.react","VFWebLogger","VFWebSettingsDialog.react","VFWebSwitchCallDialog.react","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").CallEndReason;function a(a,c){__p&&__p();var d;switch(c.type){case"CALL_ERROR":return i(a,c);case"toggle_list_tray":return a.set("showListTray",!a.showListTray);case"close_list_tray":return a.set("showListTray",!1);case"open_list_tray":return j(a);case"open_add_people_tray":return a.set("overlayModal",b("React").jsx(b("VFWebAddPeopleTray.react"),{}));case"close_add_people_tray":return a.set("overlayModal",null);case"open_settings":b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_open");return a.set("overlayModal",b("React").jsx(b("VFWebSettingsDialog.react"),{}));case"close_settings":return a.set("overlayModal",null);case"set_mini_view_status":return a.set("miniViewActive",c.isActive);case"save_audio_settings":return a.set("audioSettings",c.audioSettings);case"add_overlay_modal":return a.set("overlayModal",c.modal);case"remove_overlay_modal":a.overlayModal&&(a.overlayModal.type===b("VFWebCreateGroupCallTray.react")?b("VFWebLogger").logCheckpoint("vfweb_create_group_call_tray","vfweb_create_group_call_tray_close"):a.overlayModal.type===b("VFWebSettingsDialog.react")&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_close"));return a.set("overlayModal",null);case"link_url":return a.set("linkUrl",c.linkUrl);case"CHANGE_USER_SETTINGS":k(a.userSettings,c.settings);return a.set("userSettings",c.settings);case"JOINED_CALL":return a.set("protocolHandler",c.protocolHandler).set("showListTray",!1).set("previousCallData",null).set("currentCallThreadInfo",{id:(d=c.thread)==null?void 0:d.id,imageUri:(d=c.thread)==null?void 0:d.imageUri,name:(d=c.thread)==null?void 0:d.name});case"STARTED_CALLING_USERS":return a.set("showListTray",!1).set("currentCallThreadInfo",{id:(d=c.thread)==null?void 0:d.id,imageUri:(d=c.thread)==null?void 0:d.imageUri,name:(d=c.thread)==null?void 0:d.name});case"LEFT_CALL":return j(a).set("protocolHandler",null).set("locallyMutedUsers",b("immutable").Set()).set("callGridLayout",{fullScreenUserID:null}).set("overlayModal",null).set("currentCallThreadInfo",{threadId:null,threadImageUri:null,threadName:null});case"SET_PROMOTION_DATA":return a.set("promotionData",c.promotionData);case"set_previous_call_data":return a.set("previousCallData",c.previousCallData);case"toggle_full_screen_user":d=c.user==null||c.user.FBID===a.callGridLayout.fullScreenUserID?null:c.user;return h(a,d);case"locally_mute_remote_audio":return a.set("locallyMutedUsers",a.locallyMutedUsers.add(c.userID));case"locally_unmute_remote_audio":return a.set("locallyMutedUsers",a.locallyMutedUsers["delete"](c.userID));case"set_network_connection_status":return a.set("isNetworkConnected",c.isNetworkConnected);default:return a;case"update_media_devices":d=a.userSettings;return a.set("userSettings",babelHelpers["extends"]({},d,{videoInput:c.newVideoInput,audioInput:c.newAudioInput}));case"set_app_version":return a.set("appVersion",c.appVersion);case"show_switch_call_dialog":return a.set("overlayModal",b("React").jsx(b("VFWebSwitchCallDialog.react"),{onConfirm:c.onConfirm,mode:c.mode,isAudioCall:c.isAudioCall}));case"set_camera_error":return a.set("cameraError",c.cameraError);case"set_native_dialog_shown":return a.set("isNativeDialogShown",c.isShown);case"set_call_settings_nux_shown":return a.set("isCallSettingsNUXShown",c.isShown);case"set_application_menu":return a.set("applicationMenu",c.menuItems)}}function h(a,b){return b===null?a.set("callGridLayout",{fullScreenUserID:null}):b?a.set("callGridLayout",{fullScreenUserID:b==null?void 0:b.FBID}):a}function i(a,c){return c.endCallReason!==g.HANGUP_CALL?a.set("overlayModal",b("React").jsx(b("VFWebCallErrorModal.react"),{})):a}function j(a){return a.set("showListTray",!0)}function k(a,c){var d=b("VFRTCCallStore").isInCall()?"1":"0";c.videoInput!==a.videoInput&&c.videoInput!=null&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_video_input_change",{event_extra:{inCall:d,deviceChanged:c.videoInput}});c.audioOutput!==a.audioOutput&&c.audioOutput!=null&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_audio_output_change",{event_extra:{inCall:d,deviceChanged:c.audioOutput}});c.audioInput!==a.audioInput&&c.audioInput!=null&&b("VFWebLogger").logCheckpoint("vfweb_settings_dialog","vfweb_settings_audio_input_change",{event_extra:{inCall:d,deviceChanged:c.audioInput}})}e.exports={reduce:a}}),null);
__d("VFRTCConfig",["CurrentUser"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=null,i=null,j=0,k={};a={setConfig:function(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;g=b;h=c;i=d;j=e;k=a},isVCEndpointCall:function(){return g},getMeetingID:function(){return h},getMeetingPassword:function(){return i},getPeerID:function(){return j},statsInterpreterConfig:function(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}},unsupportedBrowserUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/919532078125908";else return"https://www.facebook.com/help/211644178877843"},userMediaErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},userMediaPermissionErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},isMessengerDotCom:function(){return k.is_messenger_dot_com},useMessengerCallUI:function(){return k.messenger_call_ui},useHDVideoQuality:function(){return k.use_hd_video_quality},shouldCreateDataChannel:function(){return k.data_channel},disableURLManager:function(){return k.disable_url_manager}};e.exports=a}),null);
__d("VFFBRTCUtils",["AsyncRequest","FBIDCheck","RTCConfig","VFRTCConfig","VFWebLogger","assignMediaStream","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3,h="setSinkId"in window.HTMLMediaElement.prototype;a={attachMediaStream:function(a,c){if(a==null)return;b("assignMediaStream")(a,c);if(c){c=a.play();c!==void 0&&c["catch"](function(a){b("VFWebLogger").logRTCCheckpoint({checkpoint:"autoplay was preventd"})})}},aboutEqual:function(a,b){return a-b<.01&&b-a<.01},sendServerRequest:function(a,c,d,e,f,h){c===void 0&&(c=b("emptyFunction"));d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=g);h===void 0&&(h={});a=new(b("AsyncRequest"))().setURI(a).setData(h).setAllowCrossPageTransition(!0).setHandler(c).setErrorHandler(d).setTimeoutHandler(f,function(){d()});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()},supportsSetSink:function(){return h},isPeerVCEndpoint:function(a){var c=b("VFRTCConfig").isVCEndpointCall();return c!==void 0?c:!!a&&!b("FBIDCheck").isUser_deprecated(a)&&b("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function(a){return a==="quickdial"||a==="meeting_room_page_profile"}};e.exports=a}),null);
__d("VFMultiwayRequests",["Promise","AsyncRequest","FBRTCCapability","FBRTCMessageType","VFRTCClientFeatureGating","VFRTCUtils","XGroupCallSendRequestController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15e3;a=function(){__p&&__p();function a(){}var c=a.prototype;c.sendJoinRequest=function(a,c,d,e,f,g,h,i){__p&&__p();var j=h.callID,k=h.numParticipants;h=h.callTrigger;var l=i.userToEscalate,m=i.isEscalator;i=i.escP2PCallID;c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").JOIN,c,d,j,i);d=[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED];b("VFRTCClientFeatureGating").shouldUseSdpRenegotiation()&&d.push(b("FBRTCCapability").SUPPORT_SDP_RENEGOTIATION);j={offer:{sdpString:e.toSdp()},deviceCapabilities:d};i=b("VFRTCUtils").createClientContextMessage(k,h?h:"");j.appMessages=[i];f&&f.length>0&&!l&&(j.usersToCall=f);l&&m&&(j.userToEscalate=l);g&&(j.mediaStatus=g);e={joinRequest:j};d=this.$1(a,c,e);return this.$2(d)};c.sendHangupRequest=function(a,c,d,e,f,g){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").HANGUP,c,d,g);d={reason:e,detailedReasonString:f};g={hangupRequest:d};e=this.$1(a,c,g);return this.$2(e)};c.sendAddParticipantsRequest=function(a,c,d,e,f){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").ADD_PARTICIPANTS,c,d,f);d={usersToInvite:e};f={addParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendRemoveParticipantsRequest=function(a,c,d,e,f){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").REMOVE_PARTICIPANTS,c,d,f);d={usersToRemove:e};f={removeParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendSubscriptionRequest=function(a,c,d,e,f){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").SUBSCRIPTION,c,d,f);d={subscriptions:e};f={subscriptionRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendClientMediaUpdateRequest=function(a,c,d,e,f,g,h){c=b("VFRTCUtils").createRequestHeader(b("FBRTCMessageType").CLIENT_MEDIA_UPDATE,c,d,h);d={fromVersion:e,toVersion:f,mediaUpdates:g};h={clientMediaUpdateRequest:d};e=this.$1(a,c,h);return this.$2(e)};c.$2=function(a){return new(b("Promise"))(function(c,d){var e=b("XGroupCallSendRequestController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({request:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a.payload)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};c.$1=function(a,b,c){return{endpoint:a,jsonPayload:{header:b,body:c}}};return a}();e.exports=new a()}),null);
__d("VFRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a=function(){__p&&__p();a.getInstance=function(){g||(g=new a());return g};function a(){this.$1=b("LogHistory").getInstance(a.MODULE_NAME)}var c=a.prototype;c.getLogHistory=function(){return this.$1};c.log=function(a,b,c,d,e){d===void 0&&(d="Console");e===void 0&&(e="DEBUG");e=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(d||"Console",a+e);return this};return a}();a.MODULE_NAME="webrtc";e.exports=a}),null);
__d("VFRTCLogger",["ChannelClientID","FBRTCMessageType","MarauderLogger","P2PReliabilityTypedLogger","UserAgentData","VFRTCConsoleLogger","VFRTCLoggingSharedInstance","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;a=function(){"use strict";__p&&__p();a.getInstance=function(){q==null&&(q=new a());return q};a.multiwayMessageTypeName=function(a){__p&&__p();switch(a){case b("FBRTCMessageType").JOIN:return"JOIN";case b("FBRTCMessageType").SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case b("FBRTCMessageType").HANGUP:return"HANGUP";case b("FBRTCMessageType").ICE_CANDIDATE:return"ICE_CANDIDATE";case b("FBRTCMessageType").RING:return"RING";case b("FBRTCMessageType").DISMISS:return"DISMISS";case b("FBRTCMessageType").CONFERENCE_STATE:return"CONFERENCE_STATE";case b("FBRTCMessageType").ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case b("FBRTCMessageType").SUBSCRIPTION:return"SUBSCRIPTION";case b("FBRTCMessageType").CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case b("FBRTCMessageType").DATA_MESSAGE:return"DATA_MESSAGE";case b("FBRTCMessageType").REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case b("FBRTCMessageType").EXPERIMENT:return"EXPERIMENT";case b("FBRTCMessageType").CONNECT:return"CONNECT";case b("FBRTCMessageType").APPROVAL:return"APPROVAL"}return a.toString()};function a(){var a;this.$2=JSON.stringify({version:2,device:(a=b("UserAgentData")).deviceName,os:a.platformName,os_version:a.platformFullVersion,browser:a.browserName,browser_version:a.browserFullVersion});this.$3=JSON.stringify({version:2,device:a.deviceName,os:a.platformName,os_version:a.platformFullVersion,browser:a.browserName,browser_version:a.browserFullVersion,msg_source:"web"});this.$1=b("VFRTCLoggingSharedInstance").getInstance().getDeviceID()}var c=a.prototype;c.logToConsole=function(a){this.$4(null,null,"Console",a)};c.$5=function(a){return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setServiceName("WEB_CLIENT").setMsgType(a.toUpperCase())};c.logMultiwayMessageReceived=function(b,c){var d=a.multiwayMessageTypeName(b.type());this.$4(b.conferenceName(),c,"Received MW",d+", "+b.transactionId(),d==="EXPERIMENT"?"DEBUG":"INFO")};c.logReceivedMessage=function(a,b,c){var d=b?b.toString():null,e={call_id:b,from:a,msg_id:c.msg_id,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);var f=c.type||c.msgType;this.$5(f).setEventName("CLIENT_RECEIVED_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(a).setReceiverID(g).setExtra(this.$3).log();this.$6(m,e);this.$4(a,b,"Received P2P",c.type+", "+c.msg_id)};c.logSentMessage=function(a,b,c){var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$5(c.type).setEventName("CLIENT_SENDING_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$6(p,e);this.$4(a,b,"Sent",c.type+", "+c.msg_id)};c.logSentMessageSuccess=function(a,b,c,d){var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$6(o,e)};c.logSentMessageFailure=function(a,b,c,d,e){var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_ERROR").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).setResultCode(e).log();this.$6(n,f);this.$4(a,b,"Send Failed",c+", "+e)};c.logCallAction=function(a,b,c,d,e){var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$6(h,f);this.$4(a,b,"CallAction",c+", "+JSON.stringify(d))};c.logEvent=function(a,b,c){var d={call_id:b,content:c,peer_id:a};this.$6(k,d);this.$4(a,b,"Event",JSON.stringify(c))};c.logInfo=function(a,b,c){var d={call_id:b,content:c,peer_id:a};this.$6(l,d);this.$4(a,b,"Info",JSON.stringify(c))};c.logError=function(a,b,c){var d={call_id:b,content:c,peer_id:a};this.$6(j,d);this.$4(a,b,"Error",JSON.stringify(c))};c.logErrorWithoutID=function(a){this.logError(null,null,a)};c.logEndCallSummary=function(a){if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelClientID").getID(),content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=babelHelpers["extends"]({},c,a.getExtraInfo());this.$6(i,d);this.$4(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};c.doesContainSensitiveData=function(a){return String(a).indexOf("crypto")>-1};c.redactSensitiveData=function(a,b){if(a!==i){a=JSON.stringify(b);if(this.doesContainSensitiveData(a))return{redacted:!0}}return b};c.$6=function(a,c){c.page_id=b("pageID");c=this.redactSensitiveData(a,c);b("VFRTCConsoleLogger").getInstance().getLogHistory().log(a,c);b("MarauderLogger").log(a,b("VFRTCConsoleLogger").MODULE_NAME,c)};c.$4=function(a,c,d,e,f){f===void 0&&(f="DEBUG"),b("VFRTCConsoleLogger").getInstance().log(this.doesContainSensitiveData(e)?"redacted":e,a,c,d,f)};return a}();a.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});a.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_ADMIN_MESSAGE_JOIN_AUDIO_CALL_BUTTON:"multiway_admin_message_join_audio_call_button",MULTIWAY_ADMIN_MESSAGE_JOIN_VIDEO_CALL_BUTTON:"multiway_admin_message_join_video_call_button",MULTIWAY_ADMIN_MESSAGE_START_AUDIO_CALL_BUTTON:"multiway_admin_message_start_audio_call_button",MULTIWAY_ADMIN_MESSAGE_START_VIDEO_CALL_BUTTON:"multiway_admin_message_start_video_call_button",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",VC_PRECALL_SETUP:"vc_precall_setup",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});a.Key=Object.freeze({BATTERY_START:"battery_start",BATTERY_END:"battery_end",CALL_TYPE:"call_type",CONNECTION_EFFECTIVE_TYPE:"conn_effective_type",CPU_CORES:"cpu_cores",DEVICE_INFO:"device_info",DEVICE_MEMORY:"device_memory",DEVICE_PIXEL_RATIO:"device_pixel_ratio",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",EFFECT_COUNT:"rtc_effect_count",EFFECT_TOTAL_DURATION:"rtc_effect_total_duration",VIDEO_DURATION_WITH_FILTER:"rtc_video_duration_with_filter_enabled",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",MEDIA_INPUTS:"media_inputs",VIDEO_CAPABILITIES:"video_capabilities"});e.exports=a}),null);
__d("VFRTCAdminMessage",["FBRTCCallConstants","VFFBRTCUtils","VFRTCConstants","VFRTCLogger","VFWebLogger","XVideoCallAdminMessageController","emptyFunction","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g;a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,this.$3=Date.now(),this.$4=null,this.$5=null}var c=a.prototype;c.getPeerID=function(){return this.$1};c.getCallID=function(){return this.$2};c.getStartTimestamp=function(){return this.$3};c.getConnectedTime=function(){return this.$4};c.getEndTime=function(){return this.$5};c.onCallConnected=function(){this.$4||(this.$4=(g||(g=b("performanceNow")))())};c.onCallEnded=function(){this.$5||(this.$5=(g||(g=b("performanceNow")))())};c.submit=function(a,c,d){this.$5||this.onCallEnded();var e=0,f=b("FBRTCCallConstants").FBRTCCallConnectionType.MISSED_CALL;this.$4&&this.$5&&(e=Math.ceil(this.$5-this.$4),f=b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL);c=f===b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL||c===b("VFRTCConstants").CallEndReason.IGNORE_CALL;b("VFWebLogger").logRTCCheckpoint({checkpoint:"admin_message_"+f});this.$6({peer_id:this.$1,call_id:this.$2,start_time:this.$3,call_duration:e,message_type:f,call_category:a,call_acknowledged:c,conference_name:d})};c.$6=function(a){var c=b("XVideoCallAdminMessageController").getURIBuilder().getURI();b("VFFBRTCUtils").sendServerRequest(c,b("emptyFunction"),this.$7.bind(this,a.peer_id,a.call_id),!1,void 0,a)};c.$7=function(a,c,d){d?d="Fail to log admin message, error "+d.error:d="Server timed out on logging admin message";b("VFRTCLogger").getInstance().logError(a,c,d)};return a}();e.exports=a}),null);
__d("VFRTCCallUIWrapper",["regeneratorRuntime","Bootloader","CurrentUser","UserAgent","VFFBRTCUtils","VFRTCExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h={openGroupCallUI:function(a,c,d,e,f,h,i){return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallUI(a,c,d,e,f,h,g,i)},"VFRTCCallUIWrapper");case 2:case"end":return j.stop()}},null,this)},openGroupCallURI:function(a,c,d,e,f,h,i,j,k){return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallURI({conferenceName:a,callID:c,hasVideo:d,initializeVideo:e,serverInfoData:i,trigger:j,callSummary:k,callWindow:g,multiwayWwwTier:h,multiwayCoreTier:f})},"VFRTCCallUIWrapper");case 2:case"end":return l.stop()}},null,this)},openAsCaller:function(a,c,d,e){!g&&window.rtcCallChildWindow&&(g=window.rtcCallChildWindow,window.rtcCallChildWindow=null);if(this._shouldFocusCallWindow(a)){g&&g.focus();return}this._shouldCloseCallWindow()&&(g&&g.close());g=this._openWindow("Video Call",{isP2P:!0,isVCCall:b("VFFBRTCUtils").isPeerVCEndpoint(a)||b("VFFBRTCUtils").isCollabTrigger(d)});b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCaller(a,c,d,e,g)},"VFRTCCallUIWrapper")},openAsCallee:function(a,c,d,e,f){g=this._openWindow("Video Call",{isP2P:!0,isVCCall:b("VFFBRTCUtils").isPeerVCEndpoint(a)}),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCallee(a,c,d,e,g,f)},"VFRTCCallUIWrapper")},_shouldFocusCallWindow:function(a){return!!g&&!g.closed&&g.rtcCallInProgessWith===a},_shouldCloseCallWindow:function(){return!!g&&!g.closed&&!g.rtcCallInProgessWith},_openWindow:function(a,b){__p&&__p();b=b===void 0?{isP2P:!1,isVCCall:!1}:b;var c=b.isP2P;c=c===void 0?!1:c;b=b.isVCCall;b=b===void 0?!1:b;c=this._windowPosition({isP2P:c,isVCCall:b});b=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",");this._isSparkBrowser()&&(b="");c=window.open("",a,b);window.callWindow=c;return c},_windowDimension:function(a){__p&&__p();var c=a.isP2P;a=a.isVCCall;var d=960,e=540;if(screen&&screen.width>1280){var f=!1,g=!1;c&&(f=b("VFRTCExperiments").forceSmallWindow(a,b("CurrentUser").isWorkUser()));!c&&!f&&(g=b("VFRTCExperiments").fixedHeightGridView(a,b("CurrentUser").isWorkUser()));g?(d=b("VFRTCExperiments").fixedHeightGridViewOuterWindowWidth(),e=b("VFRTCExperiments").fixedHeightGridViewOuterWindowHeight()):f||(d=1280,e=720)}return{height:e,width:d}},_windowPosition:function(a){__p&&__p();var b=a.isP2P;b=b===void 0?!1:b;a=a.isVCCall;a=a===void 0?!1:a;var c,d,e,f;b=h._windowDimension({isP2P:b,isVCCall:a});a=b.height;b=b.width;window.innerWidth!==void 0?(d=window.innerWidth,c=window.innerHeight):(d=screen.width,c=screen.height);window.screenLeft!==void 0?(e=window.screenLeft,f=window.screenTop):(e=window.screenX,f=window.screenY);d=Math.floor(d/2-b/2+e);e=Math.floor(c/2-a/2+f);return{height:"height="+a.toString(),width:"width="+b.toString(),top:"top="+e.toString(),left:"left="+d.toString()}},_isSparkBrowser:function(){return b("UserAgent").isBrowser("Chrome < 34")&&b("UserAgent").isBrowser("Chrome > 33")}};e.exports=h}),null);
__d("VFRTCDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("VFRTCCallBlockingStore",["Arbiter","AsyncRequest","ChannelConstants","VFRTCDispatcher","VFRTCStore","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=0,i=null,j="call_block_setting_changed";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.init=function(a){this.$VFRTCCallBlockingStore1(a),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("videocall_block_setting"),this.$VFRTCCallBlockingStore2.bind(this))};d.__onDispatch=function(a){if(a.type!==j)return;this.$VFRTCCallBlockingStore1(a.data)};d.$VFRTCCallBlockingStore1=function(a){switch(a){case 0:g=!1;this.$VFRTCCallBlockingStore3();break;case-1:g=!0;this.$VFRTCCallBlockingStore3();break;default:g=!0,this.$VFRTCCallBlockingStore4(a)}this.__emitChange()};d.$VFRTCCallBlockingStore4=function(a){i===null&&(i=b("setTimeoutAcrossTransitions")(this.turnOnVideoCalling.bind(this),a*1e3))};d.getBlockingStatus=function(){return g};d.turnOnVideoCalling=function(){new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$VFRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send()};d.turnOffVideoCalling=function(a){h=a,new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$VFRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:a}).send()};d.$VFRTCCallBlockingStore3=function(){i&&(b("clearTimeout")(i),i=null)};d.$VFRTCCallBlockingStore5=function(){b("VFRTCDispatcher").dispatch({type:j,data:0})};d.$VFRTCCallBlockingStore6=function(){b("VFRTCDispatcher").dispatch({type:j,data:h})};d.$VFRTCCallBlockingStore2=function(a,c){b("VFRTCDispatcher").dispatch({type:j,data:c.obj.value})};return c}(b("VFRTCStore"));e.exports=new a()}),null);
__d("VFRTCLocalUploadLogLevel",["CurrentUser","VFRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("VFRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("VFRTCCallSummary",["SiteData","UserAgentData","VFRTCConstants","VFRTCIceStatsParser","VFRTCLocalUploadLogLevel","VFRTCLogger","VFRTCMediaMetricsConst","VFRTCMediaMetricTracker","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g,h=5*60*1e3,i={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},j={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},k={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},l={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},m=[(a=b("VFRTCMediaMetricsConst")).ACCELERATE_RATE,a.DISCARD_RATE,a.EXPAND_RATE,a.PREEMPTIVE_RATE];c=function(){"use strict";__p&&__p();a.nullSummary=function(){return new a({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function a(c){this.peerID=String(c.peerID),this.callID=String(c.callID),this.$2=c.isCaller,this.$1=c.version||a.CURRENT_SUMMARY_VERSION,this.$3=b("VFRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$14=new Date().valueOf(),this.$4=c.callTrigger||null,this.$5={},this.$7={},this.$8={},this.$13={},this.$33=null,this.$34=null,this.$35=null,this.$16=0,this.$17=0,this.$32=!1,this.$9={},this.$10={},this.$11={},this.$12={},this.$36=null,this.$19=(g||(g=b("performanceNow")))(),this.$15=0,this.$6={},this.$18=this.$19,this.$20=0,this.$21={},this.addExtraInfo(b("VFRTCLogger").Key.DEVICE_INFO,this.$43()),this.$44(),this.$45(),this.$46(),this.$23=b("VFRTCIceStatsParser").getInstance(),this.$42=new(b("VFRTCMediaMetricTracker"))(),this.$22=b("VFRTCLogger").getInstance()}var c=a.prototype;c.toJsonString=function(){this.$17=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$28,conferenceName:this.$25,joinWithSID:this.$26,activeConn:this.$24,escP2PCallID:this.$27,serverInfoData:this.$29,localVideoDuration:this.$30,remoteVideoDuration:this.$31,startTime:this.$14,trigger:this.$4,signalingTime:this.$5,escStateTimes:this.$7,applicationEventTime:this.$8,videoEscTimes:this.$13,endCallReason:this.$33,endCallSubreason:this.$34,isRemoteEnded:this.$35,lastUpdatedTime:this.$16,lastSerializedTime:this.$17,unsetOnRetrieve:this.$32,openCount:this.$20,extraInfo:this.$21,gen0IceSentCount:this.$9,gen0IceReceivedCount:this.$10,iceSentCount:this.$11,iceReceivedCount:this.$12,connectionType:this.$36,mediaMetricStats:this.$42.toJsonString(),newSignalingTime:this.$6,accumulatedCallTime:this.$47(),deviceCharged:this.$38,videoReceivedCodec:this.$39,videoSentCodec:this.$40,audioSentCodec:this.$41,relayIP:this.$37})};a.fromJsonString=function(c){__p&&__p();try{c=JSON.parse(c)}catch(a){return null}if(c.version<a.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(c,"peerID")||!Object.prototype.hasOwnProperty.call(c,"callID")||!Object.prototype.hasOwnProperty.call(c,"isCaller")||!Object.prototype.hasOwnProperty.call(c,"startTime")||!Object.prototype.hasOwnProperty.call(c,"trigger")||!Object.prototype.hasOwnProperty.call(c,"signalingTime")||!Object.prototype.hasOwnProperty.call(c,"endCallReason")||!Object.prototype.hasOwnProperty.call(c,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(c,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(c,"lastSerializedTime"))return null;var d=new a({peerID:c.peerID,callID:c.callID,isCaller:c.isCaller});d.$1=c.version;d.$3=c.uploadLogLevel;d.$14=c.startTime;d.$4=c.trigger;d.$5=c.signalingTime;d.$33=c.endCallReason;d.$34=c.endCallSubreason;d.$35=c.isRemoteEnded;d.$16=c.lastUpdatedTime;d.$17=c.lastSerializedTime;d.$26=c.joinWithSID;c.callType&&(d.$28=c.callType);c.conferenceName&&(d.$25=c.conferenceName);c.escP2PCallID&&(d.$27=c.escP2PCallID);c.activeConn&&(d.$24=c.activeConn);c.serverInfoData&&(d.$29=c.serverInfoData);c.localVideoDuration&&(d.$30=c.localVideoDuration);c.remoteVideoDuration&&(d.$31=c.remoteVideoDuration);c.unsetOnRetrieve&&(d.$32=c.unsetOnRetrieve);c.openCount&&(d.$20=c.openCount);c.extraInfo&&(d.$21=c.extraInfo);c.gen0IceSentCount&&(d.$9=c.gen0IceSentCount);c.gen0IceReceivedCount&&(d.$10=c.gen0IceReceivedCount);c.iceSentCount&&(d.$11=c.iceSentCount);c.iceReceivedCount&&(d.$12=c.iceReceivedCount);c.newSignalingTime&&(d.$6=c.newSignalingTime);c.accumulatedCallTime&&(d.$15=c.accumulatedCallTime);c.escStateTimes&&(d.$7=c.escStateTimes);c.applicationEventTime&&(d.$8=c.applicationEventTime);c.videoEscTimes&&(d.$13=c.videoEscTimes);c.mediaMetricStats&&(d.$42=b("VFRTCMediaMetricTracker").fromJsonString(c.mediaMetricStats));c.connectionType&&(d.$36=c.connectionType);c.deviceCharged&&(d.$38=c.deviceCharged);c.videoReceivedCodec!==null&&(d.$39=c.videoReceivedCodec);c.videoSentCodec!==null&&(d.$40=c.videoSentCodec);c.audioSentCodec!==null&&(d.$41=c.audioSentCodec);c.relayIP!==null&&c.relayIP!==void 0&&(d.$37=c.relayIP);return d};a.restoreOrInitialize=function(c,d,e,f,g,h){d=String(d);e=String(e);c=c.retrieveCallSummary(d,e);!c?(c=new a({peerID:d,callID:e,isCaller:f}),g?(c.onFullMessageReceived({msg:g}),c.onOfferAckSent(g)):c.onCallStarted(h||b("VFRTCLogger").Trigger.UNKNOWN),b("VFRTCLogger").getInstance().logError(d,e,"Missing call summary from storage")):c.$32&&(c.$33=null,c.$34=null,c.$35=null,delete c.$5[i.CALL_ENDED],delete c.$6[i.CALL_ENDED],c.$19=0,c.$32=null);return c};a.logSavedSummaries=function(a){__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("VFRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};c.logThisSummary=function(a){var c=b("VFRTCLogger").getInstance();a.retrieveCallSummary(this.peerID,this.callID)!=null&&(c.logEndCallSummary(this),a.removeCallSummary(this.peerID,this.callID),c.logToConsole("Logged active summary"))};c.isNull=function(){var b=a.CANONICAL_NULL_SUMMARY;return this.peerID===b.peerID&&this.callID===b.callID&&this.isCaller()===b.isCaller()&&this.getCallTrigger()===b.getCallTrigger()};c.save=function(a){var c=(g||(g=b("performanceNow")))(),d=c-this.$18;if(d>h){this.$22.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$18=c};c.getVersion=function(){return this.$1};c.getLastUpdatedTime=function(){return this.$16};c.setLastUpdatedTime=function(a){this.$16=a};c.getExtraInfo=function(){return this.$21};c.getCallTrigger=function(){return this.$4};c.addExtraInfo=function(a,b){this.$21[a]=b,this.$46()};c.isCaller=function(){return this.$2};c.isNetworkReady=function(){if(this.$5[i.NETWORK_READY])return!0;else return!1};c.isAnswerReceived=function(){if(this.$5[i.RECV_ANSWER])return!0;else return!1};c.onCallStarted=function(a){this.$4=a,this.$48(i.CALL_STARTED),this.$46()};c.setCallTrigger=function(a){this.$4=a,this.$46()};c.onPopupOpened=function(){this.$49(j.POPUP_OPENED),this.$20++,this.$46()};c.onPressedAnswer=function(){this.$49(j.PRESSED_ANSWER),this.$46()};c.onMediaRequested=function(){this.$49(j.MEDIA_REQUESTED),this.$46()};c.onMediaSucceeded=function(){this.$49(j.MEDIA_SUCCEEDED),this.$46()};c.onFellbackToAudio=function(){this.$49(j.FELLBACK_TO_AUDIO),this.$46()};c.setConnectionType=function(a){this.$36=a,this.$46()};c.setUploadLogLevel=function(a){this.$3=a,this.$46()};c.getCallType=function(){return this.$28};c.setCallType=function(a){this.$28=a,this.addExtraInfo(b("VFRTCLogger").Key.CALL_TYPE,a),this.$46()};c.setVideoDurations=function(a,b){this.$30=a,this.$31=b,this.$46()};c.setScreenDuration=function(a){this.addExtraInfo(b("VFRTCLogger").Key.SCREEN_DURATION,a)};c.setConferenceName=function(a){this.$25=a,this.$46()};c.setTotalVideoFilterDuration=function(a){this.addExtraInfo(b("VFRTCLogger").Key.VIDEO_DURATION_WITH_FILTER,Math.ceil(a).toString())};c.setCoExperienceEffectDuration=function(a){this.addExtraInfo(b("VFRTCLogger").Key.EFFECT_TOTAL_DURATION,Math.ceil(a).toString())};c.setEffectCount=function(a){this.addExtraInfo(b("VFRTCLogger").Key.EFFECT_COUNT,a.toString())};c.setJoinWithSID=function(a){this.$26=a,this.$46()};c.setServerInfoData=function(a){this.$29=a,this.$46()};c.setActiveConnection=function(a){this.$24=a,this.$46()};c.setEscalationP2PCallID=function(a){this.$27=a,this.$46()};c.onOfferAckSent=function(a){this.onMessageSent({type:b("VFRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};c.onMessageSent=function(a){__p&&__p();var c=a.flag===1;switch(a.type){case b("VFRTCConstants").PayloadType.OFFER:this.$50(c,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$51(a,this.$9,this.$11);break;case b("VFRTCConstants").PayloadType.ANSWER:this.$50(c,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$51(a,this.$9,this.$11);break;case b("VFRTCConstants").PayloadType.OK:this.$48(i.SENT_OK);break;case b("VFRTCConstants").PayloadType.PRANSWER:this.$48(i.SENT_PRANSWER);break;case b("VFRTCConstants").PayloadType.OFFER_ACK:this.$50(c,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case b("VFRTCConstants").PayloadType.ANSWER_ACK:this.$50(c,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:this.$51(a,this.$9,this.$11);break;case b("VFRTCConstants").PayloadType.ACK:a.ack_type===b("VFRTCConstants").PayloadType.VIDEO_REQUEST&&this.$52(l.SENT_ESC_REQUEST_ACK);break;case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$52(l.SENT_ESC_RESPONSE):this.$52(l.SENT_ESC_REQUEST);break;default:}this.$46()};c.$51=function(a,b,c){var d,e=null;a=this.$23.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$53(b,e),this.$53(c,e)};c.$53=function(a,b){!a[b]?a[b]=1:a[b]+=1};c.$54=function(a){this.addExtraInfo(b("VFRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};c.onFullMessageReceived=function(a){__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("VFRTCConstants").PayloadType.OFFER:this.$54(a);this.$50(d,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$51(c,this.$10,this.$12);break;case b("VFRTCConstants").PayloadType.ANSWER:this.$54(a);this.$50(d,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$51(c,this.$10,this.$12);break;case b("VFRTCConstants").PayloadType.OK:this.$48(i.RECV_OK);break;case b("VFRTCConstants").PayloadType.PRANSWER:this.$48(i.RECV_PRANSWER);break;case b("VFRTCConstants").PayloadType.OFFER_ACK:this.$50(d,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case b("VFRTCConstants").PayloadType.ANSWER_ACK:this.$50(d,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:this.$51(c,this.$10,this.$12);break;case b("VFRTCConstants").PayloadType.ACK:c.ack_type===b("VFRTCConstants").PayloadType.VIDEO_REQUEST&&this.$52(l.RECV_ESC_REQUEST_ACK);break;case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$52(l.RECV_ESC_ACCEPT):this.$52(l.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$52(l.RECV_ESC_REQUEST):this.$52(l.RECV_ESC_TIMEOUT);break;default:}this.$46()};c.onMsgAckReceived=function(a,b){a=a.msg.flag===1;b?this.$50(a,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK):this.$50(a,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK)};c.onNetworkReady=function(){this.$48(i.NETWORK_READY),this.$46()};c.onCallConnected=function(){this.$48(i.CALL_CONNECTED),this.$46()};c.onCallEnded=function(a,b,c,d){this.$32=c,this.$33=a,this.$34=d,this.$35=b,this.$48(i.CALL_ENDED),this.$46()};c.setOfferSentTime=function(){this.$48(i.SENT_OFFER)};c.setOfferAckReceivedTime=function(){this.$48(i.RECV_OFFER_ACK)};c.setAnswerSentTime=function(){this.$48(i.SENT_ANSWER)};c.setAnswerReceivedTime=function(){this.$48(i.RECV_ANSWER)};c.setJoinRequestSent=function(){this.$48(i.SENT_JOIN_REQUEST),this.$46()};c.setJoinResponseReceived=function(){this.$48(i.RECV_JOIN_RESPONSE),this.$46()};c.setJoinResponseProcessed=function(){this.$48(i.PROC_JOIN_RESPONSE),this.$46()};c.setRingRequestReceived=function(){this.$48(i.RECV_RING_REQUEST),this.$46()};c.setRingResponseSent=function(){this.$48(i.SENT_RING_RESPONSE),this.$46()};c.setEscalationAvailable=function(){this.$55(k.ESCALATION_IS_AVAILABLE)};c.setEscalationInitiated=function(){this.$55(k.USER_INITIATED_REQUEST)};c.setReceivedEscalationRequest=function(){this.$55(k.RECEIVED_INCOMING_REQUEST)};c.setInvalidP2PEscalationState=function(){this.$55(k.REJECTED_INVALID_P2P_STATE)};c.setEscalationConnectingToMultiway=function(){this.$55(k.CONNECTING_TO_MULTIWAY)};c.setEscalationConnectedToMultiway=function(){this.$55(k.CONNECTED_TO_MULTIWAY)};c.setEscalationPeerConnectingToMultiway=function(){this.$55(k.PEER_CONNECTING_TO_MULTIWAY)};c.setEscalationPeerConnectedToMultiway=function(){this.$55(k.PEER_CONNECTED_TO_MULTIWAY)};c.setReadyToEscalate=function(){this.$55(k.READY_TO_ESCALATE)};c.setEscalationPeerFailedToConnectToMultiway=function(){this.$55(k.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};c.setEscalationTimedOut=function(){this.$55(k.TIMED_OUT)};c.setVidEscalationInitClick=function(){this.$52(l.ESCALATION_INITIATION_BUTTON_CLICKED)};c.setVidEscalationAcceptedClick=function(){this.$52(l.ESCALATION_APPROVED_BUTTON_CLICKED)};c.setVidEscalationDeclinedClick=function(){this.$52(l.ESCALATION_DECLINED_BUTTON_CLICKED)};c.setVidEscalationMediaRequested=function(){this.$52(l.USERMEDIA_REQUEST)};c.setVidEscalationMediaSuccess=function(){this.$52(l.USERMEDIA_SUCCESS)};c.setVidEscalationMediaFailed=function(){this.$52(l.USERMEDIA_FAILURE)};c.setVideoCapabilities=function(a){this.addExtraInfo(b("VFRTCLogger").Key.VIDEO_CAPABILITIES,a)};c.setMediaInputs=function(a){this.addExtraInfo(b("VFRTCLogger").Key.MEDIA_INPUTS,a)};c.getVideoReceivedCodec=function(){return this.$39};c.setVideoReceivedCodec=function(a){this.$39=a};c.getVideoSentCodec=function(){return this.$40};c.setVideoSentCodec=function(a){this.$40=a};c.getAudioSentCodec=function(){return this.$41};c.setAudioSentCodec=function(a){this.$41=a};c.toString=function(){var a={};a.core_metrics=this.$56();a.time_series=null;return JSON.stringify(a)};c.$56=function(){__p&&__p();var a={};a.ver=this.$1;a.log_level=b("VFRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$28;a.active_conn=this.$24;a.app_event_times=this.$8;a.conf_name=this.$25;a.join_with_sid=this.$26;a.esc_p2p_call_id=this.$27;a.esc_state_times=this.$7;a.vid_esc_times=this.$13;a.serv_info=this.$29;a.conn=this.$57();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$20;a.signaling=this.$58();a.sender=this.$59();a.receiver=this.$60();a.end=this.$61();a.video=this.$62();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$63();a.device_charged=this.$38;return a};c.$63=function(){return{NetworkReceive:{jb_nm:this.$64()}}};c.$64=function(){var a=this,b={},c=this.$42.getAudioStreamReportKeys().pop();m.forEach(function(d){var e=a.$42.getMetricStats(c,d);e&&(b[d]={m:e.min,M:e.max,avg:e.mean})});var d=this.$42.getJitterBufferStats(c);b.neteq={maxWait:d.max,meanWait:d.mean||0,mediaWait:d.median||0,minWait:d.min};return b};c.$57=function(){var a={dtls:1},b=this.$59();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);this.$37!==null&&(a.relay_ip=this.$37);return a};c.$58=function(){var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$14;a.time_from_start=this.$5;a.new_time_from_start=this.$6;var b=this.$65();b>0&&(a.duration=b);return a};c.$65=function(){var a=this.$6[i.CALL_CONNECTED]||this.$6[i.NETWORK_READY];if(!a)return 0;var b=this.$6[i.CALL_ENDED]||this.$47();return Math.max(0,b-a)};c.$59=function(){__p&&__p();var a=this,c={},d=this.$42.getAudioStreamReportKeys();d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(d!=null){c.bytes=d.current;var e=d.updatedTime-d.startedTime;e>0&&(c.ube_avg=(d.current-d.first)*8/e*1e3);return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(d){c.plost=d.current;return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(d){c.psent=d.current;return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_RTT_SENT);if(d){c.avgrtt=d.mean;c.maxrtt=d.max;c.minrtt=d.min;return!0}return!1});this.$9&&(c.ice_g0=this.$9);this.$11&&(c.ice=this.$11);this.$41!=null&&this.$41!==""&&(c.codec={www:this.$41});return c};c.$60=function(){__p&&__p();var a=this,c={},d=this.$42.getAudioStreamReportKeys();d.some(function(d){__p&&__p();var e,f=a.$42.getMetricStats(d,(e=b("VFRTCMediaMetricsConst")).DECODING_PLC),g=a.$42.getMetricStats(d,e.DECODING_PLC_CNG),h=a.$42.getMetricStats(d,e.DECODING_CNG);d=a.$42.getMetricStats(d,e.DECODING_NORMAL);if(h!=null&&d!=null&&f!=null&&g!=null){c.dec_cng=h.current;c.dec_normal=d.current;c.dec_plc=f.current;c.dec_plc_cng=g.current;c.neteq_calls=c.dec_cng+c.dec_normal+c.dec_plc+c.dec_plc_cng;return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(d){c.bytes=d.current;var e=d.updatedTime-d.startedTime;e>0&&(c.dbe_avg=(d.current-d.first)*8/e*1e3);return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(d){c.plost=d.current;return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(d){c.precv=d.current;return!0}return!1});d.some(function(d){d=a.$42.getMetricStats(d,b("VFRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(d){c.avgrtt=d.mean;c.maxrtt=d.max;c.minrtt=d.min;return!0}return!1});this.$10&&(c.ice_g0=this.$10);this.$12&&(c.ice=this.$12);return c};c.$61=function(){var a={};this.$33!=null&&(a.end_call_reason_string=b("VFRTCConstants").callEndReasonString(this.$33),this.$34!==null&&(a.end_call_subreason_string=this.$34),a.remote_ended=this.$35);this.$36&&(a.conn_type=this.$36);return a};c.$62=function(){var a={ename:this.$40,eqps:this.$66(),frames:this.$67(),psent:null,plost:null};return{sender:this.$68(a),receiver:this.$69(),ld:this.$30,rd:this.$31,bwe:this.$70()}};c.$66=function(){var a=this,c=null,d=this.$42.getVideoStreamReportKeys();d.some(function(d){d=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").OUTBOUND_QP);if(d){c=d.current;return!0}return!1});return c};c.$67=function(){var a=this,c=null,d=this.$42.getVideoStreamReportKeys();d.some(function(d){d=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").FRAMES_ENCODED);if(d){c=d.current;return!0}return!1});return c};c.$70=function(){__p&&__p();var a=this,c={avg_enc_bitrate:this.$71(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},d=this.$42.getVideoStreamReportKeys();d.some(function(d){var e=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),f=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);d=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(e&&f&&d){c.avg_send_bw=e.mean;c.avg_trans_bitrate=f.mean;c.avg_retrans_bitrate=d.mean;return!0}return!1});return c};c.$71=function(){__p&&__p();var a=this,c=this.$42.getVideoStreamReportKeys(),d=null;c.some(function(c){c=a.$42.getVideoMetric(c,b("VFRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(c){var e=c.current-c.first;c=c.updatedTime-c.startedTime;c>0&&(d=e*8/c*1e3);return!0}return!1});return d};c.$68=function(a){__p&&__p();var c=this,d=this.$42.getVideoStreamReportKeys();d.some(function(d){var e=c.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_SENT);d=c.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(e&&d){a.psent=e.current;a.plost=d.current;return!0}return!1});return a};c.$69=function(){__p&&__p();var a=this,c={dec_bytes:null,dec_time:null,dname:this.$39,frd:null,precv:null,plost:null,qps:null},d=this.$42.getVideoStreamReportKeys();d.some(function(d){var e=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);d=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(e&&d){c.precv=e.current;c.plost=d.current;return!0}return!1});d.some(function(d){d=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(d){c.dec_bytes=d.current-d.first;c.dec_time=d.updatedTime-d.startedTime;return!0}return!1});d.some(function(d){var e=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").FRAMES_DECODED);d=a.$42.getVideoMetric(d,b("VFRTCMediaMetricsConst").INBOUND_QP);if(e&&d){c.frd=e.current;c.qps=d.current;return!0}return!1});return c};c.$72=function(){return new Date().valueOf()-this.$14};c.$47=function(){var a=(g||(g=b("performanceNow")))()-this.$19;return Math.floor(this.$15+a)};c.$48=function(a){if(this.$5[a])return;this.$5[a]=this.$72();this.$6[a]=this.$47()};c.$55=function(a){if(this.$7[a])return;this.$7[a]=this.$72()};c.$49=function(a){if(this.$8[a])return;this.$8[a]=this.$72()};c.$52=function(a){if(this.$13[a])return;this.$13[a]=this.$72()};c.setDeviceCharged=function(a){this.$38=a};c.$50=function(a,b,c){a?this.$48(c):this.$48(b)};c.$46=function(){this.$16=new Date().valueOf()};c.$43=function(){var a=b("UserAgentData").platformName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(a+=" Mobile");return{device:b("UserAgentData").deviceName,os:a,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}};c.$44=function(){window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("VFRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType)};c.$45=function(){navigator.hardwareConcurrency!=null&&this.addExtraInfo(b("VFRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("VFRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),this.addExtraInfo(b("VFRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio)};c.getCallDuration=function(){return this.$65()};c.getConnectedStartTime=function(){return this.$5[i.CALL_CONNECTED]?this.$5[i.CALL_CONNECTED]+this.$14:0};c.getCurrentTimeFromCallConnected=function(){var a=this.$6[i.CALL_CONNECTED];return this.$47()-a};c.getMediaMetricTracker=function(){return this.$42};c.getEndCallReason=function(){return this.$33!=null?b("VFRTCConstants").callEndReasonString(this.$33):"Unknown"};c.setRelayIP=function(a){this.$37=a};return a}();c.CANONICAL_NULL_SUMMARY=Object.freeze(c.nullSummary());c.OLDEST_SUPPORTED_SUMMARY_VERSION=19;c.CURRENT_SUMMARY_VERSION=24;c.REPORT_KEY="reportID";e.exports=c}),null);
__d("VFRTCCallSummaryStore",["CacheStorage","FBLogger","VFRTCCallSummary","VFRTCLogger","areEqual","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3,m=3*60*1e3,n=null;a=function(){__p&&__p();a.getInstance=function(){n||(n=new a());return n};function a(){this.$1=new(b("CacheStorage"))(h,i),this.$2=b("VFRTCLogger").getInstance()}var c=a.prototype;c.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid VFRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};c.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};c.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};c.removeCallSummaries=function(a){var b=this;this.$3(function(c){var d=a.length;for(var e=0;e<d;e++){var f=a[e].peerID,g=a[e].callID;c[f]&&c[f][g]&&(delete c[f][g],b.$6(c[f])&&delete c[f])}return c},this.$2.logError.bind(this.$2,null,null))};c.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],m);e&&b.push(e)}return b};c.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};c.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};c.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("VFRTCCallSummary").fromJsonString(a.__d):null};c.getCallSummaries=function(){var a=this.$1.get(j)||{};return a};c.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=l);(d===void 0||d===null)&&(d=l);var f=this.getCallSummaries(),h=this.getCallSummaries();f=a(f);if(f===null)return;var i=this.getCallSummaries();if((g||(g=b("areEqual")))(h,i))this.$1.set(j,f);else if(d>0){c("Retry lock");if(e){var m=this;b("setTimeout")(function(){m.$3(a,c,d-1,!0)},k)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};return a}();e.exports=a}),null);
__d("VFRTCGroupCallIncomingController",["invariant","FBRTCCapability","FBRTCDeviceStatus","FBRTCHangupReason","FBRTCRingType","FBRTCRtcResponseStatusCode","VFRTCCallBlockingStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCCallUIWrapper","VFRTCClientFeatureGating","VFRTCConstants","VFRTCgenerateRTCCallID","VFRTCLogger","VFRTCMultiwayMessage","VFRTCMWProtocolHandler","VFRTCProxyUserUtils","VFRTCTransactions","VFWebLogger","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("VFRTCConstants").CallEndReason;a=b("VFRTCTransactions").FBRTCTransactionOwner;function i(a){b("VFRTCCallUIWrapper").openGroupCallURI(a.conferenceName,a.callID,a.hasVideo,a.initializeVideo,a.multiwayCoreTier,a.multiwayWwwTier,a.serverInfoData,"answer button",a.callSummary)}c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this)||this;d.$VFRTCGroupCallIncomingController5=i;d.$VFRTCGroupCallIncomingController2=c;d.$VFRTCGroupCallIncomingController3=b;d.$VFRTCGroupCallIncomingController4=null;return d}var d=c.prototype;d.$VFRTCGroupCallIncomingController6=function(a){this.$VFRTCGroupCallIncomingController1=new(b("VFRTCCallSummary"))({peerID:"MW_PEER_ID",callID:a,isCaller:!1}),this.$VFRTCGroupCallIncomingController1.setCallType("mws"),this.$VFRTCGroupCallIncomingController1.setActiveConnection("mws"),this.$VFRTCGroupCallIncomingController1.setRingRequestReceived()};d.$VFRTCGroupCallIncomingController7=function(){this.$VFRTCGroupCallIncomingController1.onCallEnded(h.IGNORE_CALL,!1,!1,"calling disabled"),this.$VFRTCGroupCallIncomingController1.save(b("VFRTCCallSummaryStore").getInstance())};d.$VFRTCGroupCallIncomingController8=function(a,b,c,d,e,f,g){c=new this.$VFRTCGroupCallIncomingController3(b.conferenceName(),a,e,f,g,d);this.$VFRTCGroupCallIncomingController9(c,a,d,g,b,[e].concat(f));this.$VFRTCGroupCallIncomingController10(c,b,d);this.$VFRTCGroupCallIncomingController11(c,b,d);this.$VFRTCGroupCallIncomingController4=c;return this.$VFRTCGroupCallIncomingController4};d.$VFRTCGroupCallIncomingController12=function(a,c,d,e,f,g,h){__p&&__p();this.$VFRTCGroupCallIncomingController1.onPressedAnswer();this.$VFRTCGroupCallIncomingController1.save(b("VFRTCCallSummaryStore").getInstance());j("MW answered ConferenceName: %o",g.conferenceName());var i="",k="";if(b("VFRTCClientFeatureGating").canUseMultiwaySandbox()){var l;g=g.header().extensions;l=(l=g)!=null?l.multiwayWwwTier:l;g=(g=g)!=null?g.multiwayCoreTier:g;k=l?l:"";i=g?g:""}this.$VFRTCGroupCallIncomingController5({callSummary:this.$VFRTCGroupCallIncomingController1,conferenceName:a,callID:d,hasVideo:f,initializeVideo:c,multiwayCoreTier:i,multiwayWwwTier:k,serverInfoData:e,participantFBIDs:h})};d.$VFRTCGroupCallIncomingController9=function(a,b,c,d,e,f){var g=this;a.addListener("answerCall",function(a,h){return g.$VFRTCGroupCallIncomingController12(a,h,b,c,d,e,f)})};d.$VFRTCGroupCallIncomingController10=function(a,c,d){var e=this;a.addListener("ignoreCall",function(a){e.$VFRTCGroupCallIncomingController13(c,d,a?b("FBRTCHangupReason").IN_ANOTHER_CALL:b("FBRTCHangupReason").IGNORE_CALL,a?h.IN_ANOTHER_CALL:h.IGNORE_CALL,a)})};d.$VFRTCGroupCallIncomingController11=function(a,c,d){var e=this;a.addListener("timeout",function(a){e.$VFRTCGroupCallIncomingController13(c,d,b("FBRTCHangupReason").NO_ANSWER_TIMEOUT,h.NO_ANSWER_TIMEOUT,a)})};d.$VFRTCGroupCallIncomingController13=function(a,c,d,e,f){f?b("VFRTCMWProtocolHandler").otherUserInAnotherCall(a.conferenceName(),c,d,this.$VFRTCGroupCallIncomingController1.callID):b("VFRTCMWProtocolHandler").endCall(a.conferenceName(),c,d),this.$VFRTCGroupCallIncomingController1.onCallEnded(e,!1),this.$VFRTCGroupCallIncomingController1.save(b("VFRTCCallSummaryStore").getInstance()),this.cancelIncomingCallDialog()};d.onMessageReceived=function(a,c){__p&&__p();var d=this;a=new(b("VFRTCMultiwayMessage"))(a);var e=this.getTransaction(a);b("promiseDone")(e.start().then(function(a){if(a!=null)if(a.ringRequest()!=null){var f=b("VFRTCgenerateRTCCallID")();f=d.handleRingRequest(a,f,Boolean(c==null?void 0:c.userAnsweredCall));f&&b("promiseDone")(e.sendResponse(f),function(){d.$VFRTCGroupCallIncomingController1.setRingResponseSent()})}else a.dismissRequest()!=null?(j("MW msg.get type:%o conferenceName:%o %o",a.type(),a.conferenceName(),a.dismissRequest()),e.sendResponse(d.handleDismissRequest(a))):j("MW Incoming controller only handle ring and dismiss, dropping other message",a)},function(a){}))};d.setCustomAnswerHandler=function(a){this.$VFRTCGroupCallIncomingController5=a};d.cancelIncomingCallDialog=function(){this.$VFRTCGroupCallIncomingController4&&(this.$VFRTCGroupCallIncomingController4.cancel(),this.$VFRTCGroupCallIncomingController4=null)};d.handleDismissRequest=function(a){if(this.$VFRTCGroupCallIncomingController4){var c=this.$VFRTCGroupCallIncomingController4.serverInfoData();c==a.serverInfoData()?this.cancelIncomingCallDialog():j("MW Received dismiss with different server info data")}return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{})};d.handleRingRequest=function(a,c,d){__p&&__p();d===void 0&&(d=!1);var e=b("nullthrows")(a.ringRequest()),f=a.conferenceName();e!==null||g(0,4280);j("MW msg.get type:%o conferenceName:%o %o",a.type(),f,a.ringRequest());var h=a.serverInfoData(),i=this.$VFRTCGroupCallIncomingController3.getHangUpReasonForNewRequest();if(i===b("FBRTCHangupReason").IN_ANOTHER_CALL){b("VFRTCMWProtocolHandler").otherUserInAnotherCall(f,h,b("FBRTCHangupReason").IN_ANOTHER_CALL,c.toString());return null}this.$VFRTCGroupCallIncomingController6(c);if(b("VFRTCCallBlockingStore").getBlockingStatus()){this.$VFRTCGroupCallIncomingController7();return null}if(h==null)return a.createResponse(b("FBRTCRtcResponseStatusCode").BAD_REQUEST,{callID:c.toString()});i=this.getParticipantsFromRingRequest(e,a.conferenceName(),c);var k=i.caller;i=i.usersToRing;var l=e.ringType===b("FBRTCRingType").GROUP_VIDEO_CALL||e.ringType===b("FBRTCRingType").PEER_VIDEO_CALL;if(d)this.$VFRTCGroupCallIncomingController12(f,l,c,h,l,a,[k].concat(i));else{d=this.$VFRTCGroupCallIncomingController8(c,a,e,h,k,i,l);d.showIncomingDialog()}f={deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED],deviceStatus:b("FBRTCDeviceStatus").OK};return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ringResponse:f},callID:c.toString()})};d.getParticipantsFromRingRequest=function(a,c,d){c=a.caller;var e=a.otherParticipants,f=b("VFRTCProxyUserUtils").setProxyingAsUsersFromMessage(a);f!=null&&(b("VFWebLogger").logRTCCheckpoint({checkpoint:"Aloha: Incoming call with proxyingAs users"}),f.forEach(function(a,c){e.includes(a)||(b("VFWebLogger").logRTCCheckpoint({checkpoint:"Incoming call proxyingAsUsers not in usersToRing"}),e.push(a))}),e=e.filter(function(a){return f.get(a)==null}));return{caller:c,usersToRing:e}};return c}(a);function j(){}e.exports=c}),null);
__d("VFRTCAcceptButton.react",["cx","fbt","MessengerDialogs.bs","React","VFRTCCallControlsButtonWithLabel.react","VFRTCUICameraIcon.react","VFRTCUIPhoneIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),d.props.onAccept()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("VFRTCCallControlsButtonWithLabel.react"),{className:"_6jvd icon-40","data-testid":"answerCallButton",onClick:this.$1,shouldThrottle:!1,isVideoCall:this.props.isVideoCall,label:h._("Ch\u1ea5p nh\u1eadn"),title:h._("Ch\u1ea5p nh\u1eadn"),children:this.props.isVideoCall?b("React").jsx(b("VFRTCUICameraIcon.react"),{}):b("React").jsx(b("VFRTCUIPhoneIcon.react"),{variant:"start call"})})};return c}(b("React").Component);e.exports=a}),null);
__d("VFRTCDeclineButton.react",["cx","fbt","MessengerDialogs.bs","React","VFRTCCallControlsButtonWithLabel.react","VFRTCUIXIcon.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),d.props.onClick()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("VFRTCCallControlsButtonWithLabel.react"),{className:b("joinClasses")("_6jtv icon-40 icon-1",this.props.className),"data-testid":"ignoreCallButton",onClick:this.$1,label:h._("T\u1eeb ch\u1ed1i"),title:h._("T\u1eeb ch\u1ed1i"),children:b("React").jsx(b("VFRTCUIXIcon.react"),{})})};return c}(b("React").Component);e.exports=a}),null);
__d("VFRTCGroupCallIncomingDialog.react",["cx","MercuryIDs","MessengerDialog.react","MessengerDialogs.bs","MessengerParticipants.bs","React","VFRTCAcceptButton.react","VFRTCClientFeatureGating","VFRTCDeclineButton.react","VFRTCGroupCallIncomingDialogBody.react","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=260,i=function(a,c){a||(b("MessengerDialogs.bs").removeAllDialogs(),c())};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerParticipants.bs").getMulti(this.props.participantIDs.map(b("MercuryIDs").getParticipantIDFromUserID),function(c){var d=b("immutable").Map(c).filter(function(b){return b.id!=a.props.callerID});a.$1=c[a.props.callerID];a.setState({rungParticipants:d})})};d.render=function(){var a=this;return!this.$1?null:b("React").jsxs(b("MessengerDialog.react"),{className:"_6jvl",layerHideOnBlur:!1,shown:!0,onToggle:function(b){return i(b,a.props.onIgnore)},width:h,children:[b("React").jsx(b("VFRTCGroupCallIncomingDialogBody.react"),{isGroupCall:this.props.isGroupCall,hasVideo:this.props.hasVideo,caller:this.$1,callees:this.state.rungParticipants.valueSeq().toArray(),conferenceName:this.props.conferenceName}),b("React").jsxs("div",{className:(this.props.hasVideo&&b("VFRTCClientFeatureGating").answerCallWithThreeButtons()?"_6nqr":"")+(!b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.hasVideo?" _6jvm":""),children:[b("React").jsx(b("VFRTCDeclineButton.react"),{isP2P:!1,onClick:this.props.onIgnore}),b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.hasVideo?b("React").jsx(b("VFRTCAcceptButton.react"),{onAccept:function(){a.props.onAnswer(!1)},isVideoCall:!1,isP2P:!1}):null,this.props.hasVideo?b("React").jsx(b("VFRTCAcceptButton.react"),{onAccept:function(){a.props.onAnswer(!0)},isVideoCall:!0,isP2P:!1}):null]})]})};return c}(b("React").Component);e.exports=a}),null);
__d("VFRTCGroupCallIncomingDialogBody.react",["cx","fbt","MessengerDialogBodyReact.bs","MessengerProfileImageWrapperReact.bs","MessengerSpinner.react","React","RelayFBEnvironment","RelayModern","SplitImage.react","VFRTCUtils","intlList","VFRTCGroupCallIncomingDialogBodyQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogBodyReact.bs").jsComponent,j=b("MessengerProfileImageWrapperReact.bs").jsComponent,k=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var l=50,m=function(){return b("VFRTCGroupCallIncomingDialogBodyQuery.graphql")},n=function(a){return h._("{names of users showed on group call incoming dialog}",[h._param("names of users showed on group call incoming dialog",a)])},o=function(a,b,c){a=b?h._("{caller name} mu\u1ed1n b\u1ea1n tham gia chat video nh\u00f3m.",[h._param("caller name",c.short_name)]):h._("{caller name} mu\u1ed1n b\u1ea1n tham gia cu\u1ed9c g\u1ecdi nh\u00f3m.",[h._param("caller name",c.short_name)]);return a},p=function(a){__p&&__p();var c=a.isGroupCall,d=a.hasVideo,e=a.caller,f=a.callees,g=a.conferenceName,h=Array.of(e.image_src).concat(Array.from(f.map(function(a){return a.image_src}))),j=b("intlList")(Array.of(e.short_name).concat(Array.from(f.map(function(a){return a.short_name}))),b("intlList").CONJUNCTIONS.AND).toString();return b("VFRTCUtils").getThreadID(g)===null?b("React").jsx(q,{isGroupCall:c,hasVideo:d,image:h,groupName:j,conferenceName:g}):b("React").jsx(k,{environment:b("RelayFBEnvironment"),query:m,variables:{id:b("VFRTCUtils").getThreadID(g)},render:function(a){__p&&__p();var e=a.error;a=a.props;if(e)return b("React").jsx("div",{children:e.message});else if(a){e=a.message_thread.image!==null&&a.message_thread.image.uri!==null?Array.of(a.message_thread.image.uri):h;a=a.message_thread.thread_name===null?j:a.message_thread.thread_name;return b("React").jsx(q,{isGroupCall:c,hasVideo:d,image:e,groupName:a,conferenceName:g})}return b("React").jsx(i,{children:b("React").jsx("div",{className:"_6jvn",children:b("React").jsx(b("MessengerSpinner.react"),{className:"_6lgz",color:"blue"})})})}})},q=function(a){a.isGroupCall;a.hasVideo;var c=a.image,d=a.groupName;a.conferenceName;return(a=b("React")).jsxs("div",{children:[a.jsx("div",{className:"_6jvn",children:a.jsx(j,{className:"_4j_j",showBadge:!1,size:l,children:a.jsx(b("SplitImage.react"),{border:!0,className:"_4j_j",srcs:c,size:l,halfView:!0})})}),a.jsx("div",{className:"_6jvz",children:n(d)})]})};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsxs(i,{className:"autofocus",children:[b("React").jsx(p,{isGroupCall:this.props.isGroupCall,hasVideo:this.props.hasVideo,caller:this.props.caller,callees:this.props.callees,conferenceName:this.props.conferenceName}),b("React").jsx("div",{className:"_6jw4",children:o(this.props.isGroupCall,this.props.hasVideo,this.props.caller)})]})};return c}(b("React").Component);e.exports=a}),null);
__d("VFRTCLocalMessageQueue",["CacheStorage","VFRTCConstants","VFRTCExperiments"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=new Map(),n={STORAGE_TYPE:g,PREFIX:h,OFFER_KEY:i,OFFER_SUFFIX:j,DATA_KEY_PREFIX:k,CACHE_LIFE:l,clearQueue:function(a){m.set(a,new Map())},writePeerOfferToStorage:function(a,b){a=n.getStorage(a,j);n._storeData(a,i,b)},getPeerOfferFromStorage:function(a){a=n.getStorage(a,j);return n._getData(a,i)},clearPeerOfferFromStorage:function(a){a=n.getStorage(a,j);a.remove(i)},pluckOffer:function(a){if(b("VFRTCExperiments").passOfferWithWindowMessages()){var c=m.get(a)||new Map(),d=c.get(i);c["delete"](i);return d||null}else{c=n.getPeerOfferFromStorage(a);n.clearPeerOfferFromStorage(a);return c||null}},enqueueMessage:function(a,c,d){c=k+c.toString();var e=m.get(a)||new Map();d.msg_type===b("VFRTCConstants").PayloadType.OFFER&&(c=i);e.set(c,d);m.set(a,e)},drainQueue:function(a,b){__p&&__p();var c=m.get(a)||new Map();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];b(f)}m.set(a,new Map())},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},_getData:function(a,b){var c=a.get(b);if(c&&n._isValid(c))return c.__d;else c&&a.remove(b);return null},_getAndRemoveData:function(a,b){var c=n._getData(a,b);if(c!==null){a.remove(b);return c}return null},_isValid:function(a){return Date.now()-a.__t<l},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=n}),null);
__d("VFRTCMessage",["VFRTCConstants","VFRTCExperiment","VFRTCSdpUtils","VFRTCSupport"],(function(a,b,c,d,e,f){__p&&__p();var g="mobile";a=function(){"use strict";__p&&__p();function a(a){__p&&__p();if(!this.$1(a))throw new Error("invalid webrtc message");this.originalMessageData=a;this.peerID=a.from;this.callID=parseInt(a.call_id,10);this.msg=JSON.parse(a.payload);this.msg.json_payload&&(this.escalationName=this.msg.sessionName,this.msg=this.msg.json_payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=a.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$2();this.$3();this.$4()}var c=a.prototype;c.$1=function(a){return a.from&&a.call_id&&a.payload};c.$2=function(){if(this.peerSupportsVideoInterop)return;this.isFromMobile()&&this.disableVideo()};c.disableVideo=function(){this.msg.sdp&&(this.msg.sdp=b("VFRTCSdpUtils").disableVideo(this.msg.sdp)),(this.msgType===b("VFRTCConstants").PayloadType.SET_VIDEO||this.msgType===b("VFRTCConstants").PayloadType.OFFER||this.msgType===b("VFRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("VFRTCConstants").PayloadType.ANSWER||this.msgType===b("VFRTCConstants").PayloadType.ICERESTART_ANSWER)&&(this.msg.videoon=!1)};c.$3=function(){this.isFromMobile()&&this.msg.sdp&&this.msgType!==b("VFRTCConstants").PayloadType.ICE_CANDIDATE&&(this.msg.sdp=b("VFRTCSdpUtils").removeRED(this.msg.sdp))};c.$4=function(){if(this.isFromMobile()&&b("VFRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("VFRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("VFRTCExperiment").gen("rtc_browser_use_vp9");a.getBool("allow_vp9",!1)||(this.msg.sdp=b("VFRTCSdpUtils").removeVP9(this.msg.sdp))}};c.isOffer=function(){return this.msgType===b("VFRTCConstants").PayloadType.OFFER};c.isFromMobile=function(){return this.source===g};c.isRemoteVideoSupported=function(){return!this.msg.sdp||this.msgType===b("VFRTCConstants").PayloadType.ICE_CANDIDATE?!0:b("VFRTCSdpUtils").isVideoSupported(this.msg.sdp)};c.isRetry=function(){return!!this.msg.flag};c.isForCall=function(a,c){return this.escalationName&&(this.msgType===b("VFRTCConstants").PayloadType.HANGUP||this.msgType===b("VFRTCConstants").PayloadType.SWITCH_TO_MULTIWAY)?c===this.escalationName:!a||a===this.callID||this.msgType===b("VFRTCConstants").PayloadType.OFFER||this.msgType===b("VFRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("VFRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===b("VFRTCConstants").PayloadType.ICE_CANDIDATE};c.getSignalingExperiments=function(){if(this.isFromMobile()){if(!this.msg.experiments)return["sdp_update"];this.msg.experiments.includes("sdp_update")||this.msg.experiments.push("sdp_update")}return this.msg.experiments};return a}();e.exports=a}),null);
__d("VFRTCMessageDedup",[],(function(a,b,c,d,e,f){var g={};a={check:function(a,b,c){g[a]||(g[a]={});g[a][b]||(g[a][b]={});if(g[a][b][c])return!1;g[a][b][c]=!0;return!0}};e.exports=a}),null);
__d("VFRTCIncomingCallController",["fbt","Cache","DocumentTitle","MercuryIDs","MessengerParticipants.bs","UserActivity","VFRTCCallBlockingStore","VFRTCCallSummary","VFRTCCallSummaryStore","VFRTCCallUIWrapper","VFRTCConstants","VFRTCExperiments","VFRTCLocalMessageQueue","VFRTCLocalUploadLogLevel","VFRTCLogger","VFRTCMessage","VFRTCMessageDedup","VFRTCMessageSender","VFRTCSupport"],(function(a,b,c,d,e,f,g){__p&&__p();var h=30;a=function(){"use strict";__p&&__p();function a(a,c,d){this.$11=null,this.$1=a,this.$2=c,this.$3=d,this.$4=null,this.$5=null,this.$6=new(b("VFRTCMessageSender"))(),this.$7=b("VFRTCCallSummaryStore").getInstance(),this.$8=b("VFRTCLogger").getInstance(),this.$9=null,this.$10=new(b("Cache"))()}var c=a.prototype;c.setCustomAnswerHandler=function(a){this.$11=a};c.onMessageReceived=function(a,c){__p&&__p();var d;try{d=new(b("VFRTCMessage"))(a)}catch(b){this.$8.logErrorWithoutID("Unknown data: "+JSON.stringify(a));return}if(!b("VFRTCMessageDedup").check(d.peerID,d.callID,d.msgID)){d.isOffer()&&this.$12()&&this.$6.sendOfferAck(d.peerID,d.callID,d.msg);this.$8.logInfo(d.peerID,d.callID,"Ignoring message (duplicate): "+d.msgID);return}this.$8.logReceivedMessage(d.peerID,d.callID,d.msg);!b("VFRTCExperiments").enableCallCollisionFix()&&b("VFRTCSupport").isWebrtcSupported()&&d.msgType!==b("VFRTCConstants").PayloadType.OFFER&&b("VFRTCLocalMessageQueue").enqueueMessage(d.peerID,d.msgID,a);switch(d.msgType){case b("VFRTCConstants").PayloadType.OFFER:this.$13(d,Boolean(c==null?void 0:c.userAnsweredCall));break;case b("VFRTCConstants").PayloadType.HANGUP:this.$14(d);break;case b("VFRTCConstants").PayloadType.OTHER_DISMISS:this.$15(d);break;case b("VFRTCConstants").PayloadType.ICE_CANDIDATE:case b("VFRTCConstants").PayloadType.OFFER_ACK:case b("VFRTCConstants").PayloadType.ANSWER:case b("VFRTCConstants").PayloadType.MSG_ACK:case b("VFRTCConstants").PayloadType.OK:case b("VFRTCConstants").PayloadType.PING:case b("VFRTCConstants").PayloadType.PRANSWER:case b("VFRTCConstants").PayloadType.ICERESTART_OFFER:case b("VFRTCConstants").PayloadType.ICERESTART_ANSWER:case b("VFRTCConstants").PayloadType.PCRESTART_ANSWER:case b("VFRTCConstants").PayloadType.PCRESTART_OFFER:case b("VFRTCConstants").PayloadType.SDP_UPDATE:case b("VFRTCConstants").PayloadType.ANSWER_ACK:case b("VFRTCConstants").PayloadType.SET_VIDEO:case b("VFRTCConstants").PayloadType.OFFER_NACK:case b("VFRTCConstants").PayloadType.VIDEO_REQUEST:case b("VFRTCConstants").PayloadType.ACK:break;default:break}};c.$13=function(a,c){__p&&__p();var d=this;c===void 0&&(c=!1);var e=a.callID,f=a.msg,g=a.peerID;if(this.$16(e))return;if(f.calltype){this.$6.sendOfferNack(g,e,f);return}this.$12()?this.$6.sendOfferAck(g,e,f):this.$6.sendOfferNack(g,e,f);this.$8.logCallAction(g,e,b("VFRTCLogger").CallAction.RECEIVED_CALL);var h=this.$17(g,e,a);h.setUploadLogLevel(b("VFRTCLocalUploadLogLevel").getUploadLogLevel(b("VFRTCConstants").convertToUploadLogLevel(f.ull)));if(b("VFRTCCallBlockingStore").getBlockingStatus()){this.$18(g,e,h,b("VFRTCConstants").CallEndReason.IGNORE_CALL,!1,!1,!1,"calling disabled");return}var i=this.$1.getCallEndReasonForNewRequest();if(this.$4&&!this.$4.isForPeer(g)||i===b("VFRTCConstants").CallEndReason.IN_ANOTHER_CALL){this.$18(g,e,h,b("VFRTCConstants").CallEndReason.IN_ANOTHER_CALL,!1,!1,!0);this.$3.onCallMissed(g);return}if(!b("VFRTCSupport").isWebrtcSupported()){this.$18(g,e,h,b("VFRTCConstants").CallEndReason.UNSUPPORTED_VERSION,!1,!1,!1);this.$2.showForIncomingCall(e,g);return}if(c){this.$19(g,e,a,h,f.videoon);return}i=new this.$1(g,e);this.$5=h;i.addListener("answerCall",function(b,c){d.$19(g,e,a,h,c)});i.addListener("ignoreCall",function(){d.$20(g,e,h)});i.addListener("timeout",function(){d.$21(g,e,h)});this.$3.hideDialog();c=f.videoon?b("VFRTCConstants").IncomingCallDialogTypes.VIDEO:b("VFRTCConstants").IncomingCallDialogTypes.AUDIO;i.showIncomingDialog(c);this.$4=i;this.$8.logEvent(g,e,"Incoming call dialog shown");this.$22(g)};c.$22=function(a){document.hasFocus()||this.$23(a)};c.$24=function(){this.$25()};c.$23=function(a){var c=this;a=b("MercuryIDs").getParticipantIDFromUserID(a);b("MessengerParticipants.bs").get(a,function(a){if(!c.$4)return;c.$9=b("DocumentTitle").blink(g._("{name} \u0111ang g\u1ecdi",[g._param("name",a.short_name)]))});b("UserActivity").subscribeOnce(this.$25.bind(this))};c.$25=function(){this.$9&&(this.$9.stop(),this.$9=null)};c.$26=function(){this.$4&&this.$4.cancel(),this.$4=null,this.$5=null,this.$24()};c.$14=function(a){__p&&__p();var c=a.peerID,d=a.callID;a=a.msg;this.$27(d);if(this.$4&&this.$4.isForPeerAndCall(c,d)){a=a.reason;(typeof a==="string"||a instanceof String)&&(a=b("VFRTCConstants").endCallReasonFromString(a));this.$18(c,d,this.$5,a,!0,!0,!1);this.$26();a!==b("VFRTCConstants").CallEndReason.OTHER_INSTANCE_HANDLED&&(this.$3.onCallMissed(c),this.$3.showDialog())}};c.$12=function(){return b("VFRTCSupport").isWebrtcSupported()};c.$15=function(a){a=a.callID;this.$27(a);b("VFRTCSupport").isWebrtcSupported()||this.$2.dismiss();this.$4&&this.$4.isForCall(a)&&this.$26()};c.$27=function(a){this.$10.set(a,!0,null,h)};c.$16=function(a){return this.$10.has(a)};c.$17=function(a,c,d){a=new(b("VFRTCCallSummary"))({peerID:a,callID:c,isCaller:!1});a.setCallTrigger("incoming_p2p_ring_dialog");a.setActiveConnection("p2p");a.onFullMessageReceived(d);a.onOfferAckSent(d.msg);return a};c.$19=function(a,c,d,e,f){var g=!d.msg.videoon;e.onPressedAnswer();e.save(this.$7);this.$8.logCallAction(a,c,b("VFRTCLogger").CallAction.ANSWER_CALL);this.$6.sendOtherDismiss(c);!b("VFRTCExperiments").passOfferWithWindowMessages()?b("VFRTCLocalMessageQueue").writePeerOfferToStorage(a,d.originalMessageData):b("VFRTCExperiments").enableCallCollisionFix()||b("VFRTCLocalMessageQueue").enqueueMessage(a,d.msgID,d.originalMessageData);d=this.$11;d?d({peerID:a,callID:String(c),callSummary:e,initializeVideo:f,isAudioCall:g}):b("VFRTCCallUIWrapper").openAsCallee(a,c,e,g,f);this.$26()};c.$20=function(a,c,d){this.$18(a,c,d,b("VFRTCConstants").CallEndReason.IGNORE_CALL,!1,!0,!0),this.$26()};c.$21=function(a,c,d){this.$18(a,c,d,b("VFRTCConstants").CallEndReason.NO_ANSWER_TIMEOUT,!1,!1,!1),this.$26(),this.$3.onCallMissed(a),this.$3.showDialog()};c.$18=function(a,c,d,e,f,g,h,i){i===void 0&&(i=null);h&&this.$6.sendHangup(a,c,e);g&&this.$6.sendOtherDismiss(c);d&&(d.onCallEnded(e,f,null,i),d.save(this.$7));h=b("VFRTCConstants").fullCallEndReasonString(e,f);this.$8.logCallAction(a,c,b("VFRTCLogger").CallAction.END_CALL,h)};return a}();e.exports=a}),null);
__d("VFRTCMWSessionDescription",["Promise","VFRTCCallStore","VFRTCConsoleLogger","VFRTCConstants","VFRTCGroupCallActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").SignalingProtocol;a={serverMediaUpdate:function(a,c){__p&&__p();var d=a.fromVersion,e=a.toVersion,f=a.mediaUpdates;a=b("VFRTCCallStore").getConnection(g.MULTIWAY);if(!a)return;var h=a.getLocalDescription(),i=a.getRemoteDescription(),j=i.sessionDescription.getVersion();if(j!==d){c(j);return}f.forEach(function(a){i.processServerMediaUpdate(a)});i.sessionDescription.setVersion(e);b("Promise").all([a.setLocalDescription(h),a.setRemoteDescription(i)]).then(function(){var a;b("VFRTCGroupCallActions").toggleRemoteStream((a=[]).concat.apply(a,f.map(function(a){a=a.media;return a})).reduce(function(a,b){var c=b.id;b=b.enabled;a[c]=b;return a},{}));c(e)},function(){return c(j)})["catch"](function(a){})}};e.exports=a}),null);
__d("VFRTCCallBackButton.react",["cx","fbt","FBLogger","React","VFRTCCallControlsButtonWithLabel.react","VFRTCCallTriggerMapping","VFRTCUICameraIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=b("VFRTCCallTriggerMapping")[this.props.trigger];(a===null||a===void 0)&&b("FBLogger")("rtweb").mustfix("Unexpected or unknown call trigger: %s",a)};d.render=function(){return b("React").jsx(b("VFRTCCallControlsButtonWithLabel.react"),{className:"_6jvj icon-40","data-testid":"ignoreCallButton",onClick:this.props.onCallBack,label:h._("G\u1ecdi l\u1ea1i"),title:h._("G\u1ecdi l\u1ea1i"),children:b("React").jsx(b("VFRTCUICameraIcon.react"),{})})};return c}(b("React").Component);e.exports=a}),null);
__d("VFRTCCloseDialogButton.react",["cx","fbt","React","VFRTCCallControlsButtonWithLabel.react","VFRTCUIXIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.action()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").jsx(b("VFRTCCallControlsButtonWithLabel.react"),{className:"_6jtv icon-40 icon-1","data-testid":"closeChatButton",onClick:this.$1,label:h._("\u0110\u00f3ng"),title:h._("\u0110\u00f3ng"),children:b("React").jsx(b("VFRTCUIXIcon.react"),{})})};return c}(b("React").Component);e.exports=a}),null);
__d("UserMediaRequestError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,c)||this;e.constraint=d;e.nativeErrorName=b;e.message=g(c);e.name=h(b);return e}b.createFromNative=function(a){var c=a.message,d=a.name;a=a.constraint;return new b(d,c,a||"")};var c=b.prototype;c.isRecoverableError=function(){return this.name==="InvalidStateError"?!0:!1};c.getEndCallSubReason=function(){return"MediaFailed: "+this.name+", "+this.constraint};return b}(babelHelpers.wrapNativeSuper(Error));function g(a){switch(a){case"The operation is insecure.":return"The request is not allowed by the user agent or the platform in the current context.";default:return a}}function h(a){switch(a){case"ConstraintNotSatisfiedError":return"OverconstrainedError";case"NO_DEVICES_FOUND":case"DevicesNotFoundError":return"NotFoundError";case"MediaDeviceFailedDueToShutdown":case"MediaDeviceKillSwitchOn":case"TrackStartError":return"NotReadableError";case"PermissionDeniedError":case"PERMISSION_DENIED":case"PermissionDismissedError":return"NotAllowedError";default:return a}}e.exports=a}),null);
__d("VFRTCEndCallReason",["FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode","VFRTCConstants","VFRTCStrings"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VFRTCConstants").CallEndReason,h=b("VFRTCConstants").CollabCallEndSubreason;a=function(){__p&&__p();function a(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=b("VFRTCConstants").endCallReasonFromString(a):this.$1=a}var c=a.prototype;c.setSubreason=function(a){this.$2=a;return this};c.getSubreason=function(){return this.$2};c.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};c.getRemoteEnded=function(){return this.$3==="remote"};c.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};c.$4=function(){return b("VFRTCConstants").callEndReasonString(this.$1)};c.getReasonID=function(){return this.$1};c.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};c.$5=function(a){__p&&__p();switch(this.$1){case g.NO_ANSWER_TIMEOUT:case g.IGNORE_CALL:return b("VFRTCStrings").noAnswer;case g.OTHER_NOT_CAPABLE:if(this.$2===h.MCU_INVALID_STREAM_CONFIGURATION)return b("VFRTCStrings").invalidStreamConfiguration;case g.INCOMING_TIMEOUT:case g.NO_PERMISSION:case g.OTHER_CARRIER_BLOCKED:return b("VFRTCStrings").unreachable;case g.SIGNALING_MESSAGE_FAILED:case g.WEBRTC_ERROR:case g.NO_UI_ERROR:case g.CALLER_NOT_VISIBLE:case g.CLIENT_ERROR:return b("VFRTCStrings").callFailed;case g.UNSUPPORTED_VERSION:return b("VFRTCStrings").cannotConnect;case g.IN_ANOTHER_CALL:return b("VFRTCStrings").inAnotherCall;case g.CARRIER_BLOCKED:return b("VFRTCStrings").switchToWiFi;case g.CLIENT_INTERRUPTED:return b("VFRTCStrings").callInterrupted;case g.HANGUP_CALL:case g.ACCEPT_AFTER_HANGUP:return a?"":b("VFRTCStrings").callEnded;case g.CONNECTION_DROPPED:return b("VFRTCStrings").connectionLost;case g.OTHER_INSTANCE_HANDLED:return null;case g.CLIENT_ENCRYPTION_ERROR:return b("VFRTCStrings").clientEncryptionError;case g.INACTIVE_TIMEOUT:return b("VFRTCStrings").inactive;default:return null}};c.$6=function(){__p&&__p();var a;if(this.$1!==g.OTHER_NOT_CAPABLE&&this.$1!==g.SIGNALING_MESSAGE_FAILED&&this.$1!==g.HANGUP_CALL&&this.$1!==g.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case h.REMOTE_PEER_HANGUP:return"Call ended";case h.REMOTE_PEER_REJECT:return"Call declined";case h.CLOSED_BY_MCU:return"Call expired";case h.CLOSED_AS_STALE:return"Server failed, call is stale";case h.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case h.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case h.LOST_MCU_CONNECTION:return"MCU Media connection failed";case h.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case h.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case h.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case h.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case h.INVALID_MEETING_ID:return"Invalid meeting ID";case h.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};a.fromHangupReason=function(c){switch(c){case b("FBRTCHangupReason").IGNORE_CALL:return new a(g.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new a(g.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new a(g.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new a(g.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new a(g.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new a(g.CLIENT_INTERRUPTED);default:return new a(g.HANGUP_CALL)}};a.fromDismissRequest=function(c){__p&&__p();if(!c)return new a(g.HANGUP_CALL);switch(c.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new a(g.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new a(g.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new a(g.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new a(g.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new a(g.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new a(g.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new a(g.SIGNALING_MESSAGE_FAILED);default:return new a(g.HANGUP_CALL)}};a.fromResponseStatusCode=function(c){switch(c){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new a(g.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new a(g.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new a(g.CLIENT_ERROR);default:return new a(g.HANGUP_CALL)}};return a}();e.exports=a}),null);
__d("VFRTCMediaDevices",["invariant","Promise","VFRTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("VFRTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("VFRTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("VFRTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("MessengerChatLinksFunnelLogger",["CurrentUser","UserAgentData","WebFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="MessengerVideoChatLinksFunnelDefinition",h="defaultSessionKey",i="marker",j="link_hash:",k,l;function a(a){var b=o(),c=m();a&&(l=c=[].concat(c,a));b.setFunnelTags(c);b.markStart().setAction(i).log()}function m(){var a={bn:b("UserAgentData").browserName,bv:b("UserAgentData").browserVersion,os:b("UserAgentData").platformName},c=Object.keys(a).map(function(b){return b+":"+((b=a[b])!=null?b:"unknown")});return c}function c(){var a=[];b("CurrentUser").isEmployee()&&a.push("is_employee");b("CurrentUser").isTestUser()&&a.push("is_test_user");return a}function d(a){return j+a}function f(a,b){var c=o();c.setAction(a);b&&b.actionTag&&c.setActionTag(b.actionTag);b&&b.funnelTags&&(l=(l||[]).concat(b.funnelTags),c.setFunnelTags(l));c.log()}function n(a){k=(a=a)!=null?a:h}function o(){return new(b("WebFunnelLogger"))(g).setSessionKey(k)}a={startFunnel:a,appendAction:f,setSessionKey:n,getLinkHashTag:d,getUserTags:c};e.exports=a}),null);
__d("VFRTCCallType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({AUDIO_ONLY:"AUDIO_ONLY",VIDEO_ONLY:"VIDEO_ONLY",AUDIO_VIDEO:"AUDIO_VIDEO",NO_AUDIO_VIDEO:"NO_AUDIO_VIDEO"});e.exports=a}),null);
__d("VFRTCIceCache",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=new Map()}var b=a.prototype;b.getCache=function(){__p&&__p();var a={};for(var b=this.$1,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];a[f]={};for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];a[f][j]=i}}return a};b.reset=function(a,b){var c=this.$1.get(a);c||(c=new Map(),this.$1.set(a,c));c.set(b,[])};b.cacheCandidate=function(a,b,c){var d=this.$1.get(a);d||(d=new Map(),this.$1.set(a,d));a=d.get(b);a||(a=[],d.set(b,a));a.unshift(c)};b.drainCandidates=function(a,b,c){a=this.$1.get(a);if(a){a=a.get(b)||[];while(a.length>0){b=a.pop();c(b)}}};return a}();e.exports=a}),null);
__d("ArchonAppBridge",[],(function(a,b,c,d,e,f){function a(){return Boolean(window.__archonBridge)}e.exports={isArchon:a,archonAppBridge:window.__archonBridge}}),null);
__d("VFRTCIncomingDialog.react",["cx","fbt","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogs.bs","MessengerSpinner.react","React","VFRTCAcceptButton.react","VFRTCClientFeatureGating","VFRTCDeclineButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50;c=b("React").createClass({displayName:"RTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},render:function(){var a=this;return b("React").jsxs(b("MessengerDialog.react"),{className:"_6jvl",layerHideOnBlur:!1,onToggle:this._handleToggle,width:260,children:[b("React").jsx(j,{className:"autofocus",children:this._renderDialogBody()}),b("React").jsxs("div",{className:(this.props.isVideoCall&&b("VFRTCClientFeatureGating").answerCallWithThreeButtons()?"_6nqr":"")+(!b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.isVideoCall?" _6jvm":""),children:[b("React").jsx(b("VFRTCDeclineButton.react"),{isP2P:!0,onClick:this.props.onDecline}),b("VFRTCClientFeatureGating").answerCallWithThreeButtons()||!this.props.isVideoCall?b("React").jsx(b("VFRTCAcceptButton.react"),{onAccept:function(){return a.props.onAccept(!1)},isVideoCall:!1,isP2P:!0}):null,this.props.isVideoCall?b("React").jsx(b("VFRTCAcceptButton.react"),{onAccept:function(){return a.props.onAccept(!0)},isVideoCall:!0,isP2P:!0}):null]})]})},_dialogTitle:function(){return this.props.isVideoCall?h._("L\u1ea7n chat video \u0111\u1ebfn"):h._("Cu\u1ed9c g\u1ecdi \u0111\u1ebfn")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").jsx(b("MessengerSpinner.react"),{}):b("React").jsxs("div",{children:[b("React").jsx(i,{className:"_6jvn",isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").jsxs("div",{className:"_6jvo",children:[b("React").jsx("div",{className:"_6jvp",children:h._("{caller name}",[h._param("caller name",a.name)])}),this._dialogTitle()]})]})},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("VFWebUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:VFWebUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:VFWebUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VFWebUserActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCheckpoint=function(a){this.$1.checkpoint=a;return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setConferenceName=function(a){this.$1.conference_name=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setDuration=function(a){this.$1.duration=a;return this};c.setErrorDetails=function(a){this.$1.error_details=a;return this};c.setErrorDomain=function(a){this.$1.error_domain=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventExtra=function(a){this.$1.event_extra=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setExpectedParticipantCount=function(a){this.$1.expected_participant_count=a;return this};c.setParticipantCount=function(a){this.$1.participant_count=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={checkpoint:!0,client_time:!0,component:!0,conference_name:!0,device_id:!0,duration:!0,error_details:!0,error_domain:!0,event:!0,event_extra:!0,expected_participant_count:!0,participant_count:!0,session_id:!0,surface:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("VFWebLocalStorage",["WebStorage","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3*60*5,i="vfweb_session_id",j="vfweb_session_activity_time",k="vfweb_device_id";a=function(){__p&&__p();function a(){this.$1=this.$3()||this.$4(),this.$2=this.$5()}var c=a.prototype;c.$4=function(){var a={sessionID:b("uuid")(),lastSessionActivityTime:Date.now()},c=(g||(g=b("WebStorage"))).getSessionStorage();c&&(c.setItem(i,a.sessionID),c.setItem(j,String(a.lastSessionActivityTime)));return a};c.$5=function(){var a=(g||(g=b("WebStorage"))).getLocalStorage(),c=a&&a.getItem(k);if(typeof c==="string")return c;else{c=b("uuid")().toUpperCase();a&&a.setItem(k,c);return c}};c.$3=function(){var a=(g||(g=b("WebStorage"))).getSessionStorageForRead(),c=a&&a.getItem(i);a=a&&Number(a.getItem(j));return typeof c==="string"&&a?{sessionID:c,lastSessionActivityTime:a}:null};c.$6=function(){var a=Date.now(),c=(g||(g=b("WebStorage"))).getSessionStorage(),d=a-h;if(this.$1.lastSessionActivityTime<d)return this.$4().sessionID;else{this.$1.lastSessionActivityTime=a;c&&c.setItem(j,String(a));return this.$1.sessionID}};c.getSessionID=function(){return this.$6()};c.getDeviceID=function(){return this.$2};return a}();e.exports=new a()}),null);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setClientAppVersion=function(a){this.$1.client_app_version=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setConferenceNameRaw=function(a){this.$1.conference_name_raw=a;return this};c.setCreationAction=function(a){this.$1.creation_action=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setErrorDetails=function(a){this.$1.error_details=a;return this};c.setErrorType=function(a){this.$1.error_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExperimentsEnabled=function(a){this.$1.experiments_enabled=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setGroupSize=function(a){this.$1.group_size=a;return this};c.setLinkShareTo=function(a){this.$1.link_share_to=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setReferralSurface=function(a){this.$1.referral_surface=a;return this};c.setRoomIDRaw=function(a){this.$1.room_id_raw=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setThreadType=function(a){this.$1.thread_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUserIdsToBeRemoved=function(a){this.$1.user_ids_to_be_removed=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoCallLinkHashRaw=function(a){this.$1.video_call_link_hash_raw=a;return this};c.setVideoCallLinkIDRaw=function(a){this.$1.video_call_link_id_raw=a;return this};c.setVideoCallLinkURLRaw=function(a){this.$1.video_call_link_url_raw=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={client_app_version:!0,clienttime:!0,component:!0,conference_name_raw:!0,creation_action:!0,device_id:!0,error_details:!0,error_type:!0,event:!0,experiments_enabled:!0,group_size:!0,link_share_to:!0,reason:!0,referral_surface:!0,room_id_raw:!0,surface:!0,thread_type:!0,time:!0,user_ids_to_be_removed:!0,vc:!0,video_call_link_hash_raw:!0,video_call_link_id_raw:!0,video_call_link_url_raw:!0,weight:!0};e.exports=a}),null);
__d("EnterMessengerCallRoomMutation",["Promise","RelayFBEnvironment","RelayModern","VideoChatLinksUserActionsTypedLogger","EnterMessengerCallRoomMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("EnterMessengerCallRoomMutation.graphql")};function a(a){return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{room_link:a}},optimisticUpdater:null,onCompleted:function(a){var b;b=(b=a)!=null?(b=b.enter_messenger_call_room)!=null?(b=b.messenger_call_room)!=null?b.conference_name:b:b:b;a=(a=a)!=null?(a=a.enter_messenger_call_room)!=null?(a=a.messenger_call_room)!=null?(a=a.room_message_thread)!=null?a.id:a:a:a:a;b?c({conferenceName:b,threadFBID:a}):a?(i("Missing conferenceName"),c({conferenceName:"GROUP:"+a,threadFBID:a})):(i("Missing conferenceName and threadID"),d(new Error("Missing conference name and thread ID")))},onError:function(a){i(a.message),d(a)}})})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_interstitial").setEvent("error").setErrorType("EnterMessengerCallRoomMutationError").setErrorDetails(a).log()}e.exports=a}),null);
__d("RTCAppData",["FacebookAppIDs","FBRTCExperiment","RTWebClientFeatureGating","URI","VFDesktopHelper","WorkplaceChatHelper","gkx","isFacebookURI","isGroupCallUri","isMessengerDotComURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={getAppID:function(){if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID();else if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return Number(b("VFDesktopHelper").getAppID());return b("FacebookAppIDs").WWW},getChannelManagerAppName:function(){switch(h.getMWAppID()){case b("FacebookAppIDs").MESSENGERDOTCOM.toString():return"messenger_dot_com";case b("FacebookAppIDs").WWW.toString():return"www";case b("FacebookAppIDs").BONFIRE_FOR_WWW.toString():return"bonfire_for_www";case b("FacebookAppIDs").WORKPLACE_DESKTOP.toString():return"workplace";case b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_MACOS.toString():return"desktop_video_chat";case b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_WINDOWS.toString():return"desktop_video_chat_for_windows";default:return"desktop"}},_getWorkplaceChatDesktopAppID:function(){return b("WorkplaceChatHelper").getAppID()||b("FacebookAppIDs").WORKPLACE_DESKTOP},getMWAppID:function(){__p&&__p();if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return b("VFDesktopHelper").getAppID();var a=new(g||(g=b("URI")))(window.location.href);if(b("isGroupCallUri")(a)&&b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)||!b("isGroupCallUri")(a)&&b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw_parent",!1,!1))return b("FacebookAppIDs").MQTT_WEB.toString();if(!b("RTWebClientFeatureGating").shouldUseRealMultiwayAppID())return b("FacebookAppIDs").CHATPROXY_WEB.toString();var c=new g(window.location.href).getDomain();if(!c)return b("FacebookAppIDs").CHATPROXY_WEB.toString();if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID().toString();else if(b("isFacebookURI")(a)&&(c.startsWith("www")||c.startsWith("m")))return b("FacebookAppIDs").WWW.toString();else if(b("isMessengerDotComURI")(a))return b("FacebookAppIDs").MESSENGERDOTCOM.toString();else return b("FacebookAppIDs").CHATPROXY_WEB.toString()}};e.exports=h}),null);
__d("RTCAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("RTCOneVCStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({meetingID:null,meetingPassword:null,participants:[]}));e.exports=a}),null);
__d("RTCOneVCStore",["invariant","FBRTCConfig","FluxReduceStore","RTCAppDispatcher","RTCOneVCStoreState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,b("RTCAppDispatcher"))||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCOneVCStoreState"))()};d.reduce=function(a,b){switch(b.type){case"SET_MEETING_ID":return a.set("meetingID",b.meetingID);case"SET_MEETING_PASSWORD":return a.set("meetingPassword",b.meetingPassword);case"STORE_PARTICIPANTS":b=h(b.participants);return a.set("participants",b);default:return a}};d.getParticipantsSummary=function(){var a=this.getState().participants;return a.length===0?{audioParticipants:0,videoParticipants:0}:a.reduce(function(a,b){b=b.video_mute.some(function(a){return a!==!1});return b?{audioParticipants:a.audioParticipants+1,videoParticipants:a.videoParticipants}:{audioParticipants:a.audioParticipants,videoParticipants:a.videoParticipants+1}},{audioParticipants:0,videoParticipants:0})};d.getParticipants=function(){return this.getState().participants};return c}(b("FluxReduceStore"));a.__moduleID=e.id;function h(a){var c=b("FBRTCConfig").getMeetingID();c!=null||g(0,11961);var d="Facebook (Meeting ID: "+c+")";return a.filter(function(a){return!a.peer_name.includes(d)})}e.exports=new a()}),null);
__d("FBRTCVersionDetection",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f){__p&&__p();a={isChrome:function(){return b("UserAgent").isBrowser("Chrome")},isFirefox:function(){return b("UserAgent").isBrowser("Firefox")},isChromium:function(){return!!navigator.webkitGetUserMedia},webrtcVersion:function(){if(this.isFirefox()||this.isChrome())return b("UserAgentData").browserVersion||0;if(this.isChromium()){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a!=null?parseInt(a[2],10):999}return 0}};e.exports=a}),null);
__d("RTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0,2865);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0,2866);f.disconnect();f=null;d!=null||g(0,2867);d.removeTrack(a);d=null;e!=null||g(0,2868);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0,2865),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0,2866),f.connect(l),e!=null||g(0,2868),l.connect(e.destination)}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("RTCEndCallReason",["FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode","RTWebStrings"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").CallEndReason,h=b("FBRTCConstants").CollabCallEndSubreason;a=function(){__p&&__p();function a(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=b("FBRTCConstants").endCallReasonFromString(a):this.$1=a}var c=a.prototype;c.setSubreason=function(a){this.$2=a;return this};c.getSubreason=function(){return this.$2};c.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};c.getRemoteEnded=function(){return this.$3==="remote"};c.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};c.$4=function(){return b("FBRTCConstants").callEndReasonString(this.$1)};c.getReasonID=function(){return this.$1};c.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};c.$5=function(a){__p&&__p();switch(this.$1){case g.NO_ANSWER_TIMEOUT:case g.IGNORE_CALL:return b("RTWebStrings").noAnswer;case g.OTHER_NOT_CAPABLE:if(this.$2===h.MCU_INVALID_STREAM_CONFIGURATION)return b("RTWebStrings").invalidStreamConfiguration;case g.INCOMING_TIMEOUT:case g.NO_PERMISSION:case g.OTHER_CARRIER_BLOCKED:return b("RTWebStrings").unreachable;case g.SIGNALING_MESSAGE_FAILED:case g.WEBRTC_ERROR:case g.NO_UI_ERROR:case g.CALLER_NOT_VISIBLE:case g.CLIENT_ERROR:return b("RTWebStrings").callFailed;case g.UNSUPPORTED_VERSION:return b("RTWebStrings").cannotConnect;case g.IN_ANOTHER_CALL:return b("RTWebStrings").inAnotherCall;case g.CARRIER_BLOCKED:return b("RTWebStrings").switchToWiFi;case g.CLIENT_INTERRUPTED:return b("RTWebStrings").callInterrupted;case g.HANGUP_CALL:case g.ACCEPT_AFTER_HANGUP:return a?"":b("RTWebStrings").callEnded;case g.CONNECTION_DROPPED:return b("RTWebStrings").connectionLost;case g.OTHER_INSTANCE_HANDLED:return null;case g.CLIENT_ENCRYPTION_ERROR:return b("RTWebStrings").clientEncryptionError;case g.INACTIVE_TIMEOUT:return b("RTWebStrings").inactive;default:return null}};c.$6=function(){__p&&__p();var a;if(this.$1!==g.OTHER_NOT_CAPABLE&&this.$1!==g.SIGNALING_MESSAGE_FAILED&&this.$1!==g.HANGUP_CALL&&this.$1!==g.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case h.REMOTE_PEER_HANGUP:return"Call ended";case h.REMOTE_PEER_REJECT:return"Call declined";case h.CLOSED_BY_MCU:return"Call expired";case h.CLOSED_AS_STALE:return"Server failed, call is stale";case h.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case h.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case h.LOST_MCU_CONNECTION:return"MCU Media connection failed";case h.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case h.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case h.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case h.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case h.INVALID_MEETING_ID:return"Invalid meeting ID";case h.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};a.fromHangupReason=function(c){switch(c){case b("FBRTCHangupReason").IGNORE_CALL:return new a(g.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new a(g.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new a(g.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new a(g.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new a(g.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new a(g.CLIENT_INTERRUPTED);default:return new a(g.HANGUP_CALL)}};a.subreasonFromDismissRequest=function(a){if(!a)return null;switch(a.reason){case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return"REMOVED_BY_PARTICIPANT";default:return null}};a.fromDismissRequest=function(c){__p&&__p();if(!c)return new a(g.HANGUP_CALL);switch(c.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new a(g.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new a(g.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new a(g.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new a(g.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new a(g.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new a(g.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new a(g.SIGNALING_MESSAGE_FAILED);default:return new a(g.HANGUP_CALL)}};a.fromResponseStatusCode=function(c){switch(c){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new a(g.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new a(g.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new a(g.CLIENT_ERROR);default:return new a(g.HANGUP_CALL)}};return a}();e.exports=a}),null);
__d("RTCMediaDevices",["invariant","Promise","RTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("RTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("RTCOnDeviceChangePoller",["Promise","FBRTCLogger","RTCMediaDevices"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();a.isNeeded=function(){var a=navigator;a=a.mediaDevices;return!b("RTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){__p&&__p();var c=this;this.$1=[];this.$2="";this.$4=null;this.$7=function(){__p&&__p();b("RTCMediaDevices").enumerateDevices().then(function(a){__p&&__p();a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===c.$2)return;c.$2=a;for(var a=c.$1,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e()}catch(a){}}})["catch"](function(a){return b("Promise").resolve()}).then(function(){c.$4=window.setTimeout(c.$7,c.$3)})["catch"](function(a){})};this.$3=a}var c=a.prototype;c.add=function(a){this.$1.push(a),this.$5()};c.remove=function(a){this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};c.$5=function(){if(this.$4!==null)return;this.$4=window.setTimeout(this.$7,0)};c.$6=function(){if(this.$1.length>0)return;this.$4!==null&&(window.clearTimeout(this.$4),this.$4=null)};return a}();e.exports=a}),null);
__d("RTCVideoTrackActivityDetector",["invariant","Promise","MediaStream","assignMediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="video track playback timeout",i="unexpected video track ready state",j='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:h,WRONG_READY_STATE_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(j));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,k=null,l=function(){window.clearInterval(k),d&&(d.pause(),b("assignMediaStream")(d,null),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,h){d!=null||g(0,5995),b("assignMediaStream")(d,e),f=function(b){d!=null||g(0,5995),d.currentTime>0&&(a.readyState==="live"?(c(),l()):h(new Error(i)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0,5995);return d.play()}).then(function(){f(),d!=null||g(0,5995),d.addEventListener("timeupdate",f),k=window.setInterval(f,50)})["catch"](function(a){return h(a)})}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(h)})])["catch"](function(a){l();throw a})}};e.exports=a}),null);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("RTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("RTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("RTCUserMediaConstraints",["FBRTCConstants","FBRTCSupport","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("FBRTCConstants").RTCConstraints;var g=b("FBRTCConstants").VideoQuality,h={width:a.FHD_WIDTH,height:a.FHD_HEIGHT,frameRate:a.FRAME_RATE},i={width:a.HD_WIDTH,height:a.HD_HEIGHT,frameRate:a.FRAME_RATE},j={width:a.SD_WIDTH,height:a.SD_HEIGHT,frameRate:a.FRAME_RATE},k={width:a.LQ_WIDTH,height:a.LQ_HEIGHT,frameRate:a.LQ_FRAME_RATE},l={audio:function(a){return a?{deviceId:{exact:a}}:!0},video:function(a,c,d){d===void 0&&(d=b("RTCConfig").CollaborationCallQuality.videoToRoom);c=c?{deviceId:{exact:c}}:null;if(a===g.CUSTOM_VIDEO)return babelHelpers["extends"]({},d,c);if(b("FBRTCSupport").isMobileDevice())return{facingMode:{ideal:"user"}};d=n(a);a=m(a)?k:p(d);return babelHelpers["extends"]({width:o(d,"width",a),height:o(d,"height",a),frameRate:o(d,"frameRate",{frameRate:10})},c)},chromeMediaSource:function(a,b){a=a.video;a=l.chromify(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}},chromify:function(a,b){__p&&__p();if(!a||typeof a!=="object")return Boolean(a);if(!s(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.ideal,j=g.exact;if(i!==void 0)if(Number.isFinite(i)){var k;d.push((k={},k[r(h,"min")]=i,k),(k={},k[r(h,"max")]=i,k))}else{d.push((k={},k[r(h)]=i,k))}if(!b)if(j!==void 0&&!Number.isFinite(j))c[r(h)]=j;else{i=["min","max"];for(var k=0;k<i.length;k++){j=i[k];Number.isFinite(g[j])&&(c[r(h,j)]=g[j])}}}a.advanced&&d.push.apply(d,a.advanced);j={};Object.keys(c).length>0?j.mandatory=c:b&&(j.mandatory={});d.length>0&&(j.optional=d);return j}};function m(a){return a===g.HD_IDEAL_LQ_REQUIRED_VIDEO||a===g.FHD_IDEAL_LQ_REQUIRED_VIDEO}function n(a){switch(a){case g.FHD_VIDEO:case g.FHD_IDEAL_LQ_REQUIRED_VIDEO:return h;case g.HD_VIDEO:case g.HD_IDEAL_LQ_REQUIRED_VIDEO:return i;case g.LQ_VIDEO:return k;case g.SD_VIDEO:return j;default:return i}}function o(a,b,c){c===void 0&&(c=p(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(q(a)[b],d),ideal:d}}function p(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function q(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function r(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function s(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}e.exports=l}),null);
__d("generateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("randomInt")(0,4294967294)+1)}e.exports=a}),null);
__d("RTCUtils",["invariant","Promise","CurrentUser","FBLogger","FBRTCConfig","FBRTCLogger","FBRTCUtils","RTCAudioTrackNoiseDetector","RTCConfig","RTCEndCallReason","RTCMediaDevices","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoTrackActivityDetector","RTWebClientFeatureGating","RTWebUserActionLogger","URI","UserAgent","UserMediaRequestError","generateRTCTransactionID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,j=b("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR,k={isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isRoomCall:function(a){return a.split(":")[0]==="ROOM"},isPeerCall:function(a){return a.split(":")[0]==="PEER"},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return k.isGroupCall(a)||k.isMessengerCall(a)||k.isRoomCall(a)||k.isAlohaCall(a)||k.isWatchPartyCall(a)},getPeerID:function(a){if(k.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!k.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getThreadID:function(a){return!k.isGroupCall(a)?null:Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},createRequestHeader:function(a,c,d,e,f){__p&&__p();a={type:a,transactionId:b("generateRTCTransactionID")(),retryCount:0,conferenceName:c,clientSessionId:e?e:""};c={};d&&(a.serverInfoData=d);f&&(c.esc_p2p_call_id=f);if(b("RTWebClientFeatureGating").canUseMultiwaySandbox()){e=window.location.href;d=k.getSandboxingTierFromURIOrEmpty(e,"multiway_www_tier");f=k.getSandboxingTierFromURIOrEmpty(e,"multiway_core_tier");d&&(c.multiwayWwwTier=d);f&&(c.multiwayCoreTier=f)}a.extensions=c;return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);return b},maybeRemoveVideoConstraint:function(a){return b("RTCMediaDevices").enumerateDevices().then(function(c){if(c.some(function(a){return a.kind==="videoinput"})){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] At least one device has videoinput.  Keeping constraints "+JSON.stringify(a)});return a}b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] No devices capable of videoinput.",errorDomain:"GetUserMedia",errorType:"Removing video stream by setting video constraint to false."});return babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,c){__p&&__p();return a.video?k.maybeRemoveVideoConstraint(a).then(function(a){return k.getUserMedia(a,c)})["catch"](function(c){__p&&__p();if(a.video){if(c.name==="NotFoundError"||c.name==="StreamFailedToStart"){var d="Audio Fallback Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video stream",errorDomain:"GetUserMedia",errorType:d});return k.getUserMedia({video:!1,audio:a.audio})}if(c.name==="OverconstrainedError"){d="Video Constraints Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:d});return k.getUserMedia({video:!0,audio:a.audio})}}d="Error: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Throwing other error",errorDomain:"GetUserMedia",errorType:d});throw c}):k.getUserMedia(a,c)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,c){return k.getUserMedia(a,c)["catch"](function(c){if(a.video&&c.name==="OverconstrainedError"){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithFallbackToEmptyVideoConstraints] Fallback getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:"Original Constraints: "+JSON.stringify(a)});return k.getUserMedia(babelHelpers["extends"]({},a,{video:!0}))}throw c})},getUserScreenMedia:function(a,c,d){return b("RTCScreenSharing").getUserMedia(a,c,d)},getUserMedia:function(a,c){__p&&__p();var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","RTCUtils.getUserScreenMedia()","RTCUtils.getUserMedia()");return b("RTCScreenSharing").getUserMedia(a,"unknown")}d=c&&c.optionalConstraintsOnly&&a.video;var f=k._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,d){e&&typeof e.getUserMedia==="function"?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Newer version"}),a(e.getUserMedia(f).then(function(a){return k._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))}))):g?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Backwards compatible version"}),g.call(navigator,f,a,d)):(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Not supported"}),d("getUserMedia not supported"))})["catch"](function(a){var c=a.message,d=a.name,e=a.constraint;b("RTWebUserActionLogger").logError({errorDomain:"GetUserMedia",errorType:(d?d:"unknown GetUserMedia error")+":"+(c?" "+c:"")+(e?" "+e:"")});throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!==void 0&&(f.audio=b("RTCUserMediaConstraints").chromify(d));e!==void 0&&(f.video=b("RTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,b){return a},getUserMediaWithValidation:function(a,c,d,e){__p&&__p();c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){__p&&__p();var h=function d(h){k.getUserMedia(a).then(function(d){return b("RTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===i||a.message===j)f({stream:d,err:a});else{k.stopMediaStream(d);throw a}})},g)["catch"](function(a){h>0?d(h-1):g(a)})};h(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){k.isFullScreen()?k.exitFullScreen():k.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("RTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("RTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallSubreasonFromDismissRequest:function(a){return b("RTCEndCallReason").subreasonFromDismissRequest(a)},endCallReasonFromResponseStatusCode:function(a){return b("RTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){if(!a.active&&"active"in a)return;a.getTracks().forEach(function(a){a.readyState!=="ended"&&(a.stop(),a.dispatchEvent(new Event("ended")))})},transferAudioTracks:function(a,b){__p&&__p();for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(h||(h=b("URI")))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("FBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("FBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||this.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("FBRTCConfig").isVCEndpointCall()&&b("RTCConfig").CollabWhitelistedBrowserGK},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]},isDevicePresent:function(a,b){return a==null?!1:a.some(function(a){return a.deviceId===b})}};e.exports=k}),null);
__d("RTCScreenSharing",["Promise","CollabRTCChromeScreenSharing","RTCUserMediaConstraints","RTCUtils","UserAgent","VFDesktopHelper","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="SCREEN_SHARING_NOT_SUPPORTED",h="UNEXPECTED_ERROR",i={SCREEN_SHARING_NOT_SUPPORTED:g,getUserMedia:function(a,c,d){__p&&__p();if(b("UserAgent").isBrowser("Chrome")){var e;b("WorkplaceChatHelper").isDesktopChatApp()?e=b("WorkplaceChatHelper").getScreenSharingSourceID():b("VFDesktopHelper").isDesktopApp()?e=b("VFDesktopHelper").getScreenSharingSourceID():e=b("CollabRTCChromeScreenSharing").getSourceID(d,c);return e.then(function(c){return b("RTCUtils").getUserMedia(b("RTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return window.setTimeout(function(){a.active||i.stop()})})}return a})}else if(b("RTCUtils").isVCScreenSharingSupported()&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia==="function")return b("Promise").resolve(navigator.mediaDevices.getUserMedia(a)["catch"](function(a){if(a.name==="NotAllowedError")throw new Error(g)}));return b("Promise").reject(new Error(g))},stop:function(){if(b("UserAgent").isBrowser("Chrome")){if(b("WorkplaceChatHelper").isDesktopChatApp())return b("WorkplaceChatHelper").stopScreenSharing();return b("VFDesktopHelper").isDesktopApp()?b("VFDesktopHelper").stopScreenSharing():b("CollabRTCChromeScreenSharing").stop()}return b("Promise").reject(new Error(h))}};e.exports=i}),null);
__d("FBRTCScreenSharingUtils",["FBRTCExperiment","FBRTCSupport","FBRTCVersionDetection","RTCConfig","RTCUtils"],(function(a,b,c,d,e,f){"use strict";a={isGroupCallScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function(){return b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function(){return!b("FBRTCSupport").isMobileDevice()&&(b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()>=34||b("RTCUtils").isVCScreenSharingSupported())},canPeerReceiveScreenSharing:function(a){if(a.remoteSupport("screen_sharing"))return!0;return!a.remoteSupport("www")&&!a.remoteSupport("mweb")?b("RTCConfig").ScreenSharingToMobileGK?!0:b("FBRTCExperiment").gen("webrtc_enable_screen_sharing").getBool("can_share_to_mobile",!1):!1}};e.exports=a}),null);
__d("RTCSignalingExperiments",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCScreenSharingUtils","FBRTCSupport","FBRTCVersionDetection","UserAgent","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(b){this.$2=new Set(),this.$1=new Set(a.getLocal()),b&&(this.$2=new Set(b))}var c=a.prototype;c.getLocal=function(){return Array.from(this.$1)};c.setRemote=function(b){return!b?this:new a(b)};c.getRemote=function(){return Array.from(this.$2)};c.support=function(a){return this.localSupport(a)&&this.remoteSupport(a)};c.localSupport=function(a){return this.$1.has(a)};c.remoteSupport=function(a){return this.$2.has(a)};a.getLocal=function(){var a=[];(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Firefox >= 38"))&&a.push("sdp_update");g()&&a.push("multiple_streams_plan_b");b("FBRTCScreenSharingUtils").canUserReceiveScreenSharing()&&a.push("screen_sharing");h()&&a.push("multiple_streams_unified");b("FBRTCSupport").isMobileDevice()?a.push("mweb"):a.push("www");b("FBRTCSupport").videoEscalationByUnmuteWorkaround()&&a.push("video_escalation_by_unmute");return a};a.shouldCapMWBitrate=function(){return b("FBRTCExperiment").gen("rtc_www_mw_video_quality").getBool("cap_bitrate",!1)};a.shouldCapAudioBitrate=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("use_audio_bitrate_cap",!1)};a.shouldPreferIsac=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!0:b("FBRTCExperiment").getMediaQualityExperiments().getBool("prefer_isac",!0)};a.shouldAlwaysSetMWDescriptionsOnSMU=function(){return!Boolean(b("qex")._("897144"))};a.shouldEnableAudioNack=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("enable_audio_nack",!1)};return a}();function g(){return(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))&&b("FBRTCVersionDetection").webrtcVersion()>=34}function h(){return b("UserAgent").isBrowser("Firefox")&&b("FBRTCVersionDetection").webrtcVersion()>=40}e.exports=a}),null);
__d("generateRTCSignalingMessageID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("FBRTCMessageSender",["errorCode","CurrentUser","FBRTCConstants","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCSupport","FBRTCUtils","PresenceProperties","RTCAppData","RTCOneVCStore","RTCSignalingExperiments","SiteData","XCollabCallSendMessageController","XVideoCallSendMessageController","generateRTCSignalingMessageID"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;a=function(){"use strict";__p&&__p();function a(){this.onSendFailure=null,this.$1=b("FBRTCLogger").getInstance()}var c=a.prototype;c.sendOffer=function(a,c,d,e,f,g){return this.$2(b("FBRTCConstants").PayloadType.OFFER,a,c,d,e,f,null,g)};c.sendAnswer=function(a,c,d,e,f,g){return this.$2(b("FBRTCConstants").PayloadType.ANSWER,a,c,d,e,f,g)};c.sendPCRestartOffer=function(a,c,d,e,f){return this.$2(b("FBRTCConstants").PayloadType.PCRESTART_OFFER,a,c,d,e,f)};c.sendSdpUpdate=function(a,c,d,e,f){return this.$2(b("FBRTCConstants").PayloadType.SDP_UPDATE,a,c,d,e,f)};c.resendSdpMessage=function(a,b){b.flag=1,this.$3(a,b)};c.resendPayload=function(a,b){b.flag=1,this.$4(a,b)};c.$2=function(a,c,d,e,f,g,h,i){__p&&__p();d=this.$5(d,a);d.sdp=e;a===b("FBRTCConstants").PayloadType.OFFER&&(d.browser_supports_escalation=b("FBRTCSupport").isGroupCallWebtrcSupported(),d.handlescollision=!0,d.pranswer=!1,i&&(d.call_trigger=i));a===b("FBRTCConstants").PayloadType.ANSWER&&h&&(d.escalation_conference_name=h.escalationConferenceName,d.negotiated_escalation_support=h.negotiatedEscalationSupport);(a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER)&&(d.icerestart=!1,d.experiments=b("RTCSignalingExperiments").getLocal());d.videoon=f;d.attributes=g;d.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());this.$3(c,d);return d};c.sendIceCandidate=function(a,c,d){c=this.$5(c,b("FBRTCConstants").PayloadType.ICE_CANDIDATE);c.sdp_mid=d.sdpMid;c.label=d.sdpMLineIndex;c.sdp=d.candidate;this.$4(a,c)};c.sendHangup=function(a,c,d,e,f){c=this.$5(c,b("FBRTCConstants").PayloadType.HANGUP);c.reason=b("FBRTCConstants").callEndReasonString(d);c.subreason=f||"";this.$4(a,c,e,!0)};c.sendOtherDismiss=function(a){a=this.$5(a,b("FBRTCConstants").PayloadType.OTHER_DISMISS);this.$4(b("CurrentUser").getID(),a)};c.sendOfferAck=function(a,c,d,e){e===void 0&&(e=new Map()),this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_ACK,e)};c.sendOfferNack=function(a,c,d){this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_NACK,new Map([["error_code",1356043]]))};c.sendAnswerAck=function(a,c,d){this.$6(a,c,d,b("FBRTCConstants").PayloadType.ANSWER_ACK)};c.sendAck=function(a,c,d){this.$6(a,c,d,b("FBRTCConstants").PayloadType.ACK,new Map([["ack_type",d.type]]))};c.sendMuteStateUpdate=function(a,c,d){c=this.$5(c,b("FBRTCConstants").PayloadType.SET_VIDEO);c.videoon=d;this.$4(a,c)};c.sendClientReportedEvent=function(a,c,d){c=this.$5(c,b("FBRTCConstants").PayloadType.CLIENT_REPORTED_EVENT);c.event_type=d;this.$4(a,c)};c.sendVideoEscalationRequest=function(a,b,c){return this.sendVideoRequestResponse(a,b,0,c)};c.sendVideoRequestResponse=function(a,c,d,e){c=this.$5(c,b("FBRTCConstants").PayloadType.VIDEO_REQUEST);c.ack_id=d;c.videoon=e;c.capability=b("PresenceProperties").getProperties();this.$4(a,c);return c};c.sendMsgAck=function(){};c.sendOk=function(){};c.sendPranswer=function(){};c.sendIcerestartAnswer=function(){};c.$5=function(a,c){var d=b("generateRTCSignalingMessageID")();a={version:h,type:c,call_id:a,msg_id:d};this.$7(c)&&(a.supports_video_interop=!0);return a};c.$7=function(a){return a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PRANSWER||a===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||a===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||a===b("FBRTCConstants").PayloadType.PCRESTART_ANSWER||a===b("FBRTCConstants").PayloadType.SDP_UPDATE||a===b("FBRTCConstants").PayloadType.SET_VIDEO||a===b("FBRTCConstants").PayloadType.VIDEO_REQUEST};c.$3=function(a,b){this.$4(a,b,!1,!0,!0)};c.$6=function(a,c,d,e){var f=(arguments.length<=4?void 0:arguments[4])||new Map(),g=this.$5(c,e);g.ack_id=d.msg_id;d.flag===1&&(g.flag=1);g.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());f.forEach(function(a,b,c){g[b]=a});this.$4(a,g)};c.$4=function(a,c,d,e,f){__p&&__p();var g=c.msg_id,h={peer_id:a,call_id:c.call_id,msg_id:g,msg_type:c.type},i=b("FBRTCUtils").isPeerVCEndpoint(a);if(i){var j=b("RTCOneVCStore").getState(),k=j.meetingID;j=j.meetingPassword;k!=null&&(c.meeting_id=k);j!=null&&(c.meeting_pass=j)}k=(i?b("XCollabCallSendMessageController"):b("XVideoCallSendMessageController")).getURIBuilder().setInt("recipient_id",a).setInt("msg_id",g).setString("message_info",JSON.stringify(c)).getURI();j=null;e&&(j=this.$4.bind(this,a,c,d,!1,f));i=this.$8.bind(this,h);g=this.$9.bind(this,h,j,f);b("FBRTCUtils").sendServerRequest(k,i,g,d);this.onMessageSent&&this.onMessageSent(a,c);this.$1.logSentMessage(a,c.call_id,c)};c.$8=function(a){this.$1.logSentMessageSuccess(a.peer_id,a.call_id,a.msg_type,a.msg_id)};c.$9=function(a,c,d,e){__p&&__p();var f="UNKNOWN_ERROR";e&&(f=e.getError?e.getError():e);this.$1.logSentMessageFailure(a.peer_id,a.call_id,a.msg_type,a.msg_id,f);e=null;f===1356001||f===1356049?e=b("FBRTCConstants").CallEndReason.NO_PERMISSION:f===1356046||f===1356045?e=b("FBRTCConstants").CallEndReason.CALLER_NOT_VISIBLE:(f===1356003||f===1356002||f===1356044)&&(e=b("FBRTCConstants").CallEndReason.OTHER_NOT_CAPABLE);if(!e&&c){c();return}d&&this.onSendFailure&&(e||(e=b("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED),this.onSendFailure(e,f,a.msg_type))};return a}();e.exports=a}),null);
__d("FBRTCPCConfig",["FBRTCConfig","FBRTCVersionDetection"],(function(a,b,c,d,e,f){__p&&__p();var g="stun:stun.fbsbx.com:3478";function h(a,c,d){if(b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34){var e={urls:a};c!==void 0&&d!==void 0&&(e.username=c,e.credential=d);return[e]}e=[];for(var f=0;f<a.length;f++)c!==void 0&&d!==void 0?e.push({url:a[f],username:c,credential:d}):e.push({url:a[f]});return e}a=function(){"use strict";__p&&__p();function a(){this.sslPort="",this.tcpPort="",this.turnIP="",this.turnPassword="",this.turnUsername="",this.udpPort=""}var c=a.prototype;c.setTurnCredentials=function(a){this.turnIP=a.ip,this.udpPort=a.udp_port,this.tcpPort=a.tcp_port,this.sslPort=a.ssl_tcp_port,this.turnUsername=a.username,this.turnPassword=a.password};c.getConfig=function(){if(b("FBRTCConfig").isVCEndpointCall())return{iceServers:[]};var a=h([g]).concat(h(this.$1(),this.turnUsername,this.turnPassword));return{iceServers:a}};c.getConstraints=function(a){a===void 0&&(a=!1);var c=!0;b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()<57&&a&&(c=!1);return{mandatory:{},optional:[{DtlsSrtpKeyAgreement:c}]}};c.$2=function(a){__p&&__p();var b=this;a=function(a){switch(a){case"tcp":return{ip:b.turnIP,port:b.tcpPort,transport:a};case"udp":return{ip:b.turnIP,port:b.udpPort,transport:a};case"ssl":return{ip:b.turnIP,port:b.sslPort,transport:"tcp"};default:return{ip:b.turnIP,port:b.udpPort,transport:null}}}(a);var c=a.ip,d=a.port;a=a.transport;return!((c==null?void 0:c.length)&&(d==null?void 0:d.length))?null:a!=null&&a.length>0?"turn:"+c+":"+d+"?transport="+a:"turn:"+c+":"+d};c.$1=function(){if(b("FBRTCVersionDetection").isFirefox()&&b("FBRTCVersionDetection").webrtcVersion()<27)return[this.$2()].filter(Boolean);else return[this.$2("udp"),this.$2("tcp"),this.$2("ssl")].filter(Boolean)};return a}();e.exports=new a()}),null);
__d("FBRTCPeerConnectionHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={resetLocalStreams:function(a,b){var c=!1,d=a.getLocalStreams(),e=d.filter(function(a){return!b.includes(a)}),f=b.filter(function(a){return!d.includes(a)});(e.length>0||f.length>0)&&(c=!0);e.forEach(function(b){return a.removeStream(b)});f.forEach(function(b){return a.addStream(b)});return c},resetLocalStreamWithTrackAPI:function(a,b,c){__p&&__p();var d=!1,e=b.getVideoTracks().length>0?b.getVideoTracks()[0]:null,f=b.getAudioTracks().length>0?b.getAudioTracks()[0]:null,g=a.getSenders(),h=g.filter(function(a){return a.track&&a.track.kind==="video"}),i=g.filter(function(a){return a.track&&a.track.kind==="audio"});h=h.length===(e===null?0:1)&&i.length===(f===null?0:1);if(c||!h){g.filter(function(a){return a.track!==e&&a.track!==e}).forEach(function(b){d=!0,a.removeTrack(b)});f&&!g.some(function(a){return a.track===f})&&(d=!0,a.addTrack(f,b));e&&!g.some(function(a){return a.track===e})&&(d=!0,a.addTrack(e,b));return d}a.getSenders().forEach(function(a){a.track&&a.track.kind==="video"&&e!==a.track?a.replaceTrack(e):a.track&&a.track.kind==="audio"&&f!==a.track&&a.replaceTrack(f)});return d}};e.exports=a}),null);
__d("FBRTCRetriableMessage",["FBRTCConstants","clearTimeout","mixInEventEmitter","setTimeout"],(function(a,b,c,d,e,f){__p&&__p();var g=1e4,h=7e3;a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=g,this.$3=2,this.$6=null}var c=a.prototype;c.sendMessage=function(a,c,d,e){__p&&__p();var f=e.sdp,g=e.hasVideo,i=e.attributes,j=e.multiwayInfo;e=e.callTrigger;this.$4=c;switch(a){case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:this.$5=this.$1.sendPCRestartOffer(c,d,f,g,i);break;case b("FBRTCConstants").PayloadType.OFFER:this.$5=this.$1.sendOffer(c,d,f,g,i,e);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$2=h;this.$5=this.$1.sendAnswer(c,d,f,g,i,j);break}this.$7()};c.isAckMsg=function(a){return this.$5&&this.$5.msg_id===a.ack_id};c.stopRetrying=function(){this.$6&&(b("clearTimeout")(this.$6),this.$4=null,this.$5=null,this.$6=null)};c.$7=function(){this.$6=b("setTimeout")(this.$8.bind(this),this.$2)};c.$8=function(){this.$3<1?this.emit("timeoutFailure"):(this.emit("sendingRetry"),this.$1.resendSdpMessage(this.$4,this.$5),this.$7(),this.$3-=1)};return a}();b("mixInEventEmitter")(a,{sendingRetry:!0,timeoutFailure:!0});e.exports=a}),null);
__d("FBRTCTurnDiscovery",["Promise","FBRTCLogger","FBRTCUtils","XVideoCallTurnDiscoveryController"],(function(a,b,c,d,e,f){__p&&__p();var g=3,h=null;a={requestTurnCreds:function(a,c,d){__p&&__p();d===void 0&&(d=g);if(h)return h;var e=1,f=b("XVideoCallTurnDiscoveryController").getURIBuilder().setInt("version",e).setString("call_id",a).getURI();h=new(b("Promise"))(function(e,g){h(d);function h(d){b("FBRTCUtils").sendServerRequest(f,function(a){a=a.payload;return e(a)},function(){d>0?(b("FBRTCLogger").getInstance().logError(c,a,"Failed turn; going to retry"),h(d-1)):g(new Error("failed"))})}});return h}};e.exports=a}),null);
__d("FBRTCUrlManager",["invariant","Promise","regeneratorRuntime","CurrentUser","FBRTCConfig","FBRTCLogger","FBRTCSupport","FBRTCUtils","RTWebUserActionLogger","URI","XGroupCallController","XGroupCallSigningController","XVideoCallController","XVideoCallSigningController","XWirelessScreenSharingController","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();var h;function i(a){b("FBRTCLogger").getInstance().logCallAction(a,void 0,b("FBRTCLogger").CallAction.OLD_URI);return b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).getURI()}function j(a){if(b("CurrentUser").isEmployee()){var c=a.setSubdomain(b("CurrentUser").hasWorkUser()||b("CurrentUser").isWorkUser()?"fb":"www"),d="/intern/";return(h||(h=b("URI"))).getRequestURI().getPath().substr(0,d.length)!==d?c:c.setDomain(c.getDomain().toString().replace(/\.(intern|internmc|cstools)\./,"."))}return a}function k(a,c,d,e,f,g,h){a=b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).setInt("call_id",c).setBool("is_caller",d).setBool("audio_only",e).setString("nonce",f).setBool("initialize_video",g).getURI();return b("Promise").resolve(h?j(a):a)}function l(a){__p&&__p();var c,d,e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:c=a.callContext,d=a.callID,e=a.usersToRing,f=a.hasVideo,g=a.initializeVideo,h=a.multiwayCoreTier,i=a.multiwayWwwTier,j=a.nonce,k=a.serverInfoData;l=b("XGroupCallSigningController").getURIBuilder().setString("call_context",c).setInt("call_id",d).setFBIDSet("users_to_ring",e).setBool("has_video",f).setBool("initialize_video",g).setString("server_info_data",k).setString("nonce",j).setString("multiway_www_tier",i).setString("multiway_core_tier",h).getURI();return m.abrupt("return",new(b("Promise"))(function(a,c){b("FBRTCUtils").sendServerRequest(l,function(b){a(b.payload.uri)},function(a){c(a)})}));case 3:case"end":return m.stop()}},null,this)}var m=function(a){if(b("FBRTCConfig").disableURLManager())return;window.history.replaceState({},"",a)};function n(a){var c=b("XVideoCallController").getURIBuilder().setFBID("peer_id","0").getURI().getPath();return a.getPath()===c}function o(a,b){a&&(b&&g(0,11934))}a={onCallStarted:function(a){n(new(h||(h=b("URI")))(window.location))&&m(i(a))},getGroupCallUri:function(a,c,d,e,f,g,h,i,j){__p&&__p();var k;return b("regeneratorRuntime").async(function(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:o(!e,f),k=0;case 2:if(!(k<3)){m.next=15;break}m.prev=3;m.next=6;return b("regeneratorRuntime").awrap(l({callContext:a,callID:c,usersToRing:d,hasVideo:e,initializeVideo:f,multiwayCoreTier:g,multiwayWwwTier:h,nonce:i,serverInfoData:j}));case 6:return m.abrupt("return",m.sent);case 9:m.prev=9,m.t0=m["catch"](3),b("FBRTCLogger").getInstance().logToConsole(m.t0);case 12:k++;m.next=2;break;case 15:return m.abrupt("return",b("XGroupCallController").getURIBuilder().setString("call_context",a).setInt("call_id",c).setFBIDSet("users_to_ring",d).setBool("has_video",e).setBool("initialize_video",f).setString("server_info_data",j).setString("nonce",i).setString("multiway_www_tier",h).setString("multiway_core_tier",g).getURI());case 16:case"end":return m.stop()}},null,this,[[3,9]])},getP2PCallUriWithNonce:function(a,c,d,e,f,g,h){__p&&__p();var i,j;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:h===void 0&&(h="");o(e,g);i=b("FBRTCUtils").isPeerVCEndpoint(a)||b("FBRTCUtils").isCollabTrigger(h);if(!(!i&&d&&b("FBRTCSupport").isGroupCallWebtrcSupported()&&b("gkx")("882838"))){l.next=8;break}j=b("XVideoCallSigningController").getURIBuilder().setFBID("peer_id",a).setInt("call_id",c).setBool("is_caller",d).setBool("audio_only",e).setString("nonce",f).setBool("initialize_video",g).getURI();return l.abrupt("return",new(b("Promise"))(function(h,l){b("FBRTCUtils").sendServerRequest(j,function(a){h(a.payload.uri)},function(j){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"signed_p2p_controller_rejected_response"}),h(k(a,c,d,e,f,g,i))})}));case 8:return l.abrupt("return",k(a,c,d,e,f,g,i));case 9:case"end":return l.stop()}},null,this)},getWirelessScreenSharingUri:function(a,c,d){c=b("XWirelessScreenSharingController").getURIBuilder().setFBID("peer_id",c).setInt("session_id",d).setString("nonce",a).getURI();return j(c)}};e.exports=a}),null);
__d("FBRTCUserSettings",["Promise","RTCMediaDevices","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={audioInput:"",audioOutput:"default",videoInput:"",remoteStream:null,_audioInputLabel:null,_videoInputLabel:null,isEnabled:function(){return Boolean(b("RTCMediaDevices").isSupported("enumerateDevices"))},selectAudioInputByLabel:function(a){this.audioInput||(this.audioInput=this._selectByLabel(a,this._audioInputLabel));return this.audioInput},selectVideoInputByLabel:function(a){this.videoInput||(this.videoInput=this._selectByLabel(a,this._videoInputLabel));return this.videoInput},_selectByLabel:function(a,b){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b&&b===e.label)return e.deviceId}return null},previewStart:function(){this.emit("previewStarted")},previewEnd:function(){this.emit("previewEnded")},save:function(a){var c=this,d=a.audioInput,e=a.audioOutput,f=a.videoInput;return new(b("Promise"))(function(a){var b=!!(d&&c.audioInput!==d||f&&c.videoInput!==f);c.audioInput=d;c.audioOutput=e;c.videoInput=f;c.emit("saved",b);a(b)})},updateForLocalStream:function(a){__p&&__p();if(a.videoMediaSourceId)this.videoInput=a.videoMediaSourceId;else{var b=a.getVideoTracks();b=b[0];b&&(this._videoInputLabel=b.label)}if(a.audioMediaSourceId)this.audioInput=a.audioMediaSourceId;else{b=a.getAudioTracks();a=b[0];a&&(this._audioInputLabel=a.label)}},updateForRemoteStream:function(a){this.remoteStream=a,this.emit("remoteStreamChanged")},addListener:function(){},emit:b("emptyFunction")};b("mixInEventEmitter")(a,{previewStarted:!0,previewEnded:!0,remoteStreamChanged:!0,saved:!0});e.exports=a}),null);
__d("FBRTCMultiwayMessage",["ChannelManager","CurrentUser","FBRTCMessageType","RTCAppData","RTCUtils"],(function(a,b,c,d,e,f){__p&&__p();b("ChannelManager").startChannelManager();a=function(){"use strict";__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.isRequest=function(){return this.$1.jsonPayload.header.responseStatusCode==null};c.isType=function(a){return this.type()==a};c.transactionId=function(){return this.$1.jsonPayload.header.transactionId};c.conferenceName=function(){return this.$1.jsonPayload.header.conferenceName};c.serverInfoData=function(){return this.$1.jsonPayload.header.serverInfoData};c.message=function(){return this.$1};c.type=function(){return this.header().type};c.endpoint=function(){return this.$1.endpoint};c.header=function(){return this.$1.jsonPayload.header};c.body=function(){return this.$1.jsonPayload.body};c.incrementRetryCount=function(){this.$1.jsonPayload.header.retryCount++};c.ringRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").RING)?this.body().ringRequest:null};c.dismissRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").DISMISS)?this.body().dismissRequest:null};c.serverMediaUpdateRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").SERVER_MEDIA_UPDATE)?this.body().serverMediaUpdateRequest:null};c.conferenceStateRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").CONFERENCE_STATE)?this.body().conferenceStateRequest:null};c.createResponse=function(c,d){var e=d.body;d=d.callID;c={endpoint:{appId:b("RTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()},jsonPayload:{header:b("RTCUtils").createResponseHeader(this.header(),c,d?d:""),body:e||{}}};return new a(c)};return a}();e.exports=a}),null);
__d("RTCMessageSender",["Promise","AsyncRequest","XGroupCallSendMessageController"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.send=function(a){__p&&__p();return new(b("Promise"))(function(c,d){a.jsonPayload.header.conferenceName;var e=b("XGroupCallSendMessageController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({message:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};return a}();e.exports=a}),null);
__d("FBRTCTransactions",["Promise","FBRTCConsoleLogger","RTCMessageSender","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e4,h=Object.freeze({INIT:0,PROCESSING:1,COMPLETED:2,TERMINATED:3});a=function(){__p&&__p();function a(){this.$1=new Map()}var b=a.prototype;b.findTransaction=function(a){return this.$1.get(a)};b.addTransaction=function(a){this.$1.set(a.id,a)};b.removeTransaction=function(a){this.$1["delete"](a.id)};b.getTransaction=function(a){return this.findTransaction(a.transactionId())||new i(this,a)};return a}();var i=function(){__p&&__p();function a(a,c){this.id=c.transactionId(),this.$1=h.INIT,this.$2=c,this.$3=null,this.$4=a,this.$5=new Error("Unknown"),this.$6=null,this.$7=new(b("RTCMessageSender"))(),this.$8(),this.$4.addTransaction(this)}var c=a.prototype;c.start=function(){__p&&__p();if(this.$1==h.INIT){this.$9(h.PROCESSING);return b("Promise").resolve(this.$2)}else if(this.$1==h.PROCESSING)return b("Promise").resolve(null);else if(this.$1==h.COMPLETED){this.$10();return b("Promise").resolve(null)}return b("Promise").reject(this.$5)};c.sendResponse=function(a){var b=this;this.$3=a;this.$9(h.COMPLETED);return this.$7.send(a.message()).then(function(a){},function(a){b.$5=a,b.$9(h.TERMINATED)})};c.$10=function(){if(this.$3!=null){var a=this.$3;a.incrementRetryCount();this.sendResponse(a)}};c.$9=function(a){a!=this.$1&&(this.$1=a,this.$1!=h.TERMINATED&&this.$8(),this.$1==h.TERMINATED&&(this.$5=new Error("Terminated"),this.$4.removeTransaction(this)))};c.$8=function(){var a=this;this.$6&&(b("clearTimeout")(this.$6),this.$6=null);this.$6=b("setTimeout")(function(){a.$9(h.TERMINATED)},g)};return a}();e.exports={FBRTCTransactionOwner:a,FBRTCServerTransaction:i}}),null);
__d("MultiwayRequests",["Promise","AsyncRequest","FBRTCCapability","FBRTCMessageType","RTCUtils","XGroupCallSendRequestController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15e3;a=function(){__p&&__p();function a(){}var c=a.prototype;c.sendJoinRequest=function(a,c,d,e,f,g,h,i){__p&&__p();var j=h.callID,k=h.numParticipants;h=h.callTrigger;var l=i.userToEscalate,m=i.isEscalator;i=i.escP2PCallID;c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").JOIN,c,d,j,i);d={offer:{sdpString:e.toSdp()},deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED]};j=b("RTCUtils").createClientContextMessage(k,h?h:"");d.appMessages=[j];f&&f.length>0&&!l&&(d.usersToCall=f);l&&m&&(d.userToEscalate=l);g&&(d.mediaStatus=g);i={joinRequest:d};e=this.$1(a,c,i);return this.$2(e)};c.sendHangupRequest=function(a,c,d,e,f,g){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").HANGUP,c,d,g);d={reason:e,detailedReasonString:f};g={hangupRequest:d};e=this.$1(a,c,g);return this.$2(e)};c.sendAddParticipantsRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").ADD_PARTICIPANTS,c,d,f);d={usersToInvite:e};f={addParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendRemoveParticipantsRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").REMOVE_PARTICIPANTS,c,d,f);d={usersToRemove:e};f={removeParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendSubscriptionRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").SUBSCRIPTION,c,d,f);d={subscriptions:e};f={subscriptionRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendClientMediaUpdateRequest=function(a,c,d,e,f,g,h){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").CLIENT_MEDIA_UPDATE,c,d,h);d={fromVersion:e,toVersion:f,mediaUpdates:g};h={clientMediaUpdateRequest:d};e=this.$1(a,c,h);return this.$2(e)};c.$2=function(a){return new(b("Promise"))(function(c,d){var e=b("XGroupCallSendRequestController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({request:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a.payload)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};c.$1=function(a,b,c){return{endpoint:a,jsonPayload:{header:b,body:c}}};return a}();e.exports=new a()}),null);
__d("RTCCallType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({AUDIO_ONLY:"AUDIO_ONLY",VIDEO_ONLY:"VIDEO_ONLY",AUDIO_VIDEO:"AUDIO_VIDEO",NO_AUDIO_VIDEO:"NO_AUDIO_VIDEO"});e.exports=a}),null);
__d("RTCGroupCallAddUserWarningDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogHeaderReact.re").make,i=b("MessengerDialogTitleReact.re").make;a=function(a){var c=a.handleRing,d=a.onToggle,e=a.unMountParent;return(a=b("React")).jsxs(b("MessengerDialog.react"),{onToggle:d,children:[a.jsx(h,{children:a.jsx(i,{children:g._("C\u1ea3nh b\u00e1o khi g\u1ecdi \u0111i\u1ec7n cho th\u00e0nh vi\u00ean")})}),a.jsx(b("MessengerDialogBody.react"),{children:g._("B\u1ea1n \u0111ang c\u1ed1 g\u1ecdi cho ng\u01b0\u1eddi d\u00f9ng \u0111\u00e3 ch\u1eb7n.")}),a.jsxs(b("MessengerDialogFooter.react"),{children:[a.jsx(b("MessengerDialogCancelButton.react"),{}),a.jsx(b("MessengerDialogButton.react"),{label:g._("G\u1ecdi"),onClick:function(){d(),e(),c()},type:"primary",use:"default"})]})]})};e.exports=a}),null);
__d("RTCGroupCallAdminModelErrorDialogController",["cx","fbt","DOM","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";var i=300;a={_container:b("DOM").create("div"),showAdminModelErrorDialog:function(){var a=this,c;b("ReactDOM").render((c=b("React")).jsxs(b("MessengerDialog.react"),{onToggle:function(){return a._onUnmount()},type:"default",width:i,children:[c.jsx(b("MessengerDialogBody.react"),{className:"_233q",children:h._("Ch\u1ec9 qu\u1ea3n tr\u1ecb vi\u00ean m\u1edbi th\u00eam \u0111\u01b0\u1ee3c nh\u1eefng ng\u01b0\u1eddi kh\u00f4ng c\u00f3 trong nh\u00f3m n\u00e0y v\u00e0o cu\u1ed9c g\u1ecdi")}),c.jsx(b("MessengerDialogFooter.react"),{children:c.jsx(b("MessengerDialogButton.react"),{className:"_30vt _233r",label:h._("Ok"),onClick:function(){return a._onUnmount()},type:"primary",use:"default"})})]}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)}};e.exports=a}),null);
__d("RTCGroupCallIncomingBlockedUserWarningDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogHeaderReact.re").make,i=b("MessengerDialogTitleReact.re").make;a=function(a){var c=a.leaveCall,d=a.onAddStream,e=a.onToggle;return(a=b("React")).jsxs(b("MessengerDialog.react"),{onToggle:e,children:[a.jsx(h,{children:a.jsx(i,{children:g._("C\u1ea3nh b\u00e1o c\u00f3 ng\u01b0\u1eddi d\u00f9ng b\u1ecb ch\u1eb7n trong cu\u1ed9c g\u1ecdi \u0111\u1ebfn")})}),a.jsx(b("MessengerDialogBody.react"),{children:g._("Th\u00e0nh vi\u00ean \u0111\u00e3 ch\u1eb7n \u0111ang tham gia cu\u1ed9c g\u1ecdi. B\u1ea1n c\u00f3 mu\u1ed1n r\u1eddi kh\u1ecfi kh\u00f4ng?")}),a.jsxs(b("MessengerDialogFooter.react"),{children:[a.jsx(b("MessengerDialogButton.react"),{label:g._("R\u1eddi cu\u1ed9c g\u1ecdi"),onClick:function(){e(),c()},type:"primary",use:"default"}),a.jsx(b("MessengerDialogButton.react"),{label:g._("\u1ede l\u1ea1i"),onClick:function(){e(),d()},type:"primary",use:"default"})]})]})};e.exports=a}),null);
__d("RTCGroupCallDialogController",["DOM","FBRTCGroupCallVideoEscalationDialog.react","React","ReactDOM","RTCGroupCallAddMembersDialog.react","RTCGroupCallAddUserWarningDialog.react","RTCGroupCallIncomingBlockedUserWarningDialog.react","RTCGroupCallRemoveGuestDialogContainer.react","RTCGroupCallRosterDialog.react","RTCVideoChatLinkDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_container:b("DOM").create("div"),_blockedContainer:b("DOM").create("div"),showVideoChatLinkDialog:function(){b("ReactDOM").render(b("React").jsx(b("RTCVideoChatLinkDialog.react"),{}),this._container)},showAddGroupMembersDialog:function(a,c,d,e,f){var g=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallAddMembersDialog.react"),{isP2P:f,onUnmount:function(){return g._onUnmount()},participantStates:c,participants:a,thread:d,viewerID:e}),this._container)},showVideoEscalationDialog:function(a,c){var d=this;b("ReactDOM").render(b("React").jsx(b("FBRTCGroupCallVideoEscalationDialog.react"),{onToggle:function(){d._onUnmount(),c()},userName:a}),this._container)},showBlockedUserWarningDialog:function(a,c){var d=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallAddUserWarningDialog.react"),{handleRing:a,onToggle:function(){d._onBlockedDialogUnmount()},unMountParent:c}),this._blockedContainer)},showIncomingBlockedUserWarningDialog:function(a,c,d,e){var f=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallIncomingBlockedUserWarningDialog.react"),{leaveCall:a,onAddStream:function(){c(d,e)},onToggle:function(){f._onUnmount()}}),this._container)},showParticipantsRoster:function(){var a=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallRosterDialog.react"),{onToggle:function(){a._onUnmount()}}),this._container)},showRemoveGuestDialog:function(a){var c=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallRemoveGuestDialogContainer.react"),{onUnmount:function(){c._onUnmount()},user:a}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)},_onBlockedDialogUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._blockedContainer)}};e.exports=a}),null);
__d("FBRTCGuestUtils",["MercuryIDs","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isGuestFromLink:function(a,b){return a!=null&&b==null},fetchParticipantsInThread:function(a,c){var d=b("immutable").Map();a.participants.map(function(a){c.has(a)&&(d=d.set(a,c.get(a)))});return d},isAnonOrAuthGuestUser:function(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(a.FBID);return a.isGuestUser||c!=null&&!c.participants.includes(d)},fetchGuestFBIDsInCall:function(a,b){if(a===null||a===void 0)return[];a=g.fetchGuestParticipantsInCall(a,b);return Array.from(a.values()).map(function(a){return(a=a.fbid)!=null?a:""})},fetchGuestParticipantsInCall:function(a,c){if(a===null||a===void 0)return b("immutable").Map();var d=a.participants;return c.filter(function(a){return!d.includes(a.id)})}};e.exports=g}),null);
__d("RTCRosterContactItem.react",["cx","FBRTCParticipantCallState","MessengerContactImage.react","React","RTWebStrings"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.isMessengerUser,d=a.imageSrc,e=a.name;a=a.connectedState;return b("React").jsxs("div",{className:"_4nvn",children:[b("React").jsx(b("MessengerContactImage.react"),{className:"_4nvr",isMessengerUser:c,size:32,src:d}),b("React").jsx("div",{className:"_4nvt",children:e}),a!==null?b("React").jsx("div",{className:"_1j79",children:h(a)}):null]})}function h(a){switch(a){case b("FBRTCParticipantCallState").CONTACTING:return b("RTWebStrings").contacting;case b("FBRTCParticipantCallState").RINGING:return b("RTWebStrings").ringing;case b("FBRTCParticipantCallState").IN_ANOTHER_CALL:return b("RTWebStrings").busy;case b("FBRTCParticipantCallState").NO_ANSWER:return b("RTWebStrings").noAnswer;default:return null}}e.exports=a}),null);
__d("RevokeMessengerCallInviteLinksForThreadMutation",["Promise","RelayFBEnvironment","RelayModern","VideoChatLinksUserActionsTypedLogger","RevokeMessengerCallInviteLinksForThreadMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("RevokeMessengerCallInviteLinksForThreadMutation.graphql")};function a(a){return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{thread_id:a}},optimisticUpdater:null,onCompleted:function(a){},onError:function(a){i(a.message)}})})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setEvent("error").setErrorType("RevokeLinkMutationError").setErrorDetails(a).log()}e.exports=a}),null);
__d("RTCGroupCallRemoveGuestDialog.react",["cx","fbt","FBRTCGroupCallStore","FBRTCGuestUtils","Image.react","Link.react","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RevokeMessengerCallInviteLinksForThreadMutation","RTCCallStore","RTCMWProtocolHandler","RTCRosterContactItem.react","UserAgent","VideoChatLinksUserActionsTypedLogger","XUIText.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;a=b("React").PureComponent;var k=460,l=300,m=b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogState:"DEFAULT"},c.updateDialog=function(a){var b=a==="REMOVE_ONE_GUEST"?"remove_single_guest_sheet_shown":a==="REMOVE_ALL_GUESTS"?"remove_all_guests_sheet_shown":"remove_guest_sheet_shown";c.getVideoChatLinkLogger().setEvent(b).log();c.setState({dialogState:a})},c.onDismiss=function(){var a=c.props.onUnmount,b=c.state.dialogState;b=b==="REMOVE_ONE_GUEST"?"remove_single_guest_sheet_dismissed":b==="REMOVE_ALL_GUESTS"?"remove_all_guests_sheet_dismissed":"remove_guest_sheet_dismissed";c.getVideoChatLinkLogger().setEvent(b).log();a()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getVideoChatLinkLogger=function(){return new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setVideoCallLinkHashRaw(this.props.linkHash)};d.componentDidMount=function(){this.getVideoChatLinkLogger().setEvent("remove_guest_sheet_shown").log()};d.componentDidUpdate=function(){};d.render=function(){switch(this.state.dialogState){case"REMOVE_ONE_GUEST":return b("React").jsx(q,{linkHash:this.props.linkHash,logger:this.getVideoChatLinkLogger(),onAction:this.updateDialog,onUnmount:this.onDismiss,user:this.props.user});case"REMOVE_ALL_GUESTS":return b("React").jsx(p,{linkHash:this.props.linkHash,logger:this.getVideoChatLinkLogger(),onAction:this.updateDialog,onUnmount:this.onDismiss,user:this.props.user});case"DEFAULT":return b("React").jsx(o,{linkHash:this.props.linkHash,linkOwner:this.props.linkOwner,onAction:this.updateDialog,onUnmount:this.onDismiss,user:this.props.user})}};return c}(a);function n(a,c,d){var e=b("RTCCallStore").getState().callInfo,f=e.conferenceName;e=e.serverInfoData;b("promiseDone")(b("RTCMWProtocolHandler").removeParticipants(f,e,a));a=(e=(f=c)!=null?f.thread_fbid:f)!=null?e:"";b("RevokeMessengerCallInviteLinksForThreadMutation")(a);d()}var o=function(a){var c=a.linkOwner,d=a.onAction,e=a.onUnmount;a=a.user;var f=!!a.profilePictureUrl;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:e,type:"default",width:m?l:k,children:[b("React").jsx(i,{children:b("React").jsx(j,{children:h._("X\u00f3a kh\u00e1ch m\u1eddi")})}),b("React").jsxs(b("MessengerDialogBody.react"),{children:[b("React").jsx("div",{className:"_7gh9",children:b("React").jsx(b("Image.react"),{className:(f?"_1z3u":"")+(f?"":" _1z3t"),src:a.profilePictureUrl})}),b("React").jsx("div",{className:"_7gha",children:b("React").jsx(j,{children:h._("X\u00f3a \"{name of user to be removed}\"",[h._param("name of user to be removed",a.userShortName)])})}),b("React").jsx("div",{className:(m?"_8gx7":"")+" _7ghb"+(m?"":" _7i63"),children:c!==null?h._("\"{name of user to be removed}\" \u0111\u00e3 tham gia th\u00f4ng qua l\u1eddi m\u1eddi c\u1ee7a {Possessive,name of user who invited this guest}. C\u00e1c th\u00e0nh vi\u00ean trong \u0111o\u1ea1n chat n\u00e0y s\u1ebd \u0111\u01b0\u1ee3c th\u00f4ng b\u00e1o r\u1eb1ng \"{name of guest user to be removed}\" \u0111\u00e3 b\u1ecb x\u00f3a.",[h._param("name of user to be removed",a.userShortName),h._param("Possessive,name of user who invited this guest",c),h._param("name of guest user to be removed",a.userShortName)]):h._("H\u1ec7 th\u1ed1ng s\u1ebd x\u00f3a \"{name of user to be removed}\" kh\u1ecfi \u0111o\u1ea1n chat video v\u00e0 h\u1ee7y li\u00ean k\u1ebft \u0111\u1ebfn \u0111o\u1ea1n chat n\u00e0y. C\u00e1c th\u00e0nh vi\u00ean trong \u0111o\u1ea1n chat s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c th\u00f4ng b\u00e1o v\u1ec1 vi\u1ec7c x\u00f3a {name of guest user to be removed}.",[h._param("name of user to be removed",a.userShortName),h._param("name of guest user to be removed",a.userShortName)])})]}),b("React").jsx(b("Link.react"),{onClick:function(){d("REMOVE_ONE_GUEST")},children:b("React").jsx(b("XUIText.react"),{className:"_7ghc",display:"block",children:h._("X\u00f3a \"{name of user to be removed}\"",[h._param("name of user to be removed",a.userShortName)])})}),b("React").jsx(b("Link.react"),{onClick:function(){d("REMOVE_ALL_GUESTS")},children:b("React").jsx(b("XUIText.react"),{className:"_7ghc",display:"block",children:h._("X\u00f3a t\u1ea5t c\u1ea3 kh\u00e1ch m\u1eddi")})}),b("React").jsx(b("Link.react"),{onClick:e,children:b("React").jsx(b("XUIText.react"),{className:"_7ghc",display:"block",children:h._("H\u1ee7y")})})]})},p=function(a){__p&&__p();var c=a.logger,d=a.onUnmount;a.user;a=b("FBRTCGroupCallStore").getState();var e=a.participants,f=a.thread;a=b("FBRTCGuestUtils").fetchGuestParticipantsInCall(f,e);return b("React").jsxs(b("MessengerDialog.react"),{onToggle:d,type:"default",width:m?l:k,children:[b("React").jsxs(i,{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{autoFocus:!1}),b("React").jsx(j,{children:h._("X\u00f3a t\u1ea5t c\u1ea3 kh\u00e1ch m\u1eddi")}),b("React").jsx(b("MessengerDialogButton.react"),{disabled:!1,label:h._("X\u00f3a"),onClick:function(){c.setEvent("remove_all_guests_selected").log();var a=b("FBRTCGuestUtils").fetchGuestFBIDsInCall(f,e);n(a,f,d)},type:"primary",use:"default"})]}),b("React").jsxs(b("MessengerDialogBody.react"),{children:[b("React").jsx("div",{className:"_7i64",children:b("React").jsx(j,{children:h._({"*":"B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a {number} kh\u00e1ch m\u1eddi kh\u00f4ng?","_1":"B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a 1 kh\u00e1ch m\u1eddi kh\u00f4ng?"},[h._plural(a.size,"number")])})}),b("React").jsx("div",{className:(m?"_8gx7":"")+" _7ghb"+(m?"":" _7i65"),children:h._("H\u1ec7 th\u1ed1ng s\u1ebd x\u00f3a nh\u1eefng kh\u00e1ch m\u1eddi kh\u00f4ng ph\u1ea3i l\u00e0 th\u00e0nh vi\u00ean nh\u00f3m tr\u00ean Messenger v\u00e0 h\u1ee7y lu\u00f4n li\u00ean k\u1ebft \u0111\u1ebfn \u0111o\u1ea1n chat n\u00e0y. Nh\u1eefng ng\u01b0\u1eddi c\u00f3 li\u00ean k\u1ebft n\u00e0y s\u1ebd kh\u00f4ng th\u1ec3 tham gia chat n\u1eefa.")}),b("React").jsx("div",{className:"_788l",children:h._("S\u1ebd x\u00f3a")}),Array.from(a.values()).map(function(a){return b("React").jsx(b("RTCRosterContactItem.react"),{connectedState:null,imageSrc:a.image_src,isMessengerUser:a.is_messenger_user,name:a.name},a.fbid)})]})]})},q=function(a){var c=a.logger,d=a.onUnmount,e=a.user;a=b("FBRTCGroupCallStore").getState();var f=a.thread;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:d,type:"default",width:m?l:k,children:[b("React").jsxs(i,{children:[m?b("React").jsx(b("MessengerDialogButton.react"),{action:"cancel",disabled:!1,label:"X",onClick:d,type:"secondary",use:"default"}):b("React").jsx(b("MessengerDialogCancelButton.react"),{autoFocus:!1,onClick:d}),b("React").jsx(j,{children:h._("X\u00f3a kh\u00e1ch m\u1eddi")}),b("React").jsx(b("MessengerDialogButton.react"),{disabled:!1,label:m?h._("C\u00f3"):h._("X\u00f3a"),onClick:function(){c.setEvent("remove_single_guest_selected").log(),n([e.FBID],f,d)},type:"primary",use:"default"})]}),b("React").jsxs(b("MessengerDialogBody.react"),{children:[b("React").jsx("div",{className:"_7i64",children:b("React").jsx(j,{children:h._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a \"{name of user to be removed}\" kh\u00f4ng?",[h._param("name of user to be removed",e.userShortName)])})}),b("React").jsx("div",{className:(m?"_8gx7":"")+" _7ghb"+(m?"":" _7i66"),children:h._("H\u00e0nh \u0111\u1ed9ng n\u00e0y c\u0169ng s\u1ebd h\u1ee7y lu\u00f4n li\u00ean k\u1ebft \u0111\u1ebfn \u0111o\u1ea1n chat v\u00e0 nh\u1eefng ng\u01b0\u1eddi c\u00f3 li\u00ean k\u1ebft n\u00e0y s\u1ebd kh\u00f4ng th\u1ec3 tham gia chat n\u1eefa.")})]})]})};e.exports=c}),null);
__d("RTCGroupCallRemoveGuestDialogContainer.react",["FBRTCGroupCallStore","React","RelayFBEnvironment","RelayModern","RTCCallStore","RTCGroupCallRemoveGuestDialog.react","RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var h=function(){return b("RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery.graphql")};a=function(a){__p&&__p();var c=b("RTCCallStore").getState().callInfo.serverInfoData,d=b("FBRTCGroupCallStore").getState(),e=d.linkHash;d=a.user.FBID;return b("React").jsx(g,{environment:b("RelayFBEnvironment"),query:h,render:function(c){__p&&__p();c.error;c=c.props;if(c==null)return null;var d=null;c=(c=c)!=null?(c=c.messenger_call_query)!=null?(c=c.connected_participants)!=null?c.edges:c:c:c;if(c!=null&&c.length>0){d=(c=c[0])!=null?(c=c.joining_context)!=null?(c=c.link_owner)!=null?c.short_name:c:c:c}return b("React").jsx(b("RTCGroupCallRemoveGuestDialog.react"),{linkHash:e,linkOwner:d,onUnmount:a.onUnmount,user:a.user})},variables:{server_session_id:c!=null?c:"",guest_id:d}})};e.exports=a}),null);
__d("RTCMobileRosterSorter",["FBRTCParticipantCallState","immutable","memoizeLastByArgs","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e={};for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;e[h.get("FBID")]=h}h=[];g=null;for(var f=a,c=Array.isArray(f),a=0,f=c?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(c){if(a>=f.length)break;i=f[a++]}else{a=f.next();if(a.done)break;i=a.value}i=i;i[0];i=i[1];var j=b("nullthrows")(i.fbid),k=e[j];k=k?k.get("participantState"):null;k={payload:i,participantState:(i=k==null?void 0:k.state)!=null?i:b("FBRTCParticipantCallState").UNKNOWN};j===d?g=k:k.participantState===b("FBRTCParticipantCallState").CONNECTED&&h.push(k)}return{activeParticipants:h,localUser:b("nullthrows")(g)}}e.exports={sort:b("memoizeLastByArgs")(a)}}),null);
__d("RTCGroupCallRosterDialog.react",["cx","fbt","FBRTCGroupCallStore","FluxContainer","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RTCCallStore","RTCMobileRosterSorter","RTCRosterContactItem.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("FBRTCGroupCallStore"),b("RTCCallStore")]};c.calculateState=function(){var a=b("FBRTCGroupCallStore").getState();a=a.participants;var c=b("RTCCallStore").getState(),d=c.callInfo.conferenceState,e=c.localUser;c=c.remoteUsers;return{conferenceState:d,roster:b("RTCMobileRosterSorter").sort(a,c,e.get("FBID"))}};var d=c.prototype;d.componentDidUpdate=function(){this.state.conferenceState==="TERMINATED"&&this.props.onToggle()};d.render=function(){var a,c=this.state.roster,d=c.activeParticipants;c=c.localUser;return(a=b("React")).jsx(b("MessengerDialog.react"),{onToggle:this.props.onToggle,type:"default",children:a.jsxs("div",{className:"_788k",children:[a.jsxs(i,{children:[a.jsx(j,{children:h._("Danh s\u00e1ch ng\u01b0\u1eddi tham gia cu\u1ed9c g\u1ecdi")}),a.jsx(b("MessengerDialogButton.react"),{disabled:!1,label:h._("\u0110\u00f3ng"),onClick:this.props.onToggle,type:"primary",use:"default"})]}),a.jsx("div",{className:"_788l",children:h._("Trong \u0111o\u1ea1n chat n\u00e0y")}),a.jsxs("div",{className:"_7dyr",children:[a.jsx(b("RTCRosterContactItem.react"),{connectedState:null,imageSrc:c.payload.image_src,isMessengerUser:c.payload.is_messenger_user,name:h._("B\u1ea1n")},c.payload.fbid),d.map(function(a){return b("React").jsx(b("RTCRosterContactItem.react"),{connectedState:null,imageSrc:a.payload.image_src,isMessengerUser:a.payload.is_messenger_user,name:a.payload.name},a.payload.fbid)})]})]})})};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("RTCGroupCallActions",["RTCAppDispatcher","RTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setLayout:function(a){b("RTCAppDispatcher").dispatch({type:"SET_LAYOUT",layout:a})},setLinkHash:function(a){b("RTCAppDispatcher").dispatch({type:"SET_LINKHASH",linkHash:a})},setDominantSpeaker:function(a){b("RTCAppDispatcher").dispatch({type:"SET_DOMINANT_SPEAKER",dominantSpeakerFBID:a})},setPinnedSpeaker:function(a){b("RTCAppDispatcher").dispatch({type:"SET_PINNED_SPEAKER",pinnedSpeakerFBID:a})},initThread:function(a,c){b("RTCAppDispatcher").dispatch({type:"INIT_THREAD",thread:a,participants:c})},onParticipantLeft:function(a){b("RTCAppDispatcher").dispatch({type:"ON_PARTICIPANT_LEFT",participantFBID:a})},onParticipantsAdded:function(a,c){b("RTCAppDispatcher").dispatch({type:"ON_PARTICIPANTS_ADDED",participants:a,images:c})},addParticipantsToRing:function(a){b("RTCAppDispatcher").dispatch({type:"ADD_PARTICIPANTS_TO_RING",participantFBIDs:a})},toggleRemoteStream:function(a){b("RTCAppDispatcher").dispatch({type:"TOGGLE_REMOTE_STREAM",mediaStatus:a})},handleDismissRequest:function(a,c){b("RTCAppDispatcher").dispatch({type:"DISMISS",transaction:a,request:c,endCallReason:b("RTCUtils").endCallReasonFromDismissRequest(c.dismissRequest()),endCallSubreason:b("RTCUtils").endCallSubreasonFromDismissRequest(c.dismissRequest())})},handleConferenceStateRequest:function(a,c,d,e){b("RTCAppDispatcher").dispatch({type:"ON_CONFERENCE_STATE",transaction:a,request:c,conferenceStateVersion:d,resolve:e})},onJoinRequestSent:function(){b("RTCAppDispatcher").dispatch({type:"ON_JOIN_REQUEST_SENT"})},onReceivedJoinResponse:function(){b("RTCAppDispatcher").dispatch({type:"ON_RECEIVED_JOIN_RESPONSE"})},onJoinResponse:function(a){b("RTCAppDispatcher").dispatch({type:"ON_JOIN_RESPONSE",serverInfoData:a})},onProcessedJoinResponse:function(){b("RTCAppDispatcher").dispatch({type:"ON_PROCESSED_JOIN_RESPONSE"})},onServerMediaUpdateSuccess:function(){b("RTCAppDispatcher").dispatch({type:"ON_SERVER_MEDIA_UPDATE_SUCCESS"})},setLocalClientVersion:function(a){b("RTCAppDispatcher").dispatch({type:"SET_LOCAL_CLIENT_VERSION",version:a})},onClientMediaUpdateResponse:function(a,c){b("RTCAppDispatcher").dispatch({type:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",responseStatusCode:a,currentVersion:c})}};e.exports=a}),null);
__d("RTCMWSessionDescription",["Promise","FBRTCConsoleLogger","FBRTCConstants","RTCCallStore","RTCGroupCallActions","RTCSignalingExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;a={_videoEnabled:{},serverMediaUpdate:function(a,c){__p&&__p();var d=a.fromVersion,e=a.toVersion,f=a.mediaUpdates,h=b("RTCCallStore").getConnection(g.MULTIWAY);if(!h)return;a=h.getLocalDescription();var i=h.getRemoteDescriptionForSMU(),j=i.sessionDescription.getVersion();if(j!==d){c(j);return}d=i.toSdp();f.forEach(function(a){i.processServerMediaUpdate(a)});var k=b("Promise").resolve(),l=b("RTCSignalingExperiments").shouldAlwaysSetMWDescriptionsOnSMU();(l||i.toSdp()!==d)&&(i.sessionDescription.setVersion(e),k=b("Promise").all([h.setLocalDescription(a),h.setRemoteDescription(i)]));k.then(function(){__p&&__p();var a;b("RTCGroupCallActions").toggleRemoteStream((a=[]).concat.apply(a,f.map(function(a){a=a.media;return a})).reduce(function(a,b){var c=b.id;b=b.enabled;c=h.getWebrtcTrackIdFromMWTrackId(c);a[c]=b;return a},{}));c(e)},function(){return c(j)})["catch"](function(a){})}};e.exports=a}),null);
__d("RTCMWThreadDeltaHandler",["Arbiter","ChannelConstants","CurrentUser","MercuryIDs","MercurySyncDeltaTypes","MessengerParticipants.bs","RTCCallInitUtils","RTCGroupCallActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={initHandler:function(a){__p&&__p();b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("delta"),function(c,d){__p&&__p();c=d&&d.obj&&d.obj.queue;if(c&&c.toString()!==b("CurrentUser").getID())return;d=(c=d)!=null?(c=c.obj)!=null?c.delta:c:c;c=(c=d)!=null?(c=c.messageMetadata)!=null?(c=c.threadKey)!=null?c.threadFbId:c:c:c;if(!d||c!==a)return;switch(d["class"]){case b("MercurySyncDeltaTypes").ParticipantLeftGroupThread:b("RTCGroupCallActions").onParticipantLeft(d.leftParticipantFbId);break;case b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread:b("MessengerParticipants.bs").getMulti(d.addedParticipants.map(function(a){a=a.userFbId;return b("MercuryIDs").getParticipantIDFromUserID(a)}),b("RTCGroupCallActions").onParticipantsAdded);break}})},processThreadUpdateFromSignaling:function(a){__p&&__p();var c=null;a=a.appMessages;a&&a.forEach(function(a){__p&&__p();var b;b=(b=a)!=null?(b=b.body)!=null?(b=b.genericMessage)!=null?b.topic:b:b:b;a=(a=a)!=null?(a=a.body)!=null?(a=a.genericMessage)!=null?a.data:a:a:a;if(b==="thread_id_payload"&&a!=null){b=JSON.parse(a);if(b.thread_id!==null){c=b.thread_id;return}}});c&&b("RTCCallInitUtils").initializeThreadFromCollisionContext({groupThreadID:String(c),peerID:null})}};e.exports=a}),null);
__d("RTCProxyUserActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setProxyUsers:function(a,c){b("RTCAppDispatcher").dispatch({type:"SET_PROXY_USER_MAP",proxyUserID:a,proxyingAsUserID:c})}};e.exports=a}),null);
__d("RTCProxyUserReducer",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){switch(b.type){case"SET_PROXY_USER_MAP":var c=b.proxyUserID;b=b.proxyingAsUserID;if(!a.proxyUserToProxyingAs.has(c))return a.set("proxyingAsToProxyUser",a.proxyingAsToProxyUser.set(b,c)).set("proxyUserToProxyingAs",a.proxyUserToProxyingAs.set(c,b))}return a}e.exports={setProxyUsers:a}}),null);
__d("RTCProxyUserStoreState",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({proxyingAsToProxyUser:b("immutable").Map(),proxyUserToProxyingAs:b("immutable").Map()}));e.exports=a}),null);
__d("RTCProxyUserStore",["FluxReduceStore","RTCAppDispatcher","RTCProxyUserReducer","RTCProxyUserStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCProxyUserReducer").setProxyUsers];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCProxyUserStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCProxyUserUtils",["ImmutableObject","MercuryIDs","RTCProxyUserActions","RTCProxyUserStore","RTWebUserActionLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setProxyingAsUsersFromMessage:function(a){__p&&__p();a=a.appMessages;if(a){var c=new Map();a.forEach(function(a){__p&&__p();var d;d=(d=a)!=null?(d=d.body)!=null?(d=d.genericMessage)!=null?d.topic:d:d:d;a=(a=a)!=null?(a=a.body)!=null?(a=a.genericMessage)!=null?a.data:a:a:a;if(d==="aloha_proxying_as_users"&&a!=null){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"Initializing_AlohaProxyingAsUsers"});d=JSON.parse(a);for(var e in d){a=d[e][0].id.toString();a&&(b("RTCProxyUserActions").setProxyUsers(e,a),c.set(e,a))}}});return c}return null},transformProxyUserParticipantsToProxyingAs:function(a,c){__p&&__p();for(var d in a){var e=a[d].fbid;if(c.has(e)){var f=a[d];e=c.get(e);var g=b("MercuryIDs").getParticipantIDFromUserID(e);f=b("ImmutableObject").setProperty(f,"fbid",e);f=b("ImmutableObject").setProperty(f,"id",g);a[g]=f}}return a},getUserIDToFetch:function(a){var c=b("RTCProxyUserStore").getState();c=c.proxyUserToProxyingAs;return c.has(a)?c.get(a):a}};e.exports=a}),null);
__d("MultiwayParticipantFetcher",["Promise","regeneratorRuntime","ImmutableObject","MercuryIDs","MercuryParticipantsConstants","MessengerParticipants.bs","RTCProxyUserUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").Map;b("immutable").Set;function g(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getBigImageMultiWithSize(d.toArray(),function(c){a(b("immutable").fromJS(c))},c)}catch(a){e(a)}})}function h(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getMulti(d.toArray(),function(d){c&&c.proxyingAsToProxyUser!=null&&c.proxyingAsToProxyUser!==void 0&&c.proxyingAsToProxyUser.size>0&&(d=b("RTCProxyUserUtils").transformProxyUserParticipantsToProxyingAs(d,c.proxyingAsToProxyUser)),a(b("immutable").fromJS(d))})}catch(a){e(a)}})}function i(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(h(a,c));case 2:d=f.sent;if(!c.profileImageSize){f.next=8;break}f.next=6;return b("regeneratorRuntime").awrap(g(a,c.profileImageSize));case 6:e=f.sent;return f.abrupt("return",d.withMutations(function(a){e.forEach(function(c,d){var e=a.get(d);if(e){e=b("ImmutableObject").setProperty(e,"big_image_src",c);a.set(d,e)}})}));case 8:return f.abrupt("return",d);case 9:case"end":return f.stop()}},null,this)}function j(a){__p&&__p();var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=b("immutable").Set([a]);d=b("MercuryIDs").getParticipantIDFromUserID(a);f.next=4;return b("regeneratorRuntime").awrap(i(c,{profileImageSize:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE}));case 4:e=f.sent;return f.abrupt("return",e.get(d));case 6:case"end":return f.stop()}},null,this)}a={fetchParticipant:function(a,c){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(j(c));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},null,this)},fetchAllParticipants:function(a,c,d){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:d===void 0&&(d={});a.next=3;return b("regeneratorRuntime").awrap(i(c,d));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},null,this)}};e.exports=a}),null);
__d("RTCCallActions",["invariant","RTCAppDispatcher","RTCUtils","RTWebUserActionLogger","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={addListener:b("emptyFunction"),emit:b("emptyFunction"),initialize:function(a){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCCallActions_initialize",callID:String(a.callID),conferenceName:a.conferenceName,callType:a.protocol==="p2p"?"p2p":"mw"}),b("RTCAppDispatcher").dispatch(babelHelpers["extends"]({type:"INIT"},a))},reset:function(){b("RTCAppDispatcher").dispatch({type:"RESET"})},resetForRedial:function(a,c){b("RTCAppDispatcher").dispatch({type:"RESET_FOR_REDIAL",conferenceName:a,callID:c})},callCollision:function(a,c){b("RTCAppDispatcher").dispatch({type:"CALL_COLLISION",conferenceName:a,peerID:c})},setCallSummary:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CALL_SUMMARY",callSummary:a})},call:function(a,c){b("RTCAppDispatcher").dispatch({type:"CALL",usersToRing:a,peerConnection:c})},callSuccess:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:"CALL_SUCCESS",connected:a})},incomingCallSuccess:function(){b("RTCAppDispatcher").dispatch({type:"INCOMING_CALL_SUCCESS"})},callError:function(a){b("RTCAppDispatcher").dispatch({type:"CALL_ERROR",endCallReason:b("RTCUtils").endCallReasonFromResponseStatusCode(a),endCallSubreason:"Call error: "+(a||0)})},completeTransitionToMultiway:function(){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_CLEAR_P2P_CONNECTION"})},hangupSuccess:function(){b("RTCAppDispatcher").dispatch({type:"HANGUP_SUCCESS"})},hangupError:function(){b("RTCAppDispatcher").dispatch({type:"HANGUP_ERROR"})},join:function(a){h.call([],a)},hangup:function(a,c){b("RTCAppDispatcher").dispatch({type:"HANGUP",hangupReason:a,detailedReasonString:c,endCallReason:a})},initLocalUser:function(a){b("RTCAppDispatcher").dispatch({type:"INIT_LOCAL_USER",localUser:a})},initRemoteUsers:function(a){b("RTCAppDispatcher").dispatch({type:"INIT_REMOTE_USERS",remoteUsers:a})},updateRemoteUsers:function(a){b("RTCAppDispatcher").dispatch({type:"UPDATE_REMOTE_USERS",remoteUsers:a})},addLocalStream:function(a){a!=null||g(0,11208),b("RTCAppDispatcher").dispatch({type:"ADD_LOCAL_STREAM",stream:a})},removeLocalStream:function(a){b("RTCAppDispatcher").dispatch({type:"REMOVE_LOCAL_STREAM",stream:a})},replaceLocalStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REPLACE_LOCAL_STREAM",oldStream:a,newStream:c})},removeAllLocalStreams:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:"REMOVE_ALL_LOCAL_STREAMS",stopStreams:a})},removeAllLocalScreenStreams:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",stopStreams:a})},addRemoteStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"ADD_REMOTE_STREAM",stream:a,userID:c})},removeRemoteStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REMOVE_REMOTE_STREAM",stream:a,userID:c})},removeAllRemoteStreams:function(a){b("RTCAppDispatcher").dispatch({type:"REMOVE_ALL_REMOTE_STREAMS",userID:a})},addRemoteTrack:function(a,c){b("RTCAppDispatcher").dispatch({type:"ADD_REMOTE_TRACK",stream:a,track:c})},removeRemoteTrack:function(a,c){b("RTCAppDispatcher").dispatch({type:"REMOVE_REMOTE_TRACK",stream:a,track:c})},addLocalScreenStream:function(a){b("RTCAppDispatcher").dispatch({type:"ADD_LOCAL_SCREEN_STREAM",stream:a})},removeLocalScreenStream:function(a){b("RTCAppDispatcher").dispatch({type:"REMOVE_LOCAL_SCREEN_STREAM",stream:a})},replaceLocalScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REPLACE_LOCAL_SCREEN_STREAM",oldStream:a,newStream:c})},addRemoteScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"ADD_REMOTE_SCREEN_STREAM",stream:a,userID:c})},removeRemoteScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REMOVE_REMOTE_SCREEN_STREAM",stream:a,userID:c})},endCall:function(a,c){b("RTCAppDispatcher").dispatch({type:"END_CALL",endCallReason:a,endCallSubreason:c})},waitForUserInput:function(){b("RTCAppDispatcher").dispatch({type:"WAIT_FOR_USER_INPUT"})},toggleMuteAudio:function(a){b("RTCAppDispatcher").dispatch({type:a?"AUDIO_UNMUTED":"AUDIO_MUTED"})},toggleMuteVideo:function(a){b("RTCAppDispatcher").dispatch({type:a?"VIDEO_UNMUTED":"VIDEO_MUTED"})},stopLocalVideo:function(){b("RTCAppDispatcher").dispatch({type:"STOP_LOCAL_STREAM"})},toggleMuteRemoteAudio:function(a,c){b("RTCAppDispatcher").dispatch({type:a?"REMOTE_AUDIO_MUTED":"REMOTE_AUDIO_UNMUTED",userID:c})},toggleMuteRemoteVideo:function(a,c){b("RTCAppDispatcher").dispatch({type:a?"REMOTE_VIDEO_MUTED":"REMOTE_VIDEO_UNMUTED",userID:c})},toggleSelfView:function(a){b("RTCAppDispatcher").dispatch({type:a?"SELF_VIEW_COLLAPSED":"SELF_VIEW_UNCOLLAPSED"})},submitRating:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_RATING",rating:a})},submitFeedback:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_FEEDBACK",feedback:a})},submitFeedbackOptions:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_FEEDBACK_OPTIONS",feedbackOptions:a})},submitSurveyChoice:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_SURVEY_CHOICE",surveyChoice:a})},ratingShown:function(){b("RTCAppDispatcher").dispatch({type:"RATING_SHOWN"})},feedbackShown:function(){b("RTCAppDispatcher").dispatch({type:"FEEDBACK_SHOWN"})},setEndCallReason:function(a){b("RTCAppDispatcher").dispatch({type:"SET_END_CALL_REASON",endCallReason:a})},setConferenceState:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CONFERENCE_STATE",conferenceState:a})},setFloorStatus:function(a){b("RTCAppDispatcher").dispatch({type:"FLOOR_STATUS",status:a})}};b("mixInEventEmitter")(h,{onIceConnectionStateChange:!0});e.exports=h}),null);
__d("RTCMultiwayMessageHandler",["Arbiter","ChannelConstants","CurrentUser","FBMqttChannel","FBRTCCapability","FBRTCDeviceStatus","FBRTCExperiment","FBRTCHangupReason","FBRTCLogger","FBRTCMultiwayMessage","FBRTCRtcResponseStatusCode","FBRTCTransactions","MultiwayParticipantFetcher","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCMWProtocolHandler","RTCMWSessionDescription","RTCMWThreadDeltaHandler","RTCP2PCallStore","RTCProxyUserStore","RTCProxyUserUtils","generateRTCCallID","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCTransactions").FBRTCServerTransaction,h=b("FBRTCTransactions").FBRTCTransactionOwner;a=function(){__p&&__p();function a(){this.$3=-1,this.$7()}var c=a.prototype;c.initialize=function(a,b,c,d){this.$1=a,this.$2=b,this.$4=c,this.$5=d};a.initHandler=function(b,c,d,e){d===void 0&&(d=!1),e===void 0&&(e=!1),new a().initialize(b,c,d,e)};a.close=function(){while(a.$6.length>0){var c=a.$6.shift();b("Arbiter").unsubscribe(c)}b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)&&b("FBMqttChannel").unsubscribeAll("/rtc_multi")};c.$7=function(){var c=this;b("FBRTCExperiment").getMWSignalingExperiment().logExposure();b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)?b("FBMqttChannel").subscribe("/rtc_multi",function(a){a=JSON.parse(a);c.$8(a)}):(a.$6.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_live_json"),function(a,b){c.$8(b.obj)})),a.$6.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){c.$8(b.obj)})))};c.$8=function(a){__p&&__p();var c=this,d=new(b("FBRTCMultiwayMessage"))(a);a=b("RTCCallStore").getState().callID;b("FBRTCLogger").getInstance().logMultiwayMessageReceived(d,a);if(!d.isRequest())return;if(this.$1===d.conferenceName())this.$9(d);else if(d.ringRequest()&&!this.$4){var e=new g(new h(),d);b("promiseDone")(e.start(),function(a){var f=b("generateRTCCallID")();b("promiseDone")(e.sendResponse(c.$10(a,f)),function(){return b("RTCMWProtocolHandler").otherUserInAnotherCall(d.conferenceName(),d.serverInfoData(),b("FBRTCHangupReason").IN_ANOTHER_CALL,f.toString(),"InAnotherCall")})})}};c.$10=function(a,c){var d=a.ringRequest(),e=a.serverInfoData();if(d==null||e==null)return a.createResponse(b("FBRTCRtcResponseStatusCode").BAD_REQUEST,{});d={deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED],deviceStatus:b("FBRTCDeviceStatus").OK};return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ringResponse:d},callID:c.toString()})};c.$9=function(c){__p&&__p();var d=this,e=new g(new h(),c);b("promiseDone")(e.start().then(function(c){__p&&__p();if(c!=null){var f=b("RTCCallStore").getState(),g=f.callInfo;if(c.dismissRequest()!=null)c.serverInfoData()===g.serverInfoData&&(b("RTCGroupCallActions").handleDismissRequest(e,c),a.close(),f.connections.forEach(function(a){return a.close()}),d.$5||b("RTCCallActions").removeAllLocalStreams(!0));else if(c.serverMediaUpdateRequest()!=null)b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(c.serverMediaUpdateRequest()),b("RTCMWSessionDescription").serverMediaUpdate(c.serverMediaUpdateRequest(),function(a){b("RTCGroupCallActions").onServerMediaUpdateSuccess(),e.sendResponse(c.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{serverMediaUpdateResponse:{currentVersion:a}},callID:g.callID}))});else if(c.conferenceStateRequest()!=null){f=c.conferenceStateRequest();var h=b("RTCCallStore").getState();h=h.remoteUsers;var i=h.map(function(a){return a.FBID});h=Object.keys(f.participantStates);h=h.filter(function(a){return a!==b("CurrentUser").getID()&&!i.has(a)});if(h.length>0){var j=b("RTCP2PCallStore").getState();j=j.escalationConferenceName;j==null&&b("RTCMWThreadDeltaHandler").processThreadUpdateFromSignaling(f);j=b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(f);var k=new Set(h);j!=null&&j.forEach(function(a,b){k["delete"](b),a!==null&&!k.has(a)&&k.add(a)});f=b("RTCProxyUserStore").getState();h=f.proxyingAsToProxyUser;b("promiseDone")(b("MultiwayParticipantFetcher").fetchAllParticipants(d.$1,b("immutable").Set(k),{profileImageSize:100,proxyingAsToProxyUser:h}),function(a){b("RTCGroupCallActions").onParticipantsAdded(a.toJS()),b("RTCGroupCallActions").handleConferenceStateRequest(e,c,d.$3,function(a){d.$3=a})})}else b("RTCGroupCallActions").handleConferenceStateRequest(e,c,d.$3,function(a){d.$3=a})}}}))};return a}();a.$6=[];e.exports=a}),null);
__d("RTCP2PCallWindowHandler",["RTCCallStore","RTCP2PCallStore","RTWebUserActionLogger","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a={init:function(a){this._isWindowOpened()&&this.close(),g=a,this.updateCallInProgressIndicator(),this._monitorOpenerForChanges()},updateCallInProgressIndicator:function(a){if(!this._isWindowOpened())return;var c=b("RTCCallStore").getState();c=c.remoteUsers;a=a?a:b("RTCP2PCallStore").getState().connectionStatus;!c.count()||a==="DISCONNECTED"?g.rtcCallInProgessWith=null:g.rtcCallInProgessWith=c.first().FBID.toString()},reload:function(){this._isWindowOpened()&&g.location.reload()},close:function(){this._isWindowOpened()&&g.close()},_monitorOpenerForChanges:function(){var a=this;if(g.opener)try{g.opener.addEventListener("unload",function(b){a._passWindowToOpener()})}catch(a){}},_passWindowToOpener:function(a){__p&&__p();var c=this;a===void 0&&(a=10);b("setTimeout")(function(){if(!c._isWindowOpened()||a<=1)return;try{if(g.opener&&!g.opener.closed){g.opener.rtcCallChildWindow=g;return}}catch(a){b("RTWebUserActionLogger").logErrorOnceforDomain("RTCP2PCallWindowHandler__passWindowToOpener",a)}c._passWindowToOpener(a-1)},1e3)},_isWindowOpened:function(){return!!(g&&!g.closed)}};e.exports=a}),null);
__d("RTCScreenSharingWindowHandler",["RTCP2PCallActions","RTCUtils","XScreenSharingController","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=540,h=960,i;a={open:function(a,c,d){var e=this;i=window.open("about:blank","Screen Sharing",this._getWindowFeatures());window.callInfo=d;b("promiseDone")(b("RTCUtils").getStreamVideoResolution(c)["catch"](function(b){e._setupScreenSharingWindow(a,c,null)}),function(b){e._setupScreenSharingWindow(a,c,b)})},_setupScreenSharingWindow:function(a,b,c){__p&&__p();var d=this;window.getRemoteMediaStream=function(){return b};window.closeScreenSharingWindow=this._onUnload;if(c){c=this._getConstrainedSize(c.width,c.height);var e=c.width,f=c.height;i.resizeTo(e,f);window.setTimeout(function(){d._adjustScreenSize({width:e,height:f})},200)}i.location=this._getUnsignedUri(a);window.focus&&this.isWindowOpened()&&i.focus()},_adjustScreenSize:function(a){if(!i)return;i.resizeTo(a.width,a.height+(a.height-i.innerHeight))},close:function(){if(i){var a=null;i.opener&&!i.opener.closed&&(a=i.opener);i.close();i=null;a&&a.postMessage({recipient:"SC_CONTENT_SCRIPT",type:"SC_RESET_PORT",text:"reset comm port"},"*")}},isWindowOpened:function(){return!!(i&&!i.closed)},_onUnload:function(){b("RTCP2PCallActions").togglePopOutScreenContent()},_getWindowFeatures:function(){var a=screen.availLeft,b=screen.availTop,c=this._getConstrainedSize(Math.min(h,screen.width-a),Math.min(g,screen.height-b)),d=c.width;c=c.height;c={height:"height="+c.toString(),width:"width="+d.toString(),top:"top="+b.toString(),left:"left="+a.toString()};return["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",")},_getConstrainedSize:function(a,b){var c;a>h&&(c=h/a,b*=c,a*=c);b>g&&(c=g/b,a*=c,b*=c);return{width:a,height:b}},_getUnsignedUri:function(a){return b("XScreenSharingController").getURIBuilder().setFBID("peer_id",a).setInt("version",2).getURI()}};e.exports=a}),null);
__d("RTCP2PCallActions",["RTCAppDispatcher","RTCP2PCallWindowHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reload:function(){b("RTCP2PCallWindowHandler").reload()},setCallType:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CALL_TYPE",callType:a})},setConnectionStatus:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CONNECTION_STATUS",connectionStatus:a})},setMultiwayEscalationSupport:function(a,c){b("RTCAppDispatcher").dispatch({type:"SET_MULTIWAY_ESCALATION_SUPPORT",offerEscalationSupport:a,escalationConferenceName:c})},setRemoteSignalingExperiments:function(a){b("RTCAppDispatcher").dispatch({type:"SET_REMOTE_SIGNALING_EXPERIMENTS",remoteSignalingExperiments:a})},togglePopOutScreenContent:function(a){b("RTCAppDispatcher").dispatch({type:a?"POP_OUT_SCREEN_CONTENT":"POP_IN_SCREEN_CONTENT",stream:a})},processMessage:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_PROCESS_MESSAGE",message:a})},setIsCaller:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_SET_IS_CALLER",isCaller:a})},togglePoorNetworkQualityIndicator:function(a){b("RTCAppDispatcher").dispatch({type:a?"SHOW_POOR_NETWORK_QUALITY":"DISMISS_POOR_NETWORK_QUALITY"})},starRatingDone:function(a){a===void 0&&(a=!0),b("RTCAppDispatcher").dispatch({type:"P2P_STAR_RATING_DONE",done:a})}};e.exports=a}),null);
__d("FBRTCCallSummaryReducer",["FBRTCCallSummaryStore","FBRTCLogger","FBRTCMediaMetricParser","RTCCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCLogger").Key;a={setCallSummary:function(a,b){switch(b.type){case"SET_CALL_SUMMARY":return a.set("callSummary",b.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case"INCOMING_CALL_SUCCESS":case"CALL_SUCCESS":c=function c(){var d=b("RTCCallStore").getState().callInfo,e=d.conferenceState;d=d.callID;e!=="TERMINATED"&&a.callInfo.callID===d&&(a.callSummary.save(b("FBRTCCallSummaryStore").getInstance()),window.setTimeout(c,1e4))};c();b("FBRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case"ON_JOIN_REQUEST_SENT":a.callSummary.setJoinRequestSent();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"ON_RECEIVED_JOIN_RESPONSE":a.callSummary.setJoinResponseReceived();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"ON_JOIN_RESPONSE":a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"ON_PROCESSED_JOIN_RESPONSE":a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){switch(c.type){case"CALL_ERROR":case"HANGUP":case"END_CALL":a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"DISMISS":a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case"RATING_SHOWN":a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"FEEDBACK_SHOWN":a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"SUBMIT_RATING":a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"SUBMIT_FEEDBACK":a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"SUBMIT_SURVEY_CHOICE":a.callSummary.addExtraInfo(g.SURVEY_CHOICE,c.surveyChoice);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("FBRTCClientMediaUpdateReducer",["FBRTCConstants","FBRTCMWProtocolStore","FBRTCRtcResponseStatusCode","RTCCallStore","RTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reset:function(a,c){switch(c.type){case"RESET":return b("FBRTCMWProtocolStore").getInitialState()}return a},configureAudio:function(a,b){switch(b.type){case"AUDIO_MUTED":return g(a,"audio",!1);case"AUDIO_UNMUTED":return g(a,"audio",!0)}return a},configureVideo:function(a,b){switch(b.type){case"VIDEO_MUTED":return g(a,"video",!1);case"VIDEO_UNMUTED":return g(a,"video",!0)}return a},onClientMediaUpdateResponse:function(a,c){__p&&__p();switch(c.type){case"ON_CLIENT_MEDIA_UPDATE_RESPONSE":if(c.responseStatusCode!==b("FBRTCRtcResponseStatusCode").OK)return a;a=a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],c.currentVersion);if(a.clientMediaUpdateInfo.pendingResponse){a=a.setIn(["clientMediaUpdateInfo","pendingResponse"],!1);if(a.clientMediaUpdateInfo.pendingUpdate)return h(a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!1))}return a}return a},setLocalClientVersion:function(a,b){switch(b.type){case"SET_LOCAL_CLIENT_VERSION":return a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],b.version).setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:{}}))}return a}};function g(a,c,d){var e=b("RTCCallStore").getConnection(b("FBRTCConstants").SignalingProtocol.MULTIWAY);if(!e)return a;e=e.getLocalTracks().reduce(function(a,b){a[b.id]=b.kind===c?d:b.enabled;return a},{});return h(a.setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:e})))}function h(a){if(a.clientMediaUpdateInfo.pendingResponse)return a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!0);var c=a.clientMediaUpdateInfo.localMediaUpdates.reduce(function(b,c,d){d>=a.clientMediaUpdateInfo.lastSyncedClientVersion&&b.push(c);return b},[]);if(c.length===0)return a;b("RTCMWProtocolHandler").clientMediaUpdate(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,a.clientMediaUpdateInfo.lastSyncedClientVersion,a.clientMediaUpdateInfo.localMediaUpdates.size,c);return a.setIn(["clientMediaUpdateInfo","pendingResponse"],!0)}e.exports=a}),null);
__d("FBRTCGroupCallParticipantsReducer",["MercuryIDs","RTCCallStore","RTCMWProtocolHandler","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_participantsToRing:new Set(),initThread:function(a,b){switch(b.type){case"INIT_THREAD":return a.merge({thread:b.thread,participants:(b=b.participants)!=null?b:a.participants})}return a},onParticipantsChanged:function(a,c){switch(c.type){case"ON_PARTICIPANT_LEFT":return a.set("participants",a.participants["delete"](b("MercuryIDs").getParticipantIDFromUserID(c.participantFBID)));case"ON_PARTICIPANTS_ADDED":var d=Object.keys(c.participants).map(function(a){return c.participants[a].fbid}).filter(function(a){return g._participantsToRing.has(a)});d.length!==0&&(d.forEach(function(a){return g._participantsToRing["delete"](a)}),b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,d));return a.set("participants",a.participants.merge(b("immutable").Map(c.participants)))}return a},addParticipantsToRing:function(a,b){switch(b.type){case"ADD_PARTICIPANTS_TO_RING":b.participantFBIDs.forEach(function(a){return g._participantsToRing.add(a)});return a}return a}};e.exports=g}),null);
__d("RTCMWDominantSpeakerDetector",["AudioContextSingleton","MovingAverage","RTCGroupCallActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MovingAverage").MovingAverage,h=300,i=900,j=1e3;a=function(){__p&&__p();function a(){this.intervalID=null,this.userToAudioLevels=new Map(),this.audioPollingCallbackIDs=new Map(),this.currentDominantSpeaker=null,this.lastSwitchTimeMSec=0}var c=a.prototype;c.start=function(){var a=this;this.intervalID=window.setInterval(function(){a.determineDominantSpeaker()},i)};c.stop=function(){window.clearInterval(this.intervalID)};c.determineDominantSpeaker=function(){var a=null,c=-1;this.userToAudioLevels.size>0?(this.userToAudioLevels.forEach(function(b,d){b.getAvg()>c&&(c=b.getAvg(),a=d)}),this.shouldSwitchDominantSpeaker(a)&&(b("RTCGroupCallActions").setDominantSpeaker(a),this.currentDominantSpeaker=a)):this.currentDominantSpeaker=null};c.shouldSwitchDominantSpeaker=function(a){return a===null||a===this.currentDominantSpeaker?!1:Date.now()-j>this.lastSwitchTimeMSec};c.addUserStream=function(a,c){__p&&__p();var d=this;this.audioPollingCallbackIDs.has(a)&&window.clearInterval(this.audioPollingCallbackIDs.get(a));if(c.getAudioTracks().length>0){var e=b("AudioContextSingleton").get();c=e.createMediaStreamSource(c);var f=e.createAnalyser();f.smoothingTimeConstant=.85;c.connect(f);e=f.frequencyBinCount;var g=new Uint8Array(e);this.audioPollingCallbackIDs.set(a,window.setInterval(function(){d.pollAudioLevels(a,f,g)},h))}};c.pollAudioLevels=function(a,b,c){b.getByteFrequencyData(c);c=c.reduce(function(a,b){return a+b});c=c/b.frequencyBinCount/256*40;b=(b=this.userToAudioLevels.get(a))!=null?b:new g(i/h);this.userToAudioLevels.set(a,b.add(c))};c.removeUserStream=function(a){this.audioPollingCallbackIDs.has(a)&&window.clearInterval(this.audioPollingCallbackIDs.get(a)),this.userToAudioLevels["delete"](a),this.currentDominantSpeaker===a&&this.determineDominantSpeaker()};c.getDominantSpeaker=function(){return this.currentDominantSpeaker};c.getUsersWithAudioLevels=function(){return this.userToAudioLevels};return a}();e.exports=a}),null);
__d("FBRTCGroupCallReducer",["FBRTCConstants","FBRTCParticipantCallState","FBRTCSupport","RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCEndCallReason","RTCMWDominantSpeakerDetector","RTCMWProtocolHandler","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout,h=b("FBRTCConstants").SignalingProtocol,i=5;a={setDominantSpeaker:function(a,c){__p&&__p();switch(c.type){case"SET_DOMINANT_SPEAKER":return a.set("dominantSpeakerFBID",c.dominantSpeakerFBID);case"SET_PINNED_SPEAKER":var d=b("RTCCallStore").getState();d=d.callInfo;var e=b("RTCCallStore").getConnection(h.MULTIWAY);if(!e)return a;b("RTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),a.layout,c.pinnedSpeakerFBID,e.getRemoteMediaCnames());return a.set("pinnedSpeakerFBID",c.pinnedSpeakerFBID);case"ON_CONFERENCE_STATE":d=c.request.conferenceStateRequest();e=d.participantStates;c=e[a.pinnedSpeakerFBID];return c&&c.state!==b("FBRTCParticipantCallState").CONNECTED?a.set("pinnedSpeakerFBID",null):a}return a},setLayout:function(a,c){__p&&__p();switch(c.type){case"SET_LAYOUT":var d=b("RTCCallStore").getState();d=d.callInfo;var e=b("RTCCallStore").getConnection(h.MULTIWAY);e&&b("RTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),c.layout,a.pinnedSpeakerFBID,e.getRemoteMediaCnames());return a.set("layout",c.layout);case"ON_CONFERENCE_STATE":if(b("FBRTCSupport").isMobileDevice()){b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);d=b("RTCCallStore").getConnectedRemoteUsersSize();return a.set("layout",b("UserAgent").isBrowser("Mobile Safari <= 12.1")&&d>=1||d>i?g.DOMINANT_SPEAKER:g.GRID)}}return a},setUpDominantSpeakerDetection:function(a,c){__p&&__p();if(b("FBRTCSupport").isSupportedSafariVersion()){var d;switch(c.type){case"ON_PROCESSED_JOIN_RESPONSE":d=new(b("RTCMWDominantSpeakerDetector"))();d.start();return a.set("dominantSpeakerDetector",d);case"ADD_REMOTE_STREAM":d=a.dominantSpeakerDetector;if(d!=null){var e=j(c);e&&c.stream&&d.addUserStream(e,c.stream)}return a;case"REMOVE_REMOTE_STREAM":d=a.dominantSpeakerDetector;if(d!=null){e=j(c);e&&d.removeUserStream(e)}return a;case"CALL_ERROR":case"HANGUP":case"END_CALL":case"DISMISS":d=a.dominantSpeakerDetector;d!=null&&d.stop();return a;case"SET_PINNED_SPEAKER":d=a.dominantSpeakerDetector,d!=null&&(c.pinnedSpeakerFBID?d.stop():d.start())}}return a},setLinkHash:function(a,b){switch(b.type){case"SET_LINKHASH":return a.set("linkHash",b.linkHash)}return a},processEndCallReason:function(a,c){switch(c.type){case"CALL_ERROR":case"HANGUP":case"END_CALL":case"DISMISS":return a.set("endCallReason",a.endCallReason||new(b("RTCEndCallReason"))(c.endCallReason))}return a}};function j(a){if(a.userID!=null)return a.userID;return a.stream&&a.stream.id.split(":").length>1?a.stream.id.split(":")[0]:null}e.exports=a}),null);
__d("FBRTCVideoDurationTrackerReducer",["FBRTCCallSummaryStore","RTCCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={track:function(a,c){__p&&__p();var d=a.videoDurationTrackerInfo,e=d.localVideoDurationTracker,f=d.remoteVideoDurationTracker;d=d.localScreenDurationTracker;switch(c.type){case"ADD_LOCAL_SCREEN_STREAM":d.track(c.stream),d.isStarted()||d.start();case"ADD_LOCAL_STREAM":e.track(c.stream);e.isStarted()||e.start();return a;case"REMOVE_LOCAL_SCREEN_STREAM":d.pause(c.stream);return a;case"REPLACE_LOCAL_SCREEN_STREAM":d.track(c.newStream);e.track(c.newStream);return a;case"ADD_REMOTE_STREAM":case"TOGGLE_REMOTE_STREAM":d=b("RTCCallStore").getState();e=d.remoteUsers;c=e.find(function(a){return!a.isVideoMuted()});f.stop();f.start();f.track(c&&c.streams.first());return a}return a},update:function(a,b){switch(b.type){case"VIDEO_MUTED":case"VIDEO_UNMUTED":a.videoDurationTrackerInfo.localVideoDurationTracker.update()}return a},stop:function(a,c){__p&&__p();switch(c.type){case"DISMISS":case"END_CALL":case"HANGUP":c=a.videoDurationTrackerInfo;var d=b("RTCCallStore").getState();d=d.callSummary;c.localVideoDurationTracker.stop();c.remoteVideoDurationTracker.stop();c.localScreenDurationTracker.stop();d.setVideoDurations(c.localVideoDurationTracker.getDuration(),c.remoteVideoDurationTracker.getDuration());d.setScreenDuration(c.localScreenDurationTracker.getDuration());d.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("RTCCallStoreState",["CurrentUser","FBRTCCallSummary","RTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={debugID:0,callID:"",conferenceState:"NEW",conferenceName:"",protocol:"",serverInfoData:""};d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.isInCall=function(){return this.conferenceState==="CONNECTING"||this.conferenceState==="CONNECTED"};return b}((c=b("immutable")).Record(a));f={connections:c.Set(),localUser:new(b("RTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:c.Set(),callInfo:new d(),callSummary:b("FBRTCCallSummary").nullSummary(),mediaStatus:c.Map()};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c.Record(f));e.exports=a}),null);
__d("RTCCallReducer",["invariant","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","FBRTCScreenSharingUtils","RTCCallStore","RTCCallStoreState","RTCUser","RTCUtils","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBRTCConstants").SignalingProtocol;function a(a,c){switch(c.type){case"INIT":return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case"RESET":return new(b("RTCCallStoreState"))();case"RESET_FOR_REDIAL":return a.set("callInfo",a.callInfo.set("conferenceState","NEW").set("callID",c.callID).set("conferenceName",c.conferenceName)).set("callSummary",b("FBRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"CALL_COLLISION":return a.set("callInfo",a.callInfo.set("conferenceState","NEW").set("callID",c.conferenceName).set("conferenceName",c.conferenceName)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,b){switch(b.type){case"CALL":return a.setIn(["callInfo","conferenceState"],"CONNECTING").set("connections",a.connections.add(b.peerConnection));case"CALL_ERROR":return a.setIn(["callInfo","conferenceState"],"TERMINATED");case"CALL_SUCCESS":return b.connected?a.setIn(["callInfo","conferenceState"],"CONNECTED"):a}return a}function d(a,b){switch(b.type){case"INCOMING_CALL_SUCCESS":return a.setIn(["callInfo","conferenceState"],"CONNECTED")}return a}function f(a,c){__p&&__p();switch(c.type){case"HANGUP":a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],"TERMINATING").set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"DISMISS":c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case"END_CALL":a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],"TERMINATED").set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"HANGUP_ERROR":case"HANGUP_SUCCESS":return a.setIn(["callInfo","conferenceState"],"TERMINATED")}return a}function j(a,c){__p&&__p();switch(c.type){case"GROUP_ESCALATION_CLEAR_P2P_CONNECTION":var d=b("RTCCallStore").getConnection(i.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();var f=a.localUser;if(!b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("RTCUtils").transferAudioTracks(g,c);b("RTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case"GROUP_ESCALATION_CANCEL":var d=b("RTCCallStore").getConnection(i.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("FBRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState","CONNECTED").set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function l(a,c){__p&&__p();switch(c.type){case"ON_PARTICIPANTS_ADDED":var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0,1174);return new(b("RTCUser"))({FBID:d.fbid,profileUrl:new(h||(h=b("URI")))(d.href),profilePictureUrl:e,isGuestUser:d.user_type==="guest",isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function m(a,c){__p&&__p();switch(c.type){case"ON_CONFERENCE_STATE":var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var c=f.participantStates[a.FBID];c&&c.state===b("FBRTCParticipantCallState").DISCONNECTED&&(a=a.removeAllStreams());return c?a.setParticipantState(c):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?"CONNECTED":a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a.setIn(["remoteUsers"],g).setIn(["callInfo","conferenceState"],h)}return a}function n(a,b){switch(b.type){case"ON_JOIN_RESPONSE":return a.setIn(["callInfo","serverInfoData"],b.serverInfoData)}return a}function o(a,b){switch(b.type){case"INIT_LOCAL_USER":return a.set("localUser",b.localUser);case"INIT_REMOTE_USERS":case"UPDATE_REMOTE_USERS":return a.set("remoteUsers",b.remoteUsers)}return a}function p(a,b){switch(b.type){case"AUDIO_MUTED":return a.set("localUser",a.localUser.toggleMuteAudio(!0));case"AUDIO_UNMUTED":return a.set("localUser",a.localUser.toggleMuteAudio(!1));case"VIDEO_MUTED":return a.set("localUser",a.localUser.toggleMuteVideo(!0));case"VIDEO_UNMUTED":return a.set("localUser",a.localUser.toggleMuteVideo(!1));default:return a}}function q(a,c){__p&&__p();switch(c.type){case"ADD_LOCAL_STREAM":return a.set("localUser",a.localUser.addStream(c.stream));case"REMOVE_LOCAL_STREAM":return a.set("localUser",a.localUser.removeStream(c.stream));case"REPLACE_LOCAL_STREAM":var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case"STOP_LOCAL_STREAM":return a.set("localUser",a.localUser.stopVideo());case"REMOVE_ALL_LOCAL_STREAMS":if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("RTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function r(a,c){__p&&__p();switch(c.type){case"ADD_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.addScreenStream(c.stream));case"REMOVE_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.removeScreenStream(c.stream));case"REMOVE_ALL_LOCAL_SCREEN_STREAMS":if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case"REPLACE_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function s(a,b){__p&&__p();var c;switch(b.type){case"ADD_REMOTE_STREAM":c=w(a,b);if(!c)return a;var d=a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.addStream(b.stream)));return v(d,{type:"TOGGLE_REMOTE_STREAM",mediaStatus:d.mediaStatus.toJS()});case"REMOVE_REMOTE_STREAM":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeStream(b.stream)));case"REMOVE_ALL_REMOTE_STREAMS":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeAllStreams().removeAllScreenStreams()))}return a}function t(a,b){var c;switch(b.type){case"ADD_REMOTE_TRACK":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.clone()));case"REMOVE_REMOTE_TRACK":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.clone()))}return a}function u(a,b){var c;switch(b.type){case"ADD_REMOTE_SCREEN_STREAM":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.addScreenStream(b.stream)));case"REMOVE_REMOTE_SCREEN_STREAM":c=w(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeScreenStream(b.stream)))}return a}function v(a,c){__p&&__p();var d;switch(c.type){case"TOGGLE_REMOTE_STREAM":return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo(!a.isVideoMuted()))}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case"REMOTE_AUDIO_MUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!0)));case"REMOTE_AUDIO_UNMUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!1)));case"REMOTE_VIDEO_MUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case"REMOTE_VIDEO_UNMUTED":d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function w(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function x(a,b){switch(b.type){case"WAIT_FOR_USER_INPUT":return a.callInfo.conferenceState==="NEW"?a.setIn(["callInfo","conferenceState"],"AWAITING_USER_START"):a}return a}e.exports={abortMultiwayEscalationProcess:k,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:j,onParticipantsChanged:l,incomingCallStart:d,processUsers:o,toggleLocalStream:p,processLocalStream:q,processLocalScreenStream:r,processRemoteStream:s,processRemoteScreenStream:u,processRemoteTrack:t,toggleRemoteStream:v,processConferenceState:m,processJoinResponse:n,waitForUserInput:x}}),null);
__d("RTCGroupCallEscalationStoreState",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({aborted:!1,inProgress:!1,toRing:!1,p2pCallSummary:null,readyToTransition:!1,usersToRing:null}));e.exports=a}),null);
__d("RTCGroupCallEscalationStoreReducer",["FBRTCParticipantCallState","RTCCallStore","RTCGroupCallEscalationActionTypes","RTCGroupCallEscalationStore","RTCGroupCallEscalationStoreState","RTCMWProtocolHandler","RTCP2PCallStore","RTWebUserActionLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new Set([(g=b("FBRTCParticipantCallState")).UNKNOWN,g.DISCONNECTED,g.NO_ANSWER,g.REJECTED,g.UNREACHABLE,g.CONNECTION_DROPPED,g.PARTICIPANT_LIMIT_REACHED,g.IN_ANOTHER_CALL,g.RING_TYPE_UNSUPPORTED]);function a(a,c){switch(c.type){case"GROUP_ESCALATION_CANCEL":b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_cancel"});return a.withMutations(function(a){a.set("aborted",!0).set("inProgress",!1).set("toRing",!1).set("readyToTransition",!1).set("usersToRing",null)})}return a}function c(a,c){switch(c.type){case"HANGUP":case"END_CALL":case"HANGUP_ERROR":case"HANGUP_SUCCESS":return a.withMutations(function(a){a.set("aborted",!1).set("inProgress",!1).set("toRing",!1).set("usersToRing",null)});case"RESET":return new(b("RTCGroupCallEscalationStoreState"))()}return a}function d(a,b){switch(b.type){case"GROUP_ESCALATION_SET_P2P_CALLSUMMARY":var c=b.p2pCallSummary;if(c)return a.withMutations(function(a){a.set("p2pCallSummary",c)})}return a}function f(a,c){switch(c.type){case"GROUP_ESCALATION_START":b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_start"});return a.set("inProgress",!0).set("readyToTransition",!1)}return a}function i(a,c){if(!a.readyToTransition&&a.inProgress)switch(c.type){case"ON_JOIN_REQUEST_SENT":b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setEscalationConnectingToMultiway()});break;case"ON_JOIN_RESPONSE":b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationConnectedToMultiway(),c.serverInfoData&&a.setServerInfoData(c.serverInfoData)});break}return a}function j(a,c){__p&&__p();if(!a.readyToTransition&&a.inProgress)switch(c.type){case"ON_CONFERENCE_STATE":c=c.request.conferenceStateRequest();if(c){var d=c.participantStates;c=a.toRing;var e=!1,f=Object.keys(d).every(function(a){return d[a].state===b("FBRTCParticipantCallState").CONNECTED});if(f){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_success"});b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationPeerConnectedToMultiway(),a.setEscalationConnectedToMultiway(),a.setReadyToEscalate()});var g=b("RTCP2PCallStore").getState();g=g.protocolHandler;g.shutDownP2PListenersForMultiwayEscalation();if(a.usersToRing&&c){g=a.usersToRing.valueSeq().map(function(a){return a.fbid}).filter(Boolean).toArray();b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,g);c=!1}}else e=Object.keys(d).some(function(a){return h.has(d[a].state)}),e&&b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setInvalidP2PEscalationState()});return a.set("aborted",e).set("readyToTransition",f).set("inProgress",!(f||e)).set("toRing",c)}}return a}function k(a,b){switch(b.type){case"GROUP_ESCALATION_SET_USERS_TO_RING":if(b.usersToRing)return a.set("usersToRing",b.usersToRing).set("toRing",!0)}return a}e.exports={abortEscalation:a,callStart:f,clearStore:c,onMultiwayConnectionSignaling:i,onParticipantsConnected:j,setP2PCallSummary:d,setUsersToRing:k}}),null);
__d("RTCP2PCallAdminMessageReducers",["FBRTCAdminMessage","FBRTCCallConstants","RTCAppDispatcher","RTCCallStore","RTCCallType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;function a(a,c){switch(c.type){case"SET_CALL_SUMMARY":b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);c=b("RTCCallStore").getState();c=c.callSummary;return a.set("adminMessage",new(b("FBRTCAdminMessage"))(c.peerID,c.callID));default:return a}}function c(a,b){switch(b.type){case"SET_CONNECTION_STATUS":var c=a.adminMessage;c&&b.connectionStatus==="CONNECTED"&&c.onCallConnected();return a;default:return a}}function d(a,c){switch(c.type){case"SET_END_CALL_REASON":var d=a.adminMessage,e=a.escalationConferenceName;d&&(d.onCallEnded(),a.isCaller&&d.submit(a.callType===b("RTCCallType").AUDIO_ONLY?g.VOICE_CALL:g.VIDEO_CALL,c.endCallReason.getReasonID(),e));return a;default:return a}}e.exports={processCallInit:a,processCallStart:c,processCallEnd:d}}),null);
__d("RTCP2PCallEscalationStoreState",["FBRTCConstants","FBRTCMessage","immutable"],(function(a,b,c,d,e,f){a=b("FBRTCConstants").CallType;c=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({awaitingACK:!1,callType:a.VOIP,escalated:!1,escalateMediaStream:null,failureReason:null,initiatedEscalation:!1,inProgress:!1,request:null,response:null,token:null}));e.exports=c}),null);
__d("RTCP2PCallEscalationStoreReducers",["FBRTCConstants","RTCCallType","RTCP2PCallEscalationStoreState","RTCP2PCallEscalator","RTCP2PCallStore","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").CallType;a=function(a,c){__p&&__p();switch(c.type){case"P2P_CALL_ESCALATION_START":if(a.inProgress)return a;if(a.escalated||!b("RTCP2PCallStore").isAudioOnly())return a;b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_start"});return a.withMutations(function(a){a.set("awaitingACK",!0).set("initiatedEscalation",!0).set("failureReason",null).set("inProgress",!0).set("token",b("RTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!0))});case"P2P_CALL_ESCALATION_SUCCESS":if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("RTCP2PCallEscalator").onEscalationSucceeded();b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_success"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",g.ESCALATED).set("escalated",!0).set("inProgress",!1).set("request",null).set("response",!0).set("token",null)});case"P2P_CALL_ESCALATION_FAILURE":if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("RTCP2PCallEscalator").onEscalationFailed();if(c.reason==="denied"){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_denied"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason||null).set("inProgress",!1).set("request",null).set("response",c.response||null).set("token",null).set("escalateMediaStream",null)})}else c.reason==="cancelled"?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_cancelled"}):c.reason==="timeout"?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_timeout"}):b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_failed"});b("RTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!1);return a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason).set("token",null).set("escalateMediaStream",null)});case"SET_P2P_CALL_ESCALATION_MEDIA":return a.set("escalateMediaStream",c.stream);default:return a}};c=function(a,c){__p&&__p();switch(c.type){case"P2P_CALL_ESCALATION_SET_REQUEST":var d=c.request;if(d==null)return a;return!b("RTCP2PCallEscalator").requestVideoOn(d.msg)?a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("request",null).set("response",null).set("token",null)}):a.withMutations(function(a){a.set("inProgress",!0).set("request",c.request).set("response",null).set("token",null)});case"P2P_CALL_ESCALATION_SET_RESPONSE":if(c.response==null)return a;else if(a.request==null)return a;return a.withMutations(function(a){a.set("awaitingACK",!0).set("callType",c.response?g.ESCALATED:g.ESCALATION_DECLINED).set("response",c.response).set("token",b("RTCP2PCallStore").getState().protocolHandler.generateEscalationResponseToken(a.request,c.response))});case"P2P_CALL_ESCALATION_ACK":if(c.token==null)return a;return a.response==null||a.request==null||c.token!==a.token||!a.awaitingACK?a:a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",a.response?g.ESCALATED:g.ESCALATION_DECLINED).set("escalated",a.response).set("inProgress",!1).set("request",null).set("response",null).set("token",null)});default:return a}};d=function(a,c){__p&&__p();switch(c.type){case"RESET":return new(b("RTCP2PCallEscalationStoreState"))();case"SET_CALL_TYPE":switch(c.callType){case b("RTCCallType").AUDIO_VIDEO:case b("RTCCallType").VIDEO_ONLY:return a.set("callType",g.DIRECT_VIDEO)}return a;case"P2P_CALL_ESCALATION_ACK":if(c.token==null)return a;if(!a.awaitingACK)return a;else if(c.token!==a.token)return a;return a.set("awaitingACK",!1);default:return a}};e.exports={Alice:a,Bob:c,common:d}}),null);
__d("RTCP2PCallReducer",["FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","RTCAppDispatcher","RTCCallStore","RTCCallType","RTCP2PCallEscalationStore","RTCP2PCallStoreState","RTCP2PCallWindowHandler","RTCP2PProtocolHandler","RTCScreenSharingWindowHandler","RTCSignalingExperiments","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;function a(a,c){__p&&__p();switch(c.type){case"INIT":var d=c.callType,e=c.isCaller,f=c.protocol;return f===g.P2P&&d&&e!=null?a.set("protocolHandler",a.protocolHandler||new(b("RTCP2PProtocolHandler"))()).set("isCaller",e).set("callType",d):a;case"RESET":return new(b("RTCP2PCallStoreState"))();case"RESET_FOR_REDIAL":b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);f=b("RTCCallStore").getState().remoteUsers.first();if(f==null)return a;a.protocolHandler.destroy();return a.set("connectionStatus","INIT").set("endCallReason",null).set("protocolHandler",new(b("RTCP2PProtocolHandler"))().init(f.FBID,Number(c.conferenceName))).set("signalingExperiments",new(b("RTCSignalingExperiments"))());case"CALL_COLLISION":b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);a.protocolHandler.init(c.peerID,Number(c.conferenceName));return a.set("connectionStatus","INIT").set("endCallReason",null).set("signalingExperiments",new(b("RTCSignalingExperiments"))());default:return a}}function c(a,c){switch(c.type){case"HANGUP":case"DISMISS":case"HANGUP_ERROR":case"HANGUP_SUCCESS":case"END_CALL":case"REMOVE_REMOTE_SCREEN_STREAM":case"RESET_FOR_REDIAL":b("RTCScreenSharingWindowHandler").close();return a.withMutations(function(a){return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened()).set("isRedialFooterButtonShown",(b("RTWebClientFeatureGating").shouldAlwaysShowRedial()||b("RTCP2PProtocolHandler").showRedialButton())&&!b("FBRTCConfig").isVCEndpointCall()).set("isStarRatingShown",b("RTCP2PProtocolHandler").showStarRating())});default:return a}}function d(a,c){switch(c.type){case"SET_CALL_TYPE":return a.set("callType",c.callType);case"P2P_CALL_ESCALATION_SET_RESPONSE":b("RTCAppDispatcher").waitFor([b("RTCP2PCallEscalationStore").getDispatchToken()]);return a.set("callType",c.response?b("RTCCallType").AUDIO_VIDEO:b("RTCCallType").AUDIO_ONLY);case"P2P_CALL_ESCALATION_FAILURE":return a.set("callType",b("RTCCallType").AUDIO_ONLY);case"P2P_CALL_ESCALATION_SUCCESS":b("RTCAppDispatcher").waitFor([b("RTCP2PCallEscalationStore").getDispatchToken()]);return b("RTCP2PCallEscalationStore").isEscalated()?a.set("callType",b("RTCCallType").AUDIO_VIDEO):a;default:return a}}function f(a,c){switch(c.type){case"SET_CONNECTION_STATUS":if(a.connectionStatus!==c.connectionStatus){b("RTCP2PCallWindowHandler").updateCallInProgressIndicator(c.connectionStatus);return a.set("connectionStatus",c.connectionStatus)}default:return a}}function h(a,b){switch(b.type){case"SET_END_CALL_REASON":return a.set("endCallReason",b.endCallReason);default:return a}}function i(a,b){switch(b.type){case"SET_MULTIWAY_ESCALATION_SUPPORT":a=a.set("offerEscalationSupport",b.offerEscalationSupport);b.escalationConferenceName&&(a=a.set("escalationConferenceName",b.escalationConferenceName));return a;default:return a}}function j(a,c){switch(c.type){case"POP_IN_SCREEN_CONTENT":b("RTCScreenSharingWindowHandler").close();return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());case"POP_OUT_SCREEN_CONTENT":var d=b("RTCCallStore").getState(),e=d.remoteUsers.first().FBID;d=d.callInfo;b("RTCScreenSharingWindowHandler").open(e,c.stream,d);return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());default:return a}}function k(a,b){switch(b.type){case"SET_REMOTE_SIGNALING_EXPERIMENTS":return a.set("signalingExperiments",a.signalingExperiments.setRemote(b.remoteSignalingExperiments));default:return a}}function l(a,b){switch(b.type){case"P2P_PROCESS_MESSAGE":return a.set("isRemoteVideoSupported",b.message.isRemoteVideoSupported()).set("isPeerOnMobile",b.message.isFromMobile());default:return a}}function m(a,b){switch(b.type){case"P2P_SET_IS_CALLER":return a.set("isCaller",b.isCaller);case"CALL_COLLISION":return a.set("isCaller",!0);default:return a}}function n(a,b){switch(b.type){case"SET_CONNECTION_STATUS":return b.connectionStatus==="CONNECTED"?a.set("wasConnected",!0):a;case"RESET_FOR_REDIAL":return a.set("wasConnected",!1);case"CALL_COLLISION":return a.set("wasConnected",!1);default:return a}}function o(a,b){switch(b.type){case"P2P_STAR_RATING_DONE":return a.set("isStarRatingShown",!1).set("wasStarRatingDone",b.done);case"RESET_FOR_REDIAL":return a.set("isStarRatingShown",!1).set("wasStarRatingDone",!1);default:return a}}function p(a,b){switch(b.type){case"SHOW_POOR_NETWORK_QUALITY":return a.set("isPoorNetworkQualityShown",!0);case"DISMISS_POOR_NETWORK_QUALITY":return a.set("isPoorNetworkQualityShown",!1);default:return a}}e.exports={callInit:a,callEnd:c,processCallType:d,processConnectionStatus:f,processEndCallReason:h,processIsCaller:m,processMessage:l,processMultiwayEscalationSupport:i,processPoorNetworkQuality:p,processPoppedOutScreenContent:j,processSignalingExperiments:k,processWasConnected:n,processWasStarRatingDone:o}}),null);
__d("RTCStreamDurationTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=function(){__p&&__p();function a(a){__p&&__p();var c=this;a===void 0&&(a="mixed");this.$3=0;this.$4=0;this.$5=!1;this.update=function(){if(!c.$5)return;c.$6()?c.$4===0&&(c.$4=(g||(g=b("performanceNow")))()):c.pause(c.$2)};this.$1=a}var c=a.prototype;c.isStarted=function(){return this.$5};c.track=function(a){__p&&__p();if(a===this.$2){this.update();return}if(this.$2&&this.$5){var b=this.$2;b.removeEventListener("addtrack",this.update);b.removeEventListener("removetrack",this.update)}a?(this.$5&&this.$6()&&(this.$3=this.getDuration()),this.$2=a,this.$5&&this.start()):this.stop()};c.$6=function(){return!this.$2?!1:this.$7().some(function(a){return a.enabled})};c.$7=function(){if(!this.$2)return[];switch(this.$1){case"audio":return this.$2.getAudioTracks();case"video":return this.$2.getVideoTracks();case"screen":return this.$2.getVideoTracks();default:return this.$2.getTracks()}};c.pause=function(a){if(!this.$5)return;if(this.$2!==a)return;this.$3=this.getDuration();this.$4=0};c.getDuration=function(){return this.$4===0?this.$3:this.$3+(g||(g=b("performanceNow")))()-this.$4};c.start=function(){this.$5=!0;this.$6()&&(this.$4=(g||(g=b("performanceNow")))());if(this.$2){var a=this.$2;a.addEventListener("addtrack",this.update);a.addEventListener("removetrack",this.update)}};c.stop=function(){__p&&__p();if(!this.$5)return;this.$3=this.getDuration();this.$5=!1;this.$4=0;if(this.$2){var a=this.$2;a.removeEventListener("addtrack",this.update);a.removeEventListener("removetrack",this.update)}};return a}();e.exports=a}),null);
__d("FBRTCGroupCallStoreState",["RTCStreamDurationTracker","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={localVideoDurationTracker:new(b("RTCStreamDurationTracker"))("video"),remoteVideoDurationTracker:new(b("RTCStreamDurationTracker"))("video"),localScreenDurationTracker:new(b("RTCStreamDurationTracker"))("screen")};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));d={dominantSpeakerFBID:null,endCallReason:null,layout:null,linkHash:null,participants:b("immutable").Map(),pinnedSpeakerFBID:null,thread:null,videoDurationTrackerInfo:new c(),dominantSpeakerDetector:null};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("FBRTCGroupCallStore",["FBRTCGroupCallParticipantsReducer","FBRTCGroupCallReducer","FBRTCGroupCallStoreState","FBRTCVideoDurationTrackerReducer","FluxReduceStore","RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("FBRTCGroupCallParticipantsReducer").addParticipantsToRing,b("FBRTCGroupCallParticipantsReducer").initThread,b("FBRTCGroupCallParticipantsReducer").onParticipantsChanged,(a=b("FBRTCGroupCallReducer")).processEndCallReason,a.setDominantSpeaker,a.setUpDominantSpeakerDetection,a.setLayout,a.setLinkHash,b("FBRTCVideoDurationTrackerReducer").track,b("FBRTCVideoDurationTrackerReducer").update,b("FBRTCVideoDurationTrackerReducer").stop];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("FBRTCGroupCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.hadVideoDuration=function(){var a=this.getState().videoDurationTrackerInfo,b=a.localVideoDurationTracker;a=a.remoteVideoDurationTracker;return b.getDuration()>0||a.getDuration()>0};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("RTCAppDispatcher"))}),null);
__d("FBRTCMWProtocolStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={pendingResponse:!1,pendingUpdate:!1,lastSyncedClientVersion:1,localMediaUpdates:b("immutable").List([{mediaStatus:{}}])};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));d={clientMediaUpdateInfo:new c()};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("FBRTCMWProtocolStore",["FBRTCClientMediaUpdateReducer","FBRTCMWProtocolStoreState","FluxReduceStore","RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("FBRTCClientMediaUpdateReducer")).configureAudio,a.configureVideo,a.onClientMediaUpdateResponse,a.setLocalClientVersion,a.reset];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("FBRTCMWProtocolStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("RTCAppDispatcher"))}),null);
__d("RTCCallStore",["FBRTCCallSummaryReducer","FBRTCCallSummaryStore","FBRTCParticipantCallState","FluxReduceStore","RTCAppDispatcher","RTCCallReducer","RTCCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("FBRTCCallSummaryReducer")).onCallEnded,a.onCallStarted,a.onMessageSignaling,a.onSurveyResult,a.setCallSummary,(c=b("RTCCallReducer")).abortMultiwayEscalationProcess,c.callEnd,c.callInit,c.callStart,c.completeTransitionToMultiway,c.incomingCallStart,c.onParticipantsChanged,c.processConferenceState,c.processJoinResponse,c.processLocalScreenStream,c.processLocalStream,c.processRemoteScreenStream,c.processRemoteStream,c.processRemoteTrack,c.processUsers,c.toggleLocalStream,c.toggleRemoteStream,c.waitForUserInput];d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};d.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};d.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};d.mutateCallSummary=function(a){var c=this.getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())};d.getSortedRemoteUsers=function(){return this.getState().remoteUsers.toList().sort(function(a,b){return a.lastConnectedAt===b.lastConnectedAt?a.FBID>b.FBID?1:-1:a.lastConnectedAt-b.lastConnectedAt})};d.getConnectedRemoteUsersSize=function(){return this.getState().remoteUsers.count(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED})};return c}(b("FluxReduceStore"));d.__moduleID=e.id;e.exports=new d(b("RTCAppDispatcher"))}),null);
__d("RTCGroupCallEscalationStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCGroupCallEscalationStoreReducer","RTCGroupCallEscalationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("RTCGroupCallEscalationStoreReducer")).abortEscalation,a.callStart,a.clearStore,a.onMultiwayConnectionSignaling,a.onParticipantsConnected,a.setP2PCallSummary,a.setUsersToRing];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCGroupCallEscalationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.isInProgress=function(){return this.getState().inProgress};d.isEscalated=function(){return this.getState().readyToTransition};d.logToP2PCallSummary=function(a){var c=this.getState();c=c.p2pCallSummary;c&&(a(c),c.save(b("FBRTCCallSummaryStore").getInstance()))};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallEscalationStore",["FluxReduceStore","RTCAppDispatcher","RTCP2PCallEscalationStoreReducers","RTCP2PCallEscalationStoreState","RTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCP2PCallEscalationStoreReducers").Alice,b("RTCP2PCallEscalationStoreReducers").Bob,b("RTCP2PCallEscalationStoreReducers").common];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCP2PCallEscalationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.didCurrentUserInitiate=function(){return this.getState().initiatedEscalation};d.isInProgress=function(){return this.getState().inProgress};d.isEscalated=function(){return this.getState().escalated};d.getEscalateMediaStream=function(){return this.getState().escalateMediaStream};d.remoteWillNotInitSDPUpdate=function(){return b("RTCP2PCallStore").getState().isPeerOnMobile||b("RTCP2PCallStore").getState().signalingExperiments.remoteSupport("video_escalation_by_unmute")};d.isNegotiationAllowed=function(){var a=this.getState();return this.remoteWillNotInitSDPUpdate()||!a.request};d.isStarted=function(){var a=this.getState();return a.inProgress&&a.token!==null};d.getToken=function(){return this.getState().token};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallStore",["FluxReduceStore","RTCAppDispatcher","RTCCallType","RTCP2PCallAdminMessageReducers","RTCP2PCallReducer","RTCP2PCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[(a=b("RTCP2PCallReducer")).callEnd,a.callInit,a.processCallType,a.processConnectionStatus,a.processEndCallReason,a.processPoppedOutScreenContent,a.processMultiwayEscalationSupport,a.processSignalingExperiments,a.processMessage,a.processIsCaller,a.processWasConnected,a.processWasStarRatingDone,a.processPoorNetworkQuality,b("RTCP2PCallAdminMessageReducers").processCallInit,b("RTCP2PCallAdminMessageReducers").processCallStart,b("RTCP2PCallAdminMessageReducers").processCallEnd];c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCP2PCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.isAudioOnly=function(){return this.getState().callType===b("RTCCallType").AUDIO_ONLY};d.isCaller=function(){return this.getState().isCaller};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallStoreState",["RTCCallType","RTCP2PProtocolHandler","RTCSignalingExperiments","immutable"],(function(a,b,c,d,e,f){"use strict";a={adminMessage:null,callType:b("RTCCallType").AUDIO_ONLY,connectionStatus:"INIT",endCallReason:null,escalationConferenceName:null,isCaller:!1,isPeerOnMobile:!1,isPoorNetworkQualityShown:!1,isRedialFooterButtonShown:!1,isRemoteVideoSupported:!0,isScreenContentPoppedOut:!1,isStarRatingShown:!1,offerEscalationSupport:!1,protocolHandler:new(b("RTCP2PProtocolHandler"))(),signalingExperiments:new(b("RTCSignalingExperiments"))(),wasConnected:!1,wasStarRatingDone:!1};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("RTCCallInitUtils",["invariant","CurrentUser","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","MercuryIDs","MessengerParticipants.bs","MessengerState.bs","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCUser","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBRTCConstants").CallType,j=b("FBRTCConstants").SignalingProtocol;a={initializeCallSummary:function(a){var c=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),a.peerID,a.callID,a.isCaller);b("RTCCallActions").setCallSummary(c);b("RTCCallStore").mutateCallSummary(function(b){b.onPopupOpened(),b.setCallType(a.protocol===j.P2P?a.isAudio?i.VOIP:i.DIRECT_VIDEO:"mws"),b.setActiveConnection(a.protocol===j.P2P?"p2p":"mws")})},initializeRTCUsers:function(a,c){var d=this;a=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=b("immutable").Map(a);d.initializeParticipantsAndStartCall(a,!0,c)})},initializeParticipantsAndStartCall:function(a,c,d){var e=this,f=a.keySeq().toArray();b("MessengerParticipants.bs").getBigImageMultiWithSize(f,function(f){c&&b("RTCCallActions").initRemoteUsers(a.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}).map(function(a){return e._createRTCUser(a,f)}).toSet());var g=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("RTCCallActions").initLocalUser(e._createRTCUser(a.get(g),f));d()},100)},initializeThreadFromCollisionContext:function(a){__p&&__p();var c=a.peerID;a=a.groupThreadID;a=c!=null?c:a;if(a==null)return;c=c!=null?b("MercuryIDs").getThreadIDFromUserID(a):b("MercuryIDs").getThreadIDFromThreadFBID(a);if(c===null)return;b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),c,function(a){b("RTCGroupCallActions").initThread(a,null)})},_createRTCUser:function(a,c){var d=a.big_image_src,e=a.fbid,f=a.user_type,i=a.href,j=a.image_src,k=a.is_messenger_user,l=a.name,m=a.room_location,n=a.short_name;a=a.vanity;e||g(0,1174);if(c){var o=b("MercuryIDs").getParticipantIDFromUserID(e);d=c[o]}return new(b("RTCUser"))({FBID:e,isGuestUser:f==="guest",isMessengerUser:!!k,profileUrl:new(h||(h=b("URI")))(i),profilePictureUrl:d||j,roomLocation:m,userName:l,userShortName:n,vanity:a?a:""})}};e.exports=a}),null);
__d("RTCGroupCallEscalationActions",["RTCAppDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";a={start:function(){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_START"})},cancel:function(a){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_CANCEL",p2pCallSummary:a})},approve:function(){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_SUCCESS"})},setUsersToRing:function(a){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_SET_USERS_TO_RING",usersToRing:a})},setP2PCallSummary:function(a){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_SET_P2P_CALLSUMMARY",p2pCallSummary:a})}};e.exports=a}),null);
__d("RTCGroupCallEscalator",["CurrentUser","FBRTCConsoleLogger","FBRTCConstants","FBRTCGroupCallStore","FBRTCMWProtocolStore","FBRTCScreenSharingUtils","MercuryIDs","MessengerParticipants.bs","RTCAppDispatcher","RTCCallStore","RTCGroupCallActions","RTCGroupCallEscalationActions","RTCGroupCallEscalationStore","RTCMWProtocolHandler","RTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout,h=45e3;a=function(){__p&&__p();function a(a,c,d,e){this.$3=a,this.$4=c,this.$5=d,this.$1=String(e),b("RTCGroupCallEscalationActions").setP2PCallSummary(b("RTCCallStore").getState().callSummary),this.$6=[d],this.$8=null}var c=a.prototype;c.getParticipants=function(){return this.$8};c.$9=function(){var a=this.$3,c=this.$1;return window.setTimeout(function(){var d=b("RTCGroupCallEscalationStore").isEscalated(),e=b("RTCCallStore").getState();e=e.callInfo;!d&&(e.callID===c||e.conferenceName===a)&&(i("Group Escalation timed out"),b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationTimedOut(),b("RTCGroupCallEscalationActions").cancel(a)}))},h)};c.startEscalationToMultiway=function(){__p&&__p();var a=this;i("Escalating P2P call to Multiway call %o",this.$3);var c=b("RTCGroupCallEscalationStore").getState().inProgress;if(c)return;b("RTCGroupCallEscalationActions").start();this.$2=this.$9();this.$7=new(b("RTCMWProtocolHandler"))();b("RTCAppDispatcher").explicitlyRegisterStores([b("FBRTCGroupCallStore"),b("FBRTCMWProtocolStore")]);b("RTCGroupCallActions").setLayout(g.GRID);var d=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("MessengerParticipants.bs").get(d,function(c){var e={};e[d]=c;c=b("immutable").Map(e);a.$8=c;b("RTCGroupCallActions").initThread(null,c);a.$10()})};c.$10=function(){var a=b("RTCCallStore").getState().localUser.getStream(),c=b("RTCCallStore").getState().localUser.getScreenStream(),d=a;c&&b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()&&(a&&b("RTCUtils").transferAudioTracks(c,a),d=c);d&&this.$7.onStreamReady(d,this.$6,this.$3,!0,{callTrigger:"multiway_escalation",p2pCallID:this.$1})};return a}();a.ESCALATION_TIMEOUT=h;function i(){}e.exports=a}),null);
/**
 *
 * 
 * @preserve-header
 * @preserve-whitespace
 * @format
 */__d("RTCSDPInterop",["sdp-interop-array-equals","sdp-interop-transform"],(function $module_RTCSDPInterop(global,require,requireDynamic,requireLazy,module,exports){var


































RTCSDPInterop=function(){"use strict";












































function RTCSDPInterop(){







this.cache={
mlB2UMap:{},
mlU2BMap:{},
localMediaLines:[],
remoteMediaLines:[],



localDescriptionType:'offer',
offer:null,
answer:null,
pranswer:null,
rollback:null};


this.planBRemoteDescription=null;
this.midToMWTrackId=new Map();
this.mwTrackIdToWebrtcTrackId=new Map();
}var _proto=RTCSDPInterop.prototype;_proto.

setPlanBRemoteDescription=function setPlanBRemoteDescription(desc){
this.planBRemoteDescription=desc;
};_proto.

getPlanBRemoteDescription=function getPlanBRemoteDescription(){
return this.planBRemoteDescription;
};_proto.

correlateWebrtcTrackIdsByMid=function correlateWebrtcTrackIdsByMid(webrtcTrackId,mid){
var mwTrackId=this.midToMWTrackId.get(mid);
if(mwTrackId!=null){
this.mwTrackIdToWebrtcTrackId.set(mwTrackId,webrtcTrackId);
}
};_proto.

getWebrtcTrackIdFromMWTrackId=function getWebrtcTrackIdFromMWTrackId(mwTrackId){
var webrtcTrackId=this.mwTrackIdToWebrtcTrackId.get(mwTrackId);
return webrtcTrackId?webrtcTrackId:mwTrackId;
};_proto.




candidateToUnifiedPlan=function candidateToUnifiedPlan(candidate){
var cand=new RTCIceCandidate(candidate);

cand.sdpMLineIndex=this.cache.mlB2UMap[cand.sdpMLineIndex];


return cand;
};_proto.




candidateToPlanB=function candidateToPlanB(candidate){
var cand=new RTCIceCandidate(candidate);var
sdpMid=cand.sdpMid;

if(sdpMid!=null){
if(sdpMid.indexOf('audio')===0){
cand.sdpMid='audio';
}else if(sdpMid.indexOf('video')===0){
cand.sdpMid='video';
}else{
throw new Error("candidate with "+sdpMid+" not allowed");
}
}
cand.sdpMLineIndex=this.cache.mlU2BMap[cand.sdpMLineIndex];

return cand;
};_proto.









getFirstSendingIndexFromAnswer=function getFirstSendingIndexFromAnswer(type){
if(!this.cache.answer){
return null;
}

var session=require("sdp-interop-transform").parse(this.cache.answer);
if(session&&session.media&&Array.isArray(session.media)){
for(var i=0;i<session.media.length;i++){
if(
session.media[i].type===type&&(
!session.media[i].direction||
session.media[i].direction==='sendrecv'||
session.media[i].direction==='sendonly'))
{
return i;
}
}
}

return null;
};_proto.







toPlanB=function toPlanB(desc){
var self=this;

var localMediaLines=[];
if(
typeof desc!=='object'||
desc===null||
typeof desc.sdp!=='string')
{
console.warn('An empty description was passed as an argument.');
return desc;
}


var session=require("sdp-interop-transform").parse(desc.sdp);


if(
session.media===undefined||
!Array.isArray(session.media)||
session.media.length===0)
{
console.warn('The description has no media.');
return desc;
}



if(
session.media.length<=3&&
session.media.every(function(_ref){var mid=_ref.mid;return['video','audio','data'].includes(mid);}))
{
console.warn('This description does not look like Unified Plan.');
return desc;
}




var sdp=desc.sdp;
var rewrite=false;var _loop=function _loop(
i){
var uLine=session.media[i];

localMediaLines.push(uLine.type);
uLine.rtp.forEach(function(rtp){
if(rtp.codec==='NULL'){
rewrite=true;
var offer=require("sdp-interop-transform").parse(self.cache.offer);
rtp.codec=offer.media[i].rtp[0].codec;
}
});};for(var i=0;i<session.media.length;i++){_loop(i);
}
if(rewrite){
sdp=require("sdp-interop-transform").write(session);
}



this.cache[desc.type]=sdp;
this.cache.localDescriptionType=desc.type;
this.cache.localMediaLines=localMediaLines;
};_proto.










convertUnifiedToPlanB=function convertUnifiedToPlanB(desc){

var session=require("sdp-interop-transform").parse(desc.sdp);


var media=session.media;
session.media=[];




var type2bl={};



var types=[];

media.forEach(function(uLine){
midToString(uLine);


if(
(typeof uLine.rtcpMux!=='string'||uLine.rtcpMux!=='rtcp-mux')&&
uLine.direction!=='inactive')
{
throw new Error(
'Cannot convert to Plan B because m-lines '+
'without the rtcp-mux attribute were found.');

}



if(
type2bl[uLine.type]===undefined||
type2bl[uLine.type].direction==='inactive')
{
type2bl[uLine.type]=uLine;
}
});


media.forEach(function(uLine){
if(uLine.type==='application'){
uLine.mid='data';
session.media.push(uLine);
types.push(uLine.mid);
return;
}


if(typeof uLine.sources==='object'){
Object.keys(uLine.sources).forEach(function(ssrc){
if(typeof type2bl[uLine.type].sources!=='object'){
type2bl[uLine.type].sources={};
}


type2bl[uLine.type].sources[ssrc]=uLine.sources[ssrc];

if(uLine.msid!==undefined){






type2bl[uLine.type].sources[ssrc].msid=uLine.msid;
}


});
}


if(uLine.ssrcGroups!==undefined&&Array.isArray(uLine.ssrcGroups)){

if(
type2bl[uLine.type].ssrcGroups===undefined||
!Array.isArray(type2bl[uLine.type].ssrcGroups))
{
type2bl[uLine.type].ssrcGroups=[];
}

type2bl[uLine.type].ssrcGroups=type2bl[uLine.type].ssrcGroups.concat(
uLine.ssrcGroups);

}

if(type2bl[uLine.type]===uLine){

uLine.mid=uLine.type;


delete uLine.bundleOnly;


delete uLine.msid;

if(uLine.direction!=='inactive'){

types.push(uLine.type);
}


session.media.push(uLine);
}
});


session.groups.some(function(group){
if(group.type==='BUNDLE'){
group.mids=types.join(' ');
return true;
}
});


session.msidSemantic={
semantic:'WMS',
token:'*'};


var resStr=require("sdp-interop-transform").write(session);

return new RTCSessionDescription({
type:desc.type,
sdp:resStr});



};_proto.









toUnifiedPlan=function toUnifiedPlan(desc){var _this=this;
var self=this;

if(
typeof desc!=='object'||
desc===null||
typeof desc.sdp!=='string')
{
console.warn('An empty description was passed as an argument.');
return desc;
}

if(desc.type!=='answer'&&desc.type!=='offer'){
console.warn(
'Non offer or answer descriptions cannot be handled at this time.');

return desc;
}

var session=require("sdp-interop-transform").parse(desc.sdp);


if(
session.media===undefined||
!Array.isArray(session.media)||
session.media.length===0)
{
console.warn('The description has no media.');
return desc;
}


var mids=[];
session.media.forEach(function(_ref2){var mid=_ref2.mid;
mids.push(mid);
});

var hasBundle=false;
if(session.groups!==undefined&&Array.isArray(session.groups)){
hasBundle=session.groups.every(
function(g){return(
g.type!=='BUNDLE'||
require("sdp-interop-array-equals").apply(g.mids.sort(),[mids.sort()]));});

}

if(!hasBundle){
throw new Error(
'Cannot convert to Unified Plan because m-lines that'+
' are not bundled were found.');

}

























var remoteMediaLines=[];

var cached;
if(this.cache[desc.type]!=null){
cached=require("sdp-interop-transform").parse(this.cache[desc.type]);
}

var recvonlySsrcs={
audio:{},
video:{}};




var mid2ul={};
var bIdx=0;
var uIdx=0;
session.media.forEach(function(bLine){
if(bLine.type==='application'){
bLine.mid=String(bLine.mid);
mid2ul[bLine.mid]=bLine;
return;
}



var sources=bLine.sources;
var ssrcGroups=bLine.ssrcGroups;
var candidates=bLine.candidates;
var iceUfrag=bLine.iceUfrag;
var icePwd=bLine.icePwd;
var fingerprint=bLine.fingerprint;
var port=bLine.port;

if(typeof sources==='object'){




delete bLine.sources;
delete bLine.ssrcGroups;
delete bLine.candidates;
delete bLine.iceUfrag;
delete bLine.icePwd;
delete bLine.fingerprint;
delete bLine.port;
delete bLine.mid;
}


var ssrc2group={};
if(ssrcGroups!==undefined&&Array.isArray(ssrcGroups)){
ssrcGroups.forEach(function(ssrcGroup){


if(ssrcGroup.semantics==='SIM'){
return;
}



if(ssrcGroup.ssrcs!==undefined&&Array.isArray(ssrcGroup.ssrcs)){
ssrcGroup.ssrcs.forEach(function(ssrc){
if(ssrc2group[ssrc]===undefined){
ssrc2group[ssrc]=[];
}

ssrc2group[ssrc].push(ssrcGroup);
});
}
});
}


var ssrc2ml={};

if(typeof sources==='object'){

Object.keys(sources).forEach(function(ssrc){




var uLine;




if(desc.type===_this.cache.localDescriptionType){







if(!sources[ssrc].msid){
recvonlySsrcs[bLine.type][ssrc]=sources[ssrc];


return;
}
}

if(
ssrc2group[ssrc]!==undefined&&
Array.isArray(ssrc2group[ssrc]))
{
ssrc2group[ssrc].some(function(_ref3){var
ssrcs=_ref3.ssrcs;return(


ssrcs.some(function(related){
if(typeof ssrc2ml[related]==='object'){
uLine=ssrc2ml[related];
return true;
}
}));});

}

if(typeof uLine==='object'){

uLine.sources[ssrc]=sources[ssrc];
delete sources[ssrc].msid;
}else{

uLine=Object.create(bLine);
ssrc2ml[ssrc]=uLine;

if(sources[ssrc].msid!==undefined){





uLine.msid=sources[ssrc].msid;
}


uLine.sources={};
uLine.sources[ssrc]=sources[ssrc];
uLine.ssrcGroups=ssrc2group[ssrc];



if(
cached!==undefined&&
cached.media!==undefined&&
Array.isArray(cached.media))
{
cached.media.forEach(function(m){
if(typeof m.sources==='object'){
Object.keys(m.sources).forEach(function(s){
if(s===ssrc){
uLine.mid=String(m.mid);
}
});
}
});
}

if(uLine.mid===undefined){













if(desc.type===_this.cache.localDescriptionType){
throw new Error('An unmapped SSRC was found.');
}

uLine.mid=[bLine.type,'-',ssrc].join('');
}


uLine.candidates=candidates;
uLine.iceUfrag=iceUfrag;
uLine.icePwd=icePwd;
uLine.fingerprint=fingerprint;
uLine.port=port;
uLine.type=bLine.type;

mid2ul[uLine.mid]=uLine;

self.cache.mlU2BMap[uIdx]=bIdx;
if(self.cache.mlB2UMap[bIdx]===undefined){
self.cache.mlB2UMap[bIdx]=uIdx;
}
uIdx++;
}
});
}else{



bLine.mid=String(bLine.mid);
mid2ul[bLine.mid]=bLine;
}

bIdx++;
});



session.media=[];
mids=[];


if(desc.type===this.cache.localDescriptionType){










if(this.cache[desc.type]!=null){
cached=require("sdp-interop-transform").parse(this.cache[desc.type]);
}
if(cached!==undefined){
for(var i=0;i<cached.media.length;i++){
var uLine=cached.media[i];

if(mid2ul[uLine.mid]===undefined){











delete uLine.msid;
delete uLine.sources;
delete uLine.ssrcGroups;
if(!uLine.direction||uLine.direction==='sendrecv'){
uLine.direction='recvonly';
}else if(uLine.direction==='sendonly'){
uLine.direction='inactive';
}
}else{





}

session.media.push(uLine);

if(typeof uLine.mid==='string'){

mids.push(uLine.mid);
}
}
}
}else{








if(
cached!==undefined&&
cached.media!==undefined&&
Array.isArray(cached.media))
{
cached.media.forEach(function(uLine){
var mid=String(uLine.mid);
mids.push(mid);
if(mid2ul[mid]!==undefined){
session.media.push(mid2ul[mid]);
}else{
delete uLine.msid;
delete uLine.sources;
delete uLine.ssrcGroups;
if(!uLine.direction||uLine.direction==='sendrecv'){
uLine.direction='recvonly';
}
if(!uLine.direction||uLine.direction==='sendonly'){
uLine.direction='inactive';
}
session.media.push(uLine);
}
});
}


Object.keys(mid2ul).forEach(function(mid){
if(!mids.includes(mid)){
mids.push(mid);
if(mid2ul[mid].direction==='recvonly'){





session.media.some(function(_ref4){var direction=_ref4.direction,type=_ref4.type,sources=_ref4.sources;
if(
(direction==='sendrecv'||direction==='sendonly')&&
type===mid2ul[mid].type)
{

Object.keys(mid2ul[mid].sources).forEach(function(ssrc){
sources[ssrc]=mid2ul[mid].sources[ssrc];
});

return true;
}
});
}else{
session.media.push(mid2ul[mid]);
}
}
});
}





if(this.cache[desc.type]===null){
session.media=RTCSDPInterop.sortRemoteSourcesToMatchLocalOrder(
this.cache.localMediaLines,
session.media);

}

mids=[];
for(var _i=0;_i<session.media.length;_i++){


session.media[_i].mid=String(_i);
mids.push(String(_i));


remoteMediaLines.push(session.media[_i].type);
}


this.cacheMidToMWTrackId(session.media);






['audio','video'].forEach(function(type){
if(!session||!session.media||!Array.isArray(session.media)){
return;
}

var idx=null;
if(Object.keys(recvonlySsrcs[type]).length>0){
idx=self.getFirstSendingIndexFromAnswer(type);
if(idx===null){




for(var _i2=0;_i2<session.media.length;_i2++){
if(session.media[_i2].type===type){
idx=_i2;
break;
}
}
}
}

if(idx&&session.media.length>idx){
var mLine=session.media[idx];
Object.keys(recvonlySsrcs[type]).forEach(function(ssrc){
if(mLine.sources&&mLine.sources[ssrc]){
console.warn('Replacing an existing SSRC.');
}
if(!mLine.sources){
mLine.sources={};
}

mLine.sources[ssrc]=recvonlySsrcs[type][ssrc];
});
}
});


session.groups.some(function(group){
if(group.type==='BUNDLE'){
group.mids=mids.join(' ');
return true;
}
});


session.msidSemantic={
semantic:'WMS',
token:'*'};


var resStr=require("sdp-interop-transform").write(session);

this.cache.remoteMediaLines=remoteMediaLines;


this.cache[desc.type]=resStr;

return{
type:desc.type,
sdp:resStr};



};_proto.








getTrackTypesToMatchDescription=function getTrackTypesToMatchDescription(){
var tracksToAdd=[];var _this$cache=
this.cache,localMediaLines=_this$cache.localMediaLines,remoteMediaLines=_this$cache.remoteMediaLines;
if(remoteMediaLines.length<=localMediaLines.length){

return tracksToAdd;
}
for(var i=0;i<remoteMediaLines.length;i++){
if(localMediaLines[i]==null){
tracksToAdd.push(remoteMediaLines[i]);
}
}
return tracksToAdd;
};RTCSDPInterop.















sortRemoteSourcesToMatchLocalOrder=function sortRemoteSourcesToMatchLocalOrder(
localSourceTypes,
remoteSources)
{
var i=0;
var j=0;
while(i<localSourceTypes.length&&j<remoteSources.length){
if(remoteSources[j].type===localSourceTypes[i]){
var tmp=remoteSources[i];
remoteSources[i]=remoteSources[j];
remoteSources[j]=tmp;
i++;
j=0;
}
j++;
}
return remoteSources;
};_proto.









cacheMidToMWTrackId=function cacheMidToMWTrackId(sessionMedia){var _this2=this;
sessionMedia.forEach(function(mLine){var
sources=mLine.sources;
if(sources!=null&&mLine.type!=='application'){
var ssrcs=Object.keys(sources);
if(ssrcs.length>=1){

ssrcs.forEach(function(ssrc){var
msid=sources[ssrc].msid;
var trackId=RTCSDPInterop.getMWTrackIdFromMsid(msid);
if(trackId!=null){
_this2.midToMWTrackId.set(mLine.mid,trackId);
}
});
}
}
});
};RTCSDPInterop.



getMWTrackIdFromMsid=function getMWTrackIdFromMsid(msid){
if(msid!=null){
var splitMsid=msid.split(' ');
if(splitMsid.length>=2){
return splitMsid[1];
}
}
return null;
};return RTCSDPInterop;}();


function midToString(line){
if(typeof line.mid==='number'){
line.mid=line.mid.toString();
}
}
module.exports=RTCSDPInterop;}),null);
__d("RTCSessionDescription",["invariant","FBRTCConfig","FBRTCConstants","FBRTCMediaType","FBRTCSdpUtils","RTCSignalingExperiments"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol,i=window.RTCSessionDescription||window.mozRTCSessionDescription,j=2,k="o",l="m",m="a",n="rtpmap",o="ssrc-group",p="ssrc",q="cname",r="msid",s="mslabel",t="label",u="sendonly",v="recvonly",w="sendrecv",x="inactive",y="offer",z="answer",A="=",B=" ",C=":",D="\r\n",E="audio",F="video",G="application",H=function(a,b){return a.startsWith(b+A)},I=function(a){return a.substr(j)},J=function(a,b){return a.startsWith(b+D)||a.startsWith(b+C)},K=function(a,b){return a.substr(b.length+1)},L=function(){__p&&__p();function a(a){__p&&__p();var b=this;this.$1=[];this.$2="-";this.$3="multiway";this.$4=1;this.$5="IN";this.$6="IP4";this.$7="127.0.0.1";a.forEach(function(a){if(H(a,k)){var c=I(a).split(B);c.length==6&&(b.$2=c[0],b.$3=c[1],b.$4=parseInt(c[2],10),b.$5=c[3],b.$6=c[4],b.$7=c[5])}b.$1.push(a)})}var b=a.prototype;b.setVersion=function(a){this.$4=a};b.getVersion=function(){return this.$4};b.toSdp=function(){var a=this;return this.$1.map(function(b){if(H(b,k))return k+A+a.$2+B+a.$3+B+a.$4+B+a.$5+B+a.$6+B+a.$7;else return b}).join(D)};return a}(),M=function(){__p&&__p();function a(a,b,c){__p&&__p();var d=this;c===void 0&&(c={});this.$1=[];var e={},f=[],g=[];a.forEach(function(a){__p&&__p();var b=I(a);H(a,l)&&(d.$4=b.split(B)[0]);if(H(a,m)&&J(b,n)){var c=K(b,n);c=c.split(B);var h=c[0];c=c[1];e[c]=h}H(a,m)&&J(b,p)?d.$6(b,f):H(a,m)&&J(b,o)?d.$7(b,g):H(a,m)&&(b===u||b===v||b===w||b===x)?d.$5=b:d.$1.push(a)});Object.keys(c).forEach(function(a){if(e[a]){var b=Object.keys(c[a]).map(function(b){return b+"="+c[a][b]}).join(";");d.$1.push("a=fmtp:"+e[a]+" "+b)}});this.$3={};this.$2={};f.forEach(function(a){if(Object.prototype.hasOwnProperty.call(a,q)){var b=a.cname;!d.$3[b]?d.$3[b]=[a]:d.$3[b].push(a);a=d.findSsrcGroupForSsrc(g,a.ssrc);a&&(!d.$2[b]?d.$2[b]=[a]:d.$2[b].push(a),d.removeSsrcGroup(a,g))}});this.$4!==G&&(b===y?f.length===0?this.$5=v:this.$5=w:b===z&&(this.$5=w))}var b=a.prototype;b.getMediaType=function(){return this.$4};b.findSsrcGroupForSsrc=function(a,b){return a.find(function(a){a=a.ssrcs;return a.some(function(a){return a===b})})};b.addStreamsForEndpoint=function(a,b){this.$3[a]=b};b.addSsrcGroupsForEndpoint=function(a,b){var c=this;this.$3[a].forEach(function(d){d=d.ssrc;d=c.findSsrcGroupForSsrc(b,d);d&&(!c.$2[a]?c.$2[a]=[d]:c.$2[a].push(d),c.removeSsrcGroup(d,b))})};b.removeSsrcGroup=function(a,b){a=b.indexOf(a);a!==-1&&b.splice(a,1)};b.$7=function(a,b){a=K(a,o);if(a){a=a.split(B);var c=a[0];a=a.slice(1);b.push({semantics:c,ssrcs:a.map(function(a){return parseInt(a,10)})})}};b.$6=function(a,b){__p&&__p();var c=a.indexOf(B),d=a.substr(0,c),e=parseInt(K(d,p),10);d=a.substr(c+1);a=b.find(function(a){return a.ssrc===e});a||(a={},a.ssrc=e,b.push(a));if(J(d,q))a.cname=K(d,q);else if(J(d,r)){c=K(d,r).split(B);a.msid={id:c[0],appdata:c[1]}}else J(d,s)?a.mslabel=K(d,s):J(d,t)&&(a.label=K(d,t))};b.toSdp=function(){__p&&__p();var a=[];this.$1.forEach(function(b){a.push(b)});for(var b in this.$2)this.$2[b].forEach(function(b){a.push(m+A+o+C+b.semantics+B+b.ssrcs.join(B))});this.$5!=null&&a.push(m+A+this.$5);for(var c in this.$3)this.$3[c].forEach(function(b){b.cname&&a.push(m+A+p+C+b.ssrc+B+q+C+b.cname),b.msid&&a.push(m+A+p+C+b.ssrc+B+r+C+b.msid.id+(b.msid.appdata?B+b.msid.appdata:"")),b.mslabel&&a.push(m+A+p+C+b.ssrc+B+s+C+b.mslabel),b.label&&a.push(m+A+p+C+b.ssrc+B+t+C+b.label)});return a.join(D)};return a}();a=function(){__p&&__p();function a(a,b,c){__p&&__p();b===void 0&&(b={});c===void 0&&(c={});b=b;var d=b.type;d=d===void 0?"offer":d;b=b.sdp;b=b===void 0?"":b;this.$2=a;this.type=d;switch(a){case h.CUSTOM:this.$1=b;return;case h.MULTIWAY:this.$3(b,c);return;case h.P2P:this.$4(b,c);return}}var c=a.prototype;c.$3=function(a,c){__p&&__p();this.type==="offer"&&(a=b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a),c.OFFER_SDP_TRANSFORM&&(a=c.OFFER_SDP_TRANSFORM.reduce(function(a,b){return b(a)},a)));c.DISABLE_OPUS_STEREO&&(a=b("FBRTCSdpUtils").addFmtp(a,"opus","stereo","0"));a=a.trim().split(D);var d=[],e=0;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.sessionDescription=new L(d);this.mediaDescriptions=[];while(e<a.length){d=[];d.push(a[e]);e++;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.mediaDescriptions.push(new M(d,this.type,c.FORMAT_PARAMETERS))}};c.$4=function(a,c){__p&&__p();var d=[function(a){return b("FBRTCSdpUtils").addIceOptionToSdp(a,"fb-force-5245")},function(a){return b("FBRTCSdpUtils").useDTLSOverCrypto(a)}];if(this.type==="offer"){c.DISABLE_VIDEO&&d.push(function(a){return b("FBRTCSdpUtils").disableVideo(a)});var e=b("RTCSignalingExperiments").shouldPreferIsac();e&&d.push(function(a){return b("FBRTCSdpUtils").preferIsac(a)});d.push(function(a){return b("FBRTCSdpUtils").replaceRTPSAVPFProfile(a)},function(a){return b("FBRTCSdpUtils").addSetup(a)},function(a){return b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a)});b("FBRTCConfig").isVCEndpointCall()||d.push(function(a){return b("FBRTCSdpUtils").removeSdparta(a)});if(c.FORMAT_PARAMETERS){var f=Object.entries(c.FORMAT_PARAMETERS);e=function(){__p&&__p();var a=f[h],c=a[0];a=a[1];var e=Object.entries(a);a=function(){var a=e[i],f=a[0],h=a[1];typeof h==="string"||g(0,4169);d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,c,f,h)})};for(var i=0;i<e.length;i++)a()};for(var h=0;h<f.length;h++)e()}d.push(function(a){return b("FBRTCSdpUtils").clearFirefoxInactiveDataChannelBlock(a)})}c.ADD_FB_FEATURES!=null&&d.push(function(a){Array.isArray(c.ADD_FB_FEATURES)||g(0,4170);return b("FBRTCSdpUtils").addFBFeatures.apply(b("FBRTCSdpUtils"),[a].concat(c.ADD_FB_FEATURES))});c.ADD_AUDIO_NACK&&d.push(function(a){return b("FBRTCSdpUtils").addAudioNack(a)});c.DISABLE_OPUS_STEREO&&d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,"opus","stereo","0")});var i=c.SSRC_CONTENT_TYPE;i&&d.push(function(a){return b("FBRTCSdpUtils").addSSRCContentType(a,i)});this.$1=d.reduce(function(a,b){return b(a)},a)};c.processServerMediaUpdate=function(a){var c=a.sourceKey,d=a.media,e=a.ssrcGroups,f=[],g=[];d.forEach(function(a){a.ssrcs.forEach(function(d){d={ssrc:d,cname:c,msid:{id:c,appdata:a.id},label:a.id,mslabel:c};b("FBRTCMediaType").AUDIO===a.type?f.push(d):b("FBRTCMediaType").VIDEO===a.type&&g.push(d)})});this.mediaDescriptions.forEach(function(a){a.getMediaType()===E?(a.addStreamsForEndpoint(c,f),a.addSsrcGroupsForEndpoint(c,e)):a.getMediaType()===F&&(a.addStreamsForEndpoint(c,g),a.addSsrcGroupsForEndpoint(c,e))})};c.toDesc=function(){return new i({type:this.type,sdp:this.toSdp()})};c.toSdp=function(){var a=this.$2;switch(a){case h.MULTIWAY:return[this.sessionDescription.toSdp(),this.mediaDescriptions.map(function(a){return a.toSdp()}).join(D),""].join(D);case h.CUSTOM:case h.P2P:default:return this.$1}};c.strongDiff=function(a){var b=this.toSdp();a=a.toSdp();return b!==a&&this.$5(b)!==this.$5(a)};c.$5=function(a){return this.$6(a).split("\r\n").filter(function(a){return!/^a=(candidate|setup):/.test(a)}).join("\r\n")};c.$6=function(a){return a.replace(/(o=\S+\s\S+)\s\S+\s/,"$1 - ")};return a}();e.exports=a}),null);
__d("FBRTCPeerConnection",["Promise","regeneratorRuntime","FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","FBRTCExperiment","FBRTCSdpUtils","FBRTCSupport","RTCConfig","RTCIceCandidate","RTCPeerConnection","RTCSDPInterop","RTCSessionDescription","RTWebUserActionLogger","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;a=function(){__p&&__p();a.isGetSendersSupported=function(){return q("getSenders")};a.isReplaceTrackSupported=function(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"};function a(a,c,d){__p&&__p();var e=this;c===void 0&&(c={});d===void 0&&(d={});this.$3=[];this.$4=[];this.$7=new Map();this.addEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)||(c=[],this.$7.set(a,c));c.push(b);this.$5.addEventListener(a,b)};this.removeEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)&&(c=c.filter(function(a){return a!==b}),c.length<1?this.$7["delete"](a):this.$7.set(a,c));this.$5.removeEventListener(a,b)};this.$13=function(a){a=a.candidate;a&&e.$4.push(a)};this.$14=function(a){a=a.channel;e.$16(a)};this.$6=a;this.$1=c;this.$2=d;this.$5=this.$12();this.$11=new Set();this.$10=this.$6===g.MULTIWAY&&b("FBRTCSupport").canUseUnifiedPlan()?new(b("RTCSDPInterop"))():null}var c=a.prototype;c.$12=function(){__p&&__p();var a=this.$6===g.MULTIWAY&&b("FBRTCSupport").canUseUnifiedPlan()?"unified-plan":"plan-b";a=new(b("RTCPeerConnection"))(babelHelpers["extends"]({},this.$1,{sdpSemantics:a}),this.$2);a.addEventListener("icecandidate",this.$13);a.addEventListener("datachannel",this.$14);for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var h=f[0];f=f[1];for(var f=f,i=Array.isArray(f),j=0,f=i?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=f.length)break;k=f[j++]}else{j=f.next();if(j.done)break;k=j.value}k=k;a.addEventListener(h,k)}}return a};c.removeAllListeners=function(){__p&&__p();for(var a=this.$7.entries(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;this.$5.removeEventListener(e,h)}}this.$5.removeEventListener("datachannel",this.$14);this.$5.removeEventListener("icecandidate",this.$13)};c.reset=function(a){__p&&__p();var c=this;a===void 0&&(a=!0);var d=this.getSenders(),e=this.$5;for(var f=this.$7.entries(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];for(var i=i,k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;e.removeEventListener(j,m)}}e.removeEventListener("datachannel",this.$14);e.removeEventListener("icecandidate",this.$13);this.$3=[];this.$4=[];this.$5=this.$12();if(a)for(var m=e.getLocalStreams(),l=Array.isArray(m),k=0,m=l?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(l){if(k>=m.length)break;i=m[k++]}else{k=m.next();if(k.done)break;i=k.value}j=i;this.$15(j,d)&&this.addStream(j)}return b("Promise").race([new(b("Promise"))(function(a){var b=c.$5,d=function c(d){d=d.target;d.iceConnectionState!=="checking"&&d.iceConnectionState!=="new"&&(a(),b.removeEventListener("iceconnectionstatechange",c),p(e))};b.addEventListener("iceconnectionstatechange",d)}),new(b("Promise"))(function(a){return window.setTimeout(a,5e3)})])["catch"](function(a){return b("Promise").resolve()}).then(function(){p(e)})};c.$15=function(c,d){return!b("FBRTCConfig").isVCEndpointCall()||!b("RTCConfig").CollabWhitelistedBrowserGK?!0:a.doesBrowserSupportAddTrack()?c.getTracks().some(function(a){return d!=null?d.some(function(b){return b.track===a}):!1}):c.active};c.close=function(){p(this.$5)};c.getCreatedIceCandidates=function(){return this.$4};c.$16=function(a){var b=this;a.addEventListener("close",function(){b.$3=b.$3.filter(function(b){return b!==a})});this.$3.push(a)};c.transformRemoteIceCandidateMid=function(a){return this.$9&&this.$9[a]||a};c.transformLocalIceCandidateMid=function(a){return this.$8&&this.$8[a]||a};c.transformOfferSdp=function(a){return b("FBRTCSdpUtils").transformSdpMids(a,this.$8)};c.transformAnswerSdp=function(a){return b("FBRTCSdpUtils").transformSdpMids(a,this.$9)};c.onReceivedRemoteIceCandidate=function(a){var c=a.sdp,d=a.label;a=a.sdp_mid;a=this.transformRemoteIceCandidateMid(a);d=new(b("RTCIceCandidate"))({sdpMLineIndex:d,candidate:b("FBRTCSdpUtils").fixMobileIceSdp(c),sdpMid:a});return b("Promise").resolve(this.$5.addIceCandidate(d))};c.getSignalingProtocol=function(){return this.$6};c.getLocalStreams=function(){return q("getLocalStreams")?this.$5.getLocalStreams():[]};c.getRemoteStreams=function(){return q("getRemoteStreams")?this.$5.getRemoteStreams():[]};c.getLocalTracks=function(){if(q("getLocalStreams")){var a=[];this.$5.getLocalStreams().forEach(function(b){a.push.apply(a,b.getTracks())});return a}return this.getSenders().map(function(a){return a.track}).filter(Boolean)};c.addRemoteMediaCnameIfNeeded=function(a){(b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari"))&&this.$11.add(a)};c.getRemoteMediaCnames=function(){return b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari")?Array.from(this.$11):[]};c.maybeHandleVideoEscalationForUnified=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!(b("FBRTCSupport").canUseUnifiedPlan()&&this.getSenders().length>0)){a.next=5;break}this.$10=new(b("RTCSDPInterop"))();this.$11=new Set();a.next=5;return b("regeneratorRuntime").awrap(this.reset(!1));case 5:case"end":return a.stop()}},null,this)};a.doesBrowserSupportAddTrack=function(){return(b("UserAgent").isBrowser("Firefox")||b("FBRTCSupport").isSupportedSafariVersion()||b("FBRTCSupport").canUseUnifiedPlan())&&q("addTrack")&&a.isGetSendersSupported()};a.doesBrowserSupportRemoveTrack=function(){return(b("UserAgent").isBrowser("Firefox")||b("FBRTCSupport").isSupportedSafariVersion()||b("FBRTCSupport").canUseUnifiedPlan())&&q("removeTrack")&&a.isGetSendersSupported()};a.isTrackAPISupported=function(){return q("removeTrack")&&q("addTrack")&&a.isReplaceTrackSupported()&&a.isGetSendersSupported()};c.addStream=function(b,c){__p&&__p();var d=this;if(a.doesBrowserSupportAddTrack()){var e=this.getSenders(),f=function(){__p&&__p();if(h){if(i>=g.length)return"break";j=g[i++]}else{i=g.next();if(i.done)return"break";j=i.value}var a=j,f=e.find(function(b){return b.track===a});f===void 0&&(f=d.$5.addTrack(a,b));c&&f&&c(f)};for(var g=b.getTracks(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=f();if(k==="break")break}}else this.$5.addStream(b)};c.removeStream=function(b){__p&&__p();if(a.doesBrowserSupportRemoveTrack()){var c=b.getTracks(),d=this.getSenders().filter(function(a){return c.includes(a.track)});for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$5.removeTrack(g)}}else this.$5.removeStream(b)};c.removeTrack=function(a){this.$5.removeTrack(a)};c.addTrack=function(a,b){return this.$5.addTrack(a,b)};c.createOffer=function(a,c,d){__p&&__p();var e=this;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:a===void 0&&(a={});c===void 0&&(c={});d===void 0&&(d={});return f.abrupt("return",i(this.$5,a).then(function(b){return v(b,d,a)}).then(function(a){var c=b("FBRTCSdpUtils").constructMidMap(a.sdp);e.$8=c.offerSdpMap;e.$9=c.answerSdpMap;return a}).then(function(a){e.$10!=null&&e.$10.toPlanB(a);return new(b("RTCSessionDescription"))(e.$6,a,c)}));case 4:case"end":return f.stop()}},null,this)};c.createAnswer=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a===void 0&&(a={});return d.abrupt("return",j(this.$5).then(function(d){return new(b("RTCSessionDescription"))(c.$6,d,a)}));case 2:case"end":return d.stop()}},null,this)};c.setLocalDescription=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",n(this.$5,a.toDesc()).then(function(){return a})["catch"](function(a){b("RTWebUserActionLogger").logError({errorDomain:"FBRTCPeerConnection_setLocalSDP",errorType:a.toString()});throw a}));case 1:case"end":return c.stop()}},null,this)};c.setRemoteDescription=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:c=a;if(!(this.$10!=null)){d.next=5;break}d.next=4;return b("regeneratorRuntime").awrap(this.renegotiateDescriptionsForUnified(a,this.$10));case 4:c=d.sent;case 5:return d.abrupt("return",o(this.$5,c.toDesc()).then(function(){return a})["catch"](function(a){b("RTWebUserActionLogger").logError({errorDomain:"FBRTCPeerConnection_setRemoteSDP",errorType:a.toString()});throw a}));case 6:case"end":return d.stop()}},null,this)};c.renegotiateDescriptionsForUnified=function(a,c){__p&&__p();var d=this,e,f,g;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:c.setPlanBRemoteDescription(a);e=c.toUnifiedPlan(a.toDesc());if(!(a.type==="answer")){h.next=11;break}f=c.getTrackTypesToMatchDescription();if(!(f.length>0)){h.next=11;break}f.forEach(function(a){a=d.$5.addTransceiver(a);a.direction="recvonly"});h.next=8;return b("regeneratorRuntime").awrap(this.createOffer());case 8:g=h.sent;h.next=11;return b("regeneratorRuntime").awrap(this.setLocalDescription(g));case 11:return h.abrupt("return",new(b("RTCSessionDescription"))(this.$6,e));case 12:case"end":return h.stop()}},null,this)};c.getLocalDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.localDescription||{})};c.getRemoteDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.remoteDescription||{})};c.getRemoteDescriptionForSMU=function(){var a=null;this.$10!=null&&(a=this.$10.getPlanBRemoteDescription());return a!=null?a:this.getRemoteDescription()};c.getSignalingState=function(){return this.$5.signalingState};c.getIceGatheringState=function(){return this.$5.iceGatheringState};c.getIceConnectionState=function(){return this.$5.iceConnectionState};c.getSenders=function(){return a.isGetSendersSupported()===!1?[]:this.$5.getSenders()};c.processUnifiedTrackIdTranslation=function(a,b){this.$10!=null&&a!=null&&b!=null&&this.$10.correlateWebrtcTrackIdsByMid(a,b)};c.getWebrtcTrackIdFromMWTrackId=function(a){return this.$10!=null?this.$10.getWebrtcTrackIdFromMWTrackId(a):a};c.maybeSupportReceivingVideoWithTransceivers=function(){if(b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari")){var a=Boolean(this.getSenders().find(function(a){return a.track?a.track.kind==="video":!1}));if(!a){a=this.$5.addTransceiver("video");a.direction="recvonly"}}};c.getStats=function(a){__p&&__p();var c=this;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(a!=null)){d.next=2;break}return d.abrupt("return",b("Promise").reject(new Error("getStats() doesn't support selector (yet)")));case 2:if(!(b("UserAgent").isBrowser("Edge")||b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari"))){d.next=4;break}return d.abrupt("return",b("Promise").resolve(new Map()));case 4:if(!b("UserAgent").isBrowser("Firefox")){d.next=6;break}return d.abrupt("return",b("Promise").resolve(this.$5.getStats()).then(function(a){return b("UserAgent").isBrowser("Firefox >= 48")?a:s(a)}).then(function(a){__p&&__p();if(b("UserAgent").isBrowser("Firefox >= 53"))return a;try{a.forEach(function(a){a.type=t(a.type)})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,babelHelpers["extends"]({},b,{type:t(b.type)}))})}return a}));case 6:if(!(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))){d.next=8;break}return d.abrupt("return",new(b("Promise"))(function(a,b){c.$5.getStats(a,b)}).then(function(a){__p&&__p();var b={};for(var a=a.result(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f={id:e.id,timestamp:e.timestamp,type:t(e.type)};for(var g=e.names(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;f[j]=e.stat(j)}b[f.id]=f}return b}).then(s));case 8:return d.abrupt("return",b("Promise").reject(new Error("getStats() not supported")));case 9:case"end":return d.stop()}},null,this)};c.createDataChannel=function(a,b){if(this.$5.createDataChannel){a=this.$5.createDataChannel(a,b);this.$16(a);return a}return null};c.getDataChannelByLabel=function(a){return this.$3.find(function(b){return b.label===a})};c.getSdpMidMaps=function(){return{offerSdpMap:this.$8,answerSdpMap:this.$9}};return a}();var h=b("UserAgent").isBrowser("Chrome < 59")||b("UserAgent").isBrowser("Opera < 46")||b("UserAgent").isBrowser("Firefox < 37");function i(a,c){return h?new(b("Promise"))(function(b,d){return a.createOffer(b,d,l(c))}):b("Promise").resolve(a.createOffer(l(c)))}function j(a){return h?new(b("Promise"))(function(b,c){return a.createAnswer(b,c)}):b("Promise").resolve(a.createAnswer())}var k=b("UserAgent").isBrowser("Chrome < 38")||b("UserAgent").isBrowser("Opera < 26");function l(a){var b=a.offerToReceiveAudio;b=b===void 0?!0:b;var c=a.offerToReceiveVideo;c=c===void 0?!0:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["offerToReceiveAudio","offerToReceiveVideo"]);return k?Object.keys(a).length>0?{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c},optional:babelHelpers["extends"]({},r(a))}:{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c}}:babelHelpers["extends"]({offerToReceiveAudio:b,offerToReceiveVideo:c},a)}var m=b("UserAgent").isBrowser("Chrome < 51")||b("UserAgent").isBrowser("Opera < 38")||b("UserAgent").isBrowser("Firefox < 37");function n(a,c){return m?new(b("Promise"))(function(b,d){return a.setLocalDescription(c,b,d)}):b("Promise").resolve(a.setLocalDescription(c))}function o(a,c){return m?new(b("Promise"))(function(b,d){return a.setRemoteDescription(c,b,d)}):b("Promise").resolve(a.setRemoteDescription(c))}function p(a){a&&a.signalingState!=="closed"&&a.close()}function q(a){return typeof b("RTCPeerConnection").prototype[a]==="function"}function r(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=""+e.substr(0,1).toUpperCase()+e.substr(1);b[f]=a[e]}return b}function s(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))}function t(a){switch(a){case"inbound-rtp":return"inboundrtp";case"outbound-rtp":return"outboundrtp";case"candidate-pair":return"candidatepair";case"local-candidate":return"localcandidate";case"remote-candidate":return"remotecandidate";default:return a}}function u(a,c){if(b("FBRTCConfig").isVCEndpointCall())return!1;a=a.video&&a.video.match(/H264/);if(!a&&!c.preserveH264){a=b("FBRTCExperiment").gen("rtc_browser_use_h264");return a.getParam("allow_h264","no")!=="yes"}return!1}function v(a,c,d){d===void 0&&(d={});var e=c.audio,f=c.video,g=a.sdp;a=a.type;u(c,d)&&(g=b("FBRTCSdpUtils").removeH264(g));e&&(g=b("FBRTCSdpUtils").preferCodec(g,e,!1));f&&(g=b("FBRTCSdpUtils").preferCodec(g,f,!0));return b("Promise").resolve({sdp:g,type:a})}e.exports=a}),null);
__d("RTCP2PCallEscalationActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={start:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_START"})},setRequest:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SET_REQUEST",request:a})},cancel:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"cancelled"})},timeout:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"timeout"})},handleACK:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_ACK",token:a})},approve:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SUCCESS"})},decline:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"denied",token:a,response:!1})},setResponse:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SET_RESPONSE",response:a})},parseResponse:function(a,c){a?b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SUCCESS",token:c}):b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"denied",token:c,response:!1})},muteRemoteVideo:function(){b("RTCAppDispatcher").dispatch({type:"REMOTE_VIDEO_MUTED"})},setEscalateToMediaStream:function(a){b("RTCAppDispatcher").dispatch({type:"SET_P2P_CALL_ESCALATION_MEDIA",stream:a})}};e.exports=a}),null);
__d("RTCP2PCallEscalator",["Promise","FBRTCCallSummaryStore","FBRTCConsoleLogger","FBRTCConstants","FBRTCPeerConnection","FBRTCSupport","RTCCallStore","RTCP2PCallEscalationActions","RTCP2PCallEscalationStore","RTCP2PCallStore","RTCP2PProtocolHandler","RTCUtils","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").PayloadType,h=25e3;a=function(){__p&&__p();a.initVideoInAudioCall=function(){return b("FBRTCSupport").videoEscalationByUnmuteWorkaround()};a.isEscalated=function(){return b("RTCP2PCallEscalationStore").isEscalated()};a.isNegotiationAllowed=function(){return b("RTCP2PCallEscalationStore").isNegotiationAllowed()};function a(a,b,c){this.$3=a,this.$1=b,this.$2=c,this.$6()}var c=a.prototype;c.$6=function(){__p&&__p();var a=this,c=b("RTCP2PCallEscalationStore").getState();this.$4=b("RTCP2PCallEscalationStore").addListener(function(){__p&&__p();var d=b("RTCP2PCallEscalationStore").getState();if(d===c)return;!d.awaitingACK&&d.awaitingACK!==c.awaitingACK&&!d.inProgress&&window.clearTimeout(a.$5);if(d.callType!==c.callType&&d.inProgress){var e=b("RTCCallStore").getState();e=e.callSummary;e.setCallType(d.callType);e.save(b("FBRTCCallSummaryStore").getInstance())}c=d})};c.destroy=function(){i("P2P Escalator %o","destroy"),this.$4.remove(),window.clearTimeout(this.$5)};c.generateRequestToken=function(a){__p&&__p();var c=b("RTCP2PCallEscalationStore").getState();c=c.token;if(c!=null&&a){i("P2P Escalator %o","request token","reuse");return c}i("P2P Escalator %o","request token");c=this.$2.sendVideoEscalationRequest(this.$3,this.$1,a);window.clearTimeout(this.$5);this.$5=this.$7();return c.msg_id.toString()};c.generateResponseToken=function(a,c){__p&&__p();var d=b("RTCP2PCallEscalationStore").getState();d=d.token;if(d!=null){i("P2P Escalator %o","response token","reuse");return d}i("P2P Escalator %o %o %o","response token",c,a);d=a.peerID;var e=a.callID;a=a.msgID;d=this.$2.sendVideoRequestResponse(d,e,a,c);window.clearTimeout(this.$5);var f=d.msg_id.toString();!c?b("dangerouslyBypassDispatchError")(function(){return b("RTCP2PCallEscalationActions").decline(f)}):this.$5=this.$7();return f};c.$7=function(){return window.setTimeout(b("RTCP2PCallEscalationActions").timeout,h)};c.parseMessage=function(a){i("P2P Escalator %o","parse message",this.$3,a.msgType);switch(a.msgType){case g.VIDEO_REQUEST:a.ackID?this.$8(a):this.$9(a);break;case g.ACK:a.msg.ack_type===g.VIDEO_REQUEST&&b("RTCP2PCallEscalationActions").handleACK(a.ackID.toString());break}};c.$8=function(c){i("P2P Escalator %o","parse response",c);var d=c.ackID.toString();b("RTCP2PCallEscalationStore").getToken()===d&&this.$10(c);b("RTCP2PCallEscalationActions").parseResponse(a.requestVideoOn(c.msg),d);window.clearTimeout(this.$5)};c.$9=function(c){__p&&__p();i("P2P Escalator %o","parse request",c);if(b("RTCP2PCallEscalationStore").isInProgress()&&!a.requestVideoOn(c.msg)){b("RTCP2PCallEscalationStore").didCurrentUserInitiate()?b("RTCP2PCallEscalationActions").cancel():(this.$10(c),b("RTCP2PCallEscalationActions").setRequest(c));return}if(b("RTCP2PCallEscalationStore").isInProgress()&&b("RTCP2PCallEscalationStore").didCurrentUserInitiate()){i("P2P Escalator %o","auto-approve","mutual consent");b("RTCP2PCallEscalationActions").approve();this.$10(c);this.generateResponseToken(c,!0);return}if(b("RTCP2PCallEscalationStore").isEscalated()){a.requestVideoOn(c.msg)?(i("P2P Escalator %o","auto-approve"),this.$10(c),this.generateResponseToken(c,!0),window.clearTimeout(this.$5)):(i("P2P Escalator %o","mute remote video"),b("RTCP2PCallEscalationActions").muteRemoteVideo());return}i("P2P Escalator %o %o","request",c);this.$10(c);b("RTCP2PCallEscalationActions").setRequest(c)};c.$10=function(a){var b=a.peerID,c=a.callID;a=a.msg;i("P2P Escalator %o","ACK","sent");this.$2.sendAck(b,c,a)};a.requestVideoOn=function(a){var b=a.reqVideoOn;a=a.videoon;return Boolean(b||a)};a.initEscalation=function(){__p&&__p();var a=b("RTCP2PCallStore").getState(),c=a.protocolHandler;a=b("RTCCallStore").getState();a=a.localUser;var d=a.getStream();a=a.hasVideo();return(d&&a?b("Promise").resolve(d).then(function(a){c.updateLocalVideoTracker();return a}):b("RTCP2PProtocolHandler").initStream(!0).then(function(a){c.startLocalVideoTracker(a);return a})).then(function(a){b("RTCP2PCallEscalationActions").setEscalateToMediaStream(a);b("RTCP2PCallEscalationActions").start();return a})};a.onEscalationSucceeded=function(){__p&&__p();var c=b("RTCP2PCallEscalationStore").getEscalateMediaStream(),d=b("RTCCallStore").getState();d=d.localUser;if(d.getStream()===c){var e=b("RTCCallStore").getState();e=e.remoteUsers;d.toggleMuteVideo(!1);e.first()&&e.first().toggleMuteVideo(!1)}else c&&b("dangerouslyBypassDispatchError")(function(){a.updateEscalationStream(c)})};a.onEscalationFailed=function(){__p&&__p();var a=b("RTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("RTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("RTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!0);d.first()&&d.first().toggleMuteVideo(!0)}else if(a){b("RTCUtils").stopMediaStream(a);c=b("RTCP2PCallStore").getState();d=c.protocolHandler;d.updateLocalVideoTracker()}};a.acceptEscalation=function(c){__p&&__p();var d=b("RTCCallStore").getState(),e=d.localUser;d=d.remoteUsers;c=Boolean(c==null?void 0:c.muteVideo);if(e.hasVideo()){e.toggleMuteVideo(c);d.first()&&d.first().toggleMuteVideo(!1);d=b("RTCP2PCallStore").getState();d=d.protocolHandler;d.updateLocalVideoTracker();b("RTCP2PCallEscalationActions").setResponse(!0);return b("Promise").resolve(e.streams.first())}else return b("RTCP2PProtocolHandler").initStream(!c).then(function(c){b("RTCP2PCallEscalationActions").setResponse(!0);a.updateEscalationStream(c);return c})};a.declineEscalation=function(){b("RTCP2PCallEscalationActions").setResponse(!1)};a.updateEscalationStream=function(a){__p&&__p();var c=b("RTCCallStore").getState().localUser.getStream();if(b("FBRTCPeerConnection").doesBrowserSupportAddTrack()&&c){for(var d=a.getVideoTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}g=b("RTCP2PCallStore").getState();f=g.protocolHandler;f.updateAddedTracksForFirefoxVideoEscalation(c)}else b("RTCP2PProtocolHandler").replaceLocalStream(a)};return a}();a.ACK_TIMEOUT=h;function i(){}e.exports=a}),null);
__d("FBRTCGroupCallVideoEscalationDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","React","RTCMWProtocolHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.userName,d=a.onToggle;return(a=b("React")).jsxs(b("MessengerDialog.react"),{onToggle:d,children:[a.jsx(b("MessengerDialogBody.react"),{children:g._("{name} \u0111\u00e3 th\u00eam \u0111o\u1ea1n chat video. B\u1ea1n c\u00f3 mu\u1ed1n chia s\u1ebb video c\u1ee7a m\u00ecnh kh\u00f4ng?",[g._param("name",c)])}),a.jsxs(b("MessengerDialogFooter.react"),{children:[a.jsx(b("MessengerDialogCancelButton.react"),{}),a.jsx(b("MessengerDialogButton.react"),{label:g._("Chia s\u1ebb video"),onClick:function(){b("RTCMWProtocolHandler").escalateLocalStream(),d()},type:"primary",use:"default"})]})]})};e.exports=a}),null);
__d("RTCGroupCallAddMembersDialog.react",["cx","fbt","FluxContainer","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerGraphQLTokenizer.react","MessengerParticipants.bs","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallThreadRow.react","React","RTCAppDispatcher","RTCCallStore","RTCGroupCallActions","RTCGroupCallAdminModelErrorDialogController","RTCGroupCallDialogController","RTCGroupCallEscalationActions","RTCMWProtocolHandler","RTCP2PCallStore","RTWebUserActionLogger","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;a=b("React").PureComponent;var k=460;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("RTCCallStore")]};c.calculateState=function(){return{conferenceState:b("RTCCallStore").getState().callInfo.conferenceState,remoteUsers:b("RTCCallStore").getState().remoteUsers}};function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={conferenceState:"NEW",isParticipantSelected:d.props.participants.mapEntries(function(a){var b=a[0];a[1];return[d.$1(b),!1]}),newParticipants:b("immutable").List(),remoteUsers:b("immutable").Set()};d.$2=function(a){var c=!d.state.isParticipantSelected.get(a);d.setState({isParticipantSelected:d.state.isParticipantSelected.set(a,c)});a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:d.props.isP2P?"escalated":"mw",conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:"group_call_add_members_dialog",component:c?"participant_row_select":"participant_row_unselect"}))};d.$12=function(){__p&&__p();var a=d.props,c=a.onUnmount,e=a.thread;a=a.viewerID;c();c=d.state.newParticipants.toArray().map(function(a){return a.getUniqueID()});var f=d.$3().map(function(a){a=a.fbid;return a||""});if(d.props.isP2P){var g=[].concat(c,f).map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(g,function(a){b("RTCGroupCallEscalationActions").setUsersToRing(b("immutable").Map(a));a=b("RTCP2PCallStore").getState();a=a.protocolHandler;a.escalateToMultiway()});return}e&&(c.length>0&&e.approval_mode===1&&e.admins&&e.admins[a]===void 0?b("RTCGroupCallAdminModelErrorDialogController").showAdminModelErrorDialog():(b("RTCGroupCallActions").addParticipantsToRing(c),d.$9(e)));b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,[].concat(c,f))};d.$4=function(){var a=d.state.newParticipants.toArray().map(function(a){return a.getUniqueID()}),c=d.$3().map(function(a){a=a.fbid;return a||""});a=[].concat(a,c).map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=d.$13(b("immutable").Map(a).valueSeq().toArray());b("gkx")("678352")&&a?b("RTCGroupCallDialogController").showBlockedUserWarningDialog(d.$12,d.props.onUnmount):d.$12()})};d.$6=function(a){d.setState({newParticipants:d.state.newParticipants.push(a)})};d.$8=function(a){var b=a.getUniqueID();a=d.state.newParticipants;var c=a.findIndex(function(a){return a.getUniqueID()===b});c!==-1&&d.setState({newParticipants:a["delete"](c)})};d.$7=function(){d.setState({newParticipants:b("immutable").List()})};b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallStore")]);return d}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewerID;var e=this.state.conferenceState;if(e==="TERMINATED"||e==="TERMINATING")return null;e=b("React").jsxs("div",{className:"_2t45",children:[b("React").jsx("div",{className:"_225b",children:h._("Trong \u0111o\u1ea1n chat n\u00e0y:")}),b("React").jsx(b("MessengerRTCGroupCallContactList.react"),{isParticipantSelected:this.state.isParticipantSelected,onClick:this.$2,participantStates:b("immutable").Map(this.state.remoteUsers.map(function(a){return[a.FBID,a.participantState]})),remoteUsers:this.state.remoteUsers.toArray().sort(function(a,b){return a.userName.localeCompare(b.userName)})})]});return b("React").jsx(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:k,children:b("React").jsxs("div",{className:"_788k _5zad",children:[b("React").jsxs(i,{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{dataTestID:"AddParticipantsDialogCancelButton"}),b("React").jsx(j,{children:h._("Th\u00eam th\u00e0nh vi\u00ean nh\u00f3m")}),b("React").jsx(b("MessengerDialogButton.react"),{dataTestID:"AddParticipantsDialogRingButton",disabled:this.$3().length+this.state.newParticipants.size===0,label:h._("\u0110\u1ed5 chu\u00f4ng"),onClick:this.$4,type:"primary"})]}),this.$5()?b("React").jsx(b("MessengerRTCGroupCallThreadRow.react"),{displayAddMemberWarning:!0,participants:c,thread:d,viewerID:a}):null,b("React").jsx(b("MessengerGraphQLTokenizer.react"),{autoFocus:!this.$5(),className:"_2el3",context:null,defaultEntries:e,enableMessageSearch:!1,entries:this.state.newParticipants,excludeGroups:!0,excludePages:!0,forGroup:!0,forceHideClearButton:!0,hasHoverState:!1,hideViewWithEntries:!1,onAddEntryAttempt:this.$6,onClear:this.$7,onRemoveEntryAttempt:this.$8,originalEntryIDs:b("immutable").Set(this.props.participants.keySeq().toArray().map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||a})),placeholder:h._("Th\u00eam v\u00e0o nh\u00f3m:"),scrollableViewClassName:"_2el2",shouldQueryInternalBot:!1,shouldQueryVCEndpoint:!1,showDefaultEntries:!0,useLayer:!1,viewer:this.props.viewerID,width:k})]})})};d.$5=function(){return!this.props.isP2P&&(this.props.participants.size>1||this.props.thread!==null)};d.$9=function(a){__p&&__p();var c=this;if(this.state.newParticipants.size)if(b("MessengerAdminGroupUtils").isJoinableThread(a))this.state.newParticipants.forEach(function(d){d=b("MercuryIDs").getThreadIDFromUserID(d.getUniqueID());c.$10().send(c.$11().constructUserGeneratedMessageObject(a.joinable_mode.link,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d))});else{var d="thread:"+(a.thread_fbid||a.thread_id.split(".")[1]);this.$10().send(this.$11().constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d,"log:subscribe",{added_participants:this.state.newParticipants.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray()}))}};d.$10=function(){return b("MercuryMessageActions").getForFBID(this.props.viewerID)};d.$11=function(){return b("MercuryMessageObject").getForFBID(this.props.viewerID)};d.$13=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})};d.$3=function(){var a=this;return this.props.participants.filter(function(b,c){return a.state.isParticipantSelected.get(a.$1(c))}).toArray()};d.$1=function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||""};return c}(a);e.exports=b("FluxContainer").create(c)}),null);
__d("CreateMessengerCallInviteLinkMutation",["Promise","RelayFBEnvironment","RelayModern","VideoChatLinksUserActionsTypedLogger","CreateMessengerCallInviteLinkMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("CreateMessengerCallInviteLinkMutation.graphql")};function a(a){__p&&__p();return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{conference_name:a}},optimisticUpdater:null,onCompleted:function(a){a=(a=a.create_messenger_call_invite_link)==null?void 0:(a=a.messenger_call_invite_link)==null?void 0:a.link_url;if(a!=null)c({linkUrl:a});else{a=new Error("No link_url returned from server.");i(a.message);d(a)}},onError:function(a){i(a.message),d(a)}})})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setEvent("error").setErrorType("CreateMessengerCallInviteLinkMutationError").setErrorDetails(a).log()}e.exports=a}),null);
__d("RTCVideoChatLinkDialog.react",["cx","fbt","Clipboard","CreateMessengerCallInviteLinkMutation","FDSButton.react","FDSSpinner.react","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RTCCallStore"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make,k=460;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={isCopied:!1,isError:!1,isLoading:!0,linkUrl:""};d.$1=function(){b("Clipboard").copy(d.state.linkUrl),d.setState({isCopied:!0})};c=b("RTCCallStore").getState().callInfo.conferenceName;b("CreateMessengerCallInviteLinkMutation")(c).then(function(a){a=a.linkUrl;d.setState({isCopied:!1,isError:!1,isLoading:!1,linkUrl:a})})["catch"](function(a){d.setState({isCopied:!1,isError:!0,isLoading:!1,linkUrl:""})});return d}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("MessengerDialog.react"),{type:"default",width:k,children:[a.jsxs(i,{children:[a.jsx(j,{children:h._("M\u1eddi b\u1ea1n b\u00e8 b\u1eb1ng li\u00ean k\u1ebft")}),a.jsx(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Xong"),type:"primary",use:"default"})]}),a.jsx(b("MessengerDialogBody.react"),{children:a.jsxs("div",{className:"_80_-",children:[a.jsx("div",{className:"_8100",children:h._("B\u1ea5t k\u1ef3 ai c\u00f3 li\u00ean k\u1ebft n\u00e0y \u0111\u1ec1u c\u00f3 th\u1ec3 tham gia chat video m\u00e0 kh\u00f4ng c\u1ea7n t\u00e0i kho\u1ea3n. H\u1ecd s\u1ebd kh\u00f4ng \u0111\u01b0\u1ee3c th\u00eam v\u00e0o nh\u00f3m. B\u1ea1n c\u00f3 th\u1ec3 thu h\u1ed3i li\u00ean k\u1ebft n\u00e0y b\u1ea5t k\u1ef3 l\u00fac n\u00e0o.")}),a.jsxs("div",{className:"_81el",children:[a.jsx("div",{className:"_81em",children:a.jsx("div",{className:"_81en",children:this.state.isError?h._("Kh\u00f4ng th\u1ec3 l\u1ea5y li\u00ean k\u1ebft m\u1eddi."):this.state.isLoading?b("React").jsx(b("FDSSpinner.react"),{size:"small"}):this.state.linkUrl})}),b("React").jsx(b("FDSButton.react"),{isDisabled:this.state.isLoading||this.state.isError,label:this.state.isCopied?h._("\u0110\u00e3 sao ch\u00e9p!"):h._("Sao ch\u00e9p"),onClick:this.$1,size:"large",style:{marginLeft:8},use:"primary"})]})]})})]})};return c}(b("React").Component);e.exports=a}),null);
__d("FBRTCStatsHelpers",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=function(a){if(a==="host"||a==="local")return"local";if(a==="serverreflexive"||a==="srflx")return"srflx";if(a==="peerreflexive"||a==="prflx")return"prflx";return a==="relayed"||a==="relay"?"relay":"unknown_"+a},i={UNKNOWN_CONNECTION:"l:unknown-unknown;r:unknown-unknown",connectionType:function(a,b,c,d){return a!==null&&a!==void 0&&b!==null&&c!==null&&c!==void 0&&d!==null?["l:",h(a),"-",b,";","r:",h(c),"-",d].join(""):null},getVideoCapabilitiesInfo:function(a){__p&&__p();a=a.getVideoTracks();a=a[0];if(a==null)return null;if(typeof a.getCapabilities!=="function")return null;a=a.getCapabilities();var b=a.aspectRatio,c=a.facingMode,d=a.frameRate,e=a.height;a=a.width;return{facing_mode:(c=c)!=null?c:null,max_aspect_ratio:(c=b==null?void 0:b.max)!=null?c:null,max_frame_rate:(c=d==null?void 0:d.max)!=null?c:null,max_height:(d=e==null?void 0:e.max)!=null?d:null,max_width:(c=a==null?void 0:a.max)!=null?c:null,min_aspect_ratio:(e=b==null?void 0:b.min)!=null?e:null}},getMediaInputs:function(a){var b={audio_inputs:[],video_inputs:[]};a.forEach(function(a){switch(a.kind){case"videoinput":b.video_inputs.push(a.label);break;case"audioinput":b.audio_inputs.push(a.label);break}});return b},logCapabilities:function(a,b,c){a.setVideoCapabilities(i.getVideoCapabilitiesInfo(b)),a.setMediaInputs(i.getMediaInputs(c))},internalGetWindow:function(){return window},getBatteryStats:function(){return new(b("Promise"))(function(a,b){var c=i.internalGetWindow().navigator.getBattery;typeof c==="function"?a(c.call(navigator)):b()}).then(function(a){a.charging?g=!0:a.onchargingchange=function(a){a.target.charging&&(g=!0),a.target.onchargingchange=null};return{level:a.level*100,wasCharged:g}})["catch"](function(){return{placeholder:!0,level:-1,wasCharged:!1}})}};e.exports=i}),null);
__d("RTCUnifiedPlanUtils",["FBRTCSupport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getMediaStatusWithWebrtcTrackIds:function(a,c){if(b("FBRTCSupport").canUseUnifiedPlan()){var d={};Object.keys(a).forEach(function(b){var e=c.getWebrtcTrackIdFromMWTrackId(b);d[e]=a[b]});return d}return a}};e.exports=a}),null);
__d("RTCMWProtocolHandler",["invariant","Promise","regeneratorRuntime","ChannelManager","CurrentUser","FacebookAppIDs","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCExperiment","FBRTCGroupCallStore","FBRTCHangupReason","FBRTCLogger","FBRTCMWProtocolStore","FBRTCPeerConnection","FBRTCRtcResponseStatusCode","FBRTCSdpUtils","FBRTCStatsHelpers","FBRTCSupport","FBRTCVideoQuality","MercuryIDs","MessengerChatLinksFunnelLogger","MultiwayParticipantFetcher","MultiwayRequests","RTCAppData","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCGroupCallDialogController","RTCGroupCallEscalationStore","RTCMultiwayMessageHandler","RTCProxyUserStore","RTCProxyUserUtils","RTCSessionDescription","RTCSignalingExperiments","RTCUnifiedPlanUtils","RTCUserMediaConstraints","RTCUtils","RTWebClientFeatureGating","RTWebUserActionLogger","emptyFunction","generateRTCCallID","gkx","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a=b("FBRTCConstants")).CallEndReason,i=a.GroupVideoViewLayout,j=a.SignalingProtocol,k=a.VideoQuality,l=18e4,m={appId:b("RTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()},n=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$5=!1;this.$6=!1;this.$7=!1;this.$8=b("FBRTCLogger").getInstance();this.$13=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;b("RTCCallActions").emit("onIceConnectionStateChange",a);switch(a){case"connected":a=b("RTCCallStore").getState();a=a.callSummary;a&&(a.onNetworkReady(),a.save(b("FBRTCCallSummaryStore").getInstance()));break;case"disconnected":case"failed":c.$3||(c.$3=window.setTimeout(function(){b("RTCCallActions").endCall(h.CONNECTION_DROPPED,"ConnectionDropped"),c.$17()},l));break;default:window.clearTimeout(c.$3),c.$3=null}};this.$1=(a=a)!=null?a:b("generateRTCCallID")();this.$2="MW_PEER_ID"}var c=a.prototype;c.setKeepLocalStreamsOnClose=function(a){this.$6=a;return this};c.setAllowIncomingCalls=function(a){this.$7=a;return this};c.startCall=function(a,c,d,e){__p&&__p();var f=this,g=e.addStreamCallback;g=g===void 0?b("emptyFunction"):g;var h=e.callTrigger,i=e.formatParameters;i=i===void 0?{}:i;var k=e.preferredCodecs;k=k===void 0?{}:k;var l=e.offerSdpTransform,n=e.serverInfoData,o=e.shouldSetDescriptions;o=o===void 0?!0:o;var p=e.isEscalatedCall;p=p===void 0?!1:p;var q=e.connectedOnJoin;q=q===void 0?!1:q;e=e.escP2PCallID;e=e===void 0?"":e;h==="live_video"&&b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)&&(m.appId=b("FacebookAppIDs").MQTT_WEB.toString());b("RTCCallActions").initialize({protocol:j.MULTIWAY,conferenceName:d,serverInfoData:n,callID:this.$1.toString(),callTrigger:h});b("MessengerChatLinksFunnelLogger").appendAction("init_mw_call",{funnelTags:["conf_name:"+d,"call_id:"+this.$1]});var r=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),this.$2,this.$1,!1);h&&r.onCallStarted(h);r.setJoinWithSID(n!=null);r.setActiveConnection("mws");r.setCallType("mws");r.onPopupOpened();r.setConferenceName(d);r.setServerInfoData(n);if(p){var s=b("RTCCallStore").getState().callSummary;r.setEscalationP2PCallID(s.callID)}this.$9(r);r.save(b("FBRTCCallSummaryStore").getInstance());b("RTCCallActions").setCallSummary(r);s={mandatory:{},optional:[{DtlsSrtpKeyAgreement:!1},{googNumUnsignalledRecvStreams:10},{RtpDataChannels:!0}]};var t=new(b("FBRTCPeerConnection"))(j.MULTIWAY,{iceServers:[]},s);if(d.split(":")[0]!=="LIVE"&&!b("FBRTCSupport").isSupportedSafariVersion()){s=t.createDataChannel("data");s&&(s.onmessage=function(a){a=a.data;try{a=JSON.parse(a);a=a.body;f.$10(a)}catch(a){f.$8.logError(f.$2,f.$1,a)}})}b("FBRTCSupport").canUseUnifiedPlan()||t.addEventListener("addstream",function(a){f.$11(d,a.stream)});(b("FBRTCSupport").canUseUnifiedPlan()||b("FBRTCSupport").isSupportedSafariVersion())&&t.addEventListener("track",function(a){f.$12(d,t,a)});t.addEventListener("removestream",function(a){b("RTCCallActions").removeRemoteStream(a.stream)});t.addEventListener("iceconnectionstatechange",this.$13);this.$14(t,c,d,n,a,g,i,k,o,p,q,e,h?h:r.getCallTrigger(),l);!n?b("RTCCallActions").call(a,t):b("RTCCallActions").join(t);return t};c.$9=function(a){b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("FBRTCLogger").Key.BATTERY_START,c.level)})};c.$12=function(a,c,d){__p&&__p();if(b("FBRTCSupport").canUseUnifiedPlan()){var e,f;f=(f=d)!=null?(f=f.track)!=null?f.id:f:f;e=(e=d)!=null?(e=e.transceiver)!=null?e.mid:e:e;c.processUnifiedTrackIdTranslation(f,e)}if(d.streams.length>0){f=d.streams[0].id;c.addRemoteMediaCnameIfNeeded(f);this.$11(a,d.streams[0])}};c.$11=function(c,d){__p&&__p();var e=this;d.onaddtrack=function(a){var c=a.target;a=a.track;b("RTCCallActions").addRemoteTrack(c,a)};d.onremovetrack=function(a){var c=a.target;a=a.track;b("RTCCallActions").removeRemoteTrack(c,a)};var f=d.id.split(":")[0],g=b("MercuryIDs").getParticipantIDFromUserID(f);if(f!==b("CurrentUser").getID()){f=b("RTCProxyUserUtils").getUserIDToFetch(f);var h=b("RTCProxyUserStore").getState();h=h.proxyingAsToProxyUser;b("promiseDone")(b("MultiwayParticipantFetcher").fetchAllParticipants(c,b("immutable").Set([f]),{proxyingAsToProxyUser:h}),function(c){c=c.get(g);var f=c&&(c.is_messenger_blocked||c.is_facebook_blocked);b("gkx")("678352")&&f?b("RTCGroupCallDialogController").showIncomingBlockedUserWarningDialog(function(){return a.endCall(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL)},function(b,a){return e.$15(g,b,a)},c,d):e.$15(g,c,d)})}};c.$15=function(c,d,e){__p&&__p();var f={};f[c]=d;b("RTCGroupCallActions").onParticipantsAdded(f);b("RTCCallActions").addRemoteStream(e);c=b("RTCCallStore").getState();d=c.callInfo;f=b("FBRTCGroupCallStore").getState();e=f.layout;c=f.pinnedSpeakerFBID;f=b("RTCCallStore").getConnection(j.MULTIWAY);f&&a.subscription(d.conferenceName,d.serverInfoData,f.getRemoteStreams(),e,c,f.getRemoteMediaCnames())};c.$10=function(a){if(a.dominantSpeakerNotification){a=a.dominantSpeakerNotification.userId;b("RTCGroupCallActions").setDominantSpeaker(a)}};c.setDescriptions=function(){this.$5=!0;var a=b("RTCCallStore").getConnection(j.MULTIWAY);this.$4&&a&&a.setRemoteDescription(this.$4)};a.escalateLocalStream=function(c){__p&&__p();c===void 0&&(c=!0);return a.initStream(c).then(function(a){__p&&__p();var d=b("RTCCallStore").getState(),e=d.callInfo,f=e.conferenceName;e=e.serverInfoData;var g=d.localUser;d=b("RTCCallStore").getConnection(j.MULTIWAY);if(!d)return;var h=null;c&&(a.getTracks().forEach(function(a){a.kind==="audio"&&(a.enabled=!g.isAudioMuted())}),h=g.streams.first(),d.removeStream(h));return o(d,[a],f,e,[]).then(function(){h&&b("RTCCallActions").removeLocalStream(h),b("RTCCallActions").addLocalStream(a)})})};c.onStreamReady=function(a,c,d,e,f){var g={};e||b("RTCCallActions").addLocalStream(a);g.isEscalatedCall=e;f.p2pCallID&&(g.escP2PCallID=f.p2pCallID);f.serverInfoData&&(g.serverInfoData=f.serverInfoData);f.callTrigger&&(g.callTrigger=f.callTrigger);b("RTWebClientFeatureGating").preferIsacForGroupCalls()&&(g.preferredCodecs={audio:"ISAC/16000"});this.startCall(c,[a],d,g)};a.initStream=function(a,c,d,e,f){d===void 0&&(d=!0);var g=b("FBRTCExperiment").gen("rtc_www_mw_audio_fallback");g=a&&g.getBool("use_audio_fallback",!1);d={audio:d&&b("RTCUserMediaConstraints").audio(e),video:a?babelHelpers["extends"]({},p(b("RTCUserMediaConstraints").video(c?c:k.HD_VIDEO,f))):!1};e={optionalConstraintsOnly:!0,supportFilteredStreams:a&&b("RTWebClientFeatureGating").canUseMWVideoFilters()};c=g?b("RTCUtils").getUserMediaWithAudioFallback:b("RTCUtils").getUserMedia;return c(d,e)};a.updateLocalStream=function(a){var c=b("RTCCallStore").getState();c=c.callInfo;var d=c.conferenceName;c=c.serverInfoData;var e=b("RTCCallStore").getConnection(j.MULTIWAY);return!e?b("Promise").resolve():o(e,[a],d,c,[]).then(function(){b("RTCCallActions").removeAllLocalStreams(!0),b("RTCCallActions").addLocalStream(a)})};a.startScreenStream=function(a){__p&&__p();var c=b("RTCCallStore").getState(),d=c.callInfo,e=d.conferenceName;d=d.serverInfoData;var f=c.localUser;c=b("RTCCallStore").getConnection(j.MULTIWAY);if(!c)return;for(var g=f.screenStreams,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=g.length)break;k=g[i++]}else{i=g.next();if(i.done)break;k=i.value}k=k;k!==a&&b("RTCUtils").transferAudioTracks(a,k)}for(var k=f.streams,i=Array.isArray(k),h=0,k=i?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(h>=k.length)break;g=k[h++]}else{h=k.next();if(h.done)break;g=h.value}g=g;b("RTCUtils").transferAudioTracks(a,g)}b("promiseDone")(o(c,[a],e,d,[]),function(){__p&&__p();for(var c=f.screenStreams,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;g!==a&&(b("RTCCallActions").removeLocalScreenStream(g),b("RTCUtils").stopMediaStream(g))}b("RTCCallActions").addLocalScreenStream(a)})};a.updateScreenStream=function(b,c){a.startScreenStream(c)};a.stopScreenStream=function(c){__p&&__p();var d=b("RTCCallStore").getState(),e=d.callInfo,f=e.conferenceName,g=e.serverInfoData;e=d.localUser;var h=b("RTCCallStore").getConnection(j.MULTIWAY);if(!h)return;d=e.getStream();d?e=b("Promise").resolve(d):e=a.initStream(!0,void 0,!1).then(function(a){b("RTCCallActions").addLocalStream(a);return a});b("promiseDone")(e,function(a){b("RTCUtils").transferAudioTracks(a,c),b("promiseDone")(o(h,[a],f,g,[]),function(){b("RTCUtils").stopMediaStream(c),b("RTCCallActions").removeLocalScreenStream(c)})})};a.endCall=function(c,d,e,f){f===void 0&&(f=""),b("promiseDone")(a.genEndCall(c,e,{serverInfoData:d,detailedReasonString:f,keepLocalStream:!1}))};a.genEndCall=function(a,c,d){b("RTCMultiwayMessageHandler").close();d.keepLocalStream||b("RTCCallActions").removeAllLocalStreams(!0);var e=d.detailedReasonString||"Hangup by user";b("RTCCallActions").hangup(b("RTCUtils").endCallReasonFromHangupReason(c),e);return b("MultiwayRequests").sendHangupRequest(m,a,d.serverInfoData,c,e,b("RTCCallStore").getState().callInfo.callID).then(function(){b("RTCCallActions").hangupSuccess()})["catch"](function(a){b("RTCCallActions").hangupError();throw a})};a.otherUserInAnotherCall=function(a,c,d,e,f){f===void 0&&(f=""),b("promiseDone")(b("MultiwayRequests").sendHangupRequest(m,a,c,d,f||"User receiving this call is in another call",e))};c.iceRestart=function(a,c){var d=b("RTCCallStore").getConnection(j.MULTIWAY);d&&o(d,[],a,c,[],{iceRestart:!0})};a.addParticipants=function(a,c,d){return b("MultiwayRequests").sendAddParticipantsRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};a.removeParticipants=function(a,c,d){return b("MultiwayRequests").sendRemoveParticipantsRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};a.subscription=function(a,c,d,e,f,g){g===void 0&&(g=[]);var h=e===i.DOMINANT_SPEAKER?b("FBRTCVideoQuality").LOW:e===i.GRID?b("FBRTCVideoQuality").MEDIUM:b("FBRTCVideoQuality").HIGH;d=d.map(function(a){a=a.id;return a}).concat(g);g=d.map(function(a){return{cname:a,options:{videoQuality:e===i.DOMINANT_SPEAKER&&f===a.split(":")[0]?b("FBRTCVideoQuality").HIGH:h}}});e===i.DOMINANT_SPEAKER&&!f&&g.push({cname:""});b("MultiwayRequests").sendSubscriptionRequest(m,a,c,g,b("RTCCallStore").getState().callInfo.callID)};a.clientMediaUpdate=function(a,c,d,e,f){b("MultiwayRequests").sendClientMediaUpdateRequest(m,a,c,d,e,f,b("RTCCallStore").getState().callInfo.callID).then(function(a){var c=a.header.responseStatusCode;a=a.body.clientMediaUpdateResponse.currentVersion;return b("RTCGroupCallActions").onClientMediaUpdateResponse(c,a)})["catch"](function(a){b("FBRTCLogger").getInstance().logError(null,b("RTCCallStore").getState().callInfo.callID,a)})};c.$14=function(a,c,d,e,f,g,h,i,j,k,l,m,n,p){var q=this;this.$16(d,e);b("promiseDone")(o(a,c,d,e,f,{},g,h,i,j,k,m,n,p),function(a){q.$4=a,q.$5&&q.setDescriptions(),b("RTCCallActions").callSuccess(l)},function(a){b("RTCCallActions").callError(a),q.$17()})};c.$17=function(){var a=b("RTCCallStore").getConnection(j.MULTIWAY);b("RTCMultiwayMessageHandler").close();a&&a.close();this.$6||b("RTCCallActions").removeAllLocalStreams(!0)};c.$16=function(a,c){b("RTCMultiwayMessageHandler").initHandler(a,c,this.$7,this.$6)};a.maybeLimitBitrate=function(a){a=a.getSenders().filter(function(a){return a.track&&a.track.kind==="video"});if(a.length>0&&b("RTCSignalingExperiments").shouldCapMWBitrate()){a=a[0];var c=a.getParameters();c.encodings[0].maxBitrate=72e4;b("Promise").resolve(a.setParameters(c))}};return a}();function o(a,c,d,e,f,g,h,i,k,l,o,p,q,r){__p&&__p();var s,t,u,v,w,x,y,z,A,B,C,D,E;return b("regeneratorRuntime").async(function(F){__p&&__p();while(1)switch(F.prev=F.next){case 0:g===void 0&&(g={}),h===void 0&&(h=b("emptyFunction")),i===void 0&&(i={}),k===void 0&&(k={}),l===void 0&&(l=!0),o===void 0&&(o=!1),p===void 0&&(p=""),q===void 0&&(q=""),r===void 0&&(r=[]),s={},t=[],(u=a.getLocalStreams()||[],v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 12:if(!v){F.next=18;break}if(!(w>=u.length)){F.next=15;break}return F.abrupt("break",26);case 15:x=u[w++];F.next=22;break;case 18:w=u.next();if(!w.done){F.next=21;break}return F.abrupt("break",26);case 21:x=w.value;case 22:y=x,a.removeStream(y);case 24:F.next=12;break;case 26:if(!b("FBRTCSupport").canUseUnifiedPlan()){F.next=29;break}F.next=29;return b("regeneratorRuntime").awrap(a.maybeHandleVideoEscalationForUnified());case 29:c.forEach(function(b){t=t.concat(b.getTracks()),a.addStream(b,h)});a.maybeSupportReceivingVideoWithTransceivers();t.forEach(function(a){s[a.id]=a.enabled});F.next=34;return b("regeneratorRuntime").awrap(a.createOffer(babelHelpers["extends"]({preserveH264:b("RTCUtils").isWatchPartyCall(d)},g),{DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),FORMAT_PARAMETERS:i,OFFER_SDP_TRANSFORM:r},k));case 34:z=F.sent;A=b("FBRTCMWProtocolStore").getState().clientMediaUpdateInfo.lastSyncedClientVersion+1;z.sessionDescription.setVersion(A);b("RTCGroupCallActions").setLocalClientVersion(A);if(b("FBRTCSdpUtils").validateOfferSdp(d,z.toSdp())){F.next=40;break}throw b("FBRTCRtcResponseStatusCode").BAD_REQUEST;case 40:F.next=42;return b("regeneratorRuntime").awrap(a.setLocalDescription(z));case 42:b("RTCGroupCallActions").onJoinRequestSent();(b("RTCUtils").isGroupCall(d)||b("RTCUtils").isMessengerCall(d))&&n.maybeLimitBitrate(a);F.next=46;return b("regeneratorRuntime").awrap(b("MultiwayRequests").sendJoinRequest(m,d,e,z,f.length>0?f:null,t.length>0?s:null,{callID:b("RTCCallStore").getState().callInfo.callID,callTrigger:q,numParticipants:b("RTCCallStore").getState().remoteUsers.size},{userToEscalate:o&&f.length>0?f[0]:null,isEscalator:b("RTCGroupCallEscalationStore").getState().toRing,escP2PCallID:p}));case 46:B=F.sent;b("RTCGroupCallActions").onReceivedJoinResponse();C=B.header.responseStatusCode;if(!(C!==b("FBRTCRtcResponseStatusCode").OK)){F.next=52;break}b("RTWebUserActionLogger").logCheckpoint({checkpoint:"MW response status code "+C});return F.abrupt("return",new(b("Promise"))(function(a,b){b(C)}));case 52:b("RTCGroupCallActions").onJoinResponse(B.header.serverInfoData);b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(B.body.joinResponse);D=new(b("RTCSessionDescription"))(j.MULTIWAY,{type:"answer",sdp:B.body.joinResponse.answer.sdpString},{FORMAT_PARAMETERS:i});if(!l){F.next=58;break}F.next=58;return b("regeneratorRuntime").awrap(a.setRemoteDescription(D));case 58:E=b("RTCUnifiedPlanUtils").getMediaStatusWithWebrtcTrackIds(B.body.joinResponse.mediaStatus,a);b("RTCGroupCallActions").toggleRemoteStream(E);b("RTCGroupCallActions").onProcessedJoinResponse();return F.abrupt("return",D);case 62:case"end":return F.stop()}},null,this)}function p(a){a instanceof Object||g(0,444);return a}e.exports=n}),null);
__d("RTCCallNUXActions",["FBRTCLogger","FBRTCUtils","RTCAppDispatcher","XRTCCallNUXController","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={refreshNUXState:function(){b("FBRTCUtils").sendServerRequest(b("XRTCCallNUXController").getURIBuilder().getURI(),function(a){a=a.payload;b("RTCAppDispatcher").dispatch({type:"INIT_NUX_STATE",payload:a})},function(){})},markNUXViewed:function(a){try{b("RTCAppDispatcher").dispatch({type:"MARK_NUX_VIEWED",nuxID:a})}catch(c){b("dangerouslyBypassDispatchError")(function(){return b("RTCAppDispatcher").dispatch({type:"MARK_NUX_VIEWED",nuxID:a})})}},dismissNUX:function(a){b("RTCAppDispatcher").dispatch({type:"DISMISS_NUX",nuxID:a})}};e.exports=a}),null);
__d("RTCOneVCActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={storeParticipants:function(a){b("RTCAppDispatcher").dispatch({type:"STORE_PARTICIPANTS",participants:a})},setMeetingID:function(a){b("RTCAppDispatcher").dispatch({type:"SET_MEETING_ID",meetingID:a})},setMeetingPassword:function(a){b("RTCAppDispatcher").dispatch({type:"SET_MEETING_PASSWORD",meetingPassword:a})}};e.exports=a}),null);
__d("RTCPeerConnectionQueue",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=[],this.$2=[]}var b=a.prototype;b.push=function(a,b){switch(a){case"add":this.$1.push(b);break;case"remove":this.$2.push(b);break}};b.drain=function(){this.$3(this.$2),this.clear("remove"),this.$3(this.$1),this.clear("add")};b.$3=function(a){__p&&__p();if(a.length<1)return;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}};b.clear=function(a){switch(a){case"add":this.$1=[];break;case"remove":this.$2=[];break;default:this.$1=[],this.$2=[]}};return a}();e.exports=a}),null);
__d("RTCP2PProtocolHandler",["invariant","Promise","Bootloader","CurrentUser","DateConsts","ErrorUtils","FBLogger","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","FBRTCExperiment","FBRTCIceCache","FBRTCLocalMessageQueue","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMessage","FBRTCMessageDedup","FBRTCMessageListener","FBRTCMessageSender","FBRTCPCConfig","FBRTCPeerConnection","FBRTCPeerConnectionHelper","FBRTCRetriableMessage","FBRTCSdpUtils","FBRTCStatsHelpers","FBRTCSupport","FBRTCTurnDiscovery","FBRTCUrlManager","FBRTCUserSettings","RTCCallActions","RTCCallNUXActions","RTCCallStore","RTCCallType","RTCConfig","RTCEndCallReason","RTCGroupCallEscalationStore","RTCGroupCallEscalator","RTCOneVCActions","RTCP2PCallActions","RTCP2PCallEscalationActions","RTCP2PCallEscalationStore","RTCP2PCallEscalator","RTCP2PCallStore","RTCP2PCallWindowHandler","RTCPeerConnectionQueue","RTCSessionDescription","RTCSignalingExperiments","RTCStreamDurationTracker","RTCUserMediaConstraints","RTCUtils","RTWebClientFeatureGating","RTWebExperiments","RTWebUserActionLogger","UserAgent","clearTimeout","debounce","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=b("DateConsts").MS_PER_MIN;c=b("DateConsts").MS_PER_SEC;var i=(d=b("FBRTCConstants")).CallEndReason,j=d.CallType,k=d.SignalingProtocol,l=d.VideoQuality,m=d.ClientReportedEventType,n=1*a,o=15*c,p=30*c;f=function(){__p&&__p();function a(){__p&&__p();var c=this;this.$4={streams:{}};this.$5=b("FBRTCLogger").getInstance();this.$6=!1;this.$7=!0;this.$8=!1;this.$9="passive";this.$10=new(b("FBRTCMessageSender"))();this.$15=new(b("FBRTCIceCache"))();this.$16=!1;this.$17=[];this.$18=!1;this.$21=null;this.$22=null;this.$24=new(b("RTCStreamDurationTracker"))("video");this.$25=new(b("RTCStreamDurationTracker"))("video");this.$26=new(b("RTCStreamDurationTracker"))("screen");this.$27=!1;this.$28=new(b("RTCPeerConnectionQueue"))();this.$31=!1;this.$49=function(a){a=a.candidate;a&&c.$62(a)};this.$50=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;c.$33("RTCP2PProtocolHandler_PC_iceconnectionstatechange: "+a);(c.$22==="disconnected"||c.$22==="failed")&&a==="connected"&&c.$32("connection recovery",c.$22);c.$32("ICE connection state change",a);b("clearTimeout")(c.$21);switch(a){case"checking":c.$8=!0;break;case"connected":case"completed":c.$63();c.$64();c.$65();break;case"failed":c.$21=b("setTimeout")(function(){if(b("RTCConfig").CollaborationBrowserConfig.ICE_recovery&&b("FBRTCConfig").isVCEndpointCall()){c.$66("ICE failure");return}c.$61(new Error("ICE failed"));b("RTCP2PCallActions").setConnectionStatus("DISCONNECTED")},b("RTCConfig").CollaborationBrowserConfig.ICE_failed_timeout);break;case"disconnected":c.$21=b("setTimeout")(function(){c.$36(i.CONNECTION_DROPPED,!1,!0,!1)},b("RTCConfig").CollaborationBrowserConfig.ICE_disconnected_timeout);break;case"closed":break}};this.$69=function(){var a=c.$3.getCreatedIceCandidates();for(var b=0;b<a.length;b++)c.$62(a[b])};this.$51=function(a){a=a.target;a=a.iceGatheringState;c.$33("RTCP2PProtocolHandler_PC_icegatheringstatechange: "+a);c.$32("ICE gathering state change",a)};this.$52=function(a){var b=a.errorCode,d=a.errorText,e=a.hostCandidate;a=a.url;c.$70("RTCP2PProtocolHandler: PC icecandidateerror "+b+": "+d+". candidate: "+e);c.$32("ICE candidate error",{errorCode:b,errorText:d,hostCandidate:e,url:a})};this.$71=function(){var a;c.$23?a=i.UNSUPPORTED_VERSION:a=i.OTHER_NOT_CAPABLE;c.$36(a,!1,!0,!1,"TimedOut")};this.$55=b("debounce")(function(d){__p&&__p();var e=d.target;c.$32("offer renegotiation",{iceConnectionState:e.iceConnectionState,isNegotiationExpected:c.$7});if(e.iceConnectionState==="closed")return;else if(!c.$7){c.$32("offer renegotiation","ignore");return}else if(!b("RTCP2PCallEscalator").isNegotiationAllowed()){c.$32("offer renegotiation","not allowed - escalating");return}else if(c.$6){c.$32("offer renegotiation","retry");b("setTimeout")(function(){return c.$55(d)},100);return}c.$7=!1;var f=[];if(e.signalingState==="stable"){if(c.$8){e=b("RTCP2PCallStore").getState();e=e.signalingExperiments;if(!e.support("sdp_update"))c.internalResetConnection(),f.push("new offer");else{e=a.supportMultipleStreams();f.push("SDP update",e?"plan B":null)}c.$9="passive"}c.$32("offer renegotiation","create offer");c.$67().then(function(a){if(a.strongDiff(c.$3.getLocalDescription())){c.$32("offer renegotiation",f);return a}return null}).then(function(a){a&&(c.$8&&b("RTCP2PCallActions").setConnectionStatus("RECONNECTING"),c.$68(a)),c.$9="active"})["catch"](function(a){c.$61(new Error("Failed to create offer onNegotiationNeeded: "+a.message))})}},50);this.$56=function(d){__p&&__p();if(c.$27){c.$28.push("add",function(){return c.$56(d)});return}var e=d.stream,f=c.$72(e),g=c.$1;f===b("FBRTCConstants").StreamType.SCREEN_CONTENT?(b("RTCCallActions").addRemoteScreenStream(e,g),!a.supportMultipleStreams()&&e.getAudioTracks().length>0&&c.$25.track(e)):(b("FBRTCUserSettings").updateForRemoteStream(e),b("RTCCallActions").addRemoteStream(e,g),c.$25.track(e),b("RTCP2PCallStore").addListener(b("debounce")(function(){b("RTCP2PCallStore").getState().callType!==b("RTCCallType").AUDIO_ONLY&&c.$63()},50)));c.$18=!0;while(c.$17.length>0)c.$73(c.$17.shift());c.$32("remote stream: added",e)};this.$57=function(a){a=b("RTCCallStore").getState().remoteUsers.first();a&&!a.isVideoMuted()&&(b("RTCCallActions").toggleMuteRemoteVideo(!1,a.FBID),c.$32("on media track event",{action:"toggleMuteRemoteVideo",muted:!1,remoteUserID:a.FBID}))};this.$58=function(a){__p&&__p();if(c.$27){c.$28.push("remove",function(){return c.$58(a)});return}var d=a.stream,e=c.$72(d),f=c.$1;if(e===b("FBRTCConstants").StreamType.SCREEN_CONTENT){b("RTCCallActions").removeRemoteScreenStream(d,f);e=b("RTCCallStore").getState().remoteUsers.first();if(e){e=e.streams.first();e&&c.$25.track(e)}}else b("RTCCallActions").removeRemoteStream(d,f);c.$32("remote stream: removed",d)};this.$34=function(a){c.$33("RTCP2PProtocolHandler_Received_TURN_Creds"),c.$32("TURN credentials received",a),b("FBRTCPCConfig").setTurnCredentials(a),s(function(b){return b.setRelayIP(a.ip)})};this.$35=function(){c.$5.logError(c.$1,c.$2,"Failed to get turn creds"),c.$36(i.CLIENT_ERROR,!1,!b("RTCP2PCallStore").isCaller(),!1,"NoTurnCreds")};this.$42=function(a,b){c.$36(a,!1,!1,!1,b.toString())};this.$41=function(a,b){__p&&__p();var d=b.call_id;if(c.$81()){c.$5.logError(c.$1,c.$2,"Message sent after call ended: "+b.type);return}if(c.$1!==a||c.$2!==d)return;s(function(a){return a.onMessageSent(b)});c.$32("message sent",b)};this.$43=function(a){a=a.message+"; "+a.stackFrames[0].identifier;c.$5.logError(c.$1,c.$2,"JSError: "+a)};this.$32("call controller init");this.$33("RTCP2PProtocolHandler_constructed")}var c=a.prototype;c.init=function(a,c){__p&&__p();this.$1=a;this.$2=c;this.$33("RTCP2PProtocolHandler_init_call");if(!b("RTWebExperiments").passOfferWithWindowMessages()){a=b("FBRTCLocalMessageQueue").getPeerOfferFromStorage(this.$1);this.$32("local message queue updates",{action:"getOffer",cachedOffer:a,callID:this.$2});if(a){this.$32("call: try","not ready");c=new(b("FBRTCMessage"))(a);b("RTCP2PCallActions").processMessage(c)}}return this};c.setPreserveLocalStream=function(a){this.$30=a;return this};c.fetchTURNCredentials=function(){if(b("FBRTCConfig").isVCEndpointCall()){this.$33("RTCP2PProtocolHandler_skip_TURN_discovery");return b("Promise").resolve()}this.$32("call: try","not ready");return b("FBRTCTurnDiscovery").requestTurnCreds(this.$2.toString(),this.$1).then(this.$34,this.$35)};c.endCall=function(a,c,d){a===void 0&&(a=i.HANGUP_CALL),c===void 0&&(c=""),d===void 0&&(d=!1),b("RTCCallActions").hangup(a,c),this.$36(a,!1,!0,d,c)};c.startCall=function(a,c){__p&&__p();var d=this,e=b("RTCP2PCallStore").isCaller();this.$32("call: start process",{callTrigger:a,userCallType:this.$37(),isCaller:b("RTCP2PCallStore").isCaller()});this.$3=this.$38();this.$39();this.$28=new(b("RTCPeerConnectionQueue"))();this.$32("local message queue updates",{action:"getOffer",offer:c});var f=null;c?(this.$19=new(b("FBRTCMessage"))(c),b("FBRTCMessageDedup").check(this.$1,this.$19.callID,this.$19.msgID),f=!1):(f=!0,b("RTCP2PCallActions").setIsCaller(f));e&&!f&&this.handleCallCollision(this.$19,!1);f!==e&&(this.$32("caller mismatch",{initialValue:e,actualValue:f}),e?this.$33("RTCP2ProtocolHandler_offer_mismatch_caller_found_unexpected_cached_offer"):this.$33("RTCP2PProtocolHandler_offer_mismatch_callee_did_not_find_cached_offer"));this.$7=f;this.$19 instanceof b("FBRTCMessage")&&b("RTCP2PCallActions").processMessage(this.$19);this.$40(a,f);this.$10=new(b("FBRTCMessageSender"))();this.$10.onMessageSent=this.$41;this.$10.onSendFailure=this.$42;this.$29=new(b("RTCP2PCallEscalator"))(this.$1,this.$2,this.$10);(h||(h=b("ErrorUtils"))).addListener(this.$43,!0);b("FBRTCMessageListener").setMessageHandler(function(a){d.$44(a)});b("FBRTCConfig").isVCEndpointCall()&&b("FBRTCMessageListener").setOneVCMessegeHandler(function(a){d.$45(a)});this.$46();b("RTCP2PCallActions").setConnectionStatus("CONTACTING");b("RTCCallActions").call([this.$1],this.$3)};c.$40=function(a,c){c=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),this.$1,this.$2,c,this.$19,a);c.setCallType(b("RTCP2PCallStore").getState().callType===b("RTCCallType").AUDIO_ONLY?j.VOIP:j.DIRECT_VIDEO);c.setActiveConnection("p2p");this.$47(c);b("RTCCallActions").setCallSummary(c)};c.$47=function(a){b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("FBRTCLogger").Key.BATTERY_START,c.level)})};c.startScreenStream=function(c){if(!a.supportMultipleStreams()){var d=b("RTCCallStore").getState();d=d.localUser;d=d.streams.first();b("RTCUtils").transferAudioTracks(c,d)}b("RTCCallActions").addLocalScreenStream(c)};c.stopScreenStream=function(c){__p&&__p();var d=b("RTCCallStore").getState();d=d.localUser;if(!d.screenStreams.includes(c))return;if(!a.supportMultipleStreams()){d=d.streams.first();b("RTCUtils").transferAudioTracks(d,c)}b("RTCCallActions").removeLocalScreenStream(c);b("RTCUtils").stopMediaStream(c)};c.updateScreenStream=function(a,c){b("RTCUtils").transferAudioTracks(c,a),b("RTCCallActions").replaceLocalScreenStream(a,c),b("RTCUtils").stopMediaStream(a)};c.$48=function(b){if(!a.supportMultipleStreams()&&b.hasScreenStream())return!0;else return!b.isVideoMuted()};c.$38=function(){__p&&__p();var a=this,c=b("RTCP2PCallStore").getState();c=c.isPeerOnMobile;c=new(b("FBRTCPeerConnection"))(k.P2P,b("FBRTCPCConfig").getConfig(),b("FBRTCPCConfig").getConstraints(c));var d,e=null,f,g;b("RTCCallStore").addListener(b("debounce")(function(){__p&&__p();var c=b("RTCCallStore").getState();c=c.localUser;if(!c||c===d)return;d=c;var h=a.$48(c);e!==h&&e!==null&&a.$10&&a.$10.sendMuteStateUpdate(a.$1,a.$2,h);e=h;h=c.streams;c=c.screenStreams;var i=c!==g,j=h!==f;j||i?(f=h,g=c,a.$39(i)):a.$24.update()},50));b("FBRTCConfig").isVCEndpointCall()&&c.createDataChannel("noop");c.addEventListener("icecandidate",this.$49);c.addEventListener("iceconnectionstatechange",this.$50);c.addEventListener("icegatheringstatechange",this.$51);c.addEventListener("icecandidateerror",this.$52);c.addEventListener("connectionstatechange",this.$53);c.addEventListener("signalingstatechange",this.$54);c.addEventListener("negotiationneeded",this.$55);c.addEventListener("addstream",this.$56);c.addEventListener("track",this.$57);c.addEventListener("removestream",this.$58);c.addEventListener("datachannel",this.$59);this.$60(c);return c};a.supportMultipleStreams=function(){var a=b("RTCP2PCallStore").getState();a=a.signalingExperiments;return a.support("multiple_streams_plan_b")||a.support("multiple_streams_unified")};c.$39=function(c){__p&&__p();c===void 0&&(c=!1);if(this.$3.getSignalingState()==="closed")return;var d=b("RTCCallStore").getState();d=d.localUser;if(!d)return;var e=d.getStream();d=d.getScreenStream();var f=[];a.supportMultipleStreams()?(d?(f.push(d),this.$26.track(d)):this.$26.update(),e?(f.push(e),this.$24.track(e)):this.$24.update()):d?(this.$26.track(d),this.$24.track(d),f.push(d)):(this.$26.update(),e&&(this.$24.track(e),f.push(e)));if(b("FBRTCPeerConnection").isTrackAPISupported()&&b("RTWebClientFeatureGating").restartVideoWithTrackAPI()&&f.length===1){d=b("FBRTCPeerConnectionHelper").resetLocalStreamWithTrackAPI(this.$3,f[0],c);this.$7=this.$7||d}else{e=b("FBRTCPeerConnectionHelper").resetLocalStreams(this.$3,f);this.$7=this.$7||e}};c.updateAddedTracksForFirefoxVideoEscalation=function(c){b("FBRTCPeerConnection").doesBrowserSupportAddTrack()||b("FBLogger")("rtc_www").mustfix("This function must be called within Firefox context"),this.$7=!0,this.$3.addStream(c),a.replaceLocalStream(c)};c.$61=function(a){this.$36(i.WEBRTC_ERROR,!1,!0,!1,a.message)};c.$66=function(a){__p&&__p();var c=this;this.$6=!0;this.$7=!1;this.$9="passive";this.internalResetConnection();this.$33("RTCP2PProtocolHandler_connection_recovery_"+a);this.$32("connection recovery",a);this.$67().then(function(a){b("RTCP2PCallActions").setConnectionStatus("RECONNECTING"),c.$68(a),c.$9="active"})["catch"](function(b){c.$61(new Error("Failed recovering from "+a))})};c.$67=function(){var a=!b("RTCP2PCallStore").isAudioOnly()||b("RTCP2PCallEscalator").initVideoInAudioCall(),c={ADD_AUDIO_NACK:b("RTCSignalingExperiments").shouldEnableAudioNack(),DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),SSRC_CONTENT_TYPE:b("RTWebClientFeatureGating").addScreenContentTypeInSDP()?b("RTCCallStore").getState().localUser.getMediaTypeForTracks():void 0};return this.$3.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:a},c)};c.$62=function(a){__p&&__p();var b=a.sdpMid;if(b!=null){b=this.$3.transformLocalIceCandidateMid(b);if(window.RTCIceCandidate){var c=a.sdpMLineIndex,d=a.candidate;a=new RTCIceCandidate(babelHelpers["extends"]({candidate:d,sdpMid:b},c!=null?{sdpMLineIndex:c}:null))}else a.sdpMid=b}this.$10.sendIceCandidate(this.$1,this.$2,a)};c.$53=function(a){a.target};c.$54=function(a){a.target};c.internalResetConnection=function(){__p&&__p();var a=this;this.$7=!1;var c=this.$1,d=b("RTCCallStore").getState().remoteUsers.first(),e=d.streams,f=d.screenStreams;this.$27=!0;this.$28.clear("add");this.$28.push("remove",function(){__p&&__p();for(var a=e,d=Array.isArray(a),g=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(d){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;b("RTCCallActions").removeRemoteStream(h,c)}for(var h=f,g=Array.isArray(h),d=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(d>=h.length)break;a=h[d++]}else{d=h.next();if(d.done)break;a=d.value}a=a;b("RTCCallActions").removeRemoteScreenStream(a,c)}});this.$3.reset().then(function(){a.$27=!1,a.$28.drain()})["catch"](function(b){a.$61(new Error("Failed to reset peer connection: "+b.message))});b("FBRTCConfig").isVCEndpointCall()&&this.$3.createDataChannel("noop")};c.$72=function(a){var c=b("FBRTCConstants").StreamType;try{switch(this.$4.streams[a.id].type){case c.SCREEN_CONTENT:return c.SCREEN_CONTENT;case c.AUDIO_VIDEO:return c.AUDIO_VIDEO;case c.AUDIO_ONLY:return c.AUDIO_ONLY;default:throw Error("no known stream type found, detecting")}}catch(b){return a.getVideoTracks().length>0?c.AUDIO_VIDEO:c.AUDIO_ONLY}};c.$63=function(){this.$24.isStarted()?this.$24.update():this.$24.start();var a=b("RTCP2PCallStore").getState();a=a.callType;a!==b("RTCCallType").AUDIO_ONLY&&(this.$25.isStarted()?this.$25.update():this.$25.start());this.$26.isStarted()?this.$26.update():this.$26.start()};c.$64=function(){var a=b("RTCP2PCallStore").getState().connectionStatus;if(a==="ESCALATING_TO_BJN")return;b("RTCP2PCallActions").setConnectionStatus("CONNECTED");this.$31||(this.$31=!0,this.$10.sendClientReportedEvent(this.$1,this.$2,m.MEDIA_CONNECTED),this.$33("RTCP2PProtocolHandler_first_time_media_connected"));s(function(a){a.onCallConnected(),a.onNetworkReady()})};c.$59=function(a){a.channel};c.startLocalVideoTracker=function(a){this.$24.track(a)};c.updateLocalVideoTracker=function(){this.$24.update()};a.initStream=function(c,d,e){b("RTWebUserActionLogger").startTimer("RTCP2PProtocolHandler_initStream");return a.internalInitStream(c,d,e).then(function(a){b("RTWebUserActionLogger").logStopTimer({timerName:"RTCP2PProtocolHandler_initStream",checkpointName:"RTCP2PProtocolHandler_initStream_success"});return a})["catch"](function(a){b("RTWebUserActionLogger").logStopTimer({timerName:"RTCP2PProtocolHandler_initStream",checkpointName:"RTCP2PProtocolHandler_initStream_failed"});throw a})};a.internalInitStream=function(c,d,e){__p&&__p();var f=b("RTCP2PCallStore").getState();f=f.isPeerOnMobile;var g=a.getDefaultVideoQuality();f&&(g=l.LQ_VIDEO);f=!c&&b("RTCP2PCallEscalator").initVideoInAudioCall();g=b("RTCUserMediaConstraints").video(g,e||"");var h=c||f?babelHelpers["extends"]({aspectRatio:{ideal:Number((16/9).toFixed(10))}},r(g)):!1;return b("RTCUtils").getUserMediaWithAudioFallback({audio:b("RTCUserMediaConstraints").audio(d||""),video:h},{optionalConstraintsOnly:!1,supportFilteredStreams:c&&b("RTWebClientFeatureGating").canUseP2PVideoFilters()}).then(function(a){__p&&__p();a.getVideoTracks().forEach(function(a){a.enabled=c});if(c)try{var b=a.getVideoTracks();b=b[0];b||q(function(a){return a.log("audio fallback",{eventDetails:{videoConstraints:h}})})}catch(a){q(function(b){return b.log("init stream error",{eventDetails:{error:a.name,message:a.message,videoConstraints:h}})})}return a})};a.replaceLocalStream=function(a,c){c===void 0&&(c=!1);var d=b("RTCCallStore").getState().localUser.streams.first();b("RTCCallActions").replaceLocalStream(d,a);c&&b("RTCUtils").stopMediaStream(d)};c.escalateToMultiway=function(){var a=b("RTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;if(d&&a){s(function(a){return a.setEscalationInitiated()});d=c!==b("RTCCallType").AUDIO_ONLY&&(b("RTCCallStore").hasRemoteVideo()||b("RTCCallStore").hasLocalVideo());c=new(b("RTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};c.handleSwitchToMultiway=function(){__p&&__p();var a=b("RTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;this.$6=!1;if(d&&a){s(function(a){return a.setReceivedEscalationRequest()});d=c!==b("RTCCallType").AUDIO_ONLY&&(b("RTCCallStore").hasRemoteVideo()||b("RTCCallStore").hasLocalVideo());c=new(b("RTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};c.$74=function(a,c){var d=b("gkx")("678353"),e=a&&d&&b("FBRTCSupport").isGroupCallWebtrcSupported();this.$13=e;this.$14=c;b("RTCP2PCallActions").setMultiwayEscalationSupport(e,c);s(function(a){a.setConferenceName(c),e&&a.setEscalationAvailable()})};c.$46=function(){__p&&__p();b("FBRTCUrlManager").onCallStarted(this.$1);if(this.$19){this.$6=!0;this.$7=!1;var a=this.$19.msg,c=a.sdp,d=a.attributes,e=a.offer_escalation_support;a=a.escalation_conference_name;b("RTCP2PCallActions").setRemoteSignalingExperiments(this.$19.getSignalingExperiments());this.$74(!!e,a);this.onReceivedRemoteSDP(c,"offer",d);b("RTWebExperiments").passOfferWithWindowMessages()||b("FBRTCLocalMessageQueue").clearPeerOfferFromStorage(this.$1);this.$32("local message queue updates",{action:"removeOffer",offer:this.$19,callID:this.$2});this.$19=null}this.$32("call: try",{initialOffer:this.$19})};c.$68=function(a){__p&&__p();var c=this;this.$6=!0;return this.$3.setLocalDescription(a).then(function(a){return a.toDesc()}).then(function(a){var b=a.sdp;a=a.type;a==="offer"&&(b=c.$3.transformOfferSdp(b));return{type:a,sdp:b}}).then(function(a){var d=a.sdp;a=a.type;switch(a){case"offer":b("RTCP2PCallStore").getState().signalingExperiments.support("sdp_update")&&b("RTCCallStore").getState().callInfo.conferenceState==="CONNECTED"?c.$75(d):c.$76(d);c.$16=!1;break;case"answer":c.$77(d);break;default:break}})["catch"](function(a){c.$61(new Error("Failed to set local description: unexpected SDP type"))})};c.$78=function(){return{streams:this.$79()}};c.$79=function(){__p&&__p();var a={},c=b("RTCCallStore").getState();c=c.localUser.screenStreams;for(var d=this.$3.getLocalStreams(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=c.includes(g)?b("FBRTCConstants").StreamType.SCREEN_CONTENT:g.getVideoTracks().length?b("FBRTCConstants").StreamType.AUDIO_VIDEO:b("FBRTCConstants").StreamType.AUDIO_ONLY;a[g.id]={type:h}}return a};c.$75=function(a){var c=b("RTCCallStore").getState();c=c.localUser;this.$10.sendSdpUpdate(this.$1,this.$2,a,!b("RTCP2PCallStore").isAudioOnly()&&!c.isVideoMuted(),this.$78())};c.$76=function(a){var c=this,d=this.$8?b("FBRTCConstants").PayloadType.PCRESTART_OFFER:b("FBRTCConstants").PayloadType.OFFER,e=b("RTCCallStore").getState();e=e.callSummary;e=e?e.getCallTrigger():"";this.$11=new(b("FBRTCRetriableMessage"))(this.$10);this.$11.addListener("sendingRetry",this.$69);this.$11.addListener("timeoutFailure",this.$71);this.$11.sendMessage(d,this.$1,this.$2,{sdp:a,hasVideo:!b("RTCP2PCallStore").isAudioOnly(),attributes:this.$78(),callTrigger:e});this.$20=b("setTimeout")(function(){c.$36(i.NO_ANSWER_TIMEOUT,!1,!0,!1,"NoAnswerTimeout")},n)};c.$80=function(a){__p&&__p();if(!Object.prototype.hasOwnProperty.call(a,"videoon"))return;a=!a.videoon;b("RTCCallActions").toggleMuteRemoteVideo(a,this.$1);for(var a=this.$3.getRemoteStreams(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.getAudioTracks().length>0){this.$32("remote steam: mute toggled",e);return}}this.$25.update()};c.$77=function(a){this.$12=new(b("FBRTCRetriableMessage"))(this.$10);this.$12.addListener("sendingRetry",this.$69);var c={escalationConferenceName:this.$14,negotiatedEscalationSupport:this.$13};this.$12.sendMessage(b("FBRTCConstants").PayloadType.ANSWER,this.$1,this.$2,{sdp:a,hasVideo:!b("RTCP2PCallStore").isAudioOnly(),attributes:this.$78(),multiwayInfo:c})};c.processQueuedMessages=function(){var a=this;b("FBRTCLocalMessageQueue").drainQueue(this.$1,function(b){a.$44(b,{skipDupeCheck:!0})})};c.$44=function(a,c){__p&&__p();var d;try{d=new(b("FBRTCMessage"))(a)}catch(b){this.$5.logError(this.$1,this.$2,"Unknown data: "+JSON.stringify(a));return}this.$5.logReceivedMessage(d.peerID,d.callID,d.msg);this.$32("message received",d.msg);if(this.$81()){this.$70("RTCP2PProtocolHandler: Ignoring message (call ended): "+d.msgID);return}if(!(c==null?void 0:c.skipDupeCheck)&&!b("FBRTCMessageDedup").check(d.peerID,d.callID,d.msgID)){this.$70("RTCP2PProtocolHandler: Ignoring message (duplicate): "+d.msgID);return}if(b("RTCCallStore").getState().callInfo.conferenceState==="AWAITING_USER_START"){this.$70("RTCP2PProtocolHandler: Ignoring message (awaiting user start): "+d.msgID);return}if(this.$1&&this.$1!==d.peerID){d.isOffer()&&this.$82(d);this.$70("RTCP2PProtocolHandler: Ignoring message (different peer): "+d.msgID);return}if(!d.isForCall(this.$2,this.$14)){this.$70("RTCP2PProtocolHandler: Ignoring message (different call): "+d.msgID+"(callID: "+d.callID+")");return}this.$2&&this.$2===d.callID&&s(function(a){return a.onFullMessageReceived(d)});a=b("RTCGroupCallEscalationStore").getState().inProgress;switch(d.msgType){case b("FBRTCConstants").PayloadType.ICERESTART_OFFER:case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:this.internalResetConnection();this.$83(d);break;case b("FBRTCConstants").PayloadType.OFFER:this.$83(d);break;case b("FBRTCConstants").PayloadType.ANSWER:case b("FBRTCConstants").PayloadType.ICERESTART_ANSWER:case b("FBRTCConstants").PayloadType.PCRESTART_ANSWER:b("RTCP2PCallActions").setRemoteSignalingExperiments(d.getSignalingExperiments());this.$84(d);break;case b("FBRTCConstants").PayloadType.SDP_UPDATE:this.$85(d);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$86(d);break;case b("FBRTCConstants").PayloadType.HANGUP:this.$87(d);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$88(d);break;case b("FBRTCConstants").PayloadType.OFFER_NACK:this.$23=!0;break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$89();break;case b("FBRTCConstants").PayloadType.MSG_ACK:this.$90(d);break;case b("FBRTCConstants").PayloadType.SET_VIDEO:this.$91(d);break;case b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY:a||this.handleSwitchToMultiway();break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:case b("FBRTCConstants").PayloadType.ACK:case b("FBRTCConstants").PayloadType.OK:case b("FBRTCConstants").PayloadType.PING:case b("FBRTCConstants").PayloadType.PING_ACK:case b("FBRTCConstants").PayloadType.OTHER_DISMISS:case b("FBRTCConstants").PayloadType.PRANSWER:break;default:break}this.$29.parseMessage(d)};c.$45=function(a){switch(a.msg_type){case"bjn_escalating":var c=b("RTCP2PCallStore").getState().connectionStatus;b("RTCP2PCallActions").setConnectionStatus("ESCALATING_TO_BJN");b("setTimeout")(function(){b("RTCP2PCallActions").setConnectionStatus(c)},o);break;case"participants":b("RTCOneVCActions").storeParticipants(JSON.parse(a.payload).list);break;default:break}};c.$82=function(a){__p&&__p();var c=a.peerID,d=a.callID;this.$33("RTCP2PProtocolHanlder_collision_offer_from_another_peer");var e=a.msg,f=new(b("FBRTCCallSummary"))({peerID:c,callID:d,isCaller:!1});f.setActiveConnection("p2p");f.onFullMessageReceived(a);f.setCallType(b("FBRTCSdpUtils").isVideoSupported(e.sdp)?j.DIRECT_VIDEO:j.VOIP);this.$10.sendOfferAck(c,d,e);f.onOfferAckSent(e);a=new(b("RTCEndCallReason"))(i.IN_ANOTHER_CALL);this.$92(c,d,a,!1);f.onCallEnded(a.getReasonID(),!1);f.save(b("FBRTCCallSummaryStore").getInstance())};c.$83=function(a){__p&&__p();var c=a.msg;if(!b("RTWebExperiments").enableCallCollisionFix()){this.$2&&c.call_id!==this.$2&&this.$33("RTCP2PProtcolHandler_call_collision");var d=this.$3.getSignalingState();if(d!=="stable")return}if(c.calltype){this.$10.sendOfferNack(this.$1,c.call_id,c);return}this.$10.sendOfferAck(this.$1,c.call_id,c);this.$10.sendOtherDismiss(c.call_id);this.$93(c)?this.$94(a):this.$95(a)};c.resetCollisionSummary=function(a,c){var d=a.msg;s(function(a){a.onCallEnded(i.OTHER_INSTANCE_HANDLED,!1,!1,"call_collision"+(c?"_resetConnection":"_atStart"))});var e=new(b("FBRTCCallSummary"))({peerID:this.$1,callID:d.call_id,isCaller:!1});b("RTCCallActions").setCallSummary(e);s(function(c){c.setActiveConnection("p2p"),c.onFullMessageReceived(a),c.onOfferAckSent(d),c.setCallType(b("FBRTCSdpUtils").isVideoSupported(d.sdp)?j.DIRECT_VIDEO:j.VOIP),c.setCallTrigger("call_collision")})};c.handleCallCollision=function(a,c){this.$5.logEvent(this.$1,this.$2,"Handling offer collision");this.resetCollisionSummary(a,c);if(b("RTWebExperiments").enableCallCollisionFix()){this.$2=a.callID;a=a.msg;c?this.internalResetConnection():this.$10.sendOtherDismiss(a.call_id);b("RTCCallActions").callCollision(a.call_id.toString(),this.$1);this.$33("RTCP2PProtocolHandler_handling_call_collision"+(c?"_resetConnection":"_atStart"))}};c.$94=function(a){__p&&__p();var c=a.msg;this.$80(c);this.$96();this.$97();this.$98();if(this.$2!==c.call_id){c=new(b("RTCEndCallReason"))(i.OTHER_INSTANCE_HANDLED);this.$92(this.$1,this.$2,c,!1);this.handleCallCollision(a,!0)}else this.$5.logEvent(this.$1,this.$2,"Handling offer refresh");this.$16=!1;this.$19=a;b("RTCP2PCallActions").processMessage(a);this.$46();this.$32("offer accepted",a.msgID)};c.$95=function(a){this.$5.logEvent(this.$1,this.$2,"Ignoring offer"),this.$32("offer ignored",a.msgID)};c.$85=function(a){__p&&__p();var c=this,d=a.msg;b("RTCP2PCallActions").processMessage(a);this.$80(d);switch(this.$3.getSignalingState()){case"stable":this.onReceivedRemoteSDP(this.$99("offer",a),"offer",d.attributes);break;case"have-local-offer":this.onReceivedRemoteSDP(this.$99("answer",a),"answer",d.attributes).then(function(){return c.$100()})["catch"](function(a){c.$61(new Error("Failed to handle sdp update when signaling state is 'have-local-offer': "+a.message))});break;case"have-remote-offer":b("setTimeout")(function(){return c.$85(a)},1e3);break;case"have-local-pranswer":case"have-remote-pranswer":break;case"closed":break}this.$32("SDP update",[d.sdp,d.attributes])};c.$99=function(a,c){c=c.msg;var d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;var e=b("RTCP2PCallStore").isCaller();return a==="offer"?!d&&e&&b("UserAgent").isBrowser("Firefox")?b("FBRTCSdpUtils").setDtlsRole(c.sdp,this.$9):c.sdp:b("FBRTCSdpUtils").setDtlsRole(c.sdp,d&&!e?"passive":this.$9)};c.$100=function(){this.$6=!1};c.$65=function(){__p&&__p();var a=this.$3.getSenders().find(function(a){var b;return(a==null?void 0:(b=a.track)==null?void 0:b.kind)==="audio"&&typeof a.getParameters==="function"&&typeof a.setParameters==="function"});if(a==null)return;if(b("RTCSignalingExperiments").shouldCapAudioBitrate()){var c=b("FBRTCExperiment").getMediaQualityExperiments().getInt("max_audio_bitrate",0);if(c>0){var d=a.getParameters();d.encodings!=null?d.encodings[0].maxBitrate=c:d.encodings=[{maxBitrate:c}];b("Promise").resolve(a.setParameters(d))}else this.$5.logError(this.$1,this.$2,"received 0 for max audio bitrate")}};c.onReceivedRemoteSDP=function(a,c,d){__p&&__p();var e=this;this.$101(d);d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;d&&(a=b("FBRTCSdpUtils").setVideoBitrateConstraint(a));c==="answer"&&(a=this.$3.transformAnswerSdp(a));return this.$3.setRemoteDescription(new(b("RTCSessionDescription"))(k.P2P,{type:c,sdp:a})).then(function(){e.$16=!0,e.$15.drainCandidates(e.$1,e.$2,function(a){return e.$3.onReceivedRemoteIceCandidate(a)})}).then(function(){e.$64();return c!=="offer"?void 0:e.$3.createAnswer({DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),ADD_AUDIO_NACK:b("RTCSignalingExperiments").shouldEnableAudioNack()}).then(function(a){e.$68(a),e.$32("SDP update",{answer:a.toSdp()})})}).then(function(){e.$37()===b("RTCCallType").AUDIO_ONLY&&e.$10.sendMuteStateUpdate(e.$1,e.$2,!1)})["catch"](function(a){e.$61(a);throw a})};c.$101=function(a){__p&&__p();if(a){var c=a.streams;this.$4=babelHelpers["extends"]({},this.$4,a,{streams:babelHelpers["extends"]({},this.$4.streams,c)});Object.keys(c).some(function(a){if(c[a].type===b("FBRTCConstants").StreamType.SCREEN_CONTENT){b("RTCCallActions").removeAllLocalScreenStreams(!0);return!0}return!1})}};c.$93=function(a){return a.call_id===this.$2?!0:Boolean((this.$20||!this.$19)&&(!this.$2||a.call_id!==this.$2)&&b("RTCP2PCallStore").isCaller()&&(!a.handlescollision||a.call_id<this.$2))};c.$84=function(a){__p&&__p();var c=this,d=this.$3.getSignalingState();if(d!=="have-local-offer")return;d=a.msg;this.$74(!!d.negotiated_escalation_support,d.escalation_conference_name);this.$96();this.$97();this.$10.sendAnswerAck(this.$1,this.$2,d);b("RTCP2PCallActions").processMessage(a);b("RTCP2PCallActions").setConnectionStatus("CONNECTING");this.onReceivedRemoteSDP(d.sdp,"answer",d.attributes).then(function(){c.$100(),b("RTCCallActions").callSuccess(!0)})["catch"](function(a){c.$61(new Error("Failed to handle answer on receiving remote SDP"))});this.$80(d)};c.$90=function(a){var b=a.msg;this.$11&&this.$11.isAckMsg(b)?(s(function(b){b.onMsgAckReceived(a,!0)}),this.$88(a)):this.$12&&this.$12.isAckMsg(b)&&(s(function(b){b.onMsgAckReceived(a,!1)}),this.$89())};c.$88=function(a){b("RTCP2PCallActions").setConnectionStatus("RINGING"),s(function(c){c.setUploadLogLevel(b("FBRTCLocalUploadLogLevel").getUploadLogLevel(b("FBRTCConstants").convertToUploadLogLevel(a.msg.ull)))}),this.$96()};c.$89=function(){this.$98(),this.$100(),b("RTCCallActions").incomingCallSuccess()};c.$91=function(a){this.$18?this.$73(a):(this.$70("RTCP2PProtocolHandler: P2P message "+a.msgType+" queued for delay handling"),this.$17.push(a))};c.$73=function(a){b("RTCP2PCallStore").getState().isRemoteVideoSupported&&!b("RTCP2PCallStore").isAudioOnly()&&this.$80(a.msg)};c.$86=function(a){var b=this,c=a.msg;c.call_id===this.$2&&this.$16?this.$3.onReceivedRemoteIceCandidate(c)["catch"](function(a){b.$102(c)}):this.$102(c)};c.$102=function(a){this.$15.cacheCandidate(this.$1,a.call_id,a)};c.$87=function(a){a=a.msg;var b=a.call_id,c=a.reason;a=a.subreason;b===this.$2?this.$36(c,!0,!1,!1,a):(this.$5.logError(this.$1,this.$2,"Receiving hangup for a different call: "+b.toString()),this.$32("hangup callID missmatch",b.toString()))};c.$36=function(a,c,d,e,f){__p&&__p();var g=this,h=new(b("RTCEndCallReason"))(a).setSubreason(f).setRemoteEnded(c);b("RTCCallActions").setEndCallReason(h);b("RTCCallNUXActions").refreshNUXState();a=b("RTCP2PCallEscalationStore").getState().inProgress;a&&b("RTCP2PCallEscalationActions").cancel();this.$96();this.$97();this.$98();if(this.$81()){this.$5.logError(this.$1,this.$2,"Ending an already-ended call");return}this.$5.logCallAction(this.$1,this.$2,b("FBRTCLogger").CallAction.END_CALL,h.toStrName());this.$32("call: ended",{reason:h.toStrName(),reasonID:h.getReasonID(),subReason:h.getSubreason(),isRemoteEnded:c,userCallType:this.$37(),isCaller:b("RTCP2PCallStore").isCaller()});this.$33("callSummary onCallEnded reason "+h.toStrName()+" subreason "+((f=h.getSubreason())!=null?f:""));d&&this.$92(this.$1,this.$2,h,e);this.$24.stop();this.$25.stop();this.$26.stop();this.$3&&this.$3.close();b("RTCCallActions").hangupSuccess();this.$30||b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").removeAllRemoteStreams(this.$1);b("RTCP2PCallActions").setConnectionStatus("DISCONNECTED");s(function(a){a.setCallType(b("RTCP2PCallEscalationStore").getState().callType),a.setVideoDurations(g.$24.getDuration(),g.$25.getDuration()),a.setScreenDuration(g.$26.getDuration()),a.onCallEnded(h.getReasonID(),c,null,h.getSubreason()),g.$33("logged end call to call summary")});a=b("RTCCallStore").getState();f=a.callSummary;this.$33("RTCCallStore call summary has end call reason: "+f.getEndCallReason());this.$33("Getting call summary with callID: "+this.$2+" and peerId "+this.$1);d=b("FBRTCCallSummaryStore").getInstance().retrieveCallSummary(this.$1,this.$2);d!=null?this.$33("CallSummaryStore has end call reason: "+d.getEndCallReason()):this.$33("Could not find call summary");h.getReasonID()===i.HANGUP_CALL&&h.getSubreason()==="CallReset"&&c&&(this.$33("window.close call window was remotely reset"),b("RTCP2PCallWindowHandler").close())};c.$37=function(){var a=b("RTCCallStore").getState();a=a.localUser;return a.isVideoMuted()&&a.isAudioMuted()?b("RTCCallType").NO_AUDIO_VIDEO:a.isVideoMuted()&&!a.isAudioMuted()?b("RTCCallType").AUDIO_ONLY:b("RTCCallType").AUDIO_VIDEO};c.shutDownP2PListenersForMultiwayEscalation=function(){__p&&__p();var a=this;this.$96();this.$97();this.$98();this.$24.stop();this.$25.stop();this.$3&&this.$3.removeAllListeners();b("setTimeout")(function(){b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(c){c.setCallType(b("RTCP2PCallEscalationStore").getState().callType),c.setVideoDurations(a.$24.getDuration(),a.$25.getDuration()),c.setScreenDuration(a.$26.getDuration()),c.onCallEnded(i.HANGUP_CALL,!1,!1,"multiway escalation")}),b("RTCCallActions").completeTransitionToMultiway()},100);this.destroy()};c.$92=function(a,b,c,d){if(!this.$10)return;this.$10.sendHangup(a,b,c.getReasonID(),d,c.getSubreason());this.$10.sendOtherDismiss(b)};c.$96=function(){this.$11&&this.$11.stopRetrying()};c.$98=function(){this.$12&&this.$12.stopRetrying()};c.$97=function(){this.$20&&b("clearTimeout")(this.$20),this.$20=null};c.$81=function(){return b("RTCCallStore").getState().callInfo.conferenceState==="TERMINATED"};c.$60=function(a){__p&&__p();var c=this;q(function(d){__p&&__p();d=d.logConnectionStats(function(){var c=a.getSignalingState();return c!=="closed"?a.getStats():b("Promise").reject("peer connection closed")},c.$1,c.$2);var e=d.start,f=d.stop;d=function b(d){d=d.target;d=d.iceConnectionState;(d==="completed"||d==="connected")&&(c.$33("RTCP2PProtocolHandler_call_connected"),c.$32("call: connected"),e(),a.removeEventListener("iceconnectionstatechange",b),a.addEventListener("iceconnectionstatechange",g))};var g=function b(c){c=c.target;c=c.iceConnectionState;c==="closed"&&(f(),a.removeEventListener("iceconnectionstatechange",b))};a.addEventListener("iceconnectionstatechange",d)})};c.$32=function(a,b){var c=this;q(function(d){return d.log(a,{peerID:c.$1,callID:c.$2,eventDetails:b})})};c.destroy=function(){this.$28.clear(),b("FBRTCMessageListener").removeMessageHandler(),b("FBRTCConfig").isVCEndpointCall()&&b("FBRTCMessageListener").removeOneVCMessageHandler(),(this.$10.onMessageSent=null,this.$10.onSendFailure=null)};c.generateEscalationRequestToken=function(a){return this.$29.generateRequestToken(a)};c.generateEscalationResponseToken=function(a,b){return this.$29.generateResponseToken(a,b)};a.getDefaultVideoQuality=function(){return b("FBRTCConfig").isVCEndpointCall()||b("FBRTCConfig").useHDVideoQuality()?l.HD_VIDEO:b("CurrentUser").isWorkUser()?l.SD_VIDEO:l.LQ_VIDEO};a.showRedialButton=function(){var a=b("RTCP2PCallStore").getState();a=a.endCallReason;var c=b("RTCCallStore").getState();c=c.callSummary;return a!=null&&(a.getReasonID()===i.IGNORE_CALL||a.getReasonID()===i.NO_ANSWER_TIMEOUT)||c.getCallDuration()<=p};a.showStarRating=function(){if(b("RTWebClientFeatureGating").shouldAlwaysShowStarRating()){var c=b("RTCP2PCallStore").getState(),d=c.endCallReason;c=c.wasConnected;return c&&d!=null&&d.getReasonID()===i.HANGUP_CALL}else return!a.showRedialButton()};c.$70=function(a){this.$5.logInfo(this.$1,this.$2,a)};c.$33=function(a){b("RTWebUserActionLogger").logCheckpoint({checkpoint:a,callId:this.$2?this.$2.toString():null,callType:"p2p"})};return a}();function q(a){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],a,"RTCP2PProtocolHandler")}function r(a){a instanceof Object||g(0,444);return a}function s(a){var c=b("RTCCallStore").getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())}e.exports=f}),null);
__d("FBRTCMediaStatsReport",["FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){return}var c=a.prototype;c.parseStatString=function(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null};c.parseMediaStat=function(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null};c.getAccelerateRate=function(a){return null};c.getAudioBytesReceived=function(a){return null};c.getAudioBytesSent=function(a){return null};c.getAudioDecodingCNG=function(a){return null};c.getAudioDecodingNormal=function(a){return null};c.getAudioDecodingPLC=function(a){return null};c.getAudioDecodingPLCCNG=function(a){return null};c.getAudioJitter=function(a){return null};c.getAudioPacketsReceived=function(a){return null};c.getAudioPacketsReceivedLost=function(a){return null};c.getAudioPacketsSent=function(a){return null};c.getAudioPacketsSentLost=function(a){return null};c.getAudioReceivedRtt=function(a){return null};c.getAudioRecvKeys=function(){return[]};c.getAudioSendCodec=function(a){return null};c.getAudioSendKeys=function(){return[]};c.getAudioSendRtt=function(a){return null};c.getConnectionType=function(){return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};c.getDiscardRate=function(a){return null};c.getExpandRate=function(a){return null};c.getFramesDecoded=function(a){return null};c.getFramesEncoded=function(a){return null};c.getInboundQpSum=function(a){return null};c.getJitterBufferDelay=function(a){return null};c.getOutboundQpSum=function(a){return null};c.getPreemptiveExpandRate=function(a){return null};c.getVideoBweKeys=function(){return[]};c.getVideoBweRetransmitBitrate=function(a){return null};c.getVideoBweSendBandwidth=function(a){return null};c.getVideoBweTransmitBitrate=function(a){return null};c.getVideoBytesReceived=function(a){return null};c.getVideoBytesSent=function(a){return null};c.getVideoFrameHeightReceived=function(a){return null};c.getVideoFrameHeightSent=function(a){return null};c.getVideoFrameRateReceived=function(a){return null};c.getVideoFrameRateSent=function(a){return null};c.getVideoFrameWidthReceived=function(a){return null};c.getVideoFrameWidthSent=function(a){return null};c.getVideoPacketsReceived=function(a){return null};c.getVideoPacketsReceivedLost=function(a){return null};c.getVideoPacketsSent=function(a){return null};c.getVideoPacketsSentLost=function(a){return null};c.getVideoRecvCodec=function(a){return null};c.getVideoRecvCodecImplementationName=function(a){return null};c.getVideoRecvKeys=function(){return[]};c.getVideoSendCodec=function(a){return null};c.getVideoSendCodecImplementationName=function(a){return null};c.getVideoSendKeys=function(){return[]};c.getVideoSentRtt=function(a){return null};c.getVideoRecvCodecForConnection=function(){var a=this,b=null;this.getVideoRecvKeys().forEach(function(c){var d=a.getVideoRecvCodec(c);c=a.getVideoRecvCodecImplementationName(c);d!=null&&d!==""&&c!=null&&c!==""&&(b=d+c)});return b};c.getVideoSendCodecForConnection=function(){var a=this,b=null;this.getVideoSendKeys().forEach(function(c){var d=a.getVideoSendCodec(c);c=a.getVideoSendCodecImplementationName(c);d!=null&&d!==""&&c!=null&&c!==""&&(b=d+c)});return b};c.getAudioSendCodecForConnection=function(){var a=this,b=null;this.getAudioSendKeys().forEach(function(c){c=a.getAudioSendCodec(c);c!=null&&c!==""&&(b=c)});return b};return a}();e.exports=a}),null);
__d("FBRTCChromeMediaStatsReport",["FBRTCMediaStatsReport","FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$FBRTCChromeMediaStatsReport1={};c.$FBRTCChromeMediaStatsReport2={};c.$FBRTCChromeMediaStatsReport3={};c.$FBRTCChromeMediaStatsReport4={};c.$FBRTCChromeMediaStatsReport5={};c.$FBRTCChromeMediaStatsReport6=[];if(b)for(var b=b.values(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.type==="ssrc"&&f.audioOutputLevel!=null&&f.audioOutputLevel!==""?c.$FBRTCChromeMediaStatsReport1[f.id]=f:f.type==="ssrc"&&f.audioInputLevel!=null&&f.audioInputLevel!==""?c.$FBRTCChromeMediaStatsReport2[f.id]=f:f.type==="ssrc"&&f.mediaType==="video"?f.bytesReceived!=null?c.$FBRTCChromeMediaStatsReport3[f.id]=f:c.$FBRTCChromeMediaStatsReport4[f.id]=f:f.type==="VideoBwe"?c.$FBRTCChromeMediaStatsReport5[f.id]=f:f.type==="googCandidatePair"&&f.googActiveConnection!==null&&f.googActiveConnection==="true"&&c.$FBRTCChromeMediaStatsReport6.push(f)}return c}var d=c.prototype;d.getAudioSendKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport2)};d.getAudioRecvKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport1)};d.getVideoRecvKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport3)};d.getVideoSendKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport4)};d.getVideoBweKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport5)};d.getAudioBytesSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"bytesSent")};d.getAudioDecodingPLC=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingPLC")};d.getAudioDecodingPLCCNG=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingPLCCNG")};d.getAudioDecodingCNG=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingCNG")};d.getAudioDecodingNormal=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingNormal")};d.getAudioPacketsSentLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"packetsLost")};d.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"packetsSent")};d.getAudioSendCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport2[a],"googCodecName")};d.getAudioSendRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"googRtt")};d.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"bytesReceived")};d.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"packetsReceived")};d.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"packetsLost")};d.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googRtt")};d.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"bytesReceived")};d.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"packetsReceived")};d.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"packetsLost")};d.getFramesDecoded=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"framesDecoded")};d.getInboundQpSum=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"qpSum")};d.getVideoFrameHeightReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameHeightReceived")};d.getVideoFrameRateReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameRateReceived")};d.getVideoFrameWidthReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameWidthReceived")};d.getFramesEncoded=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"framesEncoded")};d.getVideoBytesSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"bytesSent")};d.getVideoFrameHeightSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameHeightSent")};d.getVideoFrameRateSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameRateSent")};d.getVideoFrameWidthSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameWidthSent")};d.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"packetsSent")};d.getVideoPacketsSentLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"packetsLost")};d.getVideoSentRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googRtt")};d.getOutboundQpSum=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"qpSum")};d.getAudioJitter=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googJitterReceived")};d.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googCurrentDelayMs")};d.getAccelerateRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googAccelerateRate")};d.getPreemptiveExpandRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googPreemptiveExpandRate")};d.getExpandRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googExpandRate")};d.getDiscardRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googSecondaryDiscardedRate")};d.getVideoBweRetransmitBitrate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googRetransmitBitrate")};d.getVideoBweSendBandwidth=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googAvailableSendBandwidth")};d.getVideoBweTransmitBitrate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googTransmitBitrate")};d.getVideoRecvCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport3[a],"googCodecName")};d.getVideoRecvCodecImplementationName=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport3[a],"codecImplementationName")};d.getVideoSendCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport4[a],"googCodecName")};d.getVideoSendCodecImplementationName=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport4[a],"codecImplementationName")};d.getConnectionType=function(){var a=this,c=null;this.$FBRTCChromeMediaStatsReport6.some(function(d){c=b("FBRTCStatsHelpers").connectionType(a.parseStatString(d,"googLocalCandidateType"),a.parseStatString(d,"googTransportType"),a.parseStatString(d,"googRemoteCandidateType"),a.parseStatString(d,"googTransportType"));return c!==null});if(c!==null)return c;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};return c}(b("FBRTCMediaStatsReport"));e.exports=a}),null);
__d("FBRTCMozMediaStatsReport",["FBRTCMediaStatsReport","FBRTCStatsHelpers","isFalsey"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$FBRTCMozMediaStatsReport1={};c.$FBRTCMozMediaStatsReport2={};c.$FBRTCMozMediaStatsReport3={};c.$FBRTCMozMediaStatsReport4={};c.$FBRTCMozMediaStatsReport5={};c.$FBRTCMozMediaStatsReport6={};for(var b=b.values(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.type==="inbound-rtp"&&f.mediaType==="audio"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport1[f.id]=f:f.type==="outbound-rtp"&&f.mediaType==="audio"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport2[f.id]=f:f.type==="inbound-rtp"&&f.mediaType==="video"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport3[f.id]=f:f.type==="outbound-rtp"&&f.mediaType==="video"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport4[f.id]=f:f.type==="candidate-pair"&&f.state==="succeeded"?c.$FBRTCMozMediaStatsReport6[f.id]=f:(f.type==="local-candidate"||f.type==="remote-candidate")&&(c.$FBRTCMozMediaStatsReport5[f.id]=f)}return c}var d=c.prototype;d.getAudioSendKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport2)};d.getAudioRecvKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport1)};d.getVideoRecvKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport3)};d.getVideoSendKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport4)};d.getAudioBytesSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport2[a],"bytesSent")};d.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport2[a],"packetsSent")};d.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"bytesReceived")};d.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"packetsReceived")};d.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"packetsLost")};d.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"roundTripTime")};d.getFramesDecoded=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"framesDecoded")};d.getFramesEncoded=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"framesEncoded")};d.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"bytesReceived")};d.getVideoFrameRateReceived=function(a){var c=this.getFramesDecoded(a);return b("isFalsey")(c)?null:this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"framerateMean")};d.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"packetsReceived")};d.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"packetsLost")};d.getVideoBytesSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"bytesSent")};d.getVideoFrameRateSent=function(a){var c=this.getFramesEncoded(a);return b("isFalsey")(c)?null:this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"framerateMean")};d.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"packetsSent")};d.getAudioJitter=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"jitter")};d.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"mozJitterBufferDelay")};d.getConnectionType=function(){__p&&__p();var a=this,c=null;Object.keys(this.$FBRTCMozMediaStatsReport6).forEach(function(d){d=a.$FBRTCMozMediaStatsReport6[d];var e=a.parseStatString(d,"localCandidateId");d=a.parseStatString(d,"remoteCandidateId");e!==void 0&&e!==null&&d!==void 0&&d!==null&&(c=b("FBRTCStatsHelpers").connectionType(a.parseStatString(a.$FBRTCMozMediaStatsReport5[e],"candidateType"),a.parseStatString(a.$FBRTCMozMediaStatsReport5[e],"transport"),a.parseStatString(a.$FBRTCMozMediaStatsReport5[d],"candidateType"),a.parseStatString(a.$FBRTCMozMediaStatsReport5[d],"transport")));return c!==null});if(c!==null)return c;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};return c}(b("FBRTCMediaStatsReport"));e.exports=a}),null);
__d("FBRTCMediaMetricParser",["FBRTCChromeMediaStatsReport","FBRTCConstants","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMozMediaStatsReport","FBRTCNetworkQualityMonitor","FBRTCSupport","RTCCallStore","RTCWebMediaStreamsTypedLogger","RTWebClientFeatureGating","UserAgent","gkx","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol,h=5e3;function i(){if(b("gkx")("678354")){var a=b("RTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCurrentTimeFromCallConnected()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?"mw":"p2p")}return null}function j(a,c){a.getVideoSendKeys().forEach(function(d){var e,f=a.getOutboundQpSum(d),g=a.getFramesEncoded(d),h=a.getVideoBytesSent(d),j=a.getVideoPacketsSent(d),k=a.getVideoPacketsSentLost(d);c.setVideoMetric(d,(e=b("FBRTCMediaMetricsConst")).OUTBOUND_QP,f);c.setVideoMetric(d,e.FRAMES_ENCODED,g);c.setVideoMetric(d,e.VIDEO_BYTES_SENT,h);c.setVideoMetric(d,e.VIDEO_PKTS_SENT,j);c.setVideoMetric(d,e.VIDEO_PKTS_SEND_LOST,k);e=i();e&&e.setIsLocal(!0).setStreamType("video").setStreamID(d).setFrames(g).setQpSum(f).setBytes(h).setPackets(j).setPacketsLost(k).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function k(a,c){a.getVideoBweKeys().forEach(function(d){var e=a.getVideoBweSendBandwidth(d),f=a.getVideoBweTransmitBitrate(d),g=a.getVideoBweRetransmitBitrate(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE,g);f=i();f&&f.setIsLocal(!0).setStreamType("video").setStreamID(d).setBytes(e).log()})}function l(a,c){a.getVideoRecvKeys().forEach(function(d){var e,f=a.getInboundQpSum(d),g=a.getFramesDecoded(d),h=a.getVideoBytesReceived(d),j=a.getVideoPacketsReceived(d),k=a.getVideoPacketsReceivedLost(d);c.setVideoMetric(d,(e=b("FBRTCMediaMetricsConst")).VIDEO_BYTES_RECEIVED,h);c.setVideoMetric(d,e.INBOUND_QP,f);c.setVideoMetric(d,e.FRAMES_DECODED,g);c.setVideoMetric(d,e.VIDEO_PKTS_RECEIVED,j);c.setVideoMetric(d,e.VIDEO_PKTS_RECV_LOST,k);e=i();e&&e.setIsLocal(!1).setStreamType("video").setStreamID(d).setBytes(h).setFrames(g).setQpSum(f).setPackets(j).setPacketsLost(k).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function m(a,c){a.getAudioSendKeys().forEach(function(d){var e,f=a.getAudioBytesSent(d),g=a.getAudioPacketsSent(d),h=a.getAudioPacketsSentLost(d),j=a.getAudioSendRtt(d);c.addMetricStat(d,(e=b("FBRTCMediaMetricsConst")).AUDIO_BYTES_SENT,f);c.addMetricStat(d,e.AUDIO_PACKETS_SENT,g);c.addMetricStat(d,e.AUDIO_PACKETS_SENT_LOST,h);c.addMetricStat(d,e.AUDIO_RTT_SENT,j);e=i();e&&e.setIsLocal(!0).setStreamType("audio").setStreamID(d).setPackets(g).setBytes(f).setRtt(j).setPacketsLost(h).log()})}function n(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){__p&&__p();var e,f=a.getJitterBufferDelay(d),g=a.getAudioJitter(d),h=a.getAccelerateRate(d),j=a.getExpandRate(d),k=a.getPreemptiveExpandRate(d),l=a.getDiscardRate(d),m=a.getAudioBytesReceived(d),n=a.getAudioPacketsReceived(d),o=a.getAudioPacketsReceivedLost(d),p=a.getAudioReceivedRtt(d);c.addJitterBufferDelay(d,f);c.addMetricStat(d,(e=b("FBRTCMediaMetricsConst")).JITTER,g);c.addMetricStat(d,e.ACCELERATE_RATE,h);c.addMetricStat(d,e.DISCARD_RATE,l);c.addMetricStat(d,e.EXPAND_RATE,j);c.addMetricStat(d,e.PREEMPTIVE_RATE,k);c.addMetricStat(d,e.DECODING_PLC,a.getAudioDecodingPLC(d));c.addMetricStat(d,e.DECODING_CNG,a.getAudioDecodingCNG(d));c.addMetricStat(d,e.DECODING_NORMAL,a.getAudioDecodingNormal(d));c.addMetricStat(d,e.DECODING_PLC_CNG,a.getAudioDecodingPLCCNG(d));c.addMetricStat(d,e.AUDIO_BYTES_RECEIVED,m);c.addMetricStat(d,e.AUDIO_PACKETS_RECEIVED,n);c.addMetricStat(d,e.AUDIO_PACKETS_RECEIVED_LOST,o);c.addMetricStat(d,e.AUDIO_RTT_RECEIVED,p);h=i();h&&h.setIsLocal(!1).setStreamType("audio").setStreamID(d).setJitter(g).setJitterBufferDelay(f).setBytes(m).setPackets(n).setRtt(p).setPacketsLost(o).log()})}var o={lastProcessedTime:0,parseStats:function(a,c){__p&&__p();a=a.getStats();if(b("qex")._("885213")){var d,e=Date.now();b("qex")._("885214")&&(a=a.then(function(a){JSON.stringify(a);return a}));d=(d=b("qex")._("885215"))!=null?d:h;if(h-(e-o.lastProcessedTime)>d/2)return;o.lastProcessedTime=e}a.then(function(a){var d=null;b("FBRTCSupport").isChromiumBased()?d=new(b("FBRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("FBRTCMozMediaStatsReport"))(a));d&&o.parseStatsWithReport(d,c)})["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},parseStatsWithReport:function(a,b){__p&&__p();var c=b.getMediaMetricTracker();n(a,c);m(a,c);l(a,c);j(a,c);k(a,c);b.setConnectionType(a.getConnectionType());c=a.getVideoRecvCodecForConnection();c!=null&&c!==""&&b.setVideoReceivedCodec(c);c=a.getVideoSendCodecForConnection();c!=null&&c!==""&&b.setVideoSentCodec(c);c=a.getAudioSendCodecForConnection();c!=null&&c!==""&&b.setAudioSentCodec(c)},startCollectingMediaStats:function(){__p&&__p();var a=null;(b("RTWebClientFeatureGating").shouldShowNetworkQualityIndicator()||b("RTWebClientFeatureGating").shouldMonitorNetworkQuality())&&(a=new(b("FBRTCNetworkQualityMonitor"))());var c=function c(){var d=b("RTCCallStore").getState().callInfo.conferenceState,e=b("RTCCallStore").getState().callSummary,f=b("RTCCallStore").getState().connections.first();if(d!=="TERMINATED"){f&&(o.parseStats(f,e),a!=null&&a.determineQuality(e.getMediaMetricTracker()));if(b("qex")._("885213")){f=(d=b("qex")._("885215"))!=null?d:h;window.setTimeout(c,f)}else window.setTimeout(c,h)}};c()}};e.exports=o}),null);
__d("FBRTCNetworkQualityMonitor",["FBRTCExperiment","FBRTCMediaMetricsConst","RTCP2PCallActions","RTWebClientFeatureGating","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2;a=function(){__p&&__p();function a(){this.$3=0;var a=b("FBRTCExperiment").getMediaQualityExperiments();this.$1=a.getInt("rtt_threshold",Number.POSITIVE_INFINITY);this.$2=parseFloat(a.getParam("packet_loss_rate_threshold",String(Number.POSITIVE_INFINITY)));b("RTWebUserActionLogger").logEvent({eventName:"checkpoint",checkpoint:"FBRTCNetworkQualityMonitor constructed: rtt "+this.$1+", packetLoss "+this.$2})}var c=a.prototype;c.$4=function(a,b,c){a=a.getMetricStats(b,c);return a!=null?a.current>this.$1:!1};c.$5=function(a,b){a=a/(a+b);return a>=this.$2};c.$6=function(a,b,c,d){c=a.getMetricStats(b,c);a=a.getMetricStats(b,d);return c!=null&&a!=null?this.$5(c.current,a.current):!1};c.$7=function(a,b,c){var d=this,e=c.packetLostKey,f=c.packetsKey,g=c.rttKey;c=b.some(function(b){var c=d.$6(a,b,e,f);return c||d.$4(a,b,g)});return c};c.getCount=function(){return this.$3};c.determineQuality=function(a){var c,d=this.$3,e=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:(c=b("FBRTCMediaMetricsConst")).AUDIO_PACKETS_SENT_LOST,packetsKey:c.AUDIO_PACKETS_SENT,rttKey:c.AUDIO_RTT_SENT});a=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:c.AUDIO_PACKETS_RECEIVED_LOST,packetsKey:c.AUDIO_PACKETS_RECEIVED,rttKey:c.AUDIO_RTT_RECEIVED});e||a?this.$3<g&&this.$3++:this.$3>0&&this.$3--;d!==this.$3&&this.$3>=g?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"poor_network_quality_exceeded_threshold_"+this.$3}),b("RTWebClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("RTCP2PCallActions").togglePoorNetworkQualityIndicator(!0)):d>0&&this.$3<=0&&(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"network_quality_recovered_from_"+d}),b("RTWebClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("RTCP2PCallActions").togglePoorNetworkQualityIndicator(!1))};return a}();e.exports=a}),null);